{"iterations_since_restore": 1, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.77947620976162, "timesteps_this_iter": 41029, "custom_metrics": {"cost1_max": 146.76728141636679, "cost1_min": 21.772230107337414, "system_level_velocity_mean": 10.136998906398285, "cost2_mean": -24.89457785123037, "cost2_max": -12.35297610820106, "outflow_rate_max": 945.0089401071257, "cost1_mean": 117.33521700596553, "system_level_velocity_min": 8.288747525967048, "system_level_velocity_max": 17.34241754660449, "outflow_rate_min": 453.4866885245902, "cost2_min": -39.53333994728597, "outflow_rate_mean": 736.6764924004306}, "done": false, "pid": 51578, "episode_len_mean": 317.9268292682927, "info": {"default": {"kl": 0.0018464371096342802, "policy_loss": -0.0004515308828558773, "total_loss": 37.6294059753418, "vf_explained_var": -2.727098717514309e-06, "cur_lr": 0.0005000000237487257, "entropy": 1.4205982685089111, "cur_kl_coeff": 0.20000001788139343, "vf_loss": 37.62948989868164}, "num_steps_trained": 41029, "grad_time_ms": 12485.825, "num_steps_sampled": 41029, "sample_time_ms": 67173.981, "load_time_ms": 79.41, "update_time_ms": 3092.319}, "timesteps_since_restore": 41029, "time_total_s": 82.95428156852722, "timestamp": 1558603207, "time_since_restore": 82.95428156852722, "policy_reward_mean": {}, "training_iteration": 1, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8467a9b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84693e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84693160>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 41, "timesteps_total": 41029, "episode_reward_mean": -677.2876231014592, "episodes_this_iter": 41, "date": "2019-05-23_09-20-07", "time_this_iter_s": 82.95428156852722, "num_metric_batches_dropped": 0, "episode_reward_min": -922.8539941133607}
{"iterations_since_restore": 2, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.77947620976162, "timesteps_this_iter": 43784, "custom_metrics": {"cost1_max": 146.76728141636679, "cost1_min": 21.772230107337414, "system_level_velocity_mean": 9.99911800841855, "cost2_mean": -25.892585695171494, "cost2_max": -12.35297610820106, "outflow_rate_max": 945.0089401071257, "cost1_mean": 118.03351202965875, "system_level_velocity_min": 7.836101760220079, "system_level_velocity_max": 17.34241754660449, "outflow_rate_min": 453.4866885245902, "cost2_min": -50.208349780643886, "outflow_rate_mean": 731.0845611509158}, "done": false, "pid": 51578, "episode_len_mean": 321.41975308641975, "info": {"default": {"kl": 0.005360449198633432, "policy_loss": -0.002128934720531106, "total_loss": 59.93478012084961, "vf_explained_var": -1.829967111177666e-08, "cur_lr": 0.0005000000237487257, "entropy": 1.4188294410705566, "cur_kl_coeff": 0.10000002384185791, "vf_loss": 59.93638229370117}, "num_steps_trained": 84813, "grad_time_ms": 12149.838, "num_steps_sampled": 84813, "sample_time_ms": 43181.914, "load_time_ms": 49.285, "update_time_ms": 1550.452}, "timesteps_since_restore": 84813, "time_total_s": 114.08526396751404, "timestamp": 1558603239, "time_since_restore": 114.08526396751404, "policy_reward_mean": {}, "training_iteration": 2, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469ac50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a550>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469ab00>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 81, "timesteps_total": 84813, "episode_reward_mean": -706.4965393963915, "episodes_this_iter": 40, "date": "2019-05-23_09-20-39", "time_this_iter_s": 31.130982398986816, "num_metric_batches_dropped": 0, "episode_reward_min": -958.2374171747853}
{"iterations_since_restore": 3, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -472.05368327056965, "timesteps_this_iter": 43277, "custom_metrics": {"cost1_max": 157.7377327449295, "cost1_min": 93.19842891052855, "system_level_velocity_mean": 10.133324977504746, "cost2_mean": -26.432351232408337, "cost2_max": -12.935251252461086, "outflow_rate_max": 1068.3240223325065, "cost1_mean": 121.89287786781843, "system_level_velocity_min": 7.836101760220079, "system_level_velocity_max": 12.919668915728723, "outflow_rate_min": 415.16557377049196, "cost2_min": -50.208349780643886, "outflow_rate_mean": 743.4285305606795}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.004989864770323038, "policy_loss": -0.0018814727663993835, "total_loss": 92.61922454833984, "vf_explained_var": 0.006626816000789404, "cur_lr": 0.0005000000237487257, "entropy": 1.4233051538467407, "cur_kl_coeff": 0.10000002384185791, "vf_loss": 92.62060546875}, "num_steps_trained": 128090, "grad_time_ms": 12131.671, "num_steps_sampled": 128090, "sample_time_ms": 35062.464, "load_time_ms": 38.536, "update_time_ms": 1036.347}, "timesteps_since_restore": 128090, "time_total_s": 145.11537647247314, "timestamp": 1558603270, "time_since_restore": 145.11537647247314, "policy_reward_mean": {}, "training_iteration": 3, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845301d0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530128>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530278>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 121, "timesteps_total": 128090, "episode_reward_mean": -715.8003244954639, "episodes_this_iter": 40, "date": "2019-05-23_09-21-10", "time_this_iter_s": 31.030112504959106, "num_metric_batches_dropped": 0, "episode_reward_min": -1009.3066153714053}
{"iterations_since_restore": 4, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -454.6732501009061, "timesteps_this_iter": 40623, "custom_metrics": {"cost1_max": 158.50936760545204, "cost1_min": 97.83487628509329, "system_level_velocity_mean": 10.642351004191735, "cost2_mean": -27.04741835706418, "cost2_max": -13.602413580756005, "outflow_rate_max": 1068.3240223325065, "cost1_mean": 127.82780726579178, "system_level_velocity_min": 8.283006641659137, "system_level_velocity_max": 12.919668915728723, "outflow_rate_min": 415.16557377049196, "cost2_min": -46.7280851199647, "outflow_rate_mean": 783.2186969098859}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.0025589601136744022, "policy_loss": -0.0006094061536714435, "total_loss": 79.20249938964844, "vf_explained_var": 0.4259367883205414, "cur_lr": 0.0005000000237487257, "entropy": 1.418432593345642, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 79.2029800415039}, "num_steps_trained": 168713, "grad_time_ms": 11892.291, "num_steps_sampled": 168713, "sample_time_ms": 31304.648, "load_time_ms": 31.493, "update_time_ms": 779.604}, "timesteps_since_restore": 168713, "time_total_s": 176.42721152305603, "timestamp": 1558603301, "time_since_restore": 176.42721152305603, "policy_reward_mean": {}, "training_iteration": 4, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f20b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2160>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2390>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 181, "timesteps_total": 168713, "episode_reward_mean": -679.6260308509087, "episodes_this_iter": 60, "date": "2019-05-23_09-21-41", "time_this_iter_s": 31.311835050582886, "num_metric_batches_dropped": 0, "episode_reward_min": -1009.3066153714053}
{"iterations_since_restore": 5, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -454.6732501009061, "timesteps_this_iter": 42373, "custom_metrics": {"cost1_max": 160.82266075799228, "cost1_min": 101.26950585873792, "system_level_velocity_mean": 10.86878800894849, "cost2_mean": -28.340399640172205, "cost2_max": -14.05713973594905, "outflow_rate_max": 1077.8742411606786, "cost1_mean": 130.6321112331515, "system_level_velocity_min": 8.522512975827816, "system_level_velocity_max": 13.309570606644483, "outflow_rate_min": 692.053903930131, "cost2_min": -46.7280851199647, "outflow_rate_mean": 804.8547645326465}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.010553752072155476, "policy_loss": -0.00247910525649786, "total_loss": 55.07925033569336, "vf_explained_var": 0.6902540326118469, "cur_lr": 0.0005000000237487257, "entropy": 1.4051035642623901, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 55.08146667480469}, "num_steps_trained": 211086, "grad_time_ms": 11886.068, "num_steps_sampled": 211086, "sample_time_ms": 28792.522, "load_time_ms": 28.733, "update_time_ms": 625.545}, "timesteps_since_restore": 211086, "time_total_s": 207.14140510559082, "timestamp": 1558603332, "time_since_restore": 207.14140510559082, "policy_reward_mean": {}, "training_iteration": 5, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d9828>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468b2e8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 221, "timesteps_total": 211086, "episode_reward_mean": -661.1797740894726, "episodes_this_iter": 40, "date": "2019-05-23_09-22-12", "time_this_iter_s": 30.71419358253479, "num_metric_batches_dropped": 0, "episode_reward_min": -894.9029675648807}
{"iterations_since_restore": 6, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.594309956766736, "timesteps_this_iter": 42099, "custom_metrics": {"cost1_max": 175.63279733112287, "cost1_min": 23.071794113409247, "system_level_velocity_mean": 11.622526400146242, "cost2_mean": -32.790729190284466, "cost2_max": -14.05713973594905, "outflow_rate_max": 1183.9250910543437, "cost1_mean": 138.076806796625, "system_level_velocity_min": 9.04484473812245, "system_level_velocity_max": 18.59900708287836, "outflow_rate_min": 504.5827016154056, "cost2_min": -59.226389495086494, "outflow_rate_mean": 875.834248692882}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.015729941427707672, "policy_loss": -0.004245130345225334, "total_loss": 58.75497817993164, "vf_explained_var": 0.7551272511482239, "cur_lr": 0.0005000000237487257, "entropy": 1.379968285560608, "cur_kl_coeff": 0.02500000223517418, "vf_loss": 58.75882339477539}, "num_steps_trained": 253185, "grad_time_ms": 11853.041, "num_steps_sampled": 253185, "sample_time_ms": 27203.705, "load_time_ms": 25.784, "update_time_ms": 522.644}, "timesteps_since_restore": 253185, "time_total_s": 238.2042453289032, "timestamp": 1558603363, "time_since_restore": 238.2042453289032, "policy_reward_mean": {}, "training_iteration": 6, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846c65f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468b6a0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845302e8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 262, "timesteps_total": 253185, "episode_reward_mean": -619.4724987334463, "episodes_this_iter": 41, "date": "2019-05-23_09-22-43", "time_this_iter_s": 31.062840223312378, "num_metric_batches_dropped": 0, "episode_reward_min": -893.8336284537577}
{"iterations_since_restore": 7, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.594309956766736, "timesteps_this_iter": 41486, "custom_metrics": {"cost1_max": 205.18156095699385, "cost1_min": 23.071794113409247, "system_level_velocity_mean": 13.525686664075472, "cost2_mean": -42.68388324673043, "cost2_max": -15.150710088325704, "outflow_rate_max": 1303.3795401463206, "cost1_mean": 161.62526852857857, "system_level_velocity_min": 9.394670373859377, "system_level_velocity_max": 18.59900708287836, "outflow_rate_min": 504.5827016154056, "cost2_min": -70.63087574301508, "outflow_rate_mean": 1051.9834756590442}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.010523894801735878, "policy_loss": -0.003732244251295924, "total_loss": 54.6114501953125, "vf_explained_var": 0.7458649277687073, "cur_lr": 0.0005000000237487257, "entropy": 1.3618574142456055, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 54.61491012573242}, "num_steps_trained": 294671, "grad_time_ms": 11769.333, "num_steps_sampled": 294671, "sample_time_ms": 26281.996, "load_time_ms": 24.264, "update_time_ms": 449.725}, "timesteps_since_restore": 294671, "time_total_s": 270.34190487861633, "timestamp": 1558603395, "time_since_restore": 270.34190487861633, "policy_reward_mean": {}, "training_iteration": 7, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530470>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530518>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845300b8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 322, "timesteps_total": 294671, "episode_reward_mean": -530.2356435658072, "episodes_this_iter": 60, "date": "2019-05-23_09-23-15", "time_this_iter_s": 32.137659549713135, "num_metric_batches_dropped": 0, "episode_reward_min": -897.2299171762501}
{"iterations_since_restore": 8, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -301.37951979367085, "timesteps_this_iter": 41612, "custom_metrics": {"cost1_max": 213.74448250396034, "cost1_min": 131.35366084014942, "system_level_velocity_mean": 14.605405918143823, "cost2_mean": -52.736912819705196, "cost2_max": -26.06999213901838, "outflow_rate_max": 1363.3722297354086, "cost1_mean": 176.63225443276843, "system_level_velocity_min": 11.00908360339295, "system_level_velocity_max": 17.71639289314563, "outflow_rate_min": 886.1939253539254, "cost2_min": -76.35709135920698, "outflow_rate_mean": 1151.2451557783234}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.011693204753100872, "policy_loss": -0.003706242423504591, "total_loss": 32.61481857299805, "vf_explained_var": 0.8148700594902039, "cur_lr": 0.0005000000237487257, "entropy": 1.3348803520202637, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 32.61823272705078}, "num_steps_trained": 336283, "grad_time_ms": 11734.841, "num_steps_sampled": 336283, "sample_time_ms": 25545.494, "load_time_ms": 23.176, "update_time_ms": 394.765}, "timesteps_since_restore": 336283, "time_total_s": 302.35661816596985, "timestamp": 1558603427, "time_since_restore": 302.35661816596985, "policy_reward_mean": {}, "training_iteration": 8, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9ba8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84672080>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f24a8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 362, "timesteps_total": 336283, "episode_reward_mean": -490.75436178114643, "episodes_this_iter": 40, "date": "2019-05-23_09-23-47", "time_this_iter_s": 32.014713287353516, "num_metric_batches_dropped": 0, "episode_reward_min": -897.2299171762501}
{"iterations_since_restore": 9, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.073686251503286, "timesteps_this_iter": 43176, "custom_metrics": {"cost1_max": 216.70496895461534, "cost1_min": 24.55277457935534, "system_level_velocity_mean": 15.331682378787985, "cost2_mean": -61.801924683720316, "cost2_max": -19.058356621550878, "outflow_rate_max": 1421.9189911873839, "cost1_mean": 182.56213117114896, "system_level_velocity_min": 11.941318101641137, "system_level_velocity_max": 18.715169416397746, "outflow_rate_min": 474.24614310207676, "cost2_min": -88.5407467771984, "outflow_rate_mean": 1198.174091126415}, "done": false, "pid": 51578, "episode_len_mean": 321.02, "info": {"default": {"kl": 0.008008078671991825, "policy_loss": -0.001878818147815764, "total_loss": 32.5153923034668, "vf_explained_var": 0.7885407209396362, "cur_lr": 0.0005000000237487257, "entropy": 1.3137834072113037, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 32.51707458496094}, "num_steps_trained": 379459, "grad_time_ms": 11765.825, "num_steps_sampled": 379459, "sample_time_ms": 25009.003, "load_time_ms": 22.513, "update_time_ms": 351.945}, "timesteps_since_restore": 379459, "time_total_s": 335.20708322525024, "timestamp": 1558603460, "time_since_restore": 335.20708322525024, "policy_reward_mean": {}, "training_iteration": 9, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d9828>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d9048>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2400>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 404, "timesteps_total": 379459, "episode_reward_mean": -464.6675209881224, "episodes_this_iter": 42, "date": "2019-05-23_09-24-20", "time_this_iter_s": 32.850465059280396, "num_metric_batches_dropped": 0, "episode_reward_min": -772.6288396202683}
{"iterations_since_restore": 10, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.073686251503286, "timesteps_this_iter": 45295, "custom_metrics": {"cost1_max": 217.88877537960602, "cost1_min": 24.55277457935534, "system_level_velocity_mean": 15.405211870849596, "cost2_mean": -69.42924786997536, "cost2_max": -19.058356621550878, "outflow_rate_max": 1421.9189911873839, "cost1_mean": 182.94193417395698, "system_level_velocity_min": 11.914904666791346, "system_level_velocity_max": 18.715169416397746, "outflow_rate_min": 474.24614310207676, "cost2_min": -88.5407467771984, "outflow_rate_mean": 1210.5847994582302}, "done": false, "pid": 51578, "episode_len_mean": 321.02, "info": {"default": {"kl": 0.0068006752990186214, "policy_loss": -0.0021820771507918835, "total_loss": 35.06882858276367, "vf_explained_var": 0.7681208848953247, "cur_lr": 0.0005000000237487257, "entropy": 1.3119020462036133, "cur_kl_coeff": 0.02500000223517418, "vf_loss": 35.07084274291992}, "num_steps_trained": 424754, "grad_time_ms": 11869.815, "num_steps_sampled": 424754, "sample_time_ms": 24704.795, "load_time_ms": 22.139, "update_time_ms": 317.632}, "timesteps_since_restore": 424754, "time_total_s": 370.10865235328674, "timestamp": 1558603495, "time_since_restore": 370.10865235328674, "policy_reward_mean": {}, "training_iteration": 10, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845306a0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530ef0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845305f8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 460, "timesteps_total": 424754, "episode_reward_mean": -491.67728944889734, "episodes_this_iter": 56, "date": "2019-05-23_09-24-55", "time_this_iter_s": 34.9015691280365, "num_metric_batches_dropped": 0, "episode_reward_min": -803.1482874478193}
{"iterations_since_restore": 11, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.05512357980921, "timesteps_this_iter": 44457, "custom_metrics": {"cost1_max": 219.37532122695796, "cost1_min": 26.78027925328398, "system_level_velocity_mean": 15.002630860101661, "cost2_mean": -73.36522438968355, "cost2_max": -17.728921095288094, "outflow_rate_max": 1424.7980180881066, "cost1_mean": 177.84856537875203, "system_level_velocity_min": 11.914904666791346, "system_level_velocity_max": 18.37640229679133, "outflow_rate_min": 512.4877660385248, "cost2_min": -92.73849883624402, "outflow_rate_mean": 1185.1531638378108}, "done": false, "pid": 51578, "episode_len_mean": 321.88, "info": {"default": {"kl": 0.0062048970721662045, "policy_loss": -0.0018443113658577204, "total_loss": 24.07801055908203, "vf_explained_var": 0.8472682237625122, "cur_lr": 0.0005000000237487257, "entropy": 1.2962316274642944, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 24.07969856262207}, "num_steps_trained": 469211, "grad_time_ms": 11832.433, "num_steps_sampled": 469211, "sample_time_ms": 20165.621, "load_time_ms": 15.844, "update_time_ms": 9.538}, "timesteps_since_restore": 469211, "time_total_s": 404.12683176994324, "timestamp": 1558603529, "time_since_restore": 404.12683176994324, "policy_reward_mean": {}, "training_iteration": 11, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530a90>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e80>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 504, "timesteps_total": 469211, "episode_reward_mean": -541.0488562462331, "episodes_this_iter": 44, "date": "2019-05-23_09-25-29", "time_this_iter_s": 34.018179416656494, "num_metric_batches_dropped": 0, "episode_reward_min": -803.1482874478193}
{"iterations_since_restore": 12, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.05512357980921, "timesteps_this_iter": 42478, "custom_metrics": {"cost1_max": 222.445097105804, "cost1_min": 26.78027925328398, "system_level_velocity_mean": 15.434737842990366, "cost2_mean": -75.3833015381095, "cost2_max": -17.728921095288094, "outflow_rate_max": 1431.6827224040908, "cost1_mean": 182.67380272956146, "system_level_velocity_min": 12.140916453611405, "system_level_velocity_max": 18.56794030744501, "outflow_rate_min": 512.4877660385248, "cost2_min": -95.78775969485837, "outflow_rate_mean": 1213.3070475738948}, "done": false, "pid": 51578, "episode_len_mean": 321.88, "info": {"default": {"kl": 0.007343708537518978, "policy_loss": -0.002135698916390538, "total_loss": 26.191682815551758, "vf_explained_var": 0.8495582342147827, "cur_lr": 0.0005000000237487257, "entropy": 1.2900477647781372, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 26.193639755249023}, "num_steps_trained": 511689, "grad_time_ms": 11827.896, "num_steps_sampled": 511689, "sample_time_ms": 20393.54, "load_time_ms": 15.749, "update_time_ms": 9.813}, "timesteps_since_restore": 511689, "time_total_s": 437.49516248703003, "timestamp": 1558603562, "time_since_restore": 437.49516248703003, "policy_reward_mean": {}, "training_iteration": 12, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845303c8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530550>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530f28>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 545, "timesteps_total": 511689, "episode_reward_mean": -513.0122038547321, "episodes_this_iter": 41, "date": "2019-05-23_09-26-02", "time_this_iter_s": 33.36833071708679, "num_metric_batches_dropped": 0, "episode_reward_min": -798.2843707340178}
{"iterations_since_restore": 13, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.43929330556584, "timesteps_this_iter": 44548, "custom_metrics": {"cost1_max": 224.16254881760193, "cost1_min": 80.26522839275174, "system_level_velocity_mean": 15.748764081337098, "cost2_mean": -79.64557144217768, "cost2_max": -42.04024011205683, "outflow_rate_max": 1432.7480595786703, "cost1_mean": 186.77552167873532, "system_level_velocity_min": 12.140916453611405, "system_level_velocity_max": 18.805772375122142, "outflow_rate_min": 784.2253977203528, "cost2_min": -104.1593603626012, "outflow_rate_mean": 1238.6578743791217}, "done": false, "pid": 51578, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.007644244935363531, "policy_loss": -0.001498008263297379, "total_loss": 29.126285552978516, "vf_explained_var": 0.8279114365577698, "cur_lr": 0.0005000000237487257, "entropy": 1.2818443775177002, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 29.127592086791992}, "num_steps_trained": 556237, "grad_time_ms": 11924.989, "num_steps_sampled": 556237, "sample_time_ms": 20713.331, "load_time_ms": 15.67, "update_time_ms": 10.006}, "timesteps_since_restore": 556237, "time_total_s": 472.72213649749756, "timestamp": 1558603598, "time_since_restore": 472.72213649749756, "policy_reward_mean": {}, "training_iteration": 13, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a97b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530278>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845304e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 600, "timesteps_total": 556237, "episode_reward_mean": -492.2750864845056, "episodes_this_iter": 55, "date": "2019-05-23_09-26-38", "time_this_iter_s": 35.22697401046753, "num_metric_batches_dropped": 0, "episode_reward_min": -798.2843707340178}
{"iterations_since_restore": 14, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.43929330556584, "timesteps_this_iter": 41229, "custom_metrics": {"cost1_max": 225.29698119082246, "cost1_min": 80.26522839275174, "system_level_velocity_mean": 15.763423288191705, "cost2_mean": -80.07688205062374, "cost2_max": -42.04024011205683, "outflow_rate_max": 1437.8676951668417, "cost1_mean": 186.61199803436972, "system_level_velocity_min": 11.942837045383607, "system_level_velocity_max": 18.897740553508925, "outflow_rate_min": 784.2253977203528, "cost2_min": -104.1593603626012, "outflow_rate_mean": 1239.9145247493382}, "done": false, "pid": 51578, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.006534532178193331, "policy_loss": -0.0023321297485381365, "total_loss": 26.798906326293945, "vf_explained_var": 0.8359365463256836, "cur_lr": 0.0005000000237487257, "entropy": 1.2643510103225708, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 26.801074981689453}, "num_steps_trained": 597466, "grad_time_ms": 12168.365, "num_steps_sampled": 597466, "sample_time_ms": 20818.268, "load_time_ms": 16.628, "update_time_ms": 10.021}, "timesteps_since_restore": 597466, "time_total_s": 507.52858996391296, "timestamp": 1558603632, "time_since_restore": 507.52858996391296, "policy_reward_mean": {}, "training_iteration": 14, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530ba8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530cc0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 644, "timesteps_total": 597466, "episode_reward_mean": -492.43777775698254, "episodes_this_iter": 44, "date": "2019-05-23_09-27-12", "time_this_iter_s": 34.806453466415405, "num_metric_batches_dropped": 0, "episode_reward_min": -779.543470750688}
{"iterations_since_restore": 15, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.43929330556584, "timesteps_this_iter": 42951, "custom_metrics": {"cost1_max": 225.29698119082246, "cost1_min": 80.26522839275174, "system_level_velocity_mean": 15.882317798293634, "cost2_mean": -77.95027614944345, "cost2_max": -42.04024011205683, "outflow_rate_max": 1445.1014363375007, "cost1_mean": 187.50646393667307, "system_level_velocity_min": 11.942837045383607, "system_level_velocity_max": 18.897740553508925, "outflow_rate_min": 784.2253977203528, "cost2_min": -98.58138924866864, "outflow_rate_mean": 1245.0818633840515}, "done": false, "pid": 51578, "episode_len_mean": 322.64, "info": {"default": {"kl": 0.006943729240447283, "policy_loss": -0.0016003561904653907, "total_loss": 23.795209884643555, "vf_explained_var": 0.8665517568588257, "cur_lr": 0.0005000000237487257, "entropy": 1.2700902223587036, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 23.7966365814209}, "num_steps_trained": 640417, "grad_time_ms": 12193.169, "num_steps_sampled": 640417, "sample_time_ms": 20927.814, "load_time_ms": 15.886, "update_time_ms": 9.951}, "timesteps_since_restore": 640417, "time_total_s": 539.5995745658875, "timestamp": 1558603665, "time_since_restore": 539.5995745658875, "policy_reward_mean": {}, "training_iteration": 15, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469ac50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534048>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534da0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 685, "timesteps_total": 640417, "episode_reward_mean": -484.48198267316985, "episodes_this_iter": 41, "date": "2019-05-23_09-27-45", "time_this_iter_s": 32.07098460197449, "num_metric_batches_dropped": 0, "episode_reward_min": -805.6513457359611}
{"iterations_since_restore": 16, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.467440786163216, "timesteps_this_iter": 45036, "custom_metrics": {"cost1_max": 224.7439759334162, "cost1_min": 26.16779431948833, "system_level_velocity_mean": 15.485344642399436, "cost2_mean": -80.36834593472089, "cost2_max": -22.082310759571236, "outflow_rate_max": 1445.1014363375007, "cost1_mean": 182.0942961542562, "system_level_velocity_min": 12.11533720440881, "system_level_velocity_max": 18.933244495562928, "outflow_rate_min": 479.723954003383, "cost2_min": -104.64492724911622, "outflow_rate_mean": 1214.195777794322}, "done": false, "pid": 51578, "episode_len_mean": 321.87, "info": {"default": {"kl": 0.008975489996373653, "policy_loss": -0.0024691501166671515, "total_loss": 27.444021224975586, "vf_explained_var": 0.853661060333252, "cur_lr": 0.0005000000237487257, "entropy": 1.2524614334106445, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 27.446266174316406}, "num_steps_trained": 685453, "grad_time_ms": 12314.864, "num_steps_sampled": 685453, "sample_time_ms": 21205.979, "load_time_ms": 16.421, "update_time_ms": 10.404}, "timesteps_since_restore": 685453, "time_total_s": 574.6641829013824, "timestamp": 1558603700, "time_since_restore": 574.6641829013824, "policy_reward_mean": {}, "training_iteration": 16, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2940>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2390>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2240>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 729, "timesteps_total": 685453, "episode_reward_mean": -518.4973144809553, "episodes_this_iter": 44, "date": "2019-05-23_09-28-20", "time_this_iter_s": 35.064608335494995, "num_metric_batches_dropped": 0, "episode_reward_min": -805.6513457359611}
{"iterations_since_restore": 17, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.467440786163216, "timesteps_this_iter": 44329, "custom_metrics": {"cost1_max": 224.7439759334162, "cost1_min": 26.16779431948833, "system_level_velocity_mean": 15.433107002215047, "cost2_mean": -83.94900127441836, "cost2_max": -22.082310759571236, "outflow_rate_max": 1439.4071588188347, "cost1_mean": 181.5612323349138, "system_level_velocity_min": 11.966317668875421, "system_level_velocity_max": 18.933244495562928, "outflow_rate_min": 479.723954003383, "cost2_min": -106.56449164024093, "outflow_rate_mean": 1205.839144386357}, "done": false, "pid": 51578, "episode_len_mean": 322.15, "info": {"default": {"kl": 0.0062806433998048306, "policy_loss": -0.0017120280535891652, "total_loss": 29.524351119995117, "vf_explained_var": 0.8390348553657532, "cur_lr": 0.0005000000237487257, "entropy": 1.2554445266723633, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 29.525909423828125}, "num_steps_trained": 729782, "grad_time_ms": 12546.825, "num_steps_sampled": 729782, "sample_time_ms": 21469.111, "load_time_ms": 16.619, "update_time_ms": 10.254}, "timesteps_since_restore": 729782, "time_total_s": 611.7533376216888, "timestamp": 1558603737, "time_since_restore": 611.7533376216888, "policy_reward_mean": {}, "training_iteration": 17, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961eb8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534668>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 785, "timesteps_total": 729782, "episode_reward_mean": -529.7550062942016, "episodes_this_iter": 56, "date": "2019-05-23_09-28-57", "time_this_iter_s": 37.0891547203064, "num_metric_batches_dropped": 0, "episode_reward_min": -804.8282900530766}
{"iterations_since_restore": 18, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.15527555423724, "timesteps_this_iter": 43738, "custom_metrics": {"cost1_max": 226.35177410597242, "cost1_min": 85.39127241162986, "system_level_velocity_mean": 15.571048565697431, "cost2_mean": -85.5271541349427, "cost2_max": -43.7185131220088, "outflow_rate_max": 1450.1402347663711, "cost1_mean": 181.61409313446373, "system_level_velocity_min": 11.966317668875421, "system_level_velocity_max": 19.014958372109472, "outflow_rate_min": 810.129913188629, "cost2_min": -106.56449164024093, "outflow_rate_mean": 1210.480590731037}, "done": false, "pid": 51578, "episode_len_mean": 319.92, "info": {"default": {"kl": 0.00891747698187828, "policy_loss": -0.0020676429849117994, "total_loss": 22.60564613342285, "vf_explained_var": 0.8812127709388733, "cur_lr": 0.0005000000237487257, "entropy": 1.2298016548156738, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 22.60749053955078}, "num_steps_trained": 773520, "grad_time_ms": 12594.909, "num_steps_sampled": 773520, "sample_time_ms": 21654.998, "load_time_ms": 16.687, "update_time_ms": 10.122}, "timesteps_since_restore": 773520, "time_total_s": 646.110912322998, "timestamp": 1558603771, "time_since_restore": 646.110912322998, "policy_reward_mean": {}, "training_iteration": 18, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2160>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f24e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 828, "timesteps_total": 773520, "episode_reward_mean": -518.28986381855, "episodes_this_iter": 43, "date": "2019-05-23_09-29-31", "time_this_iter_s": 34.357574701309204, "num_metric_batches_dropped": 0, "episode_reward_min": -804.8282900530766}
{"iterations_since_restore": 19, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.15527555423724, "timesteps_this_iter": 44130, "custom_metrics": {"cost1_max": 226.35177410597242, "cost1_min": 85.39127241162986, "system_level_velocity_mean": 15.61536119412721, "cost2_mean": -88.04858401918318, "cost2_max": -43.7185131220088, "outflow_rate_max": 1452.1435726385118, "cost1_mean": 182.2124586413972, "system_level_velocity_min": 12.129522707135905, "system_level_velocity_max": 19.014958372109472, "outflow_rate_min": 810.129913188629, "cost2_min": -109.52503207964631, "outflow_rate_mean": 1218.4769359331403}, "done": false, "pid": 51578, "episode_len_mean": 319.92, "info": {"default": {"kl": 0.010395013727247715, "policy_loss": -0.0029600111301988363, "total_loss": 24.584211349487305, "vf_explained_var": 0.8709084987640381, "cur_lr": 0.0005000000237487257, "entropy": 1.2099595069885254, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 24.5869140625}, "num_steps_trained": 817650, "grad_time_ms": 12564.767, "num_steps_sampled": 817650, "sample_time_ms": 21674.772, "load_time_ms": 16.811, "update_time_ms": 10.48}, "timesteps_since_restore": 817650, "time_total_s": 678.8955144882202, "timestamp": 1558603804, "time_since_restore": 678.8955144882202, "policy_reward_mean": {}, "training_iteration": 19, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845345c0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e48>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534358>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 870, "timesteps_total": 817650, "episode_reward_mean": -514.1825123490542, "episodes_this_iter": 42, "date": "2019-05-23_09-30-04", "time_this_iter_s": 32.78460216522217, "num_metric_batches_dropped": 0, "episode_reward_min": -787.49814048629}
{"iterations_since_restore": 20, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.910921601505827, "timesteps_this_iter": 44982, "custom_metrics": {"cost1_max": 226.2769285510892, "cost1_min": 23.099019564963413, "system_level_velocity_mean": 15.410658227842237, "cost2_mean": -89.82242978560686, "cost2_max": -20.04114191640411, "outflow_rate_max": 1452.1435726385118, "cost1_mean": 179.63029190376463, "system_level_velocity_min": 12.129522707135905, "system_level_velocity_max": 19.09945836159883, "outflow_rate_min": 479.24583308252767, "cost2_min": -109.52503207964631, "outflow_rate_mean": 1212.564091680032}, "done": false, "pid": 51578, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.010814070701599121, "policy_loss": -0.003461359301581979, "total_loss": 21.76882553100586, "vf_explained_var": 0.8884158134460449, "cur_lr": 0.0005000000237487257, "entropy": 1.210593819618225, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 21.772016525268555}, "num_steps_trained": 862632, "grad_time_ms": 12601.309, "num_steps_sampled": 862632, "sample_time_ms": 21932.374, "load_time_ms": 16.705, "update_time_ms": 10.505}, "timesteps_since_restore": 862632, "time_total_s": 716.7475686073303, "timestamp": 1558603842, "time_since_restore": 716.7475686073303, "policy_reward_mean": {}, "training_iteration": 20, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534828>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845346a0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 926, "timesteps_total": 862632, "episode_reward_mean": -529.3776939327307, "episodes_this_iter": 56, "date": "2019-05-23_09-30-42", "time_this_iter_s": 37.85205411911011, "num_metric_batches_dropped": 0, "episode_reward_min": -787.49814048629}
{"iterations_since_restore": 21, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.910921601505827, "timesteps_this_iter": 43966, "custom_metrics": {"cost1_max": 227.32690367004525, "cost1_min": 23.099019564963413, "system_level_velocity_mean": 15.378295388229562, "cost2_mean": -90.64675307213503, "cost2_max": -20.04114191640411, "outflow_rate_max": 1458.562485445589, "cost1_mean": 179.22990274231432, "system_level_velocity_min": 12.085565234485978, "system_level_velocity_max": 19.09945836159883, "outflow_rate_min": 479.24583308252767, "cost2_min": -110.92545537118757, "outflow_rate_mean": 1208.8270309901056}, "done": false, "pid": 51578, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.010459293611347675, "policy_loss": -0.003404624294489622, "total_loss": 23.24357795715332, "vf_explained_var": 0.8787253499031067, "cur_lr": 0.0005000000237487257, "entropy": 1.1992847919464111, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 23.246721267700195}, "num_steps_trained": 906598, "grad_time_ms": 12733.769, "num_steps_sampled": 906598, "sample_time_ms": 21814.856, "load_time_ms": 16.611, "update_time_ms": 10.45}, "timesteps_since_restore": 906598, "time_total_s": 750.9078061580658, "timestamp": 1558603876, "time_since_restore": 750.9078061580658, "policy_reward_mean": {}, "training_iteration": 21, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534048>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534320>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534208>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 970, "timesteps_total": 906598, "episode_reward_mean": -534.2477394292757, "episodes_this_iter": 44, "date": "2019-05-23_09-31-16", "time_this_iter_s": 34.160237550735474, "num_metric_batches_dropped": 0, "episode_reward_min": -825.8314520622919}
{"iterations_since_restore": 22, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -247.40694242424544, "timesteps_this_iter": 45055, "custom_metrics": {"cost1_max": 227.32690367004525, "cost1_min": 143.2405012363597, "system_level_velocity_mean": 15.263872528552646, "cost2_mean": -95.04096915491796, "cost2_max": -74.73745126548971, "outflow_rate_max": 1458.562485445589, "cost1_mean": 181.46305138751512, "system_level_velocity_min": 12.085565234485978, "system_level_velocity_max": 19.073091074417764, "outflow_rate_min": 1010.7162687540773, "cost2_min": -113.87486263671232, "outflow_rate_mean": 1220.6746379115832}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.011095497757196426, "policy_loss": -0.002445162972435355, "total_loss": 19.27391242980957, "vf_explained_var": 0.9033899307250977, "cur_lr": 0.0005000000237487257, "entropy": 1.1792070865631104, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 19.276081085205078}, "num_steps_trained": 951653, "grad_time_ms": 12837.987, "num_steps_sampled": 951653, "sample_time_ms": 21732.49, "load_time_ms": 15.856, "update_time_ms": 10.085}, "timesteps_since_restore": 951653, "time_total_s": 784.4818301200867, "timestamp": 1558603910, "time_since_restore": 784.4818301200867, "policy_reward_mean": {}, "training_iteration": 22, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534c50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534d30>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534898>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1012, "timesteps_total": 951653, "episode_reward_mean": -548.7437482675172, "episodes_this_iter": 42, "date": "2019-05-23_09-31-50", "time_this_iter_s": 33.574023962020874, "num_metric_batches_dropped": 0, "episode_reward_min": -825.8314520622919}
{"iterations_since_restore": 23, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.989253796528015, "timesteps_this_iter": 44397, "custom_metrics": {"cost1_max": 226.64058287120127, "cost1_min": 23.11587770031996, "system_level_velocity_mean": 15.55348697189858, "cost2_mean": -95.0563537575221, "cost2_max": -15.24429838071928, "outflow_rate_max": 1460.5335155984417, "cost1_mean": 181.39838041868015, "system_level_velocity_min": 11.982903145159938, "system_level_velocity_max": 19.073091074417764, "outflow_rate_min": 489.3996304716413, "cost2_min": -116.72934580772294, "outflow_rate_mean": 1219.9644958947404}, "done": false, "pid": 51578, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.010974776931107044, "policy_loss": -0.004040553234517574, "total_loss": 25.74361801147461, "vf_explained_var": 0.8651559352874756, "cur_lr": 0.0005000000237487257, "entropy": 1.1819795370101929, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 25.74738121032715}, "num_steps_trained": 996050, "grad_time_ms": 12703.358, "num_steps_sampled": 996050, "sample_time_ms": 21794.449, "load_time_ms": 15.981, "update_time_ms": 10.039}, "timesteps_since_restore": 996050, "time_total_s": 818.9704818725586, "timestamp": 1558603944, "time_since_restore": 818.9704818725586, "policy_reward_mean": {}, "training_iteration": 23, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534cf8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534240>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534278>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1062, "timesteps_total": 996050, "episode_reward_mean": -526.0237815522556, "episodes_this_iter": 50, "date": "2019-05-23_09-32-24", "time_this_iter_s": 34.488651752471924, "num_metric_batches_dropped": 0, "episode_reward_min": -825.9361439120661}
{"iterations_since_restore": 24, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.06712199719737, "timesteps_this_iter": 43770, "custom_metrics": {"cost1_max": 226.51383885151301, "cost1_min": 18.14857347271595, "system_level_velocity_mean": 15.643253987589326, "cost2_mean": -94.46137153562931, "cost2_max": -15.24429838071928, "outflow_rate_max": 1464.1478325303726, "cost1_mean": 180.53161918563856, "system_level_velocity_min": 11.982903145159938, "system_level_velocity_max": 19.034357070543052, "outflow_rate_min": 447.40921683303424, "cost2_min": -120.35464162640135, "outflow_rate_mean": 1217.652173954736}, "done": false, "pid": 51578, "episode_len_mean": 317.04, "info": {"default": {"kl": 0.01102057658135891, "policy_loss": -0.0028675245121121407, "total_loss": 22.33694839477539, "vf_explained_var": 0.8859156966209412, "cur_lr": 0.0005000000237487257, "entropy": 1.1541293859481812, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 22.339540481567383}, "num_steps_trained": 1039820, "grad_time_ms": 12493.458, "num_steps_sampled": 1039820, "sample_time_ms": 21923.662, "load_time_ms": 15.745, "update_time_ms": 10.188}, "timesteps_since_restore": 1039820, "time_total_s": 852.9672911167145, "timestamp": 1558603978, "time_since_restore": 852.9672911167145, "policy_reward_mean": {}, "training_iteration": 24, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534668>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534ac8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1112, "timesteps_total": 1039820, "episode_reward_mean": -515.4622386493315, "episodes_this_iter": 50, "date": "2019-05-23_09-32-58", "time_this_iter_s": 33.996809244155884, "num_metric_batches_dropped": 0, "episode_reward_min": -825.9361439120661}
{"iterations_since_restore": 25, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.06712199719737, "timesteps_this_iter": 43911, "custom_metrics": {"cost1_max": 227.378209188188, "cost1_min": 18.14857347271595, "system_level_velocity_mean": 15.643936744115173, "cost2_mean": -97.71294155612136, "cost2_max": -16.759827587553193, "outflow_rate_max": 1464.1478325303726, "cost1_mean": 184.13871527272238, "system_level_velocity_min": 11.457234332994824, "system_level_velocity_max": 19.086868019961535, "outflow_rate_min": 447.40921683303424, "cost2_min": -120.35464162640135, "outflow_rate_mean": 1236.1173201092506}, "done": false, "pid": 51578, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.010796219110488892, "policy_loss": -0.003061073599383235, "total_loss": 21.462085723876953, "vf_explained_var": 0.8911620378494263, "cur_lr": 0.0005000000237487257, "entropy": 1.1389836072921753, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 21.46487808227539}, "num_steps_trained": 1083731, "grad_time_ms": 12541.518, "num_steps_sampled": 1083731, "sample_time_ms": 22062.617, "load_time_ms": 15.559, "update_time_ms": 10.337}, "timesteps_since_restore": 1083731, "time_total_s": 886.8927671909332, "timestamp": 1558604012, "time_since_restore": 886.8927671909332, "policy_reward_mean": {}, "training_iteration": 25, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534b00>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845349b0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1154, "timesteps_total": 1083731, "episode_reward_mean": -519.7082165694186, "episodes_this_iter": 42, "date": "2019-05-23_09-33-32", "time_this_iter_s": 33.92547607421875, "num_metric_batches_dropped": 0, "episode_reward_min": -840.5167815724672}
{"iterations_since_restore": 26, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -89.98080155859543, "timesteps_this_iter": 45915, "custom_metrics": {"cost1_max": 227.378209188188, "cost1_min": 81.20318900287603, "system_level_velocity_mean": 15.57504049106925, "cost2_mean": -99.63377328148913, "cost2_max": -48.59066968168548, "outflow_rate_max": 1466.4680313262936, "cost1_mean": 183.70883664517478, "system_level_velocity_min": 11.457234332994824, "system_level_velocity_max": 19.086868019961535, "outflow_rate_min": 774.139651264351, "cost2_min": -117.93153306293694, "outflow_rate_mean": 1237.2490806032674}, "done": false, "pid": 51578, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.010000999085605145, "policy_loss": -0.0037655094638466835, "total_loss": 20.852291107177734, "vf_explained_var": 0.8923600912094116, "cur_lr": 0.0005000000237487257, "entropy": 1.153328537940979, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 20.855806350708008}, "num_steps_trained": 1129646, "grad_time_ms": 12584.152, "num_steps_sampled": 1129646, "sample_time_ms": 22222.435, "load_time_ms": 15.762, "update_time_ms": 10.745}, "timesteps_since_restore": 1129646, "time_total_s": 923.9889657497406, "timestamp": 1558604049, "time_since_restore": 923.9889657497406, "policy_reward_mean": {}, "training_iteration": 26, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534198>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534fd0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534cc0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1203, "timesteps_total": 1129646, "episode_reward_mean": -528.7712147634936, "episodes_this_iter": 49, "date": "2019-05-23_09-34-09", "time_this_iter_s": 37.09619855880737, "num_metric_batches_dropped": 0, "episode_reward_min": -840.5167815724672}
{"iterations_since_restore": 27, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.600359469581235, "timesteps_this_iter": 43611, "custom_metrics": {"cost1_max": 226.32219489628955, "cost1_min": 22.88093993991592, "system_level_velocity_mean": 15.348145345575702, "cost2_mean": -100.3245608237711, "cost2_max": -18.8178313253361, "outflow_rate_max": 1466.4680313262936, "cost1_mean": 178.76019132787266, "system_level_velocity_min": 12.089456003172138, "system_level_velocity_max": 18.971773650402096, "outflow_rate_min": 512.5194798574704, "cost2_min": -129.81220681843385, "outflow_rate_mean": 1217.3443131603099}, "done": false, "pid": 51578, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.01091035082936287, "policy_loss": -0.003239433979615569, "total_loss": 21.866567611694336, "vf_explained_var": 0.8862999677658081, "cur_lr": 0.0005000000237487257, "entropy": 1.1412537097930908, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 21.869535446166992}, "num_steps_trained": 1173257, "grad_time_ms": 12363.048, "num_steps_sampled": 1173257, "sample_time_ms": 22030.164, "load_time_ms": 14.954, "update_time_ms": 10.581}, "timesteps_since_restore": 1173257, "time_total_s": 956.9362354278564, "timestamp": 1558604082, "time_since_restore": 956.9362354278564, "policy_reward_mean": {}, "training_iteration": 27, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e48>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e80>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1251, "timesteps_total": 1173257, "episode_reward_mean": -545.207203041851, "episodes_this_iter": 48, "date": "2019-05-23_09-34-42", "time_this_iter_s": 32.947269678115845, "num_metric_batches_dropped": 0, "episode_reward_min": -808.9774878027685}
{"iterations_since_restore": 28, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.600359469581235, "timesteps_this_iter": 43848, "custom_metrics": {"cost1_max": 226.9057449046017, "cost1_min": 22.88093993991592, "system_level_velocity_mean": 15.65301446558381, "cost2_mean": -100.42608435285753, "cost2_max": -18.8178313253361, "outflow_rate_max": 1466.4680313262936, "cost1_mean": 182.4193767667343, "system_level_velocity_min": 12.194120299703293, "system_level_velocity_max": 19.022226546926177, "outflow_rate_min": 512.5194798574704, "cost2_min": -129.81220681843385, "outflow_rate_mean": 1233.8116483636693}, "done": false, "pid": 51578, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.010261057876050472, "policy_loss": -0.002301161177456379, "total_loss": 23.914369583129883, "vf_explained_var": 0.8778222799301147, "cur_lr": 0.0005000000237487257, "entropy": 1.1331732273101807, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 23.916412353515625}, "num_steps_trained": 1217105, "grad_time_ms": 12317.936, "num_steps_sampled": 1217105, "sample_time_ms": 22084.486, "load_time_ms": 14.862, "update_time_ms": 10.81}, "timesteps_since_restore": 1217105, "time_total_s": 991.3651382923126, "timestamp": 1558604117, "time_since_restore": 991.3651382923126, "policy_reward_mean": {}, "training_iteration": 28, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845348d0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961240>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1294, "timesteps_total": 1217105, "episode_reward_mean": -522.4353758302477, "episodes_this_iter": 43, "date": "2019-05-23_09-35-17", "time_this_iter_s": 34.42890286445618, "num_metric_batches_dropped": 0, "episode_reward_min": -806.4621165570142}
{"iterations_since_restore": 29, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.600359469581235, "timesteps_this_iter": 43660, "custom_metrics": {"cost1_max": 227.79705263392083, "cost1_min": 22.88093993991592, "system_level_velocity_mean": 15.909802940479356, "cost2_mean": -99.1126343429112, "cost2_max": -18.8178313253361, "outflow_rate_max": 1466.3263054187194, "cost1_mean": 186.11945639981369, "system_level_velocity_min": 12.264626504955618, "system_level_velocity_max": 19.191858362279447, "outflow_rate_min": 512.5194798574704, "cost2_min": -124.20787239109636, "outflow_rate_mean": 1247.9134850381536}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.012651507742702961, "policy_loss": -0.0034061274491250515, "total_loss": 23.919946670532227, "vf_explained_var": 0.8872191905975342, "cur_lr": 0.0005000000237487257, "entropy": 1.1320666074752808, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 23.923036575317383}, "num_steps_trained": 1260765, "grad_time_ms": 12400.569, "num_steps_sampled": 1260765, "sample_time_ms": 22248.495, "load_time_ms": 14.624, "update_time_ms": 10.574}, "timesteps_since_restore": 1260765, "time_total_s": 1026.5793707370758, "timestamp": 1558604152, "time_since_restore": 1026.5793707370758, "policy_reward_mean": {}, "training_iteration": 29, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845349e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534cc0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846c65f8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1339, "timesteps_total": 1260765, "episode_reward_mean": -504.5196233565138, "episodes_this_iter": 45, "date": "2019-05-23_09-35-52", "time_this_iter_s": 35.214232444763184, "num_metric_batches_dropped": 0, "episode_reward_min": -807.2171208532449}
{"iterations_since_restore": 30, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -159.50232935627034, "timesteps_this_iter": 44237, "custom_metrics": {"cost1_max": 227.79705263392083, "cost1_min": 129.7317472753943, "system_level_velocity_mean": 15.76928572239764, "cost2_mean": -99.07563907092435, "cost2_max": -69.32231020493164, "outflow_rate_max": 1465.8785452324526, "cost1_mean": 185.51683735622157, "system_level_velocity_min": 10.930936091106789, "system_level_velocity_max": 19.191858362279447, "outflow_rate_min": 1024.1330245577972, "cost2_min": -116.1306414054002, "outflow_rate_mean": 1242.4774553794718}, "done": false, "pid": 51578, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.012487522326409817, "policy_loss": -0.0035216831602156162, "total_loss": 27.165517807006836, "vf_explained_var": 0.8694475889205933, "cur_lr": 0.0005000000237487257, "entropy": 1.1139544248580933, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 27.168724060058594}, "num_steps_trained": 1305002, "grad_time_ms": 12206.285, "num_steps_sampled": 1305002, "sample_time_ms": 22045.463, "load_time_ms": 14.609, "update_time_ms": 10.661}, "timesteps_since_restore": 1305002, "time_total_s": 1060.4318571090698, "timestamp": 1558604186, "time_since_restore": 1060.4318571090698, "policy_reward_mean": {}, "training_iteration": 30, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a90f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9ba8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541b00>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1390, "timesteps_total": 1305002, "episode_reward_mean": -518.071180782349, "episodes_this_iter": 51, "date": "2019-05-23_09-36-26", "time_this_iter_s": 33.85248637199402, "num_metric_batches_dropped": 0, "episode_reward_min": -811.0259539139671}
{"iterations_since_restore": 31, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.075164184921164, "timesteps_this_iter": 45142, "custom_metrics": {"cost1_max": 227.6434745898758, "cost1_min": 18.057588144320505, "system_level_velocity_mean": 15.457192731715129, "cost2_mean": -100.10575867577133, "cost2_max": -14.081961408049134, "outflow_rate_max": 1465.8785452324526, "cost1_mean": 180.76942241421511, "system_level_velocity_min": 10.930936091106789, "system_level_velocity_max": 19.07974919328468, "outflow_rate_min": 487.8590816741719, "cost2_min": -121.78058615603803, "outflow_rate_mean": 1217.9202940782282}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.011568963527679443, "policy_loss": -0.0032808820251375437, "total_loss": 22.34862518310547, "vf_explained_var": 0.8863155841827393, "cur_lr": 0.0005000000237487257, "entropy": 1.1254802942276, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 22.35161781311035}, "num_steps_trained": 1350144, "grad_time_ms": 12047.436, "num_steps_sampled": 1350144, "sample_time_ms": 22213.261, "load_time_ms": 14.547, "update_time_ms": 10.468}, "timesteps_since_restore": 1350144, "time_total_s": 1094.68772482872, "timestamp": 1558604220, "time_since_restore": 1094.68772482872, "policy_reward_mean": {}, "training_iteration": 31, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541898>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541908>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541940>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1435, "timesteps_total": 1350144, "episode_reward_mean": -540.5357390563084, "episodes_this_iter": 45, "date": "2019-05-23_09-37-00", "time_this_iter_s": 34.25586771965027, "num_metric_batches_dropped": 0, "episode_reward_min": -811.0259539139671}
{"iterations_since_restore": 32, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.075164184921164, "timesteps_this_iter": 46258, "custom_metrics": {"cost1_max": 227.44981498531288, "cost1_min": 18.057588144320505, "system_level_velocity_mean": 15.193503323833541, "cost2_mean": -100.66130815532908, "cost2_max": -14.081961408049134, "outflow_rate_max": 1462.978580600731, "cost1_mean": 178.2014849457895, "system_level_velocity_min": 12.064419479695376, "system_level_velocity_max": 19.07974919328468, "outflow_rate_min": 487.8590816741719, "cost2_min": -121.78058615603803, "outflow_rate_mean": 1208.9156416012393}, "done": false, "pid": 51578, "episode_len_mean": 321.74, "info": {"default": {"kl": 0.011495455168187618, "policy_loss": -0.0025469549000263214, "total_loss": 18.94124984741211, "vf_explained_var": 0.9067819118499756, "cur_lr": 0.0005000000237487257, "entropy": 1.1276583671569824, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 18.943510055541992}, "num_steps_trained": 1396402, "grad_time_ms": 12115.886, "num_steps_sampled": 1396402, "sample_time_ms": 22398.47, "load_time_ms": 15.14, "update_time_ms": 10.697}, "timesteps_since_restore": 1396402, "time_total_s": 1130.8224411010742, "timestamp": 1558604256, "time_since_restore": 1130.8224411010742, "policy_reward_mean": {}, "training_iteration": 32, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537860>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845372b0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845370f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1480, "timesteps_total": 1396402, "episode_reward_mean": -561.9773448322665, "episodes_this_iter": 45, "date": "2019-05-23_09-37-36", "time_this_iter_s": 36.134716272354126, "num_metric_batches_dropped": 0, "episode_reward_min": -826.5482713712753}
{"iterations_since_restore": 33, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -232.52343847120815, "timesteps_this_iter": 43132, "custom_metrics": {"cost1_max": 226.65796909931174, "cost1_min": 140.13898269651204, "system_level_velocity_mean": 15.381949955364703, "cost2_mean": -100.7899136485479, "cost2_max": -84.6450427440596, "outflow_rate_max": 1464.9974356927985, "cost1_mean": 182.64777822030442, "system_level_velocity_min": 11.801658590584507, "system_level_velocity_max": 19.023379032286527, "outflow_rate_min": 1041.3438095238096, "cost2_min": -120.49595478914104, "outflow_rate_mean": 1234.2974953652415}, "done": false, "pid": 51578, "episode_len_mean": 324.72, "info": {"default": {"kl": 0.012533358298242092, "policy_loss": -0.0038407810498028994, "total_loss": 21.97881317138672, "vf_explained_var": 0.8866559267044067, "cur_lr": 0.0005000000237487257, "entropy": 1.1287903785705566, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 21.982343673706055}, "num_steps_trained": 1439534, "grad_time_ms": 12063.528, "num_steps_sampled": 1439534, "sample_time_ms": 22367.819, "load_time_ms": 15.327, "update_time_ms": 10.8}, "timesteps_since_restore": 1439534, "time_total_s": 1164.480143547058, "timestamp": 1558604290, "time_since_restore": 1164.480143547058, "policy_reward_mean": {}, "training_iteration": 33, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845415c0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845410f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1531, "timesteps_total": 1439534, "episode_reward_mean": -546.5498953002158, "episodes_this_iter": 51, "date": "2019-05-23_09-38-10", "time_this_iter_s": 33.65770244598389, "num_metric_batches_dropped": 0, "episode_reward_min": -826.5482713712753}
{"iterations_since_restore": 34, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -159.12962573345135, "timesteps_this_iter": 43727, "custom_metrics": {"cost1_max": 226.65796909931174, "cost1_min": 136.3381517691477, "system_level_velocity_mean": 15.812479174350601, "cost2_mean": -99.98221361083571, "cost2_max": -62.93808206155893, "outflow_rate_max": 1464.9974356927985, "cost1_mean": 186.64374095287357, "system_level_velocity_min": 11.678178913200565, "system_level_velocity_max": 19.060947006412462, "outflow_rate_min": 1017.8682845416395, "cost2_min": -120.49595478914104, "outflow_rate_mean": 1250.4112443964764}, "done": false, "pid": 51578, "episode_len_mean": 322.75, "info": {"default": {"kl": 0.011695368215441704, "policy_loss": -0.0042376271449029446, "total_loss": 22.54918098449707, "vf_explained_var": 0.8836153745651245, "cur_lr": 0.0005000000237487257, "entropy": 1.1226319074630737, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 22.55312728881836}, "num_steps_trained": 1483261, "grad_time_ms": 11971.857, "num_steps_sampled": 1483261, "sample_time_ms": 22312.135, "load_time_ms": 14.462, "update_time_ms": 10.575}, "timesteps_since_restore": 1483261, "time_total_s": 1196.9895660877228, "timestamp": 1558604323, "time_since_restore": 1196.9895660877228, "policy_reward_mean": {}, "training_iteration": 34, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541748>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541a58>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845414e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1576, "timesteps_total": 1483261, "episode_reward_mean": -512.0020713356772, "episodes_this_iter": 45, "date": "2019-05-23_09-38-43", "time_this_iter_s": 32.50942254066467, "num_metric_batches_dropped": 0, "episode_reward_min": -851.5669915217129}
{"iterations_since_restore": 35, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -159.12962573345135, "timesteps_this_iter": 45316, "custom_metrics": {"cost1_max": 227.22175665287068, "cost1_min": 136.3381517691477, "system_level_velocity_mean": 15.615248070654197, "cost2_mean": -100.48123154085378, "cost2_max": -62.93808206155893, "outflow_rate_max": 1464.5357497081777, "cost1_mean": 183.38236061652466, "system_level_velocity_min": 11.678178913200565, "system_level_velocity_max": 19.060947006412462, "outflow_rate_min": 1017.8682845416395, "cost2_min": -118.05773346703673, "outflow_rate_mean": 1236.5296357305192}, "done": false, "pid": 51578, "episode_len_mean": 321.67, "info": {"default": {"kl": 0.013086669147014618, "policy_loss": -0.0031331898644566536, "total_loss": 21.188968658447266, "vf_explained_var": 0.8983548879623413, "cur_lr": 0.0005000000237487257, "entropy": 1.1179744005203247, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 21.191774368286133}, "num_steps_trained": 1528577, "grad_time_ms": 12017.442, "num_steps_sampled": 1528577, "sample_time_ms": 22646.868, "load_time_ms": 15.414, "update_time_ms": 10.421}, "timesteps_since_restore": 1528577, "time_total_s": 1234.736700296402, "timestamp": 1558604360, "time_since_restore": 1234.736700296402, "policy_reward_mean": {}, "training_iteration": 35, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537048>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537400>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845372b0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1621, "timesteps_total": 1528577, "episode_reward_mean": -528.5047134210282, "episodes_this_iter": 45, "date": "2019-05-23_09-39-20", "time_this_iter_s": 37.7471342086792, "num_metric_batches_dropped": 0, "episode_reward_min": -851.5669915217129}
{"iterations_since_restore": 36, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -173.86263655339408, "timesteps_this_iter": 44177, "custom_metrics": {"cost1_max": 227.22175665287068, "cost1_min": 143.44003959676868, "system_level_velocity_mean": 15.68483173860063, "cost2_mean": -99.7912597355382, "cost2_max": -71.5374080867756, "outflow_rate_max": 1464.5357497081777, "cost1_mean": 184.85843583069357, "system_level_velocity_min": 12.080630849779643, "system_level_velocity_max": 19.060947006412462, "outflow_rate_min": 1034.961362652499, "cost2_min": -118.05773346703673, "outflow_rate_mean": 1244.341416881233}, "done": false, "pid": 51578, "episode_len_mean": 322.85, "info": {"default": {"kl": 0.013179339468479156, "policy_loss": -0.004172921180725098, "total_loss": 23.28062629699707, "vf_explained_var": 0.8865211606025696, "cur_lr": 0.0005000000237487257, "entropy": 1.1007438898086548, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 23.28447151184082}, "num_steps_trained": 1572754, "grad_time_ms": 11866.733, "num_steps_sampled": 1572754, "sample_time_ms": 22374.327, "load_time_ms": 15.414, "update_time_ms": 9.85}, "timesteps_since_restore": 1572754, "time_total_s": 1267.5884737968445, "timestamp": 1558604393, "time_since_restore": 1267.5884737968445, "policy_reward_mean": {}, "training_iteration": 36, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d97f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541978>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d0668>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1666, "timesteps_total": 1572754, "episode_reward_mean": -523.9128454395099, "episodes_this_iter": 45, "date": "2019-05-23_09-39-53", "time_this_iter_s": 32.851773500442505, "num_metric_batches_dropped": 0, "episode_reward_min": -821.441158973382}
{"iterations_since_restore": 37, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -252.5645306723483, "timesteps_this_iter": 46080, "custom_metrics": {"cost1_max": 227.00917934476263, "cost1_min": 142.68846652964348, "system_level_velocity_mean": 15.346537818294006, "cost2_mean": -100.49455463859313, "cost2_max": -86.87386140331168, "outflow_rate_max": 1469.9143074912893, "cost1_mean": 182.29639549815002, "system_level_velocity_min": 12.127503130877198, "system_level_velocity_max": 18.967540438004036, "outflow_rate_min": 1055.1020146387045, "cost2_min": -117.79477636010819, "outflow_rate_mean": 1229.0819127539298}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013666287064552307, "policy_loss": -0.004452034365385771, "total_loss": 20.310779571533203, "vf_explained_var": 0.8999447226524353, "cur_lr": 0.0005000000237487257, "entropy": 1.0853569507598877, "cur_kl_coeff": 0.02500000223517418, "vf_loss": 20.314889907836914}, "num_steps_trained": 1618834, "grad_time_ms": 11919.352, "num_steps_sampled": 1618834, "sample_time_ms": 22453.707, "load_time_ms": 16.529, "update_time_ms": 9.902}, "timesteps_since_restore": 1618834, "time_total_s": 1301.8780839443207, "timestamp": 1558604428, "time_since_restore": 1301.8780839443207, "policy_reward_mean": {}, "training_iteration": 37, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534f60>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534ac8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1715, "timesteps_total": 1618834, "episode_reward_mean": -552.4722661074898, "episodes_this_iter": 49, "date": "2019-05-23_09-40-28", "time_this_iter_s": 34.289610147476196, "num_metric_batches_dropped": 0, "episode_reward_min": -803.5706994963648}
{"iterations_since_restore": 38, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -159.34027108540295, "timesteps_this_iter": 43280, "custom_metrics": {"cost1_max": 228.042456649441, "cost1_min": 142.68846652964348, "system_level_velocity_mean": 15.393939272774704, "cost2_mean": -99.8761031525528, "cost2_max": -68.07347819102702, "outflow_rate_max": 1469.9143074912893, "cost1_mean": 182.08081352704474, "system_level_velocity_min": 12.127503130877198, "system_level_velocity_max": 19.01921621212636, "outflow_rate_min": 1055.1020146387045, "cost2_min": -119.44523608768583, "outflow_rate_mean": 1229.1560541791814}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.010656957514584064, "policy_loss": -0.0028317624237388372, "total_loss": 21.60554313659668, "vf_explained_var": 0.8921065330505371, "cur_lr": 0.0005000000237487257, "entropy": 1.0700517892837524, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 21.608110427856445}, "num_steps_trained": 1662114, "grad_time_ms": 11893.806, "num_steps_sampled": 1662114, "sample_time_ms": 22420.646, "load_time_ms": 16.807, "update_time_ms": 9.68}, "timesteps_since_restore": 1662114, "time_total_s": 1335.7298502922058, "timestamp": 1558604462, "time_since_restore": 1335.7298502922058, "policy_reward_mean": {}, "training_iteration": 38, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541dd8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541278>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9630>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1760, "timesteps_total": 1662114, "episode_reward_mean": -546.2335474934243, "episodes_this_iter": 45, "date": "2019-05-23_09-41-02", "time_this_iter_s": 33.85176634788513, "num_metric_batches_dropped": 0, "episode_reward_min": -803.4933162443258}
{"iterations_since_restore": 39, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -159.34027108540295, "timesteps_this_iter": 44269, "custom_metrics": {"cost1_max": 228.042456649441, "cost1_min": 144.1264706732012, "system_level_velocity_mean": 15.435877943949079, "cost2_mean": -100.56936611525464, "cost2_max": -68.07347819102702, "outflow_rate_max": 1466.0334025373706, "cost1_mean": 181.8951335905055, "system_level_velocity_min": 12.52475883264548, "system_level_velocity_max": 19.01921621212636, "outflow_rate_min": 1058.4839065673661, "cost2_min": -121.04839632631338, "outflow_rate_mean": 1229.3704157253098}, "done": false, "pid": 51578, "episode_len_mean": 322.74, "info": {"default": {"kl": 0.013990159146487713, "policy_loss": -0.0039917705580592155, "total_loss": 19.5013427734375, "vf_explained_var": 0.9016846418380737, "cur_lr": 0.0005000000237487257, "entropy": 1.0520066022872925, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 19.50498390197754}, "num_steps_trained": 1706383, "grad_time_ms": 11856.789, "num_steps_sampled": 1706383, "sample_time_ms": 22452.348, "load_time_ms": 17.149, "update_time_ms": 9.562}, "timesteps_since_restore": 1706383, "time_total_s": 1370.884590625763, "timestamp": 1558604497, "time_since_restore": 1370.884590625763, "policy_reward_mean": {}, "training_iteration": 39, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845410f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d96a0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468b2e8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1805, "timesteps_total": 1706383, "episode_reward_mean": -540.738761697771, "episodes_this_iter": 45, "date": "2019-05-23_09-41-37", "time_this_iter_s": 35.15474033355713, "num_metric_batches_dropped": 0, "episode_reward_min": -793.1524100553783}
{"iterations_since_restore": 40, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -93.71743729576926, "timesteps_this_iter": 43011, "custom_metrics": {"cost1_max": 226.93210495993156, "cost1_min": 80.22501340811125, "system_level_velocity_mean": 15.759571658263303, "cost2_mean": -101.34254093665874, "cost2_max": -46.71070777857163, "outflow_rate_max": 1468.3529690984383, "cost1_mean": 184.75439198753963, "system_level_velocity_min": 11.679624733497377, "system_level_velocity_max": 19.048486203660975, "outflow_rate_min": 756.7177230793719, "cost2_min": -121.04839632631338, "outflow_rate_mean": 1241.7940947720786}, "done": false, "pid": 51578, "episode_len_mean": 320.76, "info": {"default": {"kl": 0.013415021821856499, "policy_loss": -0.004749803803861141, "total_loss": 25.17828369140625, "vf_explained_var": 0.8683491945266724, "cur_lr": 0.0005000000237487257, "entropy": 1.035215139389038, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 25.18269920349121}, "num_steps_trained": 1749394, "grad_time_ms": 11915.745, "num_steps_sampled": 1749394, "sample_time_ms": 22348.936, "load_time_ms": 16.497, "update_time_ms": 9.766}, "timesteps_since_restore": 1749394, "time_total_s": 1404.3165256977081, "timestamp": 1558604530, "time_since_restore": 1404.3165256977081, "policy_reward_mean": {}, "training_iteration": 40, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845372b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537048>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d30>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1853, "timesteps_total": 1749394, "episode_reward_mean": -512.9339610233538, "episodes_this_iter": 48, "date": "2019-05-23_09-42-10", "time_this_iter_s": 33.43193507194519, "num_metric_batches_dropped": 0, "episode_reward_min": -799.9467218236186}
{"iterations_since_restore": 41, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.3041465901109, "timesteps_this_iter": 44107, "custom_metrics": {"cost1_max": 226.93210495993156, "cost1_min": 80.18531427034489, "system_level_velocity_mean": 15.916806166273236, "cost2_mean": -99.72132895904328, "cost2_max": -44.0393259420329, "outflow_rate_max": 1468.3529690984383, "cost1_mean": 185.4037837423159, "system_level_velocity_min": 11.679624733497377, "system_level_velocity_max": 19.048486203660975, "outflow_rate_min": 756.7177230793719, "cost2_min": -121.71976518102903, "outflow_rate_mean": 1250.3715919576318}, "done": false, "pid": 51578, "episode_len_mean": 318.68, "info": {"default": {"kl": 0.01588033139705658, "policy_loss": -0.0036389920860528946, "total_loss": 21.76820182800293, "vf_explained_var": 0.8897678256034851, "cur_lr": 0.0005000000237487257, "entropy": 1.041783094406128, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 21.771442413330078}, "num_steps_trained": 1793501, "grad_time_ms": 11895.941, "num_steps_sampled": 1793501, "sample_time_ms": 22300.695, "load_time_ms": 16.049, "update_time_ms": 9.813}, "timesteps_since_restore": 1793501, "time_total_s": 1437.8834006786346, "timestamp": 1558604564, "time_since_restore": 1437.8834006786346, "policy_reward_mean": {}, "training_iteration": 41, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9ba8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9f28>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9d30>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1901, "timesteps_total": 1793501, "episode_reward_mean": -495.9288109730502, "episodes_this_iter": 48, "date": "2019-05-23_09-42-44", "time_this_iter_s": 33.566874980926514, "num_metric_batches_dropped": 0, "episode_reward_min": -799.9467218236186}
{"iterations_since_restore": 42, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.3041465901109, "timesteps_this_iter": 46064, "custom_metrics": {"cost1_max": 226.329280388079, "cost1_min": 80.18531427034489, "system_level_velocity_mean": 15.394564174888385, "cost2_mean": -100.47072815496307, "cost2_max": -44.0393259420329, "outflow_rate_max": 1464.3564506317466, "cost1_mean": 181.12766890421904, "system_level_velocity_min": 11.679624733497377, "system_level_velocity_max": 18.90110348771092, "outflow_rate_min": 765.8433003207476, "cost2_min": -121.71976518102903, "outflow_rate_mean": 1232.095960302968}, "done": false, "pid": 51578, "episode_len_mean": 321.84, "info": {"default": {"kl": 0.014007262885570526, "policy_loss": -0.003472172422334552, "total_loss": 17.99608039855957, "vf_explained_var": 0.9141592979431152, "cur_lr": 0.0005000000237487257, "entropy": 1.0439372062683105, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 17.999204635620117}, "num_steps_trained": 1839565, "grad_time_ms": 11764.15, "num_steps_sampled": 1839565, "sample_time_ms": 22222.579, "load_time_ms": 16.36, "update_time_ms": 9.57}, "timesteps_since_restore": 1839565, "time_total_s": 1471.900042772293, "timestamp": 1558604598, "time_since_restore": 1471.900042772293, "policy_reward_mean": {}, "training_iteration": 42, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541518>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541b00>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1944, "timesteps_total": 1839565, "episode_reward_mean": -539.4725002558719, "episodes_this_iter": 43, "date": "2019-05-23_09-43-18", "time_this_iter_s": 34.01664209365845, "num_metric_batches_dropped": 0, "episode_reward_min": -799.9467218236186}
{"iterations_since_restore": 43, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.2246119724227, "timesteps_this_iter": 43883, "custom_metrics": {"cost1_max": 227.26952984472268, "cost1_min": 18.709687431036556, "system_level_velocity_mean": 15.489362445022772, "cost2_mean": -99.57090257640785, "cost2_max": -14.651240988321657, "outflow_rate_max": 1466.6574033221095, "cost1_mean": 181.58143032110752, "system_level_velocity_min": 12.25130149330309, "system_level_velocity_max": 19.092000282538542, "outflow_rate_min": 497.50056700217027, "cost2_min": -121.78162051950558, "outflow_rate_mean": 1233.2166991299846}, "done": false, "pid": 51578, "episode_len_mean": 320.85, "info": {"default": {"kl": 0.012371120043098927, "policy_loss": -0.0025497786700725555, "total_loss": 25.214216232299805, "vf_explained_var": 0.874778151512146, "cur_lr": 0.0005000000237487257, "entropy": 1.042596459388733, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 25.21645736694336}, "num_steps_trained": 1883448, "grad_time_ms": 11881.737, "num_steps_sampled": 1883448, "sample_time_ms": 22203.896, "load_time_ms": 15.472, "update_time_ms": 9.258}, "timesteps_since_restore": 1883448, "time_total_s": 1506.5371828079224, "timestamp": 1558604632, "time_since_restore": 1506.5371828079224, "policy_reward_mean": {}, "training_iteration": 43, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9390>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9f98>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2550>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 1995, "timesteps_total": 1883448, "episode_reward_mean": -533.2874904219475, "episodes_this_iter": 51, "date": "2019-05-23_09-43-52", "time_this_iter_s": 34.63714003562927, "num_metric_batches_dropped": 0, "episode_reward_min": -800.4582699893825}
{"iterations_since_restore": 44, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.2246119724227, "timesteps_this_iter": 46348, "custom_metrics": {"cost1_max": 228.15058335775882, "cost1_min": 18.709687431036556, "system_level_velocity_mean": 15.332860355547854, "cost2_mean": -100.38798297064251, "cost2_max": -14.651240988321657, "outflow_rate_max": 1466.6574033221095, "cost1_mean": 176.99059788548468, "system_level_velocity_min": 12.25130149330309, "system_level_velocity_max": 19.092000282538542, "outflow_rate_min": 497.50056700217027, "cost2_min": -123.40713935361, "outflow_rate_mean": 1211.0749980844394}, "done": false, "pid": 51578, "episode_len_mean": 316.85, "info": {"default": {"kl": 0.013655580580234528, "policy_loss": -0.003754163859412074, "total_loss": 18.468900680541992, "vf_explained_var": 0.9149531722068787, "cur_lr": 0.0005000000237487257, "entropy": 1.0396238565444946, "cur_kl_coeff": 0.02500000223517418, "vf_loss": 18.472312927246094}, "num_steps_trained": 1929796, "grad_time_ms": 12093.909, "num_steps_sampled": 1929796, "sample_time_ms": 22343.405, "load_time_ms": 16.301, "update_time_ms": 9.444}, "timesteps_since_restore": 1929796, "time_total_s": 1542.5949964523315, "timestamp": 1558604669, "time_since_restore": 1542.5949964523315, "policy_reward_mean": {}, "training_iteration": 44, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a94a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9c18>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9e80>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2042, "timesteps_total": 1929796, "episode_reward_mean": -541.9083928605714, "episodes_this_iter": 47, "date": "2019-05-23_09-44-29", "time_this_iter_s": 36.05781364440918, "num_metric_batches_dropped": 0, "episode_reward_min": -800.4582699893825}
{"iterations_since_restore": 45, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.987694566763796, "timesteps_this_iter": 44762, "custom_metrics": {"cost1_max": 228.15058335775882, "cost1_min": 23.177960614248256, "system_level_velocity_mean": 15.290573582630282, "cost2_mean": -101.76496669606, "cost2_max": -15.817502698315954, "outflow_rate_max": 1466.6574033221095, "cost1_mean": 179.10925626286615, "system_level_velocity_min": 12.337838068977767, "system_level_velocity_max": 19.092000282538542, "outflow_rate_min": 506.069524914099, "cost2_min": -123.40713935361, "outflow_rate_mean": 1217.378623996346}, "done": false, "pid": 51578, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.013237285427749157, "policy_loss": -0.0032748884987086058, "total_loss": 20.328798294067383, "vf_explained_var": 0.9055963754653931, "cur_lr": 0.0005000000237487257, "entropy": 1.0283900499343872, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 20.331741333007812}, "num_steps_trained": 1974558, "grad_time_ms": 12061.514, "num_steps_sampled": 1974558, "sample_time_ms": 21927.148, "load_time_ms": 16.323, "update_time_ms": 9.406}, "timesteps_since_restore": 1974558, "time_total_s": 1575.8464317321777, "timestamp": 1558604702, "time_since_restore": 1575.8464317321777, "policy_reward_mean": {}, "training_iteration": 45, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e80>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d30>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530940>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2087, "timesteps_total": 1974558, "episode_reward_mean": -551.251154692924, "episodes_this_iter": 45, "date": "2019-05-23_09-45-02", "time_this_iter_s": 33.25143527984619, "num_metric_batches_dropped": 0, "episode_reward_min": -811.1025835080248}
{"iterations_since_restore": 46, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.41349929436504, "timesteps_this_iter": 44342, "custom_metrics": {"cost1_max": 226.35073763139317, "cost1_min": 140.15764394186178, "system_level_velocity_mean": 15.370471374946089, "cost2_mean": -102.06003988229368, "cost2_max": -87.33115326273443, "outflow_rate_max": 1469.2258928571425, "cost1_mean": 182.83718489213345, "system_level_velocity_min": 11.886493148842952, "system_level_velocity_max": 19.00689266812679, "outflow_rate_min": 1017.6085259931579, "cost2_min": -123.7165007906286, "outflow_rate_mean": 1232.9457476955015}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015022709034383297, "policy_loss": -0.004710368346422911, "total_loss": 25.02422523498535, "vf_explained_var": 0.8840916156768799, "cur_lr": 0.0005000000237487257, "entropy": 1.031111717224121, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 25.02855682373047}, "num_steps_trained": 2018900, "grad_time_ms": 12117.249, "num_steps_sampled": 2018900, "sample_time_ms": 21927.109, "load_time_ms": 16.364, "update_time_ms": 9.344}, "timesteps_since_restore": 2018900, "time_total_s": 1609.264996290207, "timestamp": 1558604735, "time_since_restore": 1609.264996290207, "policy_reward_mean": {}, "training_iteration": 46, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541eb8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845414a8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845412e8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2136, "timesteps_total": 2018900, "episode_reward_mean": -549.230121056371, "episodes_this_iter": 49, "date": "2019-05-23_09-45-35", "time_this_iter_s": 33.418564558029175, "num_metric_batches_dropped": 0, "episode_reward_min": -841.5378065268222}
{"iterations_since_restore": 47, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.38652508320424, "timesteps_this_iter": 45463, "custom_metrics": {"cost1_max": 226.35073763139317, "cost1_min": 23.103883121137486, "system_level_velocity_mean": 15.409376936410142, "cost2_mean": -101.7791268620757, "cost2_max": -18.005539458356935, "outflow_rate_max": 1469.2258928571425, "cost1_mean": 179.54491758541874, "system_level_velocity_min": 11.886493148842952, "system_level_velocity_max": 18.94156345473782, "outflow_rate_min": 466.74083028559994, "cost2_min": -129.11427335031655, "outflow_rate_mean": 1218.7763180292388}, "done": false, "pid": 51578, "episode_len_mean": 319.2, "info": {"default": {"kl": 0.016004780307412148, "policy_loss": -0.004020412918180227, "total_loss": 19.954137802124023, "vf_explained_var": 0.9056307077407837, "cur_lr": 0.0005000000237487257, "entropy": 1.0139065980911255, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 19.9577579498291}, "num_steps_trained": 2064363, "grad_time_ms": 12181.379, "num_steps_sampled": 2064363, "sample_time_ms": 21814.739, "load_time_ms": 15.384, "update_time_ms": 9.077}, "timesteps_since_restore": 2064363, "time_total_s": 1643.0442502498627, "timestamp": 1558604769, "time_since_restore": 1643.0442502498627, "policy_reward_mean": {}, "training_iteration": 47, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845372b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537198>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537400>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2181, "timesteps_total": 2064363, "episode_reward_mean": -538.5278247971493, "episodes_this_iter": 45, "date": "2019-05-23_09-46-09", "time_this_iter_s": 33.77925395965576, "num_metric_batches_dropped": 0, "episode_reward_min": -841.5378065268222}
{"iterations_since_restore": 48, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.38652508320424, "timesteps_this_iter": 43798, "custom_metrics": {"cost1_max": 226.4112462789072, "cost1_min": 23.103883121137486, "system_level_velocity_mean": 15.45354528713907, "cost2_mean": -101.88827621014661, "cost2_max": -18.005539458356935, "outflow_rate_max": 1467.687755102041, "cost1_mean": 179.9863180773974, "system_level_velocity_min": 11.886493148842952, "system_level_velocity_max": 19.009997448431292, "outflow_rate_min": 466.74083028559994, "cost2_min": -129.11427335031655, "outflow_rate_mean": 1221.3429844233274}, "done": false, "pid": 51578, "episode_len_mean": 319.2, "info": {"default": {"kl": 0.014666523784399033, "policy_loss": -0.003630365477874875, "total_loss": 18.66282844543457, "vf_explained_var": 0.9142289161682129, "cur_lr": 0.0005000000237487257, "entropy": 0.9958767294883728, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 18.666091918945312}, "num_steps_trained": 2108161, "grad_time_ms": 12255.782, "num_steps_sampled": 2108161, "sample_time_ms": 21677.185, "load_time_ms": 15.49, "update_time_ms": 9.05}, "timesteps_since_restore": 2108161, "time_total_s": 1676.2808411121368, "timestamp": 1558604802, "time_since_restore": 1676.2808411121368, "policy_reward_mean": {}, "training_iteration": 48, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541e48>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541ef0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2227, "timesteps_total": 2108161, "episode_reward_mean": -534.7923630617374, "episodes_this_iter": 46, "date": "2019-05-23_09-46-42", "time_this_iter_s": 33.23659086227417, "num_metric_batches_dropped": 0, "episode_reward_min": -841.5378065268222}
{"iterations_since_restore": 49, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -103.33977778919439, "timesteps_this_iter": 44382, "custom_metrics": {"cost1_max": 227.0973644775264, "cost1_min": 85.70488363283117, "system_level_velocity_mean": 15.719057119515444, "cost2_mean": -101.21522599838102, "cost2_max": -49.81113834058603, "outflow_rate_max": 1467.687755102041, "cost1_mean": 185.76146018232288, "system_level_velocity_min": 12.668241949102812, "system_level_velocity_max": 19.009997448431292, "outflow_rate_min": 788.0022886389885, "cost2_min": -119.17672432094173, "outflow_rate_mean": 1245.890772191226}, "done": false, "pid": 51578, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01658937893807888, "policy_loss": -0.003955757711082697, "total_loss": 18.98218536376953, "vf_explained_var": 0.9088718891143799, "cur_lr": 0.0005000000237487257, "entropy": 0.9821121096611023, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 18.98572540283203}, "num_steps_trained": 2152543, "grad_time_ms": 12332.617, "num_steps_sampled": 2152543, "sample_time_ms": 21492.028, "load_time_ms": 15.214, "update_time_ms": 9.255}, "timesteps_since_restore": 2152543, "time_total_s": 1710.3743875026703, "timestamp": 1558604837, "time_since_restore": 1710.3743875026703, "policy_reward_mean": {}, "training_iteration": 49, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541128>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845410f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541eb8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2276, "timesteps_total": 2152543, "episode_reward_mean": -519.2590303171573, "episodes_this_iter": 49, "date": "2019-05-23_09-47-17", "time_this_iter_s": 34.09354639053345, "num_metric_batches_dropped": 0, "episode_reward_min": -742.9054020966016}
{"iterations_since_restore": 50, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.729593248953165, "timesteps_this_iter": 45187, "custom_metrics": {"cost1_max": 227.0973644775264, "cost1_min": 17.96464171189386, "system_level_velocity_mean": 15.609448117986645, "cost2_mean": -99.66915884595825, "cost2_max": -14.83690196256103, "outflow_rate_max": 1467.687755102041, "cost1_mean": 182.54103678494005, "system_level_velocity_min": 12.158469566388378, "system_level_velocity_max": 19.009997448431292, "outflow_rate_min": 492.0625426222078, "cost2_min": -124.99506749637861, "outflow_rate_mean": 1231.9014759191873}, "done": false, "pid": 51578, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.01859205774962902, "policy_loss": -0.0045775845646858215, "total_loss": 22.252338409423828, "vf_explained_var": 0.8928326368331909, "cur_lr": 0.0005000000237487257, "entropy": 0.9760960340499878, "cur_kl_coeff": 0.02500000223517418, "vf_loss": 22.256450653076172}, "num_steps_trained": 2197730, "grad_time_ms": 12500.201, "num_steps_sampled": 2197730, "sample_time_ms": 21368.003, "load_time_ms": 15.222, "update_time_ms": 9.115}, "timesteps_since_restore": 2197730, "time_total_s": 1744.2306787967682, "timestamp": 1558604870, "time_since_restore": 1744.2306787967682, "policy_reward_mean": {}, "training_iteration": 50, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537d30>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537048>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537390>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2321, "timesteps_total": 2197730, "episode_reward_mean": -524.005277927941, "episodes_this_iter": 45, "date": "2019-05-23_09-47-50", "time_this_iter_s": 33.8562912940979, "num_metric_batches_dropped": 0, "episode_reward_min": -802.2095749663182}
{"iterations_since_restore": 51, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.729593248953165, "timesteps_this_iter": 46080, "custom_metrics": {"cost1_max": 225.38818385821887, "cost1_min": 17.96464171189386, "system_level_velocity_mean": 15.296681936050042, "cost2_mean": -99.907241217744, "cost2_max": -14.83690196256103, "outflow_rate_max": 1464.51629190764, "cost1_mean": 178.21832926613112, "system_level_velocity_min": 12.158469566388378, "system_level_velocity_max": 18.945230313473488, "outflow_rate_min": 492.0625426222078, "cost2_min": -124.99506749637861, "outflow_rate_mean": 1207.141090362565}, "done": false, "pid": 51578, "episode_len_mean": 318.97, "info": {"default": {"kl": 0.01764076016843319, "policy_loss": -0.004424793645739555, "total_loss": 18.59624481201172, "vf_explained_var": 0.9101250767707825, "cur_lr": 0.0005000000237487257, "entropy": 0.9707571864128113, "cur_kl_coeff": 0.02500000223517418, "vf_loss": 18.60022735595703}, "num_steps_trained": 2243810, "grad_time_ms": 12640.221, "num_steps_sampled": 2243810, "sample_time_ms": 21195.143, "load_time_ms": 16.202, "update_time_ms": 9.159}, "timesteps_since_restore": 2243810, "time_total_s": 1777.47709608078, "timestamp": 1558604904, "time_since_restore": 1777.47709608078, "policy_reward_mean": {}, "training_iteration": 51, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530b00>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530898>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d68>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2368, "timesteps_total": 2243810, "episode_reward_mean": -549.5391748294105, "episodes_this_iter": 47, "date": "2019-05-23_09-48-24", "time_this_iter_s": 33.24641728401184, "num_metric_batches_dropped": 0, "episode_reward_min": -802.2095749663182}
{"iterations_since_restore": 52, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.69782447548434, "timesteps_this_iter": 45993, "custom_metrics": {"cost1_max": 225.38818385821887, "cost1_min": 85.29599892944293, "system_level_velocity_mean": 15.001492552281443, "cost2_mean": -101.16108107779208, "cost2_max": -45.32704018550667, "outflow_rate_max": 1456.9356568237788, "cost1_mean": 175.47789514061304, "system_level_velocity_min": 12.313406933523511, "system_level_velocity_max": 18.945230313473488, "outflow_rate_min": 798.9859547399693, "cost2_min": -122.1391773966615, "outflow_rate_mean": 1198.4496149137292}, "done": false, "pid": 51578, "episode_len_mean": 319.95, "info": {"default": {"kl": 0.0179945956915617, "policy_loss": -0.005280747544020414, "total_loss": 16.779359817504883, "vf_explained_var": 0.9193739891052246, "cur_lr": 0.0005000000237487257, "entropy": 0.9544742107391357, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 16.784191131591797}, "num_steps_trained": 2289803, "grad_time_ms": 12693.184, "num_steps_sampled": 2289803, "sample_time_ms": 21199.052, "load_time_ms": 15.873, "update_time_ms": 9.468}, "timesteps_since_restore": 2289803, "time_total_s": 1812.0774714946747, "timestamp": 1558604938, "time_since_restore": 1812.0774714946747, "policy_reward_mean": {}, "training_iteration": 52, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537f60>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537cf8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c88>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2415, "timesteps_total": 2289803, "episode_reward_mean": -569.2077395420679, "episodes_this_iter": 47, "date": "2019-05-23_09-48-58", "time_this_iter_s": 34.60037541389465, "num_metric_batches_dropped": 0, "episode_reward_min": -798.2216414283066}
{"iterations_since_restore": 53, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.69782447548434, "timesteps_this_iter": 45036, "custom_metrics": {"cost1_max": 224.82728228338067, "cost1_min": 85.29599892944293, "system_level_velocity_mean": 15.087192490663174, "cost2_mean": -99.69202603756939, "cost2_max": -45.32704018550667, "outflow_rate_max": 1454.929923177526, "cost1_mean": 177.2499890358264, "system_level_velocity_min": 11.219389206462967, "system_level_velocity_max": 18.873720068721553, "outflow_rate_min": 811.455473037938, "cost2_min": -122.88716245201043, "outflow_rate_mean": 1209.005406266683}, "done": false, "pid": 51578, "episode_len_mean": 321.02, "info": {"default": {"kl": 0.018110044300556183, "policy_loss": -0.00444652559235692, "total_loss": 19.179227828979492, "vf_explained_var": 0.9122688174247742, "cur_lr": 0.0005000000237487257, "entropy": 0.9448108077049255, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 19.1832218170166}, "num_steps_trained": 2334839, "grad_time_ms": 12800.079, "num_steps_sampled": 2334839, "sample_time_ms": 21121.876, "load_time_ms": 16.745, "update_time_ms": 9.878}, "timesteps_since_restore": 2334839, "time_total_s": 1847.0182003974915, "timestamp": 1558604973, "time_since_restore": 1847.0182003974915, "policy_reward_mean": {}, "training_iteration": 53, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849062b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849067b8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906710>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2463, "timesteps_total": 2334839, "episode_reward_mean": -558.744573236999, "episodes_this_iter": 48, "date": "2019-05-23_09-49-33", "time_this_iter_s": 34.94072890281677, "num_metric_batches_dropped": 0, "episode_reward_min": -812.4409378263318}
{"iterations_since_restore": 54, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.71812806019197, "timesteps_this_iter": 45458, "custom_metrics": {"cost1_max": 225.0274450362872, "cost1_min": 86.88921159904021, "system_level_velocity_mean": 15.133306253097583, "cost2_mean": -99.60077614443415, "cost2_max": -49.64606675852696, "outflow_rate_max": 1454.929923177526, "cost1_mean": 178.98411916767824, "system_level_velocity_min": 11.219389206462967, "system_level_velocity_max": 18.817003174308525, "outflow_rate_min": 811.455473037938, "cost2_min": -122.88716245201043, "outflow_rate_mean": 1211.1358025293032}, "done": false, "pid": 51578, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.017983512952923775, "policy_loss": -0.005756058264523745, "total_loss": 19.773954391479492, "vf_explained_var": 0.9064937829971313, "cur_lr": 0.0005000000237487257, "entropy": 0.9374558329582214, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 19.779260635375977}, "num_steps_trained": 2380297, "grad_time_ms": 12836.977, "num_steps_sampled": 2380297, "sample_time_ms": 20926.318, "load_time_ms": 16.8, "update_time_ms": 9.584}, "timesteps_since_restore": 2380297, "time_total_s": 1881.464651107788, "timestamp": 1558605008, "time_since_restore": 1881.464651107788, "policy_reward_mean": {}, "training_iteration": 54, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537940>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537588>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537208>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2510, "timesteps_total": 2380297, "episode_reward_mean": -560.8454365251946, "episodes_this_iter": 47, "date": "2019-05-23_09-50-08", "time_this_iter_s": 34.44645071029663, "num_metric_batches_dropped": 0, "episode_reward_min": -812.4409378263318}
{"iterations_since_restore": 55, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -255.64180875673733, "timesteps_this_iter": 44596, "custom_metrics": {"cost1_max": 225.3037366243803, "cost1_min": 147.88097345180927, "system_level_velocity_mean": 15.280392946306913, "cost2_mean": -99.86063147880859, "cost2_max": -83.21952849164589, "outflow_rate_max": 1458.6965039076613, "cost1_mean": 181.990657843982, "system_level_velocity_min": 12.384748916952475, "system_level_velocity_max": 18.817003174308525, "outflow_rate_min": 1061.4360933095982, "cost2_min": -117.3414778165653, "outflow_rate_mean": 1224.3594639367477}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01718246191740036, "policy_loss": -0.0042173974215984344, "total_loss": 19.74753189086914, "vf_explained_var": 0.908582866191864, "cur_lr": 0.0005000000237487257, "entropy": 0.9224507808685303, "cur_kl_coeff": 0.02500000409781933, "vf_loss": 19.751317977905273}, "num_steps_trained": 2424893, "grad_time_ms": 12751.985, "num_steps_sampled": 2424893, "sample_time_ms": 20984.565, "load_time_ms": 17.132, "update_time_ms": 9.476}, "timesteps_since_restore": 2424893, "time_total_s": 1914.4589743614197, "timestamp": 1558605041, "time_since_restore": 1914.4589743614197, "policy_reward_mean": {}, "training_iteration": 55, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530f98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530a58>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e48>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2552, "timesteps_total": 2424893, "episode_reward_mean": -553.4920434171881, "episodes_this_iter": 42, "date": "2019-05-23_09-50-41", "time_this_iter_s": 32.99432325363159, "num_metric_batches_dropped": 0, "episode_reward_min": -787.43967132827}
{"iterations_since_restore": 56, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -251.27506805684004, "timesteps_this_iter": 44804, "custom_metrics": {"cost1_max": 227.1625405930777, "cost1_min": 141.86814958695422, "system_level_velocity_mean": 15.470935917524402, "cost2_mean": -100.0516270621977, "cost2_max": -85.27726272462802, "outflow_rate_max": 1458.6965039076613, "cost1_mean": 184.10104448672348, "system_level_velocity_min": 12.029314300681586, "system_level_velocity_max": 19.050457336973622, "outflow_rate_min": 1017.5446920488623, "cost2_min": -117.24806218033783, "outflow_rate_mean": 1235.714596895096}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.020418008789420128, "policy_loss": -0.006496909540146589, "total_loss": 22.78416633605957, "vf_explained_var": 0.8887566328048706, "cur_lr": 0.0005000000237487257, "entropy": 0.9214137196540833, "cur_kl_coeff": 0.025000005960464478, "vf_loss": 22.79015350341797}, "num_steps_trained": 2469697, "grad_time_ms": 12833.078, "num_steps_sampled": 2469697, "sample_time_ms": 21203.339, "load_time_ms": 17.781, "update_time_ms": 9.135}, "timesteps_since_restore": 2469697, "time_total_s": 1950.891191482544, "timestamp": 1558605077, "time_since_restore": 1950.891191482544, "policy_reward_mean": {}, "training_iteration": 56, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845412b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845417b8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845416d8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2602, "timesteps_total": 2469697, "episode_reward_mean": -538.9489997506686, "episodes_this_iter": 50, "date": "2019-05-23_09-51-17", "time_this_iter_s": 36.43221712112427, "num_metric_batches_dropped": 0, "episode_reward_min": -831.0219070057179}
{"iterations_since_restore": 57, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.18421342019323, "timesteps_this_iter": 44602, "custom_metrics": {"cost1_max": 227.1625405930777, "cost1_min": 85.33604568516887, "system_level_velocity_mean": 15.578135493896912, "cost2_mean": -99.7422083347642, "cost2_max": -49.70204453289503, "outflow_rate_max": 1459.730204588771, "cost1_mean": 184.01556812497176, "system_level_velocity_min": 12.029314300681586, "system_level_velocity_max": 19.050457336973622, "outflow_rate_min": 810.7815744674683, "cost2_min": -116.07602644522476, "outflow_rate_mean": 1235.3691676033761}, "done": false, "pid": 51578, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016633834689855576, "policy_loss": -0.004324228502810001, "total_loss": 19.71475601196289, "vf_explained_var": 0.90140700340271, "cur_lr": 0.0005000000237487257, "entropy": 0.9059358835220337, "cur_kl_coeff": 0.03749999403953552, "vf_loss": 19.71845817565918}, "num_steps_trained": 2514299, "grad_time_ms": 12901.165, "num_steps_sampled": 2514299, "sample_time_ms": 21266.848, "load_time_ms": 18.35, "update_time_ms": 9.276}, "timesteps_since_restore": 2514299, "time_total_s": 1986.0142621994019, "timestamp": 1558605112, "time_since_restore": 1986.0142621994019, "policy_reward_mean": {}, "training_iteration": 57, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845499e8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549dd8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2649, "timesteps_total": 2514299, "episode_reward_mean": -527.9615192539449, "episodes_this_iter": 47, "date": "2019-05-23_09-51-52", "time_this_iter_s": 35.12307071685791, "num_metric_batches_dropped": 0, "episode_reward_min": -831.0219070057179}
{"iterations_since_restore": 58, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.86144113627909, "timesteps_this_iter": 45193, "custom_metrics": {"cost1_max": 227.5986602787326, "cost1_min": 23.022990576098444, "system_level_velocity_mean": 15.40328650116436, "cost2_mean": -99.46098092510582, "cost2_max": -20.53041434560591, "outflow_rate_max": 1459.730204588771, "cost1_mean": 178.21097920481805, "system_level_velocity_min": 12.16225991894238, "system_level_velocity_max": 19.054097672411753, "outflow_rate_min": 434.2800984285303, "cost2_min": -123.82351682089316, "outflow_rate_mean": 1206.0544027889891}, "done": false, "pid": 51578, "episode_len_mean": 317.22, "info": {"default": {"kl": 0.018470343202352524, "policy_loss": -0.005196611396968365, "total_loss": 18.375059127807617, "vf_explained_var": 0.9121916890144348, "cur_lr": 0.0005000000237487257, "entropy": 0.8996697664260864, "cur_kl_coeff": 0.03749999776482582, "vf_loss": 18.379562377929688}, "num_steps_trained": 2559492, "grad_time_ms": 12907.646, "num_steps_sampled": 2559492, "sample_time_ms": 21297.925, "load_time_ms": 18.203, "update_time_ms": 9.446}, "timesteps_since_restore": 2559492, "time_total_s": 2019.614308834076, "timestamp": 1558605146, "time_since_restore": 2019.614308834076, "policy_reward_mean": {}, "training_iteration": 58, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534400>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e48>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2694, "timesteps_total": 2559492, "episode_reward_mean": -534.3655479694239, "episodes_this_iter": 45, "date": "2019-05-23_09-52-26", "time_this_iter_s": 33.60004663467407, "num_metric_batches_dropped": 0, "episode_reward_min": -813.698873403523}
{"iterations_since_restore": 59, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.86144113627909, "timesteps_this_iter": 44707, "custom_metrics": {"cost1_max": 227.5986602787326, "cost1_min": 23.022990576098444, "system_level_velocity_mean": 15.357613840087799, "cost2_mean": -99.5762944774663, "cost2_max": -20.53041434560591, "outflow_rate_max": 1462.2190474163772, "cost1_mean": 177.4896641745034, "system_level_velocity_min": 12.16225991894238, "system_level_velocity_max": 19.06377557698179, "outflow_rate_min": 434.2800984285303, "cost2_min": -123.82351682089316, "outflow_rate_mean": 1205.2056811942284}, "done": false, "pid": 51578, "episode_len_mean": 317.04, "info": {"default": {"kl": 0.0212530717253685, "policy_loss": -0.006239580921828747, "total_loss": 20.760202407836914, "vf_explained_var": 0.8995644450187683, "cur_lr": 0.0005000000237487257, "entropy": 0.8813343644142151, "cur_kl_coeff": 0.03749999403953552, "vf_loss": 20.765644073486328}, "num_steps_trained": 2604199, "grad_time_ms": 12792.994, "num_steps_sampled": 2604199, "sample_time_ms": 21310.824, "load_time_ms": 17.608, "update_time_ms": 9.227}, "timesteps_since_restore": 2604199, "time_total_s": 2052.6610040664673, "timestamp": 1558605179, "time_since_restore": 2052.6610040664673, "policy_reward_mean": {}, "training_iteration": 59, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537198>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e48>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468beb8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2741, "timesteps_total": 2604199, "episode_reward_mean": -537.3477742270715, "episodes_this_iter": 47, "date": "2019-05-23_09-52-59", "time_this_iter_s": 33.04669523239136, "num_metric_batches_dropped": 0, "episode_reward_min": -813.698873403523}
{"iterations_since_restore": 60, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.12234543775993, "timesteps_this_iter": 43032, "custom_metrics": {"cost1_max": 227.45004604298896, "cost1_min": 24.183576918461853, "system_level_velocity_mean": 15.742191568248645, "cost2_mean": -99.53938167428498, "cost2_max": -21.477768636549733, "outflow_rate_max": 1468.1504587067, "cost1_mean": 185.29584526239339, "system_level_velocity_min": 12.262452380964492, "system_level_velocity_max": 19.06834455337609, "outflow_rate_min": 434.2800984285303, "cost2_min": -127.69420303691048, "outflow_rate_mean": 1244.0843480998956}, "done": false, "pid": 51578, "episode_len_mean": 321.94, "info": {"default": {"kl": 0.01760011538863182, "policy_loss": -0.005900530144572258, "total_loss": 21.913490295410156, "vf_explained_var": 0.889288604259491, "cur_lr": 0.0005000000237487257, "entropy": 0.8672928810119629, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 21.918399810791016}, "num_steps_trained": 2647231, "grad_time_ms": 12518.386, "num_steps_sampled": 2647231, "sample_time_ms": 21397.344, "load_time_ms": 18.184, "update_time_ms": 9.053}, "timesteps_since_restore": 2647231, "time_total_s": 2084.6485216617584, "timestamp": 1558605211, "time_since_restore": 2084.6485216617584, "policy_reward_mean": {}, "training_iteration": 60, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534c50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549a20>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845497f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2789, "timesteps_total": 2647231, "episode_reward_mean": -513.848422994038, "episodes_this_iter": 48, "date": "2019-05-23_09-53-31", "time_this_iter_s": 31.987517595291138, "num_metric_batches_dropped": 0, "episode_reward_min": -790.5562568625162}
{"iterations_since_restore": 61, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -250.3415888692341, "timesteps_this_iter": 43085, "custom_metrics": {"cost1_max": 227.45004604298896, "cost1_min": 143.82120929356108, "system_level_velocity_mean": 15.86876147958149, "cost2_mean": -99.40464472336652, "cost2_max": -83.40257517996002, "outflow_rate_max": 1468.1504587067, "cost1_mean": 188.95905971933536, "system_level_velocity_min": 12.108247339015861, "system_level_velocity_max": 19.06834455337609, "outflow_rate_min": 1008.8541029900331, "cost2_min": -127.69420303691048, "outflow_rate_mean": 1259.2073130560464}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01830889843404293, "policy_loss": -0.0053898729383945465, "total_loss": 19.82265281677246, "vf_explained_var": 0.8989037871360779, "cur_lr": 0.0005000000237487257, "entropy": 0.8722034692764282, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 19.827011108398438}, "num_steps_trained": 2690316, "grad_time_ms": 12422.176, "num_steps_sampled": 2690316, "sample_time_ms": 21549.329, "load_time_ms": 17.267, "update_time_ms": 8.865}, "timesteps_since_restore": 2690316, "time_total_s": 2118.43944811821, "timestamp": 1558605245, "time_since_restore": 2118.43944811821, "policy_reward_mean": {}, "training_iteration": 61, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549748>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549940>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549320>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2834, "timesteps_total": 2690316, "episode_reward_mean": -507.98126010921357, "episodes_this_iter": 45, "date": "2019-05-23_09-54-05", "time_this_iter_s": 33.790926456451416, "num_metric_batches_dropped": 0, "episode_reward_min": -834.7405767896823}
{"iterations_since_restore": 62, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.143581832273473, "timesteps_this_iter": 43298, "custom_metrics": {"cost1_max": 227.45004604298896, "cost1_min": 18.76478834240994, "system_level_velocity_mean": 16.1242864384289, "cost2_mean": -97.38911713731642, "cost2_max": -15.070696080710796, "outflow_rate_max": 1466.787893155695, "cost1_mean": 190.01455138134574, "system_level_velocity_min": 12.108247339015861, "system_level_velocity_max": 19.06834455337609, "outflow_rate_min": 497.50056700217027, "cost2_min": -116.28560382847033, "outflow_rate_mean": 1258.617969204345}, "done": false, "pid": 51578, "episode_len_mean": 322.03, "info": {"default": {"kl": 0.016596375033259392, "policy_loss": -0.0051383222453296185, "total_loss": 22.066753387451172, "vf_explained_var": 0.891149640083313, "cur_lr": 0.0005000000237487257, "entropy": 0.8558372855186462, "cur_kl_coeff": 0.05625000223517418, "vf_loss": 22.07095718383789}, "num_steps_trained": 2733614, "grad_time_ms": 12475.837, "num_steps_sampled": 2733614, "sample_time_ms": 21440.552, "load_time_ms": 17.289, "update_time_ms": 8.906}, "timesteps_since_restore": 2733614, "time_total_s": 2152.4669959545135, "timestamp": 1558605279, "time_since_restore": 2152.4669959545135, "policy_reward_mean": {}, "training_iteration": 62, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845492e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845495f8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549f60>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2879, "timesteps_total": 2733614, "episode_reward_mean": -486.5463203310574, "episodes_this_iter": 45, "date": "2019-05-23_09-54-39", "time_this_iter_s": 34.02754783630371, "num_metric_batches_dropped": 0, "episode_reward_min": -834.7405767896823}
{"iterations_since_restore": 63, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.143581832273473, "timesteps_this_iter": 43525, "custom_metrics": {"cost1_max": 226.89707141882894, "cost1_min": 18.76478834240994, "system_level_velocity_mean": 16.014362570156205, "cost2_mean": -97.5666084642473, "cost2_max": -15.070696080710796, "outflow_rate_max": 1461.0820664456796, "cost1_mean": 187.15600712694462, "system_level_velocity_min": 12.32541003172169, "system_level_velocity_max": 19.000195290735643, "outflow_rate_min": 497.50056700217027, "cost2_min": -119.15596614363497, "outflow_rate_mean": 1247.0591414787093}, "done": false, "pid": 51578, "episode_len_mean": 319.85, "info": {"default": {"kl": 0.017228305339813232, "policy_loss": -0.004555854480713606, "total_loss": 21.190170288085938, "vf_explained_var": 0.8863933086395264, "cur_lr": 0.0005000000237487257, "entropy": 0.8630947470664978, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 21.193758010864258}, "num_steps_trained": 2777139, "grad_time_ms": 12309.378, "num_steps_sampled": 2777139, "sample_time_ms": 21437.89, "load_time_ms": 17.067, "update_time_ms": 8.657}, "timesteps_since_restore": 2777139, "time_total_s": 2185.6998767852783, "timestamp": 1558605312, "time_since_restore": 2185.6998767852783, "policy_reward_mean": {}, "training_iteration": 63, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549128>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845498d0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2930, "timesteps_total": 2777139, "episode_reward_mean": -491.53244255047014, "episodes_this_iter": 51, "date": "2019-05-23_09-55-12", "time_this_iter_s": 33.23288083076477, "num_metric_batches_dropped": 0, "episode_reward_min": -783.2286964321349}
{"iterations_since_restore": 64, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.183082983771506, "timesteps_this_iter": 43730, "custom_metrics": {"cost1_max": 226.89707141882894, "cost1_min": 18.049324307843307, "system_level_velocity_mean": 15.761366931473953, "cost2_mean": -98.72926565426562, "cost2_max": -14.688322305060435, "outflow_rate_max": 1461.333589400513, "cost1_mean": 184.19055716852031, "system_level_velocity_min": 12.25646275059722, "system_level_velocity_max": 18.966456031601666, "outflow_rate_min": 494.27405165189856, "cost2_min": -119.15596614363497, "outflow_rate_mean": 1236.0811579762415}, "done": false, "pid": 51578, "episode_len_mean": 319.84, "info": {"default": {"kl": 0.01623133197426796, "policy_loss": -0.005658384412527084, "total_loss": 20.85226058959961, "vf_explained_var": 0.8911439180374146, "cur_lr": 0.0005000000237487257, "entropy": 0.8596467971801758, "cur_kl_coeff": 0.05625000596046448, "vf_loss": 20.857006072998047}, "num_steps_trained": 2820869, "grad_time_ms": 12154.39, "num_steps_sampled": 2820869, "sample_time_ms": 21506.576, "load_time_ms": 17.259, "update_time_ms": 8.651}, "timesteps_since_restore": 2820869, "time_total_s": 2219.2826607227325, "timestamp": 1558605346, "time_since_restore": 2219.2826607227325, "policy_reward_mean": {}, "training_iteration": 64, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845497f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549080>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 2975, "timesteps_total": 2820869, "episode_reward_mean": -509.1711473188019, "episodes_this_iter": 45, "date": "2019-05-23_09-55-46", "time_this_iter_s": 33.582783937454224, "num_metric_batches_dropped": 0, "episode_reward_min": -795.466528676938}
{"iterations_since_restore": 65, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.183082983771506, "timesteps_this_iter": 44106, "custom_metrics": {"cost1_max": 226.18166291529204, "cost1_min": 18.049324307843307, "system_level_velocity_mean": 15.58166012962855, "cost2_mean": -99.0726165674052, "cost2_max": -14.688322305060435, "outflow_rate_max": 1461.333589400513, "cost1_mean": 182.79018156963062, "system_level_velocity_min": 12.25646275059722, "system_level_velocity_max": 19.01675339909669, "outflow_rate_min": 494.27405165189856, "cost2_min": -118.90430799321686, "outflow_rate_mean": 1228.6923209826848}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.016133064404129982, "policy_loss": -0.005548782646656036, "total_loss": 17.166913986206055, "vf_explained_var": 0.9147776365280151, "cur_lr": 0.0005000000237487257, "entropy": 0.8626149892807007, "cur_kl_coeff": 0.05624999478459358, "vf_loss": 17.171554565429688}, "num_steps_trained": 2864975, "grad_time_ms": 12106.395, "num_steps_sampled": 2864975, "sample_time_ms": 21712.218, "load_time_ms": 16.883, "update_time_ms": 8.668}, "timesteps_since_restore": 2864975, "time_total_s": 2253.866986989975, "timestamp": 1558605381, "time_since_restore": 2253.866986989975, "policy_reward_mean": {}, "training_iteration": 65, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845497b8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845495c0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3019, "timesteps_total": 2864975, "episode_reward_mean": -524.2172610685018, "episodes_this_iter": 44, "date": "2019-05-23_09-56-21", "time_this_iter_s": 34.58432626724243, "num_metric_batches_dropped": 0, "episode_reward_min": -795.466528676938}
{"iterations_since_restore": 66, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -169.0814583269171, "timesteps_this_iter": 43324, "custom_metrics": {"cost1_max": 227.7070269746684, "cost1_min": 148.39406622048386, "system_level_velocity_mean": 15.858286045074449, "cost2_mean": -98.51130067803766, "cost2_max": -66.43256589484308, "outflow_rate_max": 1464.1817304821616, "cost1_mean": 188.14533627096083, "system_level_velocity_min": 12.518242644898026, "system_level_velocity_max": 19.15406093432222, "outflow_rate_min": 1087.3866318640203, "cost2_min": -115.61537218193816, "outflow_rate_mean": 1250.9926634235856}, "done": false, "pid": 51578, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.01801295578479767, "policy_loss": -0.00567741459235549, "total_loss": 20.284700393676758, "vf_explained_var": 0.8948081731796265, "cur_lr": 0.0005000000237487257, "entropy": 0.8515825271606445, "cur_kl_coeff": 0.05625000223517418, "vf_loss": 20.289363861083984}, "num_steps_trained": 2908299, "grad_time_ms": 11999.701, "num_steps_sampled": 2908299, "sample_time_ms": 21705.976, "load_time_ms": 16.069, "update_time_ms": 8.961}, "timesteps_since_restore": 2908299, "time_total_s": 2289.1494641304016, "timestamp": 1558605416, "time_since_restore": 2289.1494641304016, "policy_reward_mean": {}, "training_iteration": 66, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537518>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845373c8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375c0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3069, "timesteps_total": 2908299, "episode_reward_mean": -506.7990133048919, "episodes_this_iter": 50, "date": "2019-05-23_09-56-56", "time_this_iter_s": 35.282477140426636, "num_metric_batches_dropped": 0, "episode_reward_min": -760.1477401258676}
{"iterations_since_restore": 67, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -168.5893312467723, "timesteps_this_iter": 45102, "custom_metrics": {"cost1_max": 227.7070269746684, "cost1_min": 136.76571929704386, "system_level_velocity_mean": 15.632142325976838, "cost2_mean": -99.96742841158368, "cost2_max": -66.43256589484308, "outflow_rate_max": 1464.1817304821616, "cost1_mean": 183.98047582387306, "system_level_velocity_min": 11.468431796576017, "system_level_velocity_max": 19.15406093432222, "outflow_rate_min": 1065.0827890353687, "cost2_min": -127.78054223369158, "outflow_rate_mean": 1237.3131515634177}, "done": false, "pid": 51578, "episode_len_mean": 321.72, "info": {"default": {"kl": 0.0178772434592247, "policy_loss": -0.0068895649164915085, "total_loss": 18.93389892578125, "vf_explained_var": 0.9045811295509338, "cur_lr": 0.0005000000237487257, "entropy": 0.8558630347251892, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 18.939783096313477}, "num_steps_trained": 2953401, "grad_time_ms": 11921.331, "num_steps_sampled": 2953401, "sample_time_ms": 21716.004, "load_time_ms": 16.269, "update_time_ms": 9.25}, "timesteps_since_restore": 2953401, "time_total_s": 2323.5686478614807, "timestamp": 1558605450, "time_since_restore": 2323.5686478614807, "policy_reward_mean": {}, "training_iteration": 67, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549d68>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549cc0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3115, "timesteps_total": 2953401, "episode_reward_mean": -519.7709672182376, "episodes_this_iter": 46, "date": "2019-05-23_09-57-30", "time_this_iter_s": 34.4191837310791, "num_metric_batches_dropped": 0, "episode_reward_min": -787.6628204969703}
{"iterations_since_restore": 68, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -168.5893312467723, "timesteps_this_iter": 44217, "custom_metrics": {"cost1_max": 227.2456641293711, "cost1_min": 136.76571929704386, "system_level_velocity_mean": 15.38157218600094, "cost2_mean": -100.98327244540164, "cost2_max": -70.69168246171992, "outflow_rate_max": 1460.5027026167236, "cost1_mean": 181.66893183006084, "system_level_velocity_min": 11.468431796576017, "system_level_velocity_max": 19.04491531872254, "outflow_rate_min": 1065.0827890353687, "cost2_min": -127.78054223369158, "outflow_rate_mean": 1226.9864431131327}, "done": false, "pid": 51578, "episode_len_mean": 322.82, "info": {"default": {"kl": 0.017366478219628334, "policy_loss": -0.0045081875286996365, "total_loss": 19.556516647338867, "vf_explained_var": 0.906761884689331, "cur_lr": 0.0005000000237487257, "entropy": 0.8563938140869141, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 19.560049057006836}, "num_steps_trained": 2997618, "grad_time_ms": 11823.301, "num_steps_sampled": 2997618, "sample_time_ms": 21824.652, "load_time_ms": 16.372, "update_time_ms": 9.007}, "timesteps_since_restore": 2997618, "time_total_s": 2357.265611410141, "timestamp": 1558605484, "time_since_restore": 2357.265611410141, "policy_reward_mean": {}, "training_iteration": 68, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530588>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530710>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e48>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3159, "timesteps_total": 2997618, "episode_reward_mean": -540.73315626111, "episodes_this_iter": 44, "date": "2019-05-23_09-58-04", "time_this_iter_s": 33.69696354866028, "num_metric_batches_dropped": 0, "episode_reward_min": -787.6628204969703}
{"iterations_since_restore": 69, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -168.59998930589555, "timesteps_this_iter": 44538, "custom_metrics": {"cost1_max": 227.2456641293711, "cost1_min": 145.23370221470014, "system_level_velocity_mean": 15.504402179442788, "cost2_mean": -101.35696078261333, "cost2_max": -71.25695731239918, "outflow_rate_max": 1459.581962642057, "cost1_mean": 183.69139931617303, "system_level_velocity_min": 12.335745095185425, "system_level_velocity_max": 19.06258314878693, "outflow_rate_min": 1047.015647563077, "cost2_min": -117.68525039879137, "outflow_rate_mean": 1232.3852699746128}, "done": false, "pid": 51578, "episode_len_mean": 323.92, "info": {"default": {"kl": 0.018969444558024406, "policy_loss": -0.0064652771688997746, "total_loss": 17.789365768432617, "vf_explained_var": 0.9155857563018799, "cur_lr": 0.0005000000237487257, "entropy": 0.8376563191413879, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 17.794763565063477}, "num_steps_trained": 3042156, "grad_time_ms": 11720.353, "num_steps_sampled": 3042156, "sample_time_ms": 22030.766, "load_time_ms": 17.192, "update_time_ms": 9.018}, "timesteps_since_restore": 3042156, "time_total_s": 2391.3607172966003, "timestamp": 1558605518, "time_since_restore": 2391.3607172966003, "policy_reward_mean": {}, "training_iteration": 69, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845419e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534860>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3207, "timesteps_total": 3042156, "episode_reward_mean": -535.4129449129565, "episodes_this_iter": 48, "date": "2019-05-23_09-58-38", "time_this_iter_s": 34.09510588645935, "num_metric_batches_dropped": 0, "episode_reward_min": -792.1888095933867}
{"iterations_since_restore": 70, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -168.59998930589555, "timesteps_this_iter": 45055, "custom_metrics": {"cost1_max": 226.47953985334053, "cost1_min": 145.01285624711198, "system_level_velocity_mean": 15.431895471934299, "cost2_mean": -101.37153279416896, "cost2_max": -71.25695731239918, "outflow_rate_max": 1458.9592467994107, "cost1_mean": 182.8372313485703, "system_level_velocity_min": 12.347182113927794, "system_level_velocity_max": 19.06258314878693, "outflow_rate_min": 1047.015647563077, "cost2_min": -119.80770208675297, "outflow_rate_mean": 1229.9189194662836}, "done": false, "pid": 51578, "episode_len_mean": 323.92, "info": {"default": {"kl": 0.016967758536338806, "policy_loss": -0.003741249442100525, "total_loss": 18.2701473236084, "vf_explained_var": 0.9127017259597778, "cur_lr": 0.0005000000237487257, "entropy": 0.8394961357116699, "cur_kl_coeff": 0.05625000596046448, "vf_loss": 18.27293586730957}, "num_steps_trained": 3087211, "grad_time_ms": 11866.884, "num_steps_sampled": 3087211, "sample_time_ms": 22201.324, "load_time_ms": 16.36, "update_time_ms": 9.013}, "timesteps_since_restore": 3087211, "time_total_s": 2426.496087551117, "timestamp": 1558605553, "time_since_restore": 2426.496087551117, "policy_reward_mean": {}, "training_iteration": 70, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e48>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c88>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3255, "timesteps_total": 3087211, "episode_reward_mean": -539.8020179458606, "episodes_this_iter": 48, "date": "2019-05-23_09-59-13", "time_this_iter_s": 35.1353702545166, "num_metric_batches_dropped": 0, "episode_reward_min": -795.4893746848433}
{"iterations_since_restore": 71, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -247.90086134004898, "timesteps_this_iter": 42278, "custom_metrics": {"cost1_max": 227.2314052016244, "cost1_min": 145.01285624711198, "system_level_velocity_mean": 15.641004077807168, "cost2_mean": -100.7790882322341, "cost2_max": -86.85308863983781, "outflow_rate_max": 1459.7047961440405, "cost1_mean": 186.27571293879464, "system_level_velocity_min": 12.347182113927794, "system_level_velocity_max": 19.179509840775207, "outflow_rate_min": 1058.2277340572814, "cost2_min": -119.81577470711977, "outflow_rate_mean": 1247.249699860456}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017477495595812798, "policy_loss": -0.004940415732562542, "total_loss": 18.058027267456055, "vf_explained_var": 0.9111906886100769, "cur_lr": 0.0005000000237487257, "entropy": 0.8339305520057678, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 18.061983108520508}, "num_steps_trained": 3129489, "grad_time_ms": 11965.725, "num_steps_sampled": 3129489, "sample_time_ms": 22282.663, "load_time_ms": 17.19, "update_time_ms": 9.086}, "timesteps_since_restore": 3129489, "time_total_s": 2462.104449033737, "timestamp": 1558605589, "time_since_restore": 2462.104449033737, "policy_reward_mean": {}, "training_iteration": 71, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549320>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549940>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549278>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3298, "timesteps_total": 3129489, "episode_reward_mean": -521.5579266950983, "episodes_this_iter": 43, "date": "2019-05-23_09-59-49", "time_this_iter_s": 35.60836148262024, "num_metric_batches_dropped": 0, "episode_reward_min": -795.4893746848433}
{"iterations_since_restore": 72, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.99662619818263, "timesteps_this_iter": 43985, "custom_metrics": {"cost1_max": 227.91721864505072, "cost1_min": 17.993364032108733, "system_level_velocity_mean": 16.004376289323076, "cost2_mean": -97.7838065660381, "cost2_max": -14.992922033649952, "outflow_rate_max": 1462.2581952530227, "cost1_mean": 185.31694018807212, "system_level_velocity_min": 12.383416900752682, "system_level_velocity_max": 19.179509840775207, "outflow_rate_min": 475.9736659830146, "cost2_min": -119.81577470711977, "outflow_rate_mean": 1239.7574696364782}, "done": false, "pid": 51578, "episode_len_mean": 317.14, "info": {"default": {"kl": 0.0174598079174757, "policy_loss": -0.005775891710072756, "total_loss": 23.50452995300293, "vf_explained_var": 0.873292088508606, "cur_lr": 0.0005000000237487257, "entropy": 0.8471763134002686, "cur_kl_coeff": 0.05625000223517418, "vf_loss": 23.509321212768555}, "num_steps_trained": 3173474, "grad_time_ms": 11792.857, "num_steps_sampled": 3173474, "sample_time_ms": 22420.148, "load_time_ms": 17.348, "update_time_ms": 8.804}, "timesteps_since_restore": 3173474, "time_total_s": 2495.78484749794, "timestamp": 1558605623, "time_since_restore": 2495.78484749794, "policy_reward_mean": {}, "training_iteration": 72, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537be0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375f8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530710>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3347, "timesteps_total": 3173474, "episode_reward_mean": -488.85725280682374, "episodes_this_iter": 49, "date": "2019-05-23_10-00-23", "time_this_iter_s": 33.68039846420288, "num_metric_batches_dropped": 0, "episode_reward_min": -790.499412366739}
{"iterations_since_restore": 73, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.99662619818263, "timesteps_this_iter": 45116, "custom_metrics": {"cost1_max": 227.91721864505072, "cost1_min": 17.993364032108733, "system_level_velocity_mean": 15.722933879985337, "cost2_mean": -99.01597752483717, "cost2_max": -14.992922033649952, "outflow_rate_max": 1462.2581952530227, "cost1_mean": 181.7805118694522, "system_level_velocity_min": 12.383416900752682, "system_level_velocity_max": 19.179509840775207, "outflow_rate_min": 475.9736659830146, "cost2_min": -119.58614994549555, "outflow_rate_mean": 1222.5821229936396}, "done": false, "pid": 51578, "episode_len_mean": 317.14, "info": {"default": {"kl": 0.018066251650452614, "policy_loss": -0.003891212632879615, "total_loss": 17.01786994934082, "vf_explained_var": 0.9104695916175842, "cur_lr": 0.0005000000237487257, "entropy": 0.8209280371665955, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 17.0207462310791}, "num_steps_trained": 3218590, "grad_time_ms": 11800.585, "num_steps_sampled": 3218590, "sample_time_ms": 22596.504, "load_time_ms": 17.428, "update_time_ms": 8.702}, "timesteps_since_restore": 3218590, "time_total_s": 2530.9097423553467, "timestamp": 1558605658, "time_since_restore": 2530.9097423553467, "policy_reward_mean": {}, "training_iteration": 73, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845417b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906780>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a0b8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3395, "timesteps_total": 3218590, "episode_reward_mean": -512.4213629273372, "episodes_this_iter": 48, "date": "2019-05-23_10-00-58", "time_this_iter_s": 35.124894857406616, "num_metric_batches_dropped": 0, "episode_reward_min": -790.499412366739}
{"iterations_since_restore": 74, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -247.5613622934004, "timesteps_this_iter": 44865, "custom_metrics": {"cost1_max": 227.75166849035116, "cost1_min": 148.83162614053217, "system_level_velocity_mean": 15.098098233529104, "cost2_mean": -103.58302105123167, "cost2_max": -85.50937139593175, "outflow_rate_max": 1457.748198980378, "cost1_mean": 179.47153690622065, "system_level_velocity_min": 12.502204046251338, "system_level_velocity_max": 19.08793414104965, "outflow_rate_min": 1043.3269826786263, "cost2_min": -121.6792632264538, "outflow_rate_mean": 1213.5863661525043}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017827345058321953, "policy_loss": -0.005214602220803499, "total_loss": 16.146352767944336, "vf_explained_var": 0.9180945754051208, "cur_lr": 0.0005000000237487257, "entropy": 0.8272734880447388, "cur_kl_coeff": 0.05624999850988388, "vf_loss": 16.150564193725586}, "num_steps_trained": 3263455, "grad_time_ms": 11955.942, "num_steps_sampled": 3263455, "sample_time_ms": 22682.892, "load_time_ms": 17.241, "update_time_ms": 9.179}, "timesteps_since_restore": 3263455, "time_total_s": 2566.923318862915, "timestamp": 1558605694, "time_since_restore": 2566.923318862915, "policy_reward_mean": {}, "training_iteration": 74, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375c0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537fd0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537278>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3440, "timesteps_total": 3263455, "episode_reward_mean": -565.0921872720265, "episodes_this_iter": 45, "date": "2019-05-23_10-01-34", "time_this_iter_s": 36.01357650756836, "num_metric_batches_dropped": 0, "episode_reward_min": -794.1323844292624}
{"iterations_since_restore": 75, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.92743522602442, "timesteps_this_iter": 42772, "custom_metrics": {"cost1_max": 227.93798542724375, "cost1_min": 17.853701682057338, "system_level_velocity_mean": 15.53815084301327, "cost2_mean": -100.99345513981811, "cost2_max": -16.862291508726592, "outflow_rate_max": 1457.748198980378, "cost1_mean": 182.96894337994422, "system_level_velocity_min": 11.320507374667505, "system_level_velocity_max": 19.074529524972892, "outflow_rate_min": 431.75782487237836, "cost2_min": -121.98615544276684, "outflow_rate_mean": 1225.51151748754}, "done": false, "pid": 51578, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.01701263338327408, "policy_loss": -0.0055902376770973206, "total_loss": 23.30815887451172, "vf_explained_var": 0.8769546151161194, "cur_lr": 0.0005000000237487257, "entropy": 0.8054041862487793, "cur_kl_coeff": 0.05625000223517418, "vf_loss": 23.31279182434082}, "num_steps_trained": 3306227, "grad_time_ms": 11955.013, "num_steps_sampled": 3306227, "sample_time_ms": 22589.159, "load_time_ms": 17.37, "update_time_ms": 9.475}, "timesteps_since_restore": 3306227, "time_total_s": 2600.549945116043, "timestamp": 1558605728, "time_since_restore": 2600.549945116043, "policy_reward_mean": {}, "training_iteration": 75, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b70>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549a58>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549e48>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3486, "timesteps_total": 3306227, "episode_reward_mean": -527.8235467598507, "episodes_this_iter": 46, "date": "2019-05-23_10-02-08", "time_this_iter_s": 33.62662625312805, "num_metric_batches_dropped": 0, "episode_reward_min": -840.3154856584315}
{"iterations_since_restore": 76, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.92743522602442, "timesteps_this_iter": 43319, "custom_metrics": {"cost1_max": 227.93798542724375, "cost1_min": 17.853701682057338, "system_level_velocity_mean": 16.041768499059625, "cost2_mean": -98.41397252453913, "cost2_max": -16.862291508726592, "outflow_rate_max": 1460.205568524913, "cost1_mean": 187.83871578987592, "system_level_velocity_min": 11.320507374667505, "system_level_velocity_max": 19.069812807550225, "outflow_rate_min": 431.75782487237836, "cost2_min": -121.98615544276684, "outflow_rate_mean": 1247.234626075093}, "done": false, "pid": 51578, "episode_len_mean": 320.04, "info": {"default": {"kl": 0.020069001242518425, "policy_loss": -0.004405773710459471, "total_loss": 17.832019805908203, "vf_explained_var": 0.9118385910987854, "cur_lr": 0.0005000000237487257, "entropy": 0.8209857940673828, "cur_kl_coeff": 0.05625000223517418, "vf_loss": 17.835296630859375}, "num_steps_trained": 3349546, "grad_time_ms": 11890.003, "num_steps_sampled": 3349546, "sample_time_ms": 22544.424, "load_time_ms": 16.501, "update_time_ms": 9.631}, "timesteps_since_restore": 3349546, "time_total_s": 2634.7464361190796, "timestamp": 1558605762, "time_since_restore": 2634.7464361190796, "policy_reward_mean": {}, "training_iteration": 76, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549208>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845490f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549860>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3536, "timesteps_total": 3349546, "episode_reward_mean": -487.468960623102, "episodes_this_iter": 50, "date": "2019-05-23_10-02-42", "time_this_iter_s": 34.1964910030365, "num_metric_batches_dropped": 0, "episode_reward_min": -840.3154856584315}
{"iterations_since_restore": 77, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.688480818146, "timesteps_this_iter": 43617, "custom_metrics": {"cost1_max": 227.61576354318652, "cost1_min": 87.54215877915418, "system_level_velocity_mean": 15.833355253846873, "cost2_mean": -98.9232052153092, "cost2_max": -48.90077525730911, "outflow_rate_max": 1460.205568524913, "cost1_mean": 186.39800673776665, "system_level_velocity_min": 12.22091383964503, "system_level_velocity_max": 19.104762610371726, "outflow_rate_min": 817.0050108991376, "cost2_min": -120.17731751470748, "outflow_rate_mean": 1242.9053182019009}, "done": false, "pid": 51578, "episode_len_mean": 321.94, "info": {"default": {"kl": 0.016640679910779, "policy_loss": -0.0058757769875228405, "total_loss": 21.92141342163086, "vf_explained_var": 0.8886429071426392, "cur_lr": 0.0005000000237487257, "entropy": 0.8021203279495239, "cur_kl_coeff": 0.08437500894069672, "vf_loss": 21.925884246826172}, "num_steps_trained": 3393163, "grad_time_ms": 11930.063, "num_steps_sampled": 3393163, "sample_time_ms": 22490.087, "load_time_ms": 16.203, "update_time_ms": 9.589}, "timesteps_since_restore": 3393163, "time_total_s": 2669.043892145157, "timestamp": 1558605796, "time_since_restore": 2669.043892145157, "policy_reward_mean": {}, "training_iteration": 77, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e80>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530fd0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3582, "timesteps_total": 3393163, "episode_reward_mean": -506.866198896292, "episodes_this_iter": 46, "date": "2019-05-23_10-03-16", "time_this_iter_s": 34.29745602607727, "num_metric_batches_dropped": 0, "episode_reward_min": -805.5467952452116}
{"iterations_since_restore": 78, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -168.12377887502532, "timesteps_this_iter": 44676, "custom_metrics": {"cost1_max": 227.90584552601905, "cost1_min": 137.8252819282732, "system_level_velocity_mean": 15.754836320460033, "cost2_mean": -99.75536671010421, "cost2_max": -70.2832223481973, "outflow_rate_max": 1459.6588157830236, "cost1_mean": 186.88352218451706, "system_level_velocity_min": 11.588484939460413, "system_level_velocity_max": 19.11317791097859, "outflow_rate_min": 1043.351505710512, "cost2_min": -124.5540400222763, "outflow_rate_mean": 1244.6583079100947}, "done": false, "pid": 51578, "episode_len_mean": 323.92, "info": {"default": {"kl": 0.019435938447713852, "policy_loss": -0.00711123226210475, "total_loss": 21.32436752319336, "vf_explained_var": 0.894323468208313, "cur_lr": 0.0005000000237487257, "entropy": 0.8083483576774597, "cur_kl_coeff": 0.08437501639127731, "vf_loss": 21.3298397064209}, "num_steps_trained": 3437839, "grad_time_ms": 12134.593, "num_steps_sampled": 3437839, "sample_time_ms": 22340.242, "load_time_ms": 16.315, "update_time_ms": 9.852}, "timesteps_since_restore": 3437839, "time_total_s": 2703.2974014282227, "timestamp": 1558605830, "time_since_restore": 2703.2974014282227, "policy_reward_mean": {}, "training_iteration": 78, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9f98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9f28>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9898>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3623, "timesteps_total": 3437839, "episode_reward_mean": -514.5057329674887, "episodes_this_iter": 41, "date": "2019-05-23_10-03-50", "time_this_iter_s": 34.253509283065796, "num_metric_batches_dropped": 0, "episode_reward_min": -794.6005068921911}
{"iterations_since_restore": 79, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -160.16811869207797, "timesteps_this_iter": 44405, "custom_metrics": {"cost1_max": 227.90584552601905, "cost1_min": 137.8252819282732, "system_level_velocity_mean": 15.522630931981684, "cost2_mean": -101.49274990064913, "cost2_max": -67.97836010662456, "outflow_rate_max": 1459.6588157830236, "cost1_mean": 183.92683576581908, "system_level_velocity_min": 11.588484939460413, "system_level_velocity_max": 19.11317791097859, "outflow_rate_min": 1043.351505710512, "cost2_min": -124.5540400222763, "outflow_rate_mean": 1234.1621935981104}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.017508823424577713, "policy_loss": -0.005376685410737991, "total_loss": 19.6532039642334, "vf_explained_var": 0.9031936526298523, "cur_lr": 0.0005000000237487257, "entropy": 0.7942895889282227, "cur_kl_coeff": 0.08437500894069672, "vf_loss": 19.657102584838867}, "num_steps_trained": 3482244, "grad_time_ms": 12240.387, "num_steps_sampled": 3482244, "sample_time_ms": 22172.27, "load_time_ms": 16.091, "update_time_ms": 9.984}, "timesteps_since_restore": 3482244, "time_total_s": 2736.7642438411713, "timestamp": 1558605864, "time_since_restore": 2736.7642438411713, "policy_reward_mean": {}, "training_iteration": 79, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b198>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845416a0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3675, "timesteps_total": 3482244, "episode_reward_mean": -529.812739549881, "episodes_this_iter": 52, "date": "2019-05-23_10-04-24", "time_this_iter_s": 33.46684241294861, "num_metric_batches_dropped": 0, "episode_reward_min": -794.6005068921911}
{"iterations_since_restore": 80, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -160.16811869207797, "timesteps_this_iter": 44494, "custom_metrics": {"cost1_max": 228.54897809853202, "cost1_min": 137.8252819282732, "system_level_velocity_mean": 15.263280579288864, "cost2_mean": -102.31107068830785, "cost2_max": -67.97836010662456, "outflow_rate_max": 1461.5122629357204, "cost1_mean": 180.87843652292474, "system_level_velocity_min": 11.588484939460413, "system_level_velocity_max": 19.162420247842046, "outflow_rate_min": 992.0994332939788, "cost2_min": -124.5540400222763, "outflow_rate_mean": 1221.803725825074}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.016731156036257744, "policy_loss": -0.006106183398514986, "total_loss": 15.954754829406738, "vf_explained_var": 0.9228744506835938, "cur_lr": 0.0005000000237487257, "entropy": 0.8000105023384094, "cur_kl_coeff": 0.08437501639127731, "vf_loss": 15.95944881439209}, "num_steps_trained": 3526738, "grad_time_ms": 12407.046, "num_steps_sampled": 3526738, "sample_time_ms": 22099.109, "load_time_ms": 17.251, "update_time_ms": 10.128}, "timesteps_since_restore": 3526738, "time_total_s": 2772.863864183426, "timestamp": 1558605900, "time_since_restore": 2772.863864183426, "policy_reward_mean": {}, "training_iteration": 80, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9da0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9ba8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9940>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3721, "timesteps_total": 3526738, "episode_reward_mean": -546.8795437646036, "episodes_this_iter": 46, "date": "2019-05-23_10-05-00", "time_this_iter_s": 36.09962034225464, "num_metric_batches_dropped": 0, "episode_reward_min": -808.2789328463218}
{"iterations_since_restore": 81, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -158.7446552683565, "timesteps_this_iter": 43378, "custom_metrics": {"cost1_max": 228.54897809853202, "cost1_min": 140.26496051203006, "system_level_velocity_mean": 15.466910691128078, "cost2_mean": -100.4632990335427, "cost2_max": -67.05298748729707, "outflow_rate_max": 1461.5122629357204, "cost1_mean": 183.2091997204655, "system_level_velocity_min": 11.769126475636055, "system_level_velocity_max": 19.169857182182113, "outflow_rate_min": 992.0994332939788, "cost2_min": -118.66922682104784, "outflow_rate_mean": 1227.9138059056006}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.02073287032544613, "policy_loss": -0.00659780390560627, "total_loss": 17.7241268157959, "vf_explained_var": 0.9176825284957886, "cur_lr": 0.0005000000237487257, "entropy": 0.78932124376297, "cur_kl_coeff": 0.08437500894069672, "vf_loss": 17.728975296020508}, "num_steps_trained": 3570116, "grad_time_ms": 12370.353, "num_steps_sampled": 3570116, "sample_time_ms": 21872.152, "load_time_ms": 16.937, "update_time_ms": 10.309}, "timesteps_since_restore": 3570116, "time_total_s": 2805.8297379016876, "timestamp": 1558605933, "time_since_restore": 2805.8297379016876, "policy_reward_mean": {}, "training_iteration": 81, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530be0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845306d8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530748>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3763, "timesteps_total": 3570116, "episode_reward_mean": -533.7669915623983, "episodes_this_iter": 42, "date": "2019-05-23_10-05-33", "time_this_iter_s": 32.96587371826172, "num_metric_batches_dropped": 0, "episode_reward_min": -808.2789328463218}
{"iterations_since_restore": 82, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -158.7446552683565, "timesteps_this_iter": 44198, "custom_metrics": {"cost1_max": 227.5841849863209, "cost1_min": 143.94317097268583, "system_level_velocity_mean": 15.603674377915603, "cost2_mean": -99.58209642984448, "cost2_max": -67.05298748729707, "outflow_rate_max": 1455.8600801878097, "cost1_mean": 184.96394268846393, "system_level_velocity_min": 12.435655063130584, "system_level_velocity_max": 19.169857182182113, "outflow_rate_min": 1058.487117631642, "cost2_min": -121.81464200052518, "outflow_rate_mean": 1232.2018719285388}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.016415486112236977, "policy_loss": -0.0060844505205750465, "total_loss": 22.257217407226562, "vf_explained_var": 0.886096715927124, "cur_lr": 0.0005000000237487257, "entropy": 0.7911311388015747, "cur_kl_coeff": 0.1265624761581421, "vf_loss": 22.26122283935547}, "num_steps_trained": 3614314, "grad_time_ms": 12563.348, "num_steps_sampled": 3614314, "sample_time_ms": 21758.114, "load_time_ms": 16.898, "update_time_ms": 10.648}, "timesteps_since_restore": 3614314, "time_total_s": 2840.314317703247, "timestamp": 1558605968, "time_since_restore": 2840.314317703247, "policy_reward_mean": {}, "training_iteration": 82, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bfd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b7f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bdd8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3812, "timesteps_total": 3614314, "episode_reward_mean": -522.1189943318788, "episodes_this_iter": 49, "date": "2019-05-23_10-06-08", "time_this_iter_s": 34.48457980155945, "num_metric_batches_dropped": 0, "episode_reward_min": -783.7047489914434}
{"iterations_since_restore": 83, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -152.49425612336205, "timesteps_this_iter": 44652, "custom_metrics": {"cost1_max": 227.5841849863209, "cost1_min": 142.90211657192117, "system_level_velocity_mean": 15.534828471069131, "cost2_mean": -99.04453666654274, "cost2_max": -65.1862234146513, "outflow_rate_max": 1459.025765055066, "cost1_mean": 184.03978961324455, "system_level_velocity_min": 12.030253139631059, "system_level_velocity_max": 19.17796740931742, "outflow_rate_min": 1012.3651920122886, "cost2_min": -122.66900329908903, "outflow_rate_mean": 1228.9758802135946}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.017148341983556747, "policy_loss": -0.006381405983120203, "total_loss": 18.946880340576172, "vf_explained_var": 0.9035914540290833, "cur_lr": 0.0005000000237487257, "entropy": 0.7991045117378235, "cur_kl_coeff": 0.1265624761581421, "vf_loss": 18.951091766357422}, "num_steps_trained": 3658966, "grad_time_ms": 12569.862, "num_steps_sampled": 3658966, "sample_time_ms": 21591.296, "load_time_ms": 16.8, "update_time_ms": 10.76}, "timesteps_since_restore": 3658966, "time_total_s": 2873.7981588840485, "timestamp": 1558606001, "time_since_restore": 2873.7981588840485, "policy_reward_mean": {}, "training_iteration": 83, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b4a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b198>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b240>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3859, "timesteps_total": 3658966, "episode_reward_mean": -526.8443869689091, "episodes_this_iter": 47, "date": "2019-05-23_10-06-41", "time_this_iter_s": 33.48384118080139, "num_metric_batches_dropped": 0, "episode_reward_min": -827.373436160163}
{"iterations_since_restore": 84, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -152.49425612336205, "timesteps_this_iter": 43398, "custom_metrics": {"cost1_max": 227.31206380461384, "cost1_min": 142.90211657192117, "system_level_velocity_mean": 15.565009428474461, "cost2_mean": -98.91367487957598, "cost2_max": -65.1862234146513, "outflow_rate_max": 1459.025765055066, "cost1_mean": 184.2094844622192, "system_level_velocity_min": 12.030253139631059, "system_level_velocity_max": 19.17796740931742, "outflow_rate_min": 1012.3651920122886, "cost2_min": -124.4740486959796, "outflow_rate_mean": 1229.383308497662}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.016615934669971466, "policy_loss": -0.0065596820786595345, "total_loss": 19.523239135742188, "vf_explained_var": 0.9032214879989624, "cur_lr": 0.0005000000237487257, "entropy": 0.7896993160247803, "cur_kl_coeff": 0.12656249105930328, "vf_loss": 19.52769660949707}, "num_steps_trained": 3702364, "grad_time_ms": 12559.963, "num_steps_sampled": 3702364, "sample_time_ms": 21466.78, "load_time_ms": 16.596, "update_time_ms": 10.494}, "timesteps_since_restore": 3702364, "time_total_s": 2908.468725204468, "timestamp": 1558606036, "time_since_restore": 2908.468725204468, "policy_reward_mean": {}, "training_iteration": 84, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534f28>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e80>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3903, "timesteps_total": 3702364, "episode_reward_mean": -527.8874095430556, "episodes_this_iter": 44, "date": "2019-05-23_10-07-16", "time_this_iter_s": 34.67056632041931, "num_metric_batches_dropped": 0, "episode_reward_min": -827.373436160163}
{"iterations_since_restore": 85, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.51318283197809, "timesteps_this_iter": 44194, "custom_metrics": {"cost1_max": 228.72608010650424, "cost1_min": 86.71769044715478, "system_level_velocity_mean": 15.682176000831223, "cost2_mean": -99.41177654322233, "cost2_max": -46.70788068483119, "outflow_rate_max": 1457.3001283221313, "cost1_mean": 184.9290769913101, "system_level_velocity_min": 12.451384600084538, "system_level_velocity_max": 19.230130986663784, "outflow_rate_min": 817.0806224842318, "cost2_min": -124.4740486959796, "outflow_rate_mean": 1230.968906196971}, "done": false, "pid": 51578, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016894858330488205, "policy_loss": -0.005426750984042883, "total_loss": 19.10886001586914, "vf_explained_var": 0.9089614748954773, "cur_lr": 0.0005000000237487257, "entropy": 0.7864841818809509, "cur_kl_coeff": 0.1265624761581421, "vf_loss": 19.11214828491211}, "num_steps_trained": 3746558, "grad_time_ms": 12765.277, "num_steps_sampled": 3746558, "sample_time_ms": 21334.769, "load_time_ms": 16.535, "update_time_ms": 10.712}, "timesteps_since_restore": 3746558, "time_total_s": 2942.8200726509094, "timestamp": 1558606070, "time_since_restore": 2942.8200726509094, "policy_reward_mean": {}, "training_iteration": 85, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530668>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469ac50>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c88>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3952, "timesteps_total": 3746558, "episode_reward_mean": -520.6911123318191, "episodes_this_iter": 49, "date": "2019-05-23_10-07-50", "time_this_iter_s": 34.35134744644165, "num_metric_batches_dropped": 0, "episode_reward_min": -757.76004920973}
{"iterations_since_restore": 86, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.51318283197809, "timesteps_this_iter": 42988, "custom_metrics": {"cost1_max": 228.72608010650424, "cost1_min": 86.71769044715478, "system_level_velocity_mean": 15.722794788815197, "cost2_mean": -98.16686740523957, "cost2_max": -46.70788068483119, "outflow_rate_max": 1455.7760092904518, "cost1_mean": 185.4500854008004, "system_level_velocity_min": 12.725536226242598, "system_level_velocity_max": 19.230130986663784, "outflow_rate_min": 817.0806224842318, "cost2_min": -116.2696692640263, "outflow_rate_mean": 1235.4350569991661}, "done": false, "pid": 51578, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016249310225248337, "policy_loss": -0.006646908354014158, "total_loss": 18.92625617980957, "vf_explained_var": 0.9051390886306763, "cur_lr": 0.0005000000237487257, "entropy": 0.8056777119636536, "cur_kl_coeff": 0.1265624761581421, "vf_loss": 18.93084716796875}, "num_steps_trained": 3789546, "grad_time_ms": 12782.048, "num_steps_sampled": 3789546, "sample_time_ms": 21116.581, "load_time_ms": 17.56, "update_time_ms": 10.375}, "timesteps_since_restore": 3789546, "time_total_s": 2975.008342027664, "timestamp": 1558606102, "time_since_restore": 2975.008342027664, "policy_reward_mean": {}, "training_iteration": 86, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537d30>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537400>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537fd0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 3997, "timesteps_total": 3789546, "episode_reward_mean": -515.1637403225207, "episodes_this_iter": 45, "date": "2019-05-23_10-08-22", "time_this_iter_s": 32.18826937675476, "num_metric_batches_dropped": 0, "episode_reward_min": -738.0494126191252}
{"iterations_since_restore": 87, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.5156688150536, "timesteps_this_iter": 43063, "custom_metrics": {"cost1_max": 227.86684969843134, "cost1_min": 22.709870509244706, "system_level_velocity_mean": 15.862258937974703, "cost2_mean": -96.92894838521548, "cost2_max": -21.718806136898216, "outflow_rate_max": 1449.1397181622096, "cost1_mean": 186.74767727398503, "system_level_velocity_min": 12.301351182655594, "system_level_velocity_max": 19.09127733196877, "outflow_rate_min": 424.41818432384355, "cost2_min": -116.2696692640263, "outflow_rate_mean": 1240.1162875909306}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.01597610116004944, "policy_loss": -0.006302194204181433, "total_loss": 21.253257751464844, "vf_explained_var": 0.8919298052787781, "cur_lr": 0.0005000000237487257, "entropy": 0.7977343201637268, "cur_kl_coeff": 0.1265624761581421, "vf_loss": 21.257539749145508}, "num_steps_trained": 3832609, "grad_time_ms": 12695.537, "num_steps_sampled": 3832609, "sample_time_ms": 21135.292, "load_time_ms": 17.043, "update_time_ms": 10.287}, "timesteps_since_restore": 3832609, "time_total_s": 3008.620035648346, "timestamp": 1558606136, "time_since_restore": 3008.620035648346, "policy_reward_mean": {}, "training_iteration": 87, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534198>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4045, "timesteps_total": 3832609, "episode_reward_mean": -501.18439952532884, "episodes_this_iter": 48, "date": "2019-05-23_10-08-56", "time_this_iter_s": 33.61169362068176, "num_metric_batches_dropped": 0, "episode_reward_min": -773.754194198488}
{"iterations_since_restore": 88, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.5156688150536, "timesteps_this_iter": 44667, "custom_metrics": {"cost1_max": 227.86684969843134, "cost1_min": 22.709870509244706, "system_level_velocity_mean": 15.687192478295406, "cost2_mean": -96.71279143564661, "cost2_max": -21.718806136898216, "outflow_rate_max": 1443.6711482301398, "cost1_mean": 183.06751768979578, "system_level_velocity_min": 12.173480292209895, "system_level_velocity_max": 19.09127733196877, "outflow_rate_min": 424.41818432384355, "cost2_min": -115.36843760906356, "outflow_rate_mean": 1220.44001892398}, "done": false, "pid": 51578, "episode_len_mean": 319.74, "info": {"default": {"kl": 0.020156053826212883, "policy_loss": -0.009080463089048862, "total_loss": 18.640464782714844, "vf_explained_var": 0.9032737612724304, "cur_lr": 0.0005000000237487257, "entropy": 0.8018226027488708, "cur_kl_coeff": 0.1265624761581421, "vf_loss": 18.646995544433594}, "num_steps_trained": 3877276, "grad_time_ms": 12743.702, "num_steps_sampled": 3877276, "sample_time_ms": 21150.942, "load_time_ms": 16.052, "update_time_ms": 10.345}, "timesteps_since_restore": 3877276, "time_total_s": 3043.5154871940613, "timestamp": 1558606171, "time_since_restore": 3043.5154871940613, "policy_reward_mean": {}, "training_iteration": 88, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b470>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b8d0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4092, "timesteps_total": 3877276, "episode_reward_mean": -512.7268981371706, "episodes_this_iter": 47, "date": "2019-05-23_10-09-31", "time_this_iter_s": 34.89545154571533, "num_metric_batches_dropped": 0, "episode_reward_min": -806.930361732851}
{"iterations_since_restore": 89, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.468946005754418, "timesteps_this_iter": 42287, "custom_metrics": {"cost1_max": 227.86684969843134, "cost1_min": 17.89979074204897, "system_level_velocity_mean": 15.775006078419834, "cost2_mean": -95.09057774605246, "cost2_max": -13.954381783148417, "outflow_rate_max": 1443.9464490278508, "cost1_mean": 184.12370502275448, "system_level_velocity_min": 12.173480292209895, "system_level_velocity_max": 19.09127733196877, "outflow_rate_min": 454.1881787896761, "cost2_min": -119.84862555341238, "outflow_rate_mean": 1225.701562938887}, "done": false, "pid": 51578, "episode_len_mean": 319.66, "info": {"default": {"kl": 0.014250995591282845, "policy_loss": -0.006192975211888552, "total_loss": 20.139368057250977, "vf_explained_var": 0.893324613571167, "cur_lr": 0.0005000000237487257, "entropy": 0.7950820326805115, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.142854690551758}, "num_steps_trained": 3919563, "grad_time_ms": 12882.33, "num_steps_sampled": 3919563, "sample_time_ms": 20932.718, "load_time_ms": 15.463, "update_time_ms": 10.293}, "timesteps_since_restore": 3919563, "time_total_s": 3076.185409784317, "timestamp": 1558606204, "time_since_restore": 3076.185409784317, "policy_reward_mean": {}, "training_iteration": 89, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845379e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530198>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4139, "timesteps_total": 3919563, "episode_reward_mean": -504.05458286487743, "episodes_this_iter": 47, "date": "2019-05-23_10-10-04", "time_this_iter_s": 32.66992259025574, "num_metric_batches_dropped": 0, "episode_reward_min": -806.930361732851}
{"iterations_since_restore": 90, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.447505750117696, "timesteps_this_iter": 43139, "custom_metrics": {"cost1_max": 227.427303365809, "cost1_min": 17.89979074204897, "system_level_velocity_mean": 15.951270866918605, "cost2_mean": -93.7157061335021, "cost2_max": -13.954381783148417, "outflow_rate_max": 1443.9464490278508, "cost1_mean": 184.56815962705414, "system_level_velocity_min": 11.872762176264539, "system_level_velocity_max": 19.066738022831263, "outflow_rate_min": 454.1881787896761, "cost2_min": -119.84862555341238, "outflow_rate_mean": 1224.024180358461}, "done": false, "pid": 51578, "episode_len_mean": 316.96, "info": {"default": {"kl": 0.014033445157110691, "policy_loss": -0.006436813622713089, "total_loss": 24.412857055664062, "vf_explained_var": 0.8728715777397156, "cur_lr": 0.0005000000237487257, "entropy": 0.7756708860397339, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 24.416629791259766}, "num_steps_trained": 3962702, "grad_time_ms": 12654.091, "num_steps_sampled": 3962702, "sample_time_ms": 20833.695, "load_time_ms": 14.305, "update_time_ms": 10.194}, "timesteps_since_restore": 3962702, "time_total_s": 3108.9818816184998, "timestamp": 1558606237, "time_since_restore": 3108.9818816184998, "policy_reward_mean": {}, "training_iteration": 90, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bc50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b8d0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4187, "timesteps_total": 3962702, "episode_reward_mean": -488.164007475063, "episodes_this_iter": 48, "date": "2019-05-23_10-10-37", "time_this_iter_s": 32.79647183418274, "num_metric_batches_dropped": 0, "episode_reward_min": -806.930361732851}
{"iterations_since_restore": 91, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.447505750117696, "timesteps_this_iter": 44644, "custom_metrics": {"cost1_max": 227.427303365809, "cost1_min": 17.90766623916964, "system_level_velocity_mean": 15.83010559016622, "cost2_mean": -95.46319616545138, "cost2_max": -14.003285835614376, "outflow_rate_max": 1443.9464490278508, "cost1_mean": 185.01298269582492, "system_level_velocity_min": 11.872762176264539, "system_level_velocity_max": 19.066738022831263, "outflow_rate_min": 454.1881787896761, "cost2_min": -120.99469240394151, "outflow_rate_mean": 1225.2564340018141}, "done": false, "pid": 51578, "episode_len_mean": 319.94, "info": {"default": {"kl": 0.01573791168630123, "policy_loss": -0.0070353480987250805, "total_loss": 17.76105308532715, "vf_explained_var": 0.9077039957046509, "cur_lr": 0.0005000000237487257, "entropy": 0.7836541533470154, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 17.76510238647461}, "num_steps_trained": 4007346, "grad_time_ms": 12645.253, "num_steps_sampled": 4007346, "sample_time_ms": 20858.702, "load_time_ms": 14.431, "update_time_ms": 10.304}, "timesteps_since_restore": 4007346, "time_total_s": 3142.1287648677826, "timestamp": 1558606270, "time_since_restore": 3142.1287648677826, "policy_reward_mean": {}, "training_iteration": 91, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530908>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530780>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530400>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4231, "timesteps_total": 4007346, "episode_reward_mean": -502.362430438977, "episodes_this_iter": 44, "date": "2019-05-23_10-11-10", "time_this_iter_s": 33.14688324928284, "num_metric_batches_dropped": 0, "episode_reward_min": -778.6410273356547}
{"iterations_since_restore": 92, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -219.9661429218839, "timesteps_this_iter": 43331, "custom_metrics": {"cost1_max": 228.81550656504612, "cost1_min": 141.32733739994057, "system_level_velocity_mean": 15.518050959726287, "cost2_mean": -97.86757456225556, "cost2_max": -74.68506770807281, "outflow_rate_max": 1453.3007831755322, "cost1_mean": 184.19027079719706, "system_level_velocity_min": 12.05440645872828, "system_level_velocity_max": 19.219279304921915, "outflow_rate_min": 1040.576566220238, "cost2_min": -120.99469240394151, "outflow_rate_mean": 1227.540183024672}, "done": false, "pid": 51578, "episode_len_mean": 324.72, "info": {"default": {"kl": 0.014252685010433197, "policy_loss": -0.007226635701954365, "total_loss": 19.247934341430664, "vf_explained_var": 0.8995047211647034, "cur_lr": 0.0005000000237487257, "entropy": 0.7654151916503906, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 19.25245475769043}, "num_steps_trained": 4050677, "grad_time_ms": 12558.843, "num_steps_sampled": 4050677, "sample_time_ms": 20851.072, "load_time_ms": 13.626, "update_time_ms": 10.124}, "timesteps_since_restore": 4050677, "time_total_s": 3175.6369614601135, "timestamp": 1558606303, "time_since_restore": 3175.6369614601135, "policy_reward_mean": {}, "training_iteration": 92, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530198>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845306d8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530a20>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4279, "timesteps_total": 4050677, "episode_reward_mean": -529.7139238373411, "episodes_this_iter": 48, "date": "2019-05-23_10-11-43", "time_this_iter_s": 33.50819659233093, "num_metric_batches_dropped": 0, "episode_reward_min": -804.8241854761441}
{"iterations_since_restore": 93, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -219.9661429218839, "timesteps_this_iter": 44646, "custom_metrics": {"cost1_max": 228.81550656504612, "cost1_min": 141.32733739994057, "system_level_velocity_mean": 15.589570124679014, "cost2_mean": -98.3393252401397, "cost2_max": -74.68506770807281, "outflow_rate_max": 1453.3007831755322, "cost1_mean": 185.00315746904496, "system_level_velocity_min": 11.778326925048002, "system_level_velocity_max": 19.219279304921915, "outflow_rate_min": 1040.576566220238, "cost2_min": -123.39339563696144, "outflow_rate_mean": 1230.1994798649291}, "done": false, "pid": 51578, "episode_len_mean": 324.72, "info": {"default": {"kl": 0.01652931049466133, "policy_loss": -0.007965035736560822, "total_loss": 19.942180633544922, "vf_explained_var": 0.8994514346122742, "cur_lr": 0.0005000000237487257, "entropy": 0.7734646201133728, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 19.94700813293457}, "num_steps_trained": 4095323, "grad_time_ms": 12560.946, "num_steps_sampled": 4095323, "sample_time_ms": 20781.866, "load_time_ms": 14.128, "update_time_ms": 10.14}, "timesteps_since_restore": 4095323, "time_total_s": 3208.456283092499, "timestamp": 1558606336, "time_since_restore": 3208.456283092499, "policy_reward_mean": {}, "training_iteration": 93, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9c18>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a91d0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9da0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4324, "timesteps_total": 4095323, "episode_reward_mean": -524.4506528321307, "episodes_this_iter": 45, "date": "2019-05-23_10-12-16", "time_this_iter_s": 32.819321632385254, "num_metric_batches_dropped": 0, "episode_reward_min": -804.8241854761441}
{"iterations_since_restore": 94, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -163.72167611118158, "timesteps_this_iter": 44098, "custom_metrics": {"cost1_max": 229.05378389994854, "cost1_min": 144.55526812012943, "system_level_velocity_mean": 15.421886519464067, "cost2_mean": -98.25061463217051, "cost2_max": -66.3245930174075, "outflow_rate_max": 1441.209732535457, "cost1_mean": 182.39526446254538, "system_level_velocity_min": 11.778326925048002, "system_level_velocity_max": 19.182980065693666, "outflow_rate_min": 1042.2896105123843, "cost2_min": -123.39339563696144, "outflow_rate_mean": 1217.8444377214585}, "done": false, "pid": 51578, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.013676853850483894, "policy_loss": -0.006590859964489937, "total_loss": 16.977109909057617, "vf_explained_var": 0.9185278415679932, "cur_lr": 0.0005000000237487257, "entropy": 0.7757291793823242, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 16.981103897094727}, "num_steps_trained": 4139421, "grad_time_ms": 12501.576, "num_steps_sampled": 4139421, "sample_time_ms": 20674.261, "load_time_ms": 14.298, "update_time_ms": 9.919}, "timesteps_since_restore": 4139421, "time_total_s": 3241.4463226795197, "timestamp": 1558606369, "time_since_restore": 3241.4463226795197, "policy_reward_mean": {}, "training_iteration": 94, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557f28>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a90>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b38>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4370, "timesteps_total": 4139421, "episode_reward_mean": -536.9413665049462, "episodes_this_iter": 46, "date": "2019-05-23_10-12-49", "time_this_iter_s": 32.990039587020874, "num_metric_batches_dropped": 0, "episode_reward_min": -793.9112463666173}
{"iterations_since_restore": 95, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.854550473782734, "timesteps_this_iter": 43498, "custom_metrics": {"cost1_max": 229.05378389994854, "cost1_min": 18.052370582251715, "system_level_velocity_mean": 15.487353979135063, "cost2_mean": -97.03922973090987, "cost2_max": -14.961951318025903, "outflow_rate_max": 1456.6636035663678, "cost1_mean": 181.1829016545905, "system_level_velocity_min": 12.169437499273187, "system_level_velocity_max": 19.182980065693666, "outflow_rate_min": 478.1690499040066, "cost2_min": -122.13414743429567, "outflow_rate_mean": 1213.339060237159}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.01382441259920597, "policy_loss": -0.005097979214042425, "total_loss": 16.92375946044922, "vf_explained_var": 0.9178400039672852, "cur_lr": 0.0005000000237487257, "entropy": 0.7599350214004517, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 16.926233291625977}, "num_steps_trained": 4182919, "grad_time_ms": 12411.06, "num_steps_sampled": 4182919, "sample_time_ms": 20634.686, "load_time_ms": 14.014, "update_time_ms": 9.427}, "timesteps_since_restore": 4182919, "time_total_s": 3274.4904952049255, "timestamp": 1558606402, "time_since_restore": 3274.4904952049255, "policy_reward_mean": {}, "training_iteration": 95, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454ba90>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b7f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bda0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4419, "timesteps_total": 4182919, "episode_reward_mean": -528.1988543179664, "episodes_this_iter": 49, "date": "2019-05-23_10-13-22", "time_this_iter_s": 33.044172525405884, "num_metric_batches_dropped": 0, "episode_reward_min": -793.9112463666173}
{"iterations_since_restore": 96, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.854550473782734, "timesteps_this_iter": 42313, "custom_metrics": {"cost1_max": 227.84597467869594, "cost1_min": 18.052370582251715, "system_level_velocity_mean": 15.97659730223176, "cost2_mean": -95.5427273109158, "cost2_max": -14.961951318025903, "outflow_rate_max": 1456.6636035663678, "cost1_mean": 185.03819593826054, "system_level_velocity_min": 12.169437499273187, "system_level_velocity_max": 19.145454725047028, "outflow_rate_min": 478.1690499040066, "cost2_min": -115.6570059627187, "outflow_rate_mean": 1230.8735331654134}, "done": false, "pid": 51578, "episode_len_mean": 317.94, "info": {"default": {"kl": 0.013845770619809628, "policy_loss": -0.006892366334795952, "total_loss": 20.344221115112305, "vf_explained_var": 0.8927854299545288, "cur_lr": 0.0005000000237487257, "entropy": 0.7385308742523193, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.34848403930664}, "num_steps_trained": 4225232, "grad_time_ms": 12365.153, "num_steps_sampled": 4225232, "sample_time_ms": 20658.708, "load_time_ms": 13.783, "update_time_ms": 9.418}, "timesteps_since_restore": 4225232, "time_total_s": 3306.4405930042267, "timestamp": 1558606434, "time_since_restore": 3306.4405930042267, "policy_reward_mean": {}, "training_iteration": 96, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557160>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ef0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845579e8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4466, "timesteps_total": 4225232, "episode_reward_mean": -488.8406506579064, "episodes_this_iter": 47, "date": "2019-05-23_10-13-54", "time_this_iter_s": 31.950097799301147, "num_metric_batches_dropped": 0, "episode_reward_min": -769.1615635487882}
{"iterations_since_restore": 97, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.311264675562207, "timesteps_this_iter": 43616, "custom_metrics": {"cost1_max": 227.84597467869594, "cost1_min": 23.20613122287065, "system_level_velocity_mean": 15.912129921523816, "cost2_mean": -98.25300846248281, "cost2_max": -16.999781289816724, "outflow_rate_max": 1452.563804977485, "cost1_mean": 186.215769894263, "system_level_velocity_min": 12.169437499273187, "system_level_velocity_max": 19.145454725047028, "outflow_rate_min": 511.17688865063195, "cost2_min": -124.24385910083251, "outflow_rate_mean": 1236.0463282671199}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.0153768016025424, "policy_loss": -0.007419811096042395, "total_loss": 18.757925033569336, "vf_explained_var": 0.9028875827789307, "cur_lr": 0.0005000000237487257, "entropy": 0.7378255724906921, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 18.76242446899414}, "num_steps_trained": 4268848, "grad_time_ms": 12397.661, "num_steps_sampled": 4268848, "sample_time_ms": 20627.614, "load_time_ms": 14.587, "update_time_ms": 9.446}, "timesteps_since_restore": 4268848, "time_total_s": 3340.0954418182373, "timestamp": 1558606468, "time_since_restore": 3340.0954418182373, "policy_reward_mean": {}, "training_iteration": 97, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9ba8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a91d0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9d30>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4512, "timesteps_total": 4268848, "episode_reward_mean": -497.5781614860799, "episodes_this_iter": 46, "date": "2019-05-23_10-14-28", "time_this_iter_s": 33.65484881401062, "num_metric_batches_dropped": 0, "episode_reward_min": -775.9186425478588}
{"iterations_since_restore": 98, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -245.6432256151822, "timesteps_this_iter": 43389, "custom_metrics": {"cost1_max": 227.84597467869594, "cost1_min": 149.60167434425, "system_level_velocity_mean": 15.869114836891534, "cost2_mean": -100.36819210436423, "cost2_max": -81.74024861489349, "outflow_rate_max": 1452.563804977485, "cost1_mean": 188.67821532156086, "system_level_velocity_min": 12.534295872721529, "system_level_velocity_max": 19.145454725047028, "outflow_rate_min": 1067.0153127057272, "cost2_min": -124.24385910083251, "outflow_rate_mean": 1245.7291210978974}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013449014164507389, "policy_loss": -0.005944688804447651, "total_loss": 19.58890724182129, "vf_explained_var": 0.8979143500328064, "cur_lr": 0.0005000000237487257, "entropy": 0.7451807260513306, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 19.592300415039062}, "num_steps_trained": 4312237, "grad_time_ms": 12217.799, "num_steps_sampled": 4312237, "sample_time_ms": 20641.613, "load_time_ms": 15.439, "update_time_ms": 9.14}, "timesteps_since_restore": 4312237, "time_total_s": 3373.3107826709747, "timestamp": 1558606501, "time_since_restore": 3373.3107826709747, "policy_reward_mean": {}, "training_iteration": 98, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541860>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541978>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537da0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4558, "timesteps_total": 4312237, "episode_reward_mean": -504.48619103732204, "episodes_this_iter": 46, "date": "2019-05-23_10-15-01", "time_this_iter_s": 33.21534085273743, "num_metric_batches_dropped": 0, "episode_reward_min": -775.9186425478588}
{"iterations_since_restore": 99, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.671964006325133, "timesteps_this_iter": 42856, "custom_metrics": {"cost1_max": 227.2478989426857, "cost1_min": 17.967077663023094, "system_level_velocity_mean": 15.849690555092009, "cost2_mean": -97.48188027349906, "cost2_max": -17.277061868831765, "outflow_rate_max": 1450.6162558238593, "cost1_mean": 185.78909464403378, "system_level_velocity_min": 12.469813451215009, "system_level_velocity_max": 19.09761919243356, "outflow_rate_min": 431.75782487237836, "cost2_min": -123.10518455874572, "outflow_rate_mean": 1234.7541556492902}, "done": false, "pid": 51578, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.01624666340649128, "policy_loss": -0.006056598387658596, "total_loss": 17.59916877746582, "vf_explained_var": 0.9078919291496277, "cur_lr": 0.0005000000237487257, "entropy": 0.7242905497550964, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 17.602142333984375}, "num_steps_trained": 4355093, "grad_time_ms": 12057.914, "num_steps_sampled": 4355093, "sample_time_ms": 20987.924, "load_time_ms": 15.983, "update_time_ms": 9.065}, "timesteps_since_restore": 4355093, "time_total_s": 3407.856610774994, "timestamp": 1558606536, "time_since_restore": 3407.856610774994, "policy_reward_mean": {}, "training_iteration": 99, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845574e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4606, "timesteps_total": 4355093, "episode_reward_mean": -499.24303094403194, "episodes_this_iter": 48, "date": "2019-05-23_10-15-36", "time_this_iter_s": 34.545828104019165, "num_metric_batches_dropped": 0, "episode_reward_min": -754.9909676890665}
{"iterations_since_restore": 100, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.671964006325133, "timesteps_this_iter": 42254, "custom_metrics": {"cost1_max": 227.2478989426857, "cost1_min": 17.967077663023094, "system_level_velocity_mean": 16.00213139840776, "cost2_mean": -95.83887837946466, "cost2_max": -17.277061868831765, "outflow_rate_max": 1451.0131747619523, "cost1_mean": 187.56646702088597, "system_level_velocity_min": 12.456785170686205, "system_level_velocity_max": 19.16096851495664, "outflow_rate_min": 431.75782487237836, "cost2_min": -127.17897504328005, "outflow_rate_mean": 1244.4433463192197}, "done": false, "pid": 51578, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.014828589744865894, "policy_loss": -0.007904893718659878, "total_loss": 21.93950843811035, "vf_explained_var": 0.8869532942771912, "cur_lr": 0.0005000000237487257, "entropy": 0.7194271087646484, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 21.944599151611328}, "num_steps_trained": 4397347, "grad_time_ms": 12063.215, "num_steps_sampled": 4397347, "sample_time_ms": 21015.605, "load_time_ms": 16.759, "update_time_ms": 8.983}, "timesteps_since_restore": 4397347, "time_total_s": 3441.0003490448, "timestamp": 1558606569, "time_since_restore": 3441.0003490448, "policy_reward_mean": {}, "training_iteration": 100, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557d30>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845579b0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557f28>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4653, "timesteps_total": 4397347, "episode_reward_mean": -486.34352570480786, "episodes_this_iter": 47, "date": "2019-05-23_10-16-09", "time_this_iter_s": 33.14373826980591, "num_metric_batches_dropped": 0, "episode_reward_min": -767.2634244820953}
{"iterations_since_restore": 101, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -245.0624948415962, "timesteps_this_iter": 43065, "custom_metrics": {"cost1_max": 228.17294106822294, "cost1_min": 147.40434176165684, "system_level_velocity_mean": 16.065614127353186, "cost2_mean": -96.13397882454119, "cost2_max": -79.39206736018313, "outflow_rate_max": 1451.0131747619523, "cost1_mean": 190.90841958982313, "system_level_velocity_min": 12.456785170686205, "system_level_velocity_max": 19.16096851495664, "outflow_rate_min": 1034.1649402127389, "cost2_min": -127.17897504328005, "outflow_rate_mean": 1256.0732988463076}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015274517238140106, "policy_loss": -0.006063347682356834, "total_loss": 19.228673934936523, "vf_explained_var": 0.9081509709358215, "cur_lr": 0.0005000000237487257, "entropy": 0.7281160950660706, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 19.23183822631836}, "num_steps_trained": 4440412, "grad_time_ms": 12015.627, "num_steps_sampled": 4440412, "sample_time_ms": 21049.019, "load_time_ms": 16.691, "update_time_ms": 8.685}, "timesteps_since_restore": 4440412, "time_total_s": 3473.972337961197, "timestamp": 1558606602, "time_since_restore": 3473.972337961197, "policy_reward_mean": {}, "training_iteration": 101, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d30>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e80>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530da0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4697, "timesteps_total": 4440412, "episode_reward_mean": -488.48246575086165, "episodes_this_iter": 44, "date": "2019-05-23_10-16-42", "time_this_iter_s": 32.971988916397095, "num_metric_batches_dropped": 0, "episode_reward_min": -788.475006389041}
{"iterations_since_restore": 102, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.575819070282513, "timesteps_this_iter": 45202, "custom_metrics": {"cost1_max": 228.47009495199978, "cost1_min": 18.852672742681964, "system_level_velocity_mean": 15.602227739456941, "cost2_mean": -97.21153208966616, "cost2_max": -14.28070382550152, "outflow_rate_max": 1452.2297105501739, "cost1_mean": 183.14715915643237, "system_level_velocity_min": 12.496631385479207, "system_level_velocity_max": 19.186170481767494, "outflow_rate_min": 499.684746459077, "cost2_min": -120.47977259597995, "outflow_rate_mean": 1221.558081214684}, "done": false, "pid": 51578, "episode_len_mean": 322.03, "info": {"default": {"kl": 0.01623617857694626, "policy_loss": -0.007042683660984039, "total_loss": 17.918827056884766, "vf_explained_var": 0.9120972752571106, "cur_lr": 0.0005000000237487257, "entropy": 0.7374071478843689, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 17.922788619995117}, "num_steps_trained": 4485614, "grad_time_ms": 11917.041, "num_steps_sampled": 4485614, "sample_time_ms": 21123.177, "load_time_ms": 17.622, "update_time_ms": 8.398}, "timesteps_since_restore": 4485614, "time_total_s": 3507.2598583698273, "timestamp": 1558606635, "time_since_restore": 3507.2598583698273, "policy_reward_mean": {}, "training_iteration": 102, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557908>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557198>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b70>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4745, "timesteps_total": 4485614, "episode_reward_mean": -522.5968324842598, "episodes_this_iter": 48, "date": "2019-05-23_10-17-15", "time_this_iter_s": 33.28752040863037, "num_metric_batches_dropped": 0, "episode_reward_min": -788.475006389041}
{"iterations_since_restore": 103, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.575819070282513, "timesteps_this_iter": 44328, "custom_metrics": {"cost1_max": 228.47009495199978, "cost1_min": 18.852672742681964, "system_level_velocity_mean": 15.336287489645361, "cost2_mean": -99.2061431594489, "cost2_max": -14.28070382550152, "outflow_rate_max": 1452.2297105501739, "cost1_mean": 179.31804610010778, "system_level_velocity_min": 12.354763398350702, "system_level_velocity_max": 19.186170481767494, "outflow_rate_min": 499.684746459077, "cost2_min": -127.2143294404523, "outflow_rate_mean": 1207.6211760992687}, "done": false, "pid": 51578, "episode_len_mean": 320.85, "info": {"default": {"kl": 0.01635546237230301, "policy_loss": -0.007366046775132418, "total_loss": 20.39009666442871, "vf_explained_var": 0.8967673182487488, "cur_lr": 0.0005000000237487257, "entropy": 0.7310547828674316, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.394357681274414}, "num_steps_trained": 4529942, "grad_time_ms": 11891.893, "num_steps_sampled": 4529942, "sample_time_ms": 21262.601, "load_time_ms": 17.124, "update_time_ms": 8.402}, "timesteps_since_restore": 4529942, "time_total_s": 3541.2286615371704, "timestamp": 1558606669, "time_since_restore": 3541.2286615371704, "policy_reward_mean": {}, "training_iteration": 103, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845347f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534240>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a58>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4792, "timesteps_total": 4529942, "episode_reward_mean": -540.0853473698473, "episodes_this_iter": 47, "date": "2019-05-23_10-17-49", "time_this_iter_s": 33.96880316734314, "num_metric_batches_dropped": 0, "episode_reward_min": -809.4969340007431}
{"iterations_since_restore": 104, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.654662395399487, "timesteps_this_iter": 43016, "custom_metrics": {"cost1_max": 227.89271694574532, "cost1_min": 23.28999613768782, "system_level_velocity_mean": 15.607731782130172, "cost2_mean": -99.02592019149117, "cost2_max": -19.59441720622379, "outflow_rate_max": 1452.7740139081416, "cost1_mean": 182.61861516626246, "system_level_velocity_min": 12.238445177684138, "system_level_velocity_max": 19.2208829240938, "outflow_rate_min": 462.43348918263234, "cost2_min": -127.2143294404523, "outflow_rate_mean": 1220.0184091185736}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.015736844390630722, "policy_loss": -0.007087040692567825, "total_loss": 24.511619567871094, "vf_explained_var": 0.8773084282875061, "cur_lr": 0.0005000000237487257, "entropy": 0.7294410467147827, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 24.515718460083008}, "num_steps_trained": 4572958, "grad_time_ms": 11762.785, "num_steps_sampled": 4572958, "sample_time_ms": 21410.65, "load_time_ms": 17.083, "update_time_ms": 8.537}, "timesteps_since_restore": 4572958, "time_total_s": 3574.4155786037445, "timestamp": 1558606702, "time_since_restore": 3574.4155786037445, "policy_reward_mean": {}, "training_iteration": 104, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e80>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e80>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4837, "timesteps_total": 4572958, "episode_reward_mean": -519.8684724132614, "episodes_this_iter": 45, "date": "2019-05-23_10-18-22", "time_this_iter_s": 33.1869170665741, "num_metric_batches_dropped": 0, "episode_reward_min": -813.2088591846814}
{"iterations_since_restore": 105, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.654662395399487, "timesteps_this_iter": 44296, "custom_metrics": {"cost1_max": 228.0350195909743, "cost1_min": 23.28999613768782, "system_level_velocity_mean": 15.692777650915302, "cost2_mean": -98.23530149974475, "cost2_max": -19.59441720622379, "outflow_rate_max": 1452.7740139081416, "cost1_mean": 183.10506446124668, "system_level_velocity_min": 12.096826347510566, "system_level_velocity_max": 19.2208829240938, "outflow_rate_min": 462.43348918263234, "cost2_min": -127.2143294404523, "outflow_rate_mean": 1221.5105436769295}, "done": false, "pid": 51578, "episode_len_mean": 320.13, "info": {"default": {"kl": 0.014500143937766552, "policy_loss": -0.005612147971987724, "total_loss": 18.477943420410156, "vf_explained_var": 0.9087659120559692, "cur_lr": 0.0005000000237487257, "entropy": 0.7406613826751709, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 18.480802536010742}, "num_steps_trained": 4617254, "grad_time_ms": 11562.116, "num_steps_sampled": 4617254, "sample_time_ms": 21621.962, "load_time_ms": 17.364, "update_time_ms": 8.778}, "timesteps_since_restore": 4617254, "time_total_s": 3607.5648624897003, "timestamp": 1558606736, "time_since_restore": 3607.5648624897003, "policy_reward_mean": {}, "training_iteration": 105, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541550>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541080>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557128>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4885, "timesteps_total": 4617254, "episode_reward_mean": -512.5170788946389, "episodes_this_iter": 48, "date": "2019-05-23_10-18-56", "time_this_iter_s": 33.14928388595581, "num_metric_batches_dropped": 0, "episode_reward_min": -813.2088591846814}
{"iterations_since_restore": 106, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.45713449119074, "timesteps_this_iter": 42003, "custom_metrics": {"cost1_max": 228.45234060879233, "cost1_min": 88.4835877454517, "system_level_velocity_mean": 15.771003861905513, "cost2_mean": -96.78000907466023, "cost2_max": -50.64611097747122, "outflow_rate_max": 1450.3666442002216, "cost1_mean": 185.15549578480542, "system_level_velocity_min": 12.096826347510566, "system_level_velocity_max": 19.21156883042618, "outflow_rate_min": 816.4397124179051, "cost2_min": -119.09838854730909, "outflow_rate_mean": 1232.5218030451238}, "done": false, "pid": 51578, "episode_len_mean": 321.85, "info": {"default": {"kl": 0.015744267031550407, "policy_loss": -0.006090735085308552, "total_loss": 19.694168090820312, "vf_explained_var": 0.8985731601715088, "cur_lr": 0.0005000000237487257, "entropy": 0.7230099439620972, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 19.697269439697266}, "num_steps_trained": 4659257, "grad_time_ms": 11445.184, "num_steps_sampled": 4659257, "sample_time_ms": 21796.086, "load_time_ms": 16.677, "update_time_ms": 8.673}, "timesteps_since_restore": 4659257, "time_total_s": 3640.070248365402, "timestamp": 1558606768, "time_since_restore": 3640.070248365402, "policy_reward_mean": {}, "training_iteration": 106, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a58>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845574e0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557da0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4932, "timesteps_total": 4659257, "episode_reward_mean": -506.39434418646687, "episodes_this_iter": 47, "date": "2019-05-23_10-19-28", "time_this_iter_s": 32.505385875701904, "num_metric_batches_dropped": 0, "episode_reward_min": -804.7431518954909}
{"iterations_since_restore": 107, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.406609887855957, "timesteps_this_iter": 42195, "custom_metrics": {"cost1_max": 228.45234060879233, "cost1_min": 17.957646613341712, "system_level_velocity_mean": 16.094242346095918, "cost2_mean": -94.75442355368239, "cost2_max": -14.252677156624209, "outflow_rate_max": 1450.3666442002216, "cost1_mean": 187.564977382001, "system_level_velocity_min": 12.477558782681129, "system_level_velocity_max": 19.21156883042618, "outflow_rate_min": 496.0238329292389, "cost2_min": -119.09838854730909, "outflow_rate_mean": 1240.4590568876579}, "done": false, "pid": 51578, "episode_len_mean": 319.74, "info": {"default": {"kl": 0.015157799236476421, "policy_loss": -0.007130651269108057, "total_loss": 23.951522827148438, "vf_explained_var": 0.8728152513504028, "cur_lr": 0.0005000000237487257, "entropy": 0.7207081913948059, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 23.95577621459961}, "num_steps_trained": 4701452, "grad_time_ms": 11383.743, "num_steps_sampled": 4701452, "sample_time_ms": 21967.502, "load_time_ms": 15.728, "update_time_ms": 9.048}, "timesteps_since_restore": 4701452, "time_total_s": 3674.777494430542, "timestamp": 1558606803, "time_since_restore": 3674.777494430542, "policy_reward_mean": {}, "training_iteration": 107, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845575f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ba8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557588>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 4978, "timesteps_total": 4701452, "episode_reward_mean": -481.46490084919037, "episodes_this_iter": 46, "date": "2019-05-23_10-20-03", "time_this_iter_s": 34.70724606513977, "num_metric_batches_dropped": 0, "episode_reward_min": -763.0920165458007}
{"iterations_since_restore": 108, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.406609887855957, "timesteps_this_iter": 43319, "custom_metrics": {"cost1_max": 227.97895556544063, "cost1_min": 17.957646613341712, "system_level_velocity_mean": 16.0701815571644, "cost2_mean": -94.7646626607953, "cost2_max": -14.252677156624209, "outflow_rate_max": 1448.2951303451896, "cost1_mean": 186.2728196289076, "system_level_velocity_min": 11.70599763585334, "system_level_velocity_max": 19.172433204803752, "outflow_rate_min": 477.1055332935651, "cost2_min": -130.68032096669958, "outflow_rate_mean": 1233.540230310487}, "done": false, "pid": 51578, "episode_len_mean": 318.04, "info": {"default": {"kl": 0.016199592500925064, "policy_loss": -0.006873845122754574, "total_loss": 19.847980499267578, "vf_explained_var": 0.8980628848075867, "cur_lr": 0.0005000000237487257, "entropy": 0.7500870227813721, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 19.85177993774414}, "num_steps_trained": 4744771, "grad_time_ms": 11474.062, "num_steps_sampled": 4744771, "sample_time_ms": 22088.22, "load_time_ms": 15.108, "update_time_ms": 9.32}, "timesteps_since_restore": 4744771, "time_total_s": 3710.114143848419, "timestamp": 1558606838, "time_since_restore": 3710.114143848419, "policy_reward_mean": {}, "training_iteration": 108, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534898>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534978>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5027, "timesteps_total": 4744771, "episode_reward_mean": -482.06310429056145, "episodes_this_iter": 49, "date": "2019-05-23_10-20-38", "time_this_iter_s": 35.3366494178772, "num_metric_batches_dropped": 0, "episode_reward_min": -774.6870803424523}
{"iterations_since_restore": 109, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.812671271854676, "timesteps_this_iter": 41833, "custom_metrics": {"cost1_max": 227.54655856957228, "cost1_min": 24.544867394012527, "system_level_velocity_mean": 16.12647882733771, "cost2_mean": -93.79344622655448, "cost2_max": -19.803138209424613, "outflow_rate_max": 1452.2508628549588, "cost1_mean": 185.68409871241533, "system_level_velocity_min": 11.70599763585334, "system_level_velocity_max": 19.214914730046797, "outflow_rate_min": 477.1055332935651, "cost2_min": -130.68032096669958, "outflow_rate_mean": 1231.951627115444}, "done": false, "pid": 51578, "episode_len_mean": 316.06, "info": {"default": {"kl": 0.014423280023038387, "policy_loss": -0.005540783982723951, "total_loss": 15.560625076293945, "vf_explained_var": 0.918379545211792, "cur_lr": 0.0005000000237487257, "entropy": 0.7558193206787109, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 15.563426971435547}, "num_steps_trained": 4786604, "grad_time_ms": 11409.175, "num_steps_sampled": 4786604, "sample_time_ms": 21950.421, "load_time_ms": 15.045, "update_time_ms": 9.356}, "timesteps_since_restore": 4786604, "time_total_s": 3742.612076997757, "timestamp": 1558606871, "time_since_restore": 3742.612076997757, "policy_reward_mean": {}, "training_iteration": 109, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b080>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537358>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5076, "timesteps_total": 4786604, "episode_reward_mean": -473.9932932316388, "episodes_this_iter": 49, "date": "2019-05-23_10-21-11", "time_this_iter_s": 32.49793314933777, "num_metric_batches_dropped": 0, "episode_reward_min": -774.6870803424523}
{"iterations_since_restore": 110, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.21876487375643, "timesteps_this_iter": 42432, "custom_metrics": {"cost1_max": 227.54655856957228, "cost1_min": 79.80774086303295, "system_level_velocity_mean": 16.22896559484849, "cost2_mean": -93.60699081947858, "cost2_max": -46.79142637849708, "outflow_rate_max": 1452.2508628549588, "cost1_mean": 187.3535909514447, "system_level_velocity_min": 11.768194535167172, "system_level_velocity_max": 19.214914730046797, "outflow_rate_min": 740.8682621107451, "cost2_min": -116.75004254124997, "outflow_rate_mean": 1243.730489701749}, "done": false, "pid": 51578, "episode_len_mean": 316.58, "info": {"default": {"kl": 0.015248208306729794, "policy_loss": -0.007424716372042894, "total_loss": 16.11890411376953, "vf_explained_var": 0.9152455925941467, "cur_lr": 0.0005000000237487257, "entropy": 0.7801188230514526, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 16.123435974121094}, "num_steps_trained": 4829036, "grad_time_ms": 11297.493, "num_steps_sampled": 4829036, "sample_time_ms": 22085.448, "load_time_ms": 15.01, "update_time_ms": 9.628}, "timesteps_since_restore": 4829036, "time_total_s": 3775.9772584438324, "timestamp": 1558606904, "time_since_restore": 3775.9772584438324, "policy_reward_mean": {}, "training_iteration": 110, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549860>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549518>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549c50>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5121, "timesteps_total": 4829036, "episode_reward_mean": -463.7838339375372, "episodes_this_iter": 45, "date": "2019-05-23_10-21-44", "time_this_iter_s": 33.36518144607544, "num_metric_batches_dropped": 0, "episode_reward_min": -800.5993867216282}
{"iterations_since_restore": 111, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -158.6316856600408, "timesteps_this_iter": 44915, "custom_metrics": {"cost1_max": 227.7226832708617, "cost1_min": 139.60564349401702, "system_level_velocity_mean": 15.683826206593046, "cost2_mean": -97.42052622061223, "cost2_max": -62.178253222673234, "outflow_rate_max": 1451.1166091134294, "cost1_mean": 184.92934276123933, "system_level_velocity_min": 11.768194535167172, "system_level_velocity_max": 19.062325601030906, "outflow_rate_min": 994.9168130167044, "cost2_min": -116.75004254124997, "outflow_rate_mean": 1231.746587720113}, "done": false, "pid": 51578, "episode_len_mean": 322.64, "info": {"default": {"kl": 0.016434939578175545, "policy_loss": -0.007315488066524267, "total_loss": 16.700214385986328, "vf_explained_var": 0.9136624336242676, "cur_lr": 0.0005000000237487257, "entropy": 0.793498694896698, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 16.704410552978516}, "num_steps_trained": 4873951, "grad_time_ms": 11363.775, "num_steps_sampled": 4873951, "sample_time_ms": 22253.211, "load_time_ms": 14.392, "update_time_ms": 9.865}, "timesteps_since_restore": 4873951, "time_total_s": 3811.3075716495514, "timestamp": 1558606940, "time_since_restore": 3811.3075716495514, "policy_reward_mean": {}, "training_iteration": 111, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530128>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5168, "timesteps_total": 4873951, "episode_reward_mean": -511.9610600350494, "episodes_this_iter": 47, "date": "2019-05-23_10-22-20", "time_this_iter_s": 35.330313205718994, "num_metric_batches_dropped": 0, "episode_reward_min": -800.5993867216282}
{"iterations_since_restore": 112, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -242.35707392948973, "timesteps_this_iter": 44149, "custom_metrics": {"cost1_max": 227.91093119989083, "cost1_min": 139.60564349401702, "system_level_velocity_mean": 15.491656148182535, "cost2_mean": -98.79476920163967, "cost2_max": -82.81298644096108, "outflow_rate_max": 1451.1166091134294, "cost1_mean": 184.10033791174462, "system_level_velocity_min": 11.768194535167172, "system_level_velocity_max": 19.111056090437458, "outflow_rate_min": 994.9168130167044, "cost2_min": -116.75004254124997, "outflow_rate_mean": 1224.1181486906717}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014029386453330517, "policy_loss": -0.004973019473254681, "total_loss": 17.220876693725586, "vf_explained_var": 0.9130574464797974, "cur_lr": 0.0005000000237487257, "entropy": 0.8020333647727966, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 17.223186492919922}, "num_steps_trained": 4918100, "grad_time_ms": 11399.574, "num_steps_sampled": 4918100, "sample_time_ms": 22175.902, "load_time_ms": 14.314, "update_time_ms": 10.234}, "timesteps_since_restore": 4918100, "time_total_s": 3844.1898505687714, "timestamp": 1558606973, "time_since_restore": 3844.1898505687714, "policy_reward_mean": {}, "training_iteration": 112, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534898>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534940>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5215, "timesteps_total": 4918100, "episode_reward_mean": -534.4441532102684, "episodes_this_iter": 47, "date": "2019-05-23_10-22-53", "time_this_iter_s": 32.88227891921997, "num_metric_batches_dropped": 0, "episode_reward_min": -800.5993867216282}
{"iterations_since_restore": 113, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.78569088228318, "timesteps_this_iter": 42246, "custom_metrics": {"cost1_max": 227.91093119989083, "cost1_min": 86.3020987120543, "system_level_velocity_mean": 15.822604980955306, "cost2_mean": -96.9263843747306, "cost2_max": -51.37161339853928, "outflow_rate_max": 1457.9293246096058, "cost1_mean": 186.54469760120793, "system_level_velocity_min": 12.465581546933864, "system_level_velocity_max": 19.111056090437458, "outflow_rate_min": 796.7642802232903, "cost2_min": -114.26173895057939, "outflow_rate_mean": 1237.7697697276608}, "done": false, "pid": 51578, "episode_len_mean": 322.8, "info": {"default": {"kl": 0.014881822280585766, "policy_loss": -0.0058767786249518394, "total_loss": 20.286670684814453, "vf_explained_var": 0.8947329521179199, "cur_lr": 0.0005000000237487257, "entropy": 0.8026840686798096, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.289722442626953}, "num_steps_trained": 4960346, "grad_time_ms": 11404.586, "num_steps_sampled": 4960346, "sample_time_ms": 22066.408, "load_time_ms": 14.375, "update_time_ms": 10.156}, "timesteps_since_restore": 4960346, "time_total_s": 3877.0983498096466, "timestamp": 1558607005, "time_since_restore": 3877.0983498096466, "policy_reward_mean": {}, "training_iteration": 113, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534710>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845340f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5259, "timesteps_total": 4960346, "episode_reward_mean": -507.14430110125176, "episodes_this_iter": 44, "date": "2019-05-23_10-23-25", "time_this_iter_s": 32.908499240875244, "num_metric_batches_dropped": 0, "episode_reward_min": -771.4472900071778}
{"iterations_since_restore": 114, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.78569088228318, "timesteps_this_iter": 43635, "custom_metrics": {"cost1_max": 227.7907767344749, "cost1_min": 86.3020987120543, "system_level_velocity_mean": 16.026486595505585, "cost2_mean": -96.95602672514144, "cost2_max": -51.37161339853928, "outflow_rate_max": 1457.9293246096058, "cost1_mean": 188.2916758393091, "system_level_velocity_min": 12.321456504955858, "system_level_velocity_max": 19.065620067723465, "outflow_rate_min": 796.7642802232903, "cost2_min": -116.15157176212915, "outflow_rate_mean": 1246.5811979262726}, "done": false, "pid": 51578, "episode_len_mean": 321.62, "info": {"default": {"kl": 0.0151846157386899, "policy_loss": -0.00577891431748867, "total_loss": 23.12294578552246, "vf_explained_var": 0.877148449420929, "cur_lr": 0.0005000000237487257, "entropy": 0.8124565482139587, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 23.12584114074707}, "num_steps_trained": 5003981, "grad_time_ms": 11520.161, "num_steps_sampled": 5003981, "sample_time_ms": 21987.167, "load_time_ms": 13.677, "update_time_ms": 10.217}, "timesteps_since_restore": 5003981, "time_total_s": 3910.659608602524, "timestamp": 1558607039, "time_since_restore": 3910.659608602524, "policy_reward_mean": {}, "training_iteration": 114, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557828>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845574e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5305, "timesteps_total": 5003981, "episode_reward_mean": -490.08572886085, "episodes_this_iter": 46, "date": "2019-05-23_10-23-59", "time_this_iter_s": 33.5612587928772, "num_metric_batches_dropped": 0, "episode_reward_min": -812.8315896739731}
{"iterations_since_restore": 115, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -157.47436607989297, "timesteps_this_iter": 43857, "custom_metrics": {"cost1_max": 227.70765043225612, "cost1_min": 144.31709437963693, "system_level_velocity_mean": 15.66197047120195, "cost2_mean": -99.43589942745568, "cost2_max": -70.0842240875027, "outflow_rate_max": 1453.7624465146669, "cost1_mean": 184.5080920417791, "system_level_velocity_min": 12.321456504955858, "system_level_velocity_max": 19.051522634288727, "outflow_rate_min": 1033.806273420551, "cost2_min": -117.84353999765042, "outflow_rate_mean": 1228.254708265975}, "done": false, "pid": 51578, "episode_len_mean": 322.64, "info": {"default": {"kl": 0.014452323317527771, "policy_loss": -0.006927391979843378, "total_loss": 19.68247413635254, "vf_explained_var": 0.8982908725738525, "cur_lr": 0.0005000000237487257, "entropy": 0.7974036931991577, "cur_kl_coeff": 0.1898437887430191, "vf_loss": 19.686656951904297}, "num_steps_trained": 5047838, "grad_time_ms": 11742.735, "num_steps_sampled": 5047838, "sample_time_ms": 21823.407, "load_time_ms": 13.556, "update_time_ms": 10.434}, "timesteps_since_restore": 5047838, "time_total_s": 3944.4148712158203, "timestamp": 1558607073, "time_since_restore": 3944.4148712158203, "policy_reward_mean": {}, "training_iteration": 115, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b080>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c7f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c6d8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5356, "timesteps_total": 5047838, "episode_reward_mean": -520.5689982723412, "episodes_this_iter": 51, "date": "2019-05-23_10-24-33", "time_this_iter_s": 33.75526261329651, "num_metric_batches_dropped": 0, "episode_reward_min": -812.8315896739731}
{"iterations_since_restore": 116, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -159.11678393619502, "timesteps_this_iter": 44320, "custom_metrics": {"cost1_max": 227.2801741762762, "cost1_min": 144.31709437963693, "system_level_velocity_mean": 15.504586877469297, "cost2_mean": -100.18812386146232, "cost2_max": -71.24537816365364, "outflow_rate_max": 1453.5645938743335, "cost1_mean": 183.24877565039998, "system_level_velocity_min": 12.62701205052586, "system_level_velocity_max": 19.048043815097426, "outflow_rate_min": 1052.4099326145556, "cost2_min": -119.76146495961697, "outflow_rate_mean": 1221.9956694956918}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.013978133909404278, "policy_loss": -0.007187481503933668, "total_loss": 18.092674255371094, "vf_explained_var": 0.9094241857528687, "cur_lr": 0.0005000000237487257, "entropy": 0.7977789044380188, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 18.097209930419922}, "num_steps_trained": 5092158, "grad_time_ms": 11959.501, "num_steps_sampled": 5092158, "sample_time_ms": 21583.292, "load_time_ms": 14.429, "update_time_ms": 10.679}, "timesteps_since_restore": 5092158, "time_total_s": 3976.7156352996826, "timestamp": 1558607105, "time_since_restore": 3976.7156352996826, "policy_reward_mean": {}, "training_iteration": 116, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c0f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cf28>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c828>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5397, "timesteps_total": 5092158, "episode_reward_mean": -534.6805445191885, "episodes_this_iter": 41, "date": "2019-05-23_10-25-05", "time_this_iter_s": 32.300764083862305, "num_metric_batches_dropped": 0, "episode_reward_min": -768.3912981237963}
{"iterations_since_restore": 117, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -240.44998479326298, "timesteps_this_iter": 43706, "custom_metrics": {"cost1_max": 229.04278192876905, "cost1_min": 144.72571113455115, "system_level_velocity_mean": 15.670887831806418, "cost2_mean": -100.54852113385881, "cost2_max": -83.70330837173599, "outflow_rate_max": 1456.857575305067, "cost1_mean": 185.9584434944096, "system_level_velocity_min": 12.090677992630027, "system_level_velocity_max": 19.329276817446512, "outflow_rate_min": 1052.4099326145556, "cost2_min": -125.83844076951769, "outflow_rate_mean": 1234.3210820198647}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015766365453600883, "policy_loss": -0.006361664738506079, "total_loss": 19.735145568847656, "vf_explained_var": 0.9063016176223755, "cur_lr": 0.0005000000237487257, "entropy": 0.7872376441955566, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 19.738513946533203}, "num_steps_trained": 5135864, "grad_time_ms": 12205.551, "num_steps_sampled": 5135864, "sample_time_ms": 21423.607, "load_time_ms": 15.564, "update_time_ms": 10.294}, "timesteps_since_restore": 5135864, "time_total_s": 4012.302523612976, "timestamp": 1558607141, "time_since_restore": 4012.302523612976, "policy_reward_mean": {}, "training_iteration": 117, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c7b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ceb8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cf60>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5444, "timesteps_total": 5135864, "episode_reward_mean": -522.5777238011145, "episodes_this_iter": 47, "date": "2019-05-23_10-25-41", "time_this_iter_s": 35.58688831329346, "num_metric_batches_dropped": 0, "episode_reward_min": -779.2940318346422}
{"iterations_since_restore": 118, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -240.44998479326298, "timesteps_this_iter": 43057, "custom_metrics": {"cost1_max": 229.04278192876905, "cost1_min": 144.72571113455115, "system_level_velocity_mean": 15.88271114079577, "cost2_mean": -99.73876181791731, "cost2_max": -81.81564050076176, "outflow_rate_max": 1456.857575305067, "cost1_mean": 188.39671669998933, "system_level_velocity_min": 12.090677992630027, "system_level_velocity_max": 19.329276817446512, "outflow_rate_min": 1059.6567424242423, "cost2_min": -125.83844076951769, "outflow_rate_mean": 1248.0556474009916}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015389255248010159, "policy_loss": -0.007265498861670494, "total_loss": 18.692411422729492, "vf_explained_var": 0.9057442545890808, "cur_lr": 0.0005000000237487257, "entropy": 0.7939480543136597, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 18.69675636291504}, "num_steps_trained": 5178921, "grad_time_ms": 12127.351, "num_steps_sampled": 5178921, "sample_time_ms": 21321.375, "load_time_ms": 15.955, "update_time_ms": 10.337}, "timesteps_since_restore": 5178921, "time_total_s": 4045.8228821754456, "timestamp": 1558607174, "time_since_restore": 4045.8228821754456, "policy_reward_mean": {}, "training_iteration": 118, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845340f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549748>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549550>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5494, "timesteps_total": 5178921, "episode_reward_mean": -507.75898888650323, "episodes_this_iter": 50, "date": "2019-05-23_10-26-14", "time_this_iter_s": 33.52035856246948, "num_metric_batches_dropped": 0, "episode_reward_min": -779.2940318346422}
{"iterations_since_restore": 119, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -243.32865503504826, "timesteps_this_iter": 43390, "custom_metrics": {"cost1_max": 229.04278192876905, "cost1_min": 145.42134868420752, "system_level_velocity_mean": 15.808902324596238, "cost2_mean": -100.08399038538761, "cost2_max": -81.81564050076176, "outflow_rate_max": 1456.857575305067, "cost1_mean": 187.6204091100986, "system_level_velocity_min": 12.402677656437389, "system_level_velocity_max": 19.281428544717418, "outflow_rate_min": 1052.6848063211896, "cost2_min": -125.13524218339182, "outflow_rate_mean": 1245.5431930353736}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014731771312654018, "policy_loss": -0.006181103177368641, "total_loss": 17.957691192626953, "vf_explained_var": 0.9079806804656982, "cur_lr": 0.0005000000237487257, "entropy": 0.8068637251853943, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 17.96107292175293}, "num_steps_trained": 5222311, "grad_time_ms": 12177.792, "num_steps_sampled": 5222311, "sample_time_ms": 21254.778, "load_time_ms": 16.103, "update_time_ms": 10.113}, "timesteps_since_restore": 5222311, "time_total_s": 4078.173136472702, "timestamp": 1558607207, "time_since_restore": 4078.173136472702, "policy_reward_mean": {}, "training_iteration": 119, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537dd8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374e0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375c0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5536, "timesteps_total": 5222311, "episode_reward_mean": -514.9462310192138, "episodes_this_iter": 42, "date": "2019-05-23_10-26-47", "time_this_iter_s": 32.35025429725647, "num_metric_batches_dropped": 0, "episode_reward_min": -788.6587131468576}
{"iterations_since_restore": 120, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -243.32865503504826, "timesteps_this_iter": 43998, "custom_metrics": {"cost1_max": 229.00042919609064, "cost1_min": 142.56487374536928, "system_level_velocity_mean": 15.74253301929317, "cost2_mean": -100.61086976223491, "cost2_max": -83.61905448450341, "outflow_rate_max": 1457.9042199068545, "cost1_mean": 186.88053282252721, "system_level_velocity_min": 12.159743630418665, "system_level_velocity_max": 19.281428544717418, "outflow_rate_min": 1034.8698214285716, "cost2_min": -125.13524218339182, "outflow_rate_mean": 1243.6472993879468}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015950512140989304, "policy_loss": -0.0063949269242584705, "total_loss": 19.03533935546875, "vf_explained_var": 0.9069623351097107, "cur_lr": 0.0005000000237487257, "entropy": 0.8099206686019897, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 19.038705825805664}, "num_steps_trained": 5266309, "grad_time_ms": 12276.972, "num_steps_sampled": 5266309, "sample_time_ms": 21181.844, "load_time_ms": 16.272, "update_time_ms": 9.722}, "timesteps_since_restore": 5266309, "time_total_s": 4111.804395198822, "timestamp": 1558607240, "time_since_restore": 4111.804395198822, "policy_reward_mean": {}, "training_iteration": 120, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537be0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537780>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537d30>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5583, "timesteps_total": 5266309, "episode_reward_mean": -517.5302120594426, "episodes_this_iter": 47, "date": "2019-05-23_10-27-20", "time_this_iter_s": 33.631258726119995, "num_metric_batches_dropped": 0, "episode_reward_min": -788.6587131468576}
{"iterations_since_restore": 121, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -247.87002523929021, "timesteps_this_iter": 43930, "custom_metrics": {"cost1_max": 227.69374554307848, "cost1_min": 142.56487374536928, "system_level_velocity_mean": 15.692743787275335, "cost2_mean": -101.1128657025132, "cost2_max": -83.61905448450341, "outflow_rate_max": 1458.093981900184, "cost1_mean": 186.45872861945134, "system_level_velocity_min": 12.159743630418665, "system_level_velocity_max": 19.11255912315362, "outflow_rate_min": 1034.8698214285716, "cost2_min": -123.45520823483652, "outflow_rate_mean": 1242.2532982330251}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01573300175368786, "policy_loss": -0.008147494867444038, "total_loss": 20.341087341308594, "vf_explained_var": 0.8928871154785156, "cur_lr": 0.0005000000237487257, "entropy": 0.8043590188026428, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 20.346250534057617}, "num_steps_trained": 5310239, "grad_time_ms": 12166.978, "num_steps_sampled": 5310239, "sample_time_ms": 21138.24, "load_time_ms": 16.708, "update_time_ms": 9.508}, "timesteps_since_restore": 5310239, "time_total_s": 4145.597651720047, "timestamp": 1558607274, "time_since_restore": 4145.597651720047, "policy_reward_mean": {}, "training_iteration": 121, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845345c0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845347f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5633, "timesteps_total": 5310239, "episode_reward_mean": -519.3593365583026, "episodes_this_iter": 50, "date": "2019-05-23_10-27-54", "time_this_iter_s": 33.793256521224976, "num_metric_batches_dropped": 0, "episode_reward_min": -778.9004645871477}
{"iterations_since_restore": 122, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -247.87002523929021, "timesteps_this_iter": 44180, "custom_metrics": {"cost1_max": 227.7550947599824, "cost1_min": 142.56487374536928, "system_level_velocity_mean": 15.472307294474529, "cost2_mean": -101.28754576543133, "cost2_max": -87.08959150156767, "outflow_rate_max": 1458.093981900184, "cost1_mean": 183.64258535985934, "system_level_velocity_min": 12.159743630418665, "system_level_velocity_max": 19.208522386007076, "outflow_rate_min": 1034.8698214285716, "cost2_min": -124.45430886069279, "outflow_rate_mean": 1226.6888620668112}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01615193672478199, "policy_loss": -0.0074824742041528225, "total_loss": 16.504240036010742, "vf_explained_var": 0.9156750440597534, "cur_lr": 0.0005000000237487257, "entropy": 0.8139634132385254, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 16.508655548095703}, "num_steps_trained": 5354419, "grad_time_ms": 12105.617, "num_steps_sampled": 5354419, "sample_time_ms": 21195.126, "load_time_ms": 16.719, "update_time_ms": 9.295}, "timesteps_since_restore": 5354419, "time_total_s": 4178.410714626312, "timestamp": 1558607307, "time_since_restore": 4178.410714626312, "policy_reward_mean": {}, "training_iteration": 122, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cac8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541390>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5676, "timesteps_total": 5354419, "episode_reward_mean": -542.0132854341662, "episodes_this_iter": 43, "date": "2019-05-23_10-28-27", "time_this_iter_s": 32.81306290626526, "num_metric_batches_dropped": 0, "episode_reward_min": -801.5615547603762}
{"iterations_since_restore": 123, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -248.11901661696115, "timesteps_this_iter": 41495, "custom_metrics": {"cost1_max": 228.1326326743228, "cost1_min": 146.7703431324739, "system_level_velocity_mean": 15.854518008783408, "cost2_mean": -100.03637320621954, "cost2_max": -87.08959150156767, "outflow_rate_max": 1456.8809322068264, "cost1_mean": 188.352748538, "system_level_velocity_min": 12.42962408996956, "system_level_velocity_max": 19.208522386007076, "outflow_rate_min": 1035.0578333915737, "cost2_min": -124.45430886069279, "outflow_rate_mean": 1246.489291836519}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014779673889279366, "policy_loss": -0.008248681202530861, "total_loss": 22.258892059326172, "vf_explained_var": 0.8768622279167175, "cur_lr": 0.0005000000237487257, "entropy": 0.7953847050666809, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 22.26433563232422}, "num_steps_trained": 5395914, "grad_time_ms": 11925.646, "num_steps_sampled": 5395914, "sample_time_ms": 21263.299, "load_time_ms": 16.023, "update_time_ms": 9.288}, "timesteps_since_restore": 5395914, "time_total_s": 4210.198422193527, "timestamp": 1558607339, "time_since_restore": 4210.198422193527, "policy_reward_mean": {}, "training_iteration": 123, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845574a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ef0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557550>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5723, "timesteps_total": 5395914, "episode_reward_mean": -513.2254014563574, "episodes_this_iter": 47, "date": "2019-05-23_10-28-59", "time_this_iter_s": 31.787707567214966, "num_metric_batches_dropped": 0, "episode_reward_min": -801.5615547603762}
{"iterations_since_restore": 124, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -242.4437637811096, "timesteps_this_iter": 42172, "custom_metrics": {"cost1_max": 229.03768048635516, "cost1_min": 150.0910021498517, "system_level_velocity_mean": 16.396697932196172, "cost2_mean": -98.56317770467855, "cost2_max": -86.12881474847055, "outflow_rate_max": 1457.1494732962105, "cost1_mean": 194.89319165537992, "system_level_velocity_min": 12.840982804180015, "system_level_velocity_max": 19.278898364695987, "outflow_rate_min": 1082.4822278832792, "cost2_min": -115.06513283207408, "outflow_rate_mean": 1274.5499259363064}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014238114468753338, "policy_loss": -0.007332142908126116, "total_loss": 16.278759002685547, "vf_explained_var": 0.912691056728363, "cur_lr": 0.0005000000237487257, "entropy": 0.7938187122344971, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 16.283390045166016}, "num_steps_trained": 5438086, "grad_time_ms": 11845.505, "num_steps_sampled": 5438086, "sample_time_ms": 21376.722, "load_time_ms": 16.562, "update_time_ms": 9.339}, "timesteps_since_restore": 5438086, "time_total_s": 4244.095403671265, "timestamp": 1558607373, "time_since_restore": 4244.095403671265, "policy_reward_mean": {}, "training_iteration": 124, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c898>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cf98>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c550>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5770, "timesteps_total": 5438086, "episode_reward_mean": -471.1058192471205, "episodes_this_iter": 47, "date": "2019-05-23_10-29-33", "time_this_iter_s": 33.89698147773743, "num_metric_batches_dropped": 0, "episode_reward_min": -760.4659421551612}
{"iterations_since_restore": 125, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -242.4437637811096, "timesteps_this_iter": 44023, "custom_metrics": {"cost1_max": 229.03768048635516, "cost1_min": 145.21277751315785, "system_level_velocity_mean": 16.072241266326976, "cost2_mean": -100.31738649936761, "cost2_max": -84.80275163257608, "outflow_rate_max": 1458.018039803708, "cost1_mean": 191.0052465440484, "system_level_velocity_min": 12.288632970714792, "system_level_velocity_max": 19.278898364695987, "outflow_rate_min": 1006.2503820598008, "cost2_min": -120.04334725084989, "outflow_rate_mean": 1260.390172443528}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017017291858792305, "policy_loss": -0.008298112079501152, "total_loss": 15.542521476745605, "vf_explained_var": 0.9207808375358582, "cur_lr": 0.0005000000237487257, "entropy": 0.8010160326957703, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 15.547589302062988}, "num_steps_trained": 5482109, "grad_time_ms": 11833.927, "num_steps_sampled": 5482109, "sample_time_ms": 21460.339, "load_time_ms": 16.161, "update_time_ms": 9.36}, "timesteps_since_restore": 5482109, "time_total_s": 4278.571660995483, "timestamp": 1558607407, "time_since_restore": 4278.571660995483, "policy_reward_mean": {}, "training_iteration": 125, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845576d8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845577f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845574a8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5816, "timesteps_total": 5482109, "episode_reward_mean": -492.573507711271, "episodes_this_iter": 46, "date": "2019-05-23_10-30-07", "time_this_iter_s": 34.47625732421875, "num_metric_batches_dropped": 0, "episode_reward_min": -792.419168751633}
{"iterations_since_restore": 126, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -242.4437637811096, "timesteps_this_iter": 44298, "custom_metrics": {"cost1_max": 229.2508923557211, "cost1_min": 145.21277751315785, "system_level_velocity_mean": 15.70185254795909, "cost2_mean": -101.21789580621531, "cost2_max": -84.80275163257608, "outflow_rate_max": 1458.018039803708, "cost1_mean": 186.47471500959978, "system_level_velocity_min": 12.288632970714792, "system_level_velocity_max": 19.262009924193087, "outflow_rate_min": 1006.2503820598008, "cost2_min": -120.04334725084989, "outflow_rate_mean": 1239.8678257481952}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017555033788084984, "policy_loss": -0.008941738866269588, "total_loss": 17.91343879699707, "vf_explained_var": 0.9091286063194275, "cur_lr": 0.0005000000237487257, "entropy": 0.8013309240341187, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 17.91904640197754}, "num_steps_trained": 5526407, "grad_time_ms": 11789.943, "num_steps_sampled": 5526407, "sample_time_ms": 21625.485, "load_time_ms": 16.078, "update_time_ms": 9.412}, "timesteps_since_restore": 5526407, "time_total_s": 4312.075375556946, "timestamp": 1558607441, "time_since_restore": 4312.075375556946, "policy_reward_mean": {}, "training_iteration": 126, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549208>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549dd8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549cf8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5860, "timesteps_total": 5526407, "episode_reward_mean": -522.4127418303156, "episodes_this_iter": 44, "date": "2019-05-23_10-30-41", "time_this_iter_s": 33.5037145614624, "num_metric_batches_dropped": 0, "episode_reward_min": -807.2052985540985}
{"iterations_since_restore": 127, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -244.65627701794065, "timesteps_this_iter": 43497, "custom_metrics": {"cost1_max": 229.2508923557211, "cost1_min": 146.51251746660864, "system_level_velocity_mean": 15.720409090943576, "cost2_mean": -100.6919818279967, "cost2_max": -87.39209268464572, "outflow_rate_max": 1460.8226435703023, "cost1_mean": 186.80173825540496, "system_level_velocity_min": 12.340403812664052, "system_level_velocity_max": 19.174807537942225, "outflow_rate_min": 1035.793558463658, "cost2_min": -118.73081389487834, "outflow_rate_mean": 1240.000915670852}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01660473458468914, "policy_loss": -0.008445736952126026, "total_loss": 18.035058975219727, "vf_explained_var": 0.9045253396034241, "cur_lr": 0.0005000000237487257, "entropy": 0.8074988722801208, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 18.04035186767578}, "num_steps_trained": 5569904, "grad_time_ms": 11663.111, "num_steps_sampled": 5569904, "sample_time_ms": 21597.337, "load_time_ms": 15.848, "update_time_ms": 9.413}, "timesteps_since_restore": 5569904, "time_total_s": 4346.115488052368, "timestamp": 1558607475, "time_since_restore": 4346.115488052368, "policy_reward_mean": {}, "training_iteration": 127, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557550>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e48>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b70>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5906, "timesteps_total": 5569904, "episode_reward_mean": -522.8439557855642, "episodes_this_iter": 46, "date": "2019-05-23_10-31-15", "time_this_iter_s": 34.04011249542236, "num_metric_batches_dropped": 0, "episode_reward_min": -807.2052985540985}
{"iterations_since_restore": 128, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -86.83974302124412, "timesteps_this_iter": 43329, "custom_metrics": {"cost1_max": 228.385165302576, "cost1_min": 81.45490100040143, "system_level_velocity_mean": 15.848732631330215, "cost2_mean": -99.75334009224049, "cost2_max": -48.57248135277232, "outflow_rate_max": 1460.8226435703023, "cost1_mean": 186.02735107707656, "system_level_velocity_min": 12.184807933466962, "system_level_velocity_max": 19.237887124445535, "outflow_rate_min": 782.3331027512297, "cost2_min": -118.07188166432712, "outflow_rate_mean": 1235.817536292354}, "done": false, "pid": 51578, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.017851725220680237, "policy_loss": -0.007831324823200703, "total_loss": 21.932796478271484, "vf_explained_var": 0.8921461701393127, "cur_lr": 0.0005000000237487257, "entropy": 0.7803783416748047, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 21.937240600585938}, "num_steps_trained": 5613233, "grad_time_ms": 11801.525, "num_steps_sampled": 5613233, "sample_time_ms": 21489.644, "load_time_ms": 15.963, "update_time_ms": 9.304}, "timesteps_since_restore": 5613233, "time_total_s": 4379.9522659778595, "timestamp": 1558607509, "time_since_restore": 4379.9522659778595, "policy_reward_mean": {}, "training_iteration": 128, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c1d0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c080>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c978>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5956, "timesteps_total": 5613233, "episode_reward_mean": -511.53854586553535, "episodes_this_iter": 50, "date": "2019-05-23_10-31-49", "time_this_iter_s": 33.83677792549133, "num_metric_batches_dropped": 0, "episode_reward_min": -804.5510340520484}
{"iterations_since_restore": 129, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -86.83974302124412, "timesteps_this_iter": 43709, "custom_metrics": {"cost1_max": 227.95997694644333, "cost1_min": 81.45490100040143, "system_level_velocity_mean": 15.719183250472817, "cost2_mean": -100.15729550442971, "cost2_max": -48.57248135277232, "outflow_rate_max": 1459.6758008658007, "cost1_mean": 183.4862922969885, "system_level_velocity_min": 12.184807933466962, "system_level_velocity_max": 19.237887124445535, "outflow_rate_min": 782.3331027512297, "cost2_min": -124.94103077358326, "outflow_rate_mean": 1224.4094055843177}, "done": false, "pid": 51578, "episode_len_mean": 320.74, "info": {"default": {"kl": 0.01704338565468788, "policy_loss": -0.00788209866732359, "total_loss": 19.59869956970215, "vf_explained_var": 0.9000056385993958, "cur_lr": 0.0005000000237487257, "entropy": 0.7699517607688904, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 19.60334587097168}, "num_steps_trained": 5656942, "grad_time_ms": 11806.582, "num_steps_sampled": 5656942, "sample_time_ms": 21564.07, "load_time_ms": 15.921, "update_time_ms": 9.346}, "timesteps_since_restore": 5656942, "time_total_s": 4413.082704544067, "timestamp": 1558607542, "time_since_restore": 4413.082704544067, "policy_reward_mean": {}, "training_iteration": 129, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b208>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be10>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 5999, "timesteps_total": 5656942, "episode_reward_mean": -520.0261877888256, "episodes_this_iter": 43, "date": "2019-05-23_10-32-22", "time_this_iter_s": 33.130438566207886, "num_metric_batches_dropped": 0, "episode_reward_min": -804.5510340520484}
{"iterations_since_restore": 130, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -170.04001708776596, "timesteps_this_iter": 42830, "custom_metrics": {"cost1_max": 228.48074949662453, "cost1_min": 147.24214427945506, "system_level_velocity_mean": 15.909229826520596, "cost2_mean": -100.24631757524878, "cost2_max": -72.80954809669154, "outflow_rate_max": 1459.6758008658007, "cost1_mean": 188.0497612635996, "system_level_velocity_min": 12.540760726258657, "system_level_velocity_max": 19.23041670239031, "outflow_rate_min": 1063.0552440850554, "cost2_min": -124.94103077358326, "outflow_rate_mean": 1245.063605528944}, "done": false, "pid": 51578, "episode_len_mean": 323.92, "info": {"default": {"kl": 0.016872888430953026, "policy_loss": -0.006078366655856371, "total_loss": 20.314409255981445, "vf_explained_var": 0.8918113708496094, "cur_lr": 0.0005000000237487257, "entropy": 0.7685402631759644, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.317283630371094}, "num_steps_trained": 5699772, "grad_time_ms": 11814.78, "num_steps_sampled": 5699772, "sample_time_ms": 21495.045, "load_time_ms": 15.729, "update_time_ms": 9.328}, "timesteps_since_restore": 5699772, "time_total_s": 4446.09925866127, "timestamp": 1558607575, "time_since_restore": 4446.09925866127, "policy_reward_mean": {}, "training_iteration": 130, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c748>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c630>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ce80>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6045, "timesteps_total": 5699772, "episode_reward_mean": -507.1856491045634, "episodes_this_iter": 46, "date": "2019-05-23_10-32-55", "time_this_iter_s": 33.01655411720276, "num_metric_batches_dropped": 0, "episode_reward_min": -763.9412433794027}
{"iterations_since_restore": 131, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -165.33178088341867, "timesteps_this_iter": 44012, "custom_metrics": {"cost1_max": 229.565758372615, "cost1_min": 147.24214427945506, "system_level_velocity_mean": 15.728797818629515, "cost2_mean": -100.54628400702813, "cost2_max": -72.49551991051337, "outflow_rate_max": 1456.4044260179571, "cost1_mean": 185.83008656590977, "system_level_velocity_min": 12.540760726258657, "system_level_velocity_max": 19.27547161740726, "outflow_rate_min": 1063.0552440850554, "cost2_min": -122.31995050491457, "outflow_rate_mean": 1234.5493264759234}, "done": false, "pid": 51578, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.014931224286556244, "policy_loss": -0.006930736359208822, "total_loss": 17.45108413696289, "vf_explained_var": 0.9116778373718262, "cur_lr": 0.0005000000237487257, "entropy": 0.7894728183746338, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 17.455181121826172}, "num_steps_trained": 5743784, "grad_time_ms": 11855.694, "num_steps_sampled": 5743784, "sample_time_ms": 21386.065, "load_time_ms": 15.89, "update_time_ms": 9.315}, "timesteps_since_restore": 5743784, "time_total_s": 4479.209954500198, "timestamp": 1558607608, "time_since_restore": 4479.209954500198, "policy_reward_mean": {}, "training_iteration": 131, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537780>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845570b8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bc50>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6095, "timesteps_total": 5743784, "episode_reward_mean": -519.4631543679774, "episodes_this_iter": 50, "date": "2019-05-23_10-33-28", "time_this_iter_s": 33.11069583892822, "num_metric_batches_dropped": 0, "episode_reward_min": -763.9412433794027}
{"iterations_since_restore": 132, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -165.33178088341867, "timesteps_this_iter": 43286, "custom_metrics": {"cost1_max": 229.565758372615, "cost1_min": 149.91801895145764, "system_level_velocity_mean": 15.72054794155418, "cost2_mean": -99.98494438897049, "cost2_max": -72.49551991051337, "outflow_rate_max": 1458.1461688311686, "cost1_mean": 185.8192019497423, "system_level_velocity_min": 12.627524518901756, "system_level_velocity_max": 19.27547161740726, "outflow_rate_min": 1075.4597533411475, "cost2_min": -122.31995050491457, "outflow_rate_mean": 1235.643509219901}, "done": false, "pid": 51578, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.015962397679686546, "policy_loss": -0.006845959462225437, "total_loss": 15.404597282409668, "vf_explained_var": 0.9215143918991089, "cur_lr": 0.0005000000237487257, "entropy": 0.7708644270896912, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 15.408413887023926}, "num_steps_trained": 5787070, "grad_time_ms": 11754.2, "num_steps_sampled": 5787070, "sample_time_ms": 21297.741, "load_time_ms": 15.774, "update_time_ms": 9.241}, "timesteps_since_restore": 5787070, "time_total_s": 4510.12201499939, "timestamp": 1558607639, "time_since_restore": 4510.12201499939, "policy_reward_mean": {}, "training_iteration": 132, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549240>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845495f8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b38>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6138, "timesteps_total": 5787070, "episode_reward_mean": -518.3755778142502, "episodes_this_iter": 43, "date": "2019-05-23_10-33-59", "time_this_iter_s": 30.912060499191284, "num_metric_batches_dropped": 0, "episode_reward_min": -760.0502965608833}
{"iterations_since_restore": 133, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -165.33178088341867, "timesteps_this_iter": 43751, "custom_metrics": {"cost1_max": 229.565758372615, "cost1_min": 146.19190973591748, "system_level_velocity_mean": 15.911816754216316, "cost2_mean": -99.82608493647524, "cost2_max": -72.49551991051337, "outflow_rate_max": 1458.1461688311686, "cost1_mean": 188.26746969421234, "system_level_velocity_min": 12.365454377800372, "system_level_velocity_max": 19.27547161740726, "outflow_rate_min": 1070.8971428571429, "cost2_min": -122.31995050491457, "outflow_rate_mean": 1247.6239782827079}, "done": false, "pid": 51578, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.01669362373650074, "policy_loss": -0.008125191554427147, "total_loss": 16.840423583984375, "vf_explained_var": 0.9143515825271606, "cur_lr": 0.0005000000237487257, "entropy": 0.7789013385772705, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 16.845378875732422}, "num_steps_trained": 5830821, "grad_time_ms": 11815.155, "num_steps_sampled": 5830821, "sample_time_ms": 21375.509, "load_time_ms": 15.736, "update_time_ms": 9.075}, "timesteps_since_restore": 5830821, "time_total_s": 4543.299551010132, "timestamp": 1558607672, "time_since_restore": 4543.299551010132, "policy_reward_mean": {}, "training_iteration": 133, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c390>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cb70>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c978>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6185, "timesteps_total": 5830821, "episode_reward_mean": -502.6802746406171, "episodes_this_iter": 47, "date": "2019-05-23_10-34-32", "time_this_iter_s": 33.17753601074219, "num_metric_batches_dropped": 0, "episode_reward_min": -760.0502965608833}
{"iterations_since_restore": 134, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -242.14302614043282, "timesteps_this_iter": 44489, "custom_metrics": {"cost1_max": 229.4340229178027, "cost1_min": 146.19190973591748, "system_level_velocity_mean": 15.505915867355116, "cost2_mean": -101.03011481899277, "cost2_max": -89.1173633558079, "outflow_rate_max": 1457.4784408478215, "cost1_mean": 183.84403087866957, "system_level_velocity_min": 12.365454377800372, "system_level_velocity_max": 19.19928805556511, "outflow_rate_min": 1059.4821769333598, "cost2_min": -118.53432857816496, "outflow_rate_mean": 1223.343526530245}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015601232647895813, "policy_loss": -0.008355976082384586, "total_loss": 16.180253982543945, "vf_explained_var": 0.9178521037101746, "cur_lr": 0.0005000000237487257, "entropy": 0.7755382061004639, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 16.18564796447754}, "num_steps_trained": 5875310, "grad_time_ms": 11778.012, "num_steps_sampled": 5875310, "sample_time_ms": 21385.424, "load_time_ms": 15.912, "update_time_ms": 8.983}, "timesteps_since_restore": 5875310, "time_total_s": 4576.914422035217, "timestamp": 1558607706, "time_since_restore": 4576.914422035217, "policy_reward_mean": {}, "training_iteration": 134, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534630>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845346d8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6234, "timesteps_total": 5875310, "episode_reward_mean": -537.7148867327725, "episodes_this_iter": 49, "date": "2019-05-23_10-35-06", "time_this_iter_s": 33.61487102508545, "num_metric_batches_dropped": 0, "episode_reward_min": -769.3674890760025}
{"iterations_since_restore": 135, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -245.53064795834763, "timesteps_this_iter": 42945, "custom_metrics": {"cost1_max": 227.8371936843164, "cost1_min": 146.19190973591748, "system_level_velocity_mean": 15.616086841980252, "cost2_mean": -100.71331508964349, "cost2_max": -86.12927268350758, "outflow_rate_max": 1455.335933358351, "cost1_mean": 185.00027893280156, "system_level_velocity_min": 12.365454377800372, "system_level_velocity_max": 19.155462553320795, "outflow_rate_min": 1059.4821769333598, "cost2_min": -118.53432857816496, "outflow_rate_mean": 1226.2231514434593}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.018185889348387718, "policy_loss": -0.009196523576974869, "total_loss": 22.271141052246094, "vf_explained_var": 0.8839125633239746, "cur_lr": 0.0005000000237487257, "entropy": 0.7581533193588257, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 22.276885986328125}, "num_steps_trained": 5918255, "grad_time_ms": 11786.792, "num_steps_sampled": 5918255, "sample_time_ms": 21261.431, "load_time_ms": 16.286, "update_time_ms": 8.766}, "timesteps_since_restore": 5918255, "time_total_s": 4610.229617595673, "timestamp": 1558607739, "time_since_restore": 4610.229617595673, "policy_reward_mean": {}, "training_iteration": 135, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c748>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6278, "timesteps_total": 5918255, "episode_reward_mean": -530.4721229538065, "episodes_this_iter": 44, "date": "2019-05-23_10-35-39", "time_this_iter_s": 33.31519556045532, "num_metric_batches_dropped": 0, "episode_reward_min": -769.3674890760025}
{"iterations_since_restore": 136, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -245.53064795834763, "timesteps_this_iter": 44358, "custom_metrics": {"cost1_max": 228.42981724956445, "cost1_min": 149.62860918216575, "system_level_velocity_mean": 15.718715650804798, "cost2_mean": -99.53982814605556, "cost2_max": -85.1612544521548, "outflow_rate_max": 1455.335933358351, "cost1_mean": 186.21486693310865, "system_level_velocity_min": 12.74603588551589, "system_level_velocity_max": 19.25994730888529, "outflow_rate_min": 1067.5008104395608, "cost2_min": -115.1370754805498, "outflow_rate_mean": 1232.825906226854}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01805310696363449, "policy_loss": -0.008074401877820492, "total_loss": 17.6158447265625, "vf_explained_var": 0.9074553847312927, "cur_lr": 0.0005000000237487257, "entropy": 0.7720200419425964, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 17.620492935180664}, "num_steps_trained": 5962613, "grad_time_ms": 11850.469, "num_steps_sampled": 5962613, "sample_time_ms": 21321.583, "load_time_ms": 16.479, "update_time_ms": 8.773}, "timesteps_since_restore": 5962613, "time_total_s": 4644.969187259674, "timestamp": 1558607774, "time_since_restore": 4644.969187259674, "policy_reward_mean": {}, "training_iteration": 136, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b70>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557550>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6324, "timesteps_total": 5962613, "episode_reward_mean": -520.4460121011532, "episodes_this_iter": 46, "date": "2019-05-23_10-36-14", "time_this_iter_s": 34.739569664001465, "num_metric_batches_dropped": 0, "episode_reward_min": -752.862924182679}
{"iterations_since_restore": 137, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.190141690726758, "timesteps_this_iter": 43105, "custom_metrics": {"cost1_max": 229.1798450680335, "cost1_min": 23.094663392815214, "system_level_velocity_mean": 15.545417492130474, "cost2_mean": -98.78923523252665, "cost2_max": -19.981507172125163, "outflow_rate_max": 1450.2530315118463, "cost1_mean": 182.14513064874808, "system_level_velocity_min": 12.730031930881148, "system_level_velocity_max": 19.355539395040257, "outflow_rate_min": 463.7321904813336, "cost2_min": -118.77948464737243, "outflow_rate_mean": 1217.008038340161}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.01782187446951866, "policy_loss": -0.0076202466152608395, "total_loss": 21.1569766998291, "vf_explained_var": 0.8889487385749817, "cur_lr": 0.0005000000237487257, "entropy": 0.7585631608963013, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 21.161211013793945}, "num_steps_trained": 6005718, "grad_time_ms": 11856.536, "num_steps_sampled": 6005718, "sample_time_ms": 21442.862, "load_time_ms": 16.631, "update_time_ms": 8.753}, "timesteps_since_restore": 6005718, "time_total_s": 4680.2855269908905, "timestamp": 1558607809, "time_since_restore": 4680.2855269908905, "policy_reward_mean": {}, "training_iteration": 137, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845346d8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652b0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845654e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6374, "timesteps_total": 6005718, "episode_reward_mean": -526.5808400803938, "episodes_this_iter": 50, "date": "2019-05-23_10-36-49", "time_this_iter_s": 35.31633973121643, "num_metric_batches_dropped": 0, "episode_reward_min": -752.862924182679}
{"iterations_since_restore": 138, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.190141690726758, "timesteps_this_iter": 43311, "custom_metrics": {"cost1_max": 229.1798450680335, "cost1_min": 23.094663392815214, "system_level_velocity_mean": 15.749070561600147, "cost2_mean": -98.02258928919257, "cost2_max": -19.981507172125163, "outflow_rate_max": 1452.3931558281288, "cost1_mean": 183.78722700341015, "system_level_velocity_min": 12.730031930881148, "system_level_velocity_max": 19.355539395040257, "outflow_rate_min": 463.7321904813336, "cost2_min": -118.77948464737243, "outflow_rate_mean": 1221.3929339876274}, "done": false, "pid": 51578, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.017742376774549484, "policy_loss": -0.008212453685700893, "total_loss": 15.565247535705566, "vf_explained_var": 0.9210283756256104, "cur_lr": 0.0005000000237487257, "entropy": 0.7549898028373718, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 15.570093154907227}, "num_steps_trained": 6049029, "grad_time_ms": 11737.044, "num_steps_sampled": 6049029, "sample_time_ms": 21448.962, "load_time_ms": 15.895, "update_time_ms": 8.889}, "timesteps_since_restore": 6049029, "time_total_s": 4712.973215818405, "timestamp": 1558607842, "time_since_restore": 4712.973215818405, "policy_reward_mean": {}, "training_iteration": 138, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cb38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cac8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c240>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6418, "timesteps_total": 6049029, "episode_reward_mean": -511.2158387913038, "episodes_this_iter": 44, "date": "2019-05-23_10-37-22", "time_this_iter_s": 32.68768882751465, "num_metric_batches_dropped": 0, "episode_reward_min": -723.8290934733385}
{"iterations_since_restore": 139, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -165.180052515999, "timesteps_this_iter": 43370, "custom_metrics": {"cost1_max": 228.44115736258158, "cost1_min": 137.0159369675523, "system_level_velocity_mean": 15.772404044498364, "cost2_mean": -98.09694372951608, "cost2_max": -74.45660220237266, "outflow_rate_max": 1452.3931558281288, "cost1_mean": 185.8823343952342, "system_level_velocity_min": 11.315835249044135, "system_level_velocity_max": 19.282589027170335, "outflow_rate_min": 1061.2020694905868, "cost2_min": -136.86328651696712, "outflow_rate_mean": 1229.6798499025956}, "done": false, "pid": 51578, "episode_len_mean": 323.7, "info": {"default": {"kl": 0.016614284366369247, "policy_loss": -0.007061425130814314, "total_loss": 17.379962921142578, "vf_explained_var": 0.9129261374473572, "cur_lr": 0.0005000000237487257, "entropy": 0.7616540193557739, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 17.383869171142578}, "num_steps_trained": 6092399, "grad_time_ms": 11673.536, "num_steps_sampled": 6092399, "sample_time_ms": 21464.597, "load_time_ms": 15.617, "update_time_ms": 8.74}, "timesteps_since_restore": 6092399, "time_total_s": 4745.6464421749115, "timestamp": 1558607875, "time_since_restore": 4745.6464421749115, "policy_reward_mean": {}, "training_iteration": 139, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557208>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845570f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565828>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6463, "timesteps_total": 6092399, "episode_reward_mean": -513.9880832898114, "episodes_this_iter": 45, "date": "2019-05-23_10-37-55", "time_this_iter_s": 32.67322635650635, "num_metric_batches_dropped": 0, "episode_reward_min": -783.423427171252}
{"iterations_since_restore": 140, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -86.89530993976827, "timesteps_this_iter": 43903, "custom_metrics": {"cost1_max": 229.11487857883063, "cost1_min": 81.76085818776163, "system_level_velocity_mean": 15.786843432710288, "cost2_mean": -98.48185326207, "cost2_max": -48.55453772916399, "outflow_rate_max": 1451.873991744731, "cost1_mean": 185.515434676385, "system_level_velocity_min": 11.315835249044135, "system_level_velocity_max": 19.282589027170335, "outflow_rate_min": 776.9609636264104, "cost2_min": -136.86328651696712, "outflow_rate_mean": 1229.0261242351407}, "done": false, "pid": 51578, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.01748007722198963, "policy_loss": -0.008430986665189266, "total_loss": 18.01445770263672, "vf_explained_var": 0.9032726883888245, "cur_lr": 0.0005000000237487257, "entropy": 0.7636966705322266, "cur_kl_coeff": 0.1898437887430191, "vf_loss": 18.01957130432129}, "num_steps_trained": 6136302, "grad_time_ms": 11697.143, "num_steps_sampled": 6136302, "sample_time_ms": 21564.678, "load_time_ms": 14.992, "update_time_ms": 8.884}, "timesteps_since_restore": 6136302, "time_total_s": 4779.88761305809, "timestamp": 1558607909, "time_since_restore": 4779.88761305809, "policy_reward_mean": {}, "training_iteration": 140, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e80>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845379b0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565d68>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6509, "timesteps_total": 6136302, "episode_reward_mean": -510.7317412196394, "episodes_this_iter": 46, "date": "2019-05-23_10-38-29", "time_this_iter_s": 34.24117088317871, "num_metric_batches_dropped": 0, "episode_reward_min": -783.423427171252}
{"iterations_since_restore": 141, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -86.89530993976827, "timesteps_this_iter": 43048, "custom_metrics": {"cost1_max": 230.36561685538342, "cost1_min": 81.76085818776163, "system_level_velocity_mean": 15.752610105763948, "cost2_mean": -99.03952861153644, "cost2_max": -48.55453772916399, "outflow_rate_max": 1448.978191172136, "cost1_mean": 185.18388638689717, "system_level_velocity_min": 11.89272174182807, "system_level_velocity_max": 19.52250443416516, "outflow_rate_min": 776.9609636264104, "cost2_min": -116.69433918557282, "outflow_rate_mean": 1225.5756744345697}, "done": false, "pid": 51578, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.017523618414998055, "policy_loss": -0.008700672537088394, "total_loss": 20.956008911132812, "vf_explained_var": 0.888779878616333, "cur_lr": 0.0005000000237487257, "entropy": 0.7509350180625916, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.96138572692871}, "num_steps_trained": 6179350, "grad_time_ms": 11644.47, "num_steps_sampled": 6179350, "sample_time_ms": 21649.771, "load_time_ms": 14.838, "update_time_ms": 8.961}, "timesteps_since_restore": 6179350, "time_total_s": 4813.333585262299, "timestamp": 1558607943, "time_since_restore": 4813.333585262299, "policy_reward_mean": {}, "training_iteration": 141, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565748>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565198>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6559, "timesteps_total": 6179350, "episode_reward_mean": -511.98578456580697, "episodes_this_iter": 50, "date": "2019-05-23_10-39-03", "time_this_iter_s": 33.445972204208374, "num_metric_batches_dropped": 0, "episode_reward_min": -795.5304959447294}
{"iterations_since_restore": 142, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -84.88387981502513, "timesteps_this_iter": 43394, "custom_metrics": {"cost1_max": 230.36561685538342, "cost1_min": 82.10803987827252, "system_level_velocity_mean": 15.68529544083997, "cost2_mean": -98.13046058247188, "cost2_max": -45.101732279805695, "outflow_rate_max": 1447.7184233396017, "cost1_mean": 184.20820863553504, "system_level_velocity_min": 11.89272174182807, "system_level_velocity_max": 19.52250443416516, "outflow_rate_min": 782.1787700227313, "cost2_min": -116.69433918557282, "outflow_rate_mean": 1218.9844233845195}, "done": false, "pid": 51578, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01667545735836029, "policy_loss": -0.008299737237393856, "total_loss": 17.104389190673828, "vf_explained_var": 0.9102197885513306, "cur_lr": 0.0005000000237487257, "entropy": 0.7711925506591797, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 17.109525680541992}, "num_steps_trained": 6222744, "grad_time_ms": 11715.823, "num_steps_sampled": 6222744, "sample_time_ms": 21848.181, "load_time_ms": 14.899, "update_time_ms": 9.256}, "timesteps_since_restore": 6222744, "time_total_s": 4846.956566572189, "timestamp": 1558607976, "time_since_restore": 4846.956566572189, "policy_reward_mean": {}, "training_iteration": 142, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565dd8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565908>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565fd0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6602, "timesteps_total": 6222744, "episode_reward_mean": -518.869814402591, "episodes_this_iter": 43, "date": "2019-05-23_10-39-36", "time_this_iter_s": 33.62298130989075, "num_metric_batches_dropped": 0, "episode_reward_min": -795.5304959447294}
{"iterations_since_restore": 143, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -84.88387981502513, "timesteps_this_iter": 43867, "custom_metrics": {"cost1_max": 230.36561685538342, "cost1_min": 81.85057075605222, "system_level_velocity_mean": 15.560307886517926, "cost2_mean": -96.65138962917341, "cost2_max": -45.101732279805695, "outflow_rate_max": 1447.7184233396017, "cost1_mean": 178.9403144760463, "system_level_velocity_min": 12.025686492588331, "system_level_velocity_max": 19.52250443416516, "outflow_rate_min": 779.0924443671257, "cost2_min": -122.90678155133641, "outflow_rate_mean": 1197.47956310711}, "done": false, "pid": 51578, "episode_len_mean": 317.74, "info": {"default": {"kl": 0.01943948306143284, "policy_loss": -0.010190341621637344, "total_loss": 20.373842239379883, "vf_explained_var": 0.8905038237571716, "cur_lr": 0.0005000000237487257, "entropy": 0.7861371040344238, "cur_kl_coeff": 0.1898437887430191, "vf_loss": 20.380342483520508}, "num_steps_trained": 6266611, "grad_time_ms": 11853.312, "num_steps_sampled": 6266611, "sample_time_ms": 21818.013, "load_time_ms": 14.849, "update_time_ms": 9.46}, "timesteps_since_restore": 6266611, "time_total_s": 4881.215147018433, "timestamp": 1558608011, "time_since_restore": 4881.215147018433, "policy_reward_mean": {}, "training_iteration": 143, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565048>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845658d0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565a90>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6649, "timesteps_total": 6266611, "episode_reward_mean": -524.0067326455311, "episodes_this_iter": 47, "date": "2019-05-23_10-40-11", "time_this_iter_s": 34.258580446243286, "num_metric_batches_dropped": 0, "episode_reward_min": -791.349723648881}
{"iterations_since_restore": 144, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -85.71865761237875, "timesteps_this_iter": 42853, "custom_metrics": {"cost1_max": 227.6442426541841, "cost1_min": 81.85057075605222, "system_level_velocity_mean": 15.782767261345695, "cost2_mean": -95.2533642828166, "cost2_max": -46.93799432008471, "outflow_rate_max": 1445.354002680724, "cost1_mean": 180.69314020736823, "system_level_velocity_min": 12.025686492588331, "system_level_velocity_max": 19.425851148627782, "outflow_rate_min": 773.7464913074268, "cost2_min": -122.90678155133641, "outflow_rate_mean": 1205.586121587678}, "done": false, "pid": 51578, "episode_len_mean": 316.64, "info": {"default": {"kl": 0.01691586524248123, "policy_loss": -0.007538467179983854, "total_loss": 21.56513214111328, "vf_explained_var": 0.8892582654953003, "cur_lr": 0.0005000000237487257, "entropy": 0.769182562828064, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 21.5694580078125}, "num_steps_trained": 6309464, "grad_time_ms": 11985.149, "num_steps_sampled": 6309464, "sample_time_ms": 21630.095, "load_time_ms": 14.734, "update_time_ms": 9.705}, "timesteps_since_restore": 6309464, "time_total_s": 4914.259739160538, "timestamp": 1558608044, "time_since_restore": 4914.259739160538, "policy_reward_mean": {}, "training_iteration": 144, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cac8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c2b0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c4e0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6701, "timesteps_total": 6309464, "episode_reward_mean": -508.55383380558726, "episodes_this_iter": 52, "date": "2019-05-23_10-40-44", "time_this_iter_s": 33.0445921421051, "num_metric_batches_dropped": 0, "episode_reward_min": -791.349723648881}
{"iterations_since_restore": 145, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -86.11717991757878, "timesteps_this_iter": 43002, "custom_metrics": {"cost1_max": 229.13604646478353, "cost1_min": 81.8733623947873, "system_level_velocity_mean": 15.924227635619632, "cost2_mean": -94.97914428747546, "cost2_max": -47.05468348812485, "outflow_rate_max": 1439.8615852338721, "cost1_mean": 186.03620013281167, "system_level_velocity_min": 12.378882209429403, "system_level_velocity_max": 19.362324161643727, "outflow_rate_min": 773.7464913074268, "cost2_min": -122.90678155133641, "outflow_rate_mean": 1228.0726322124574}, "done": false, "pid": 51578, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.018417535349726677, "policy_loss": -0.009375887922942638, "total_loss": 18.87184715270996, "vf_explained_var": 0.9027354717254639, "cur_lr": 0.0005000000237487257, "entropy": 0.7666966915130615, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 18.87772560119629}, "num_steps_trained": 6352466, "grad_time_ms": 12037.327, "num_steps_sampled": 6352466, "sample_time_ms": 21641.725, "load_time_ms": 14.841, "update_time_ms": 9.779}, "timesteps_since_restore": 6352466, "time_total_s": 4948.200963497162, "timestamp": 1558608078, "time_since_restore": 4948.200963497162, "policy_reward_mean": {}, "training_iteration": 145, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845655f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565a58>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565cc0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6745, "timesteps_total": 6352466, "episode_reward_mean": -501.6412258757891, "episodes_this_iter": 44, "date": "2019-05-23_10-41-18", "time_this_iter_s": 33.941224336624146, "num_metric_batches_dropped": 0, "episode_reward_min": -775.7245547507224}
{"iterations_since_restore": 146, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -246.47310240370854, "timesteps_this_iter": 43717, "custom_metrics": {"cost1_max": 229.13604646478353, "cost1_min": 152.4658257879036, "system_level_velocity_mean": 15.700336328474805, "cost2_mean": -97.63786211087621, "cost2_max": -83.3887861674514, "outflow_rate_max": 1439.8615852338721, "cost1_mean": 185.83341749461454, "system_level_velocity_min": 12.719732677168789, "system_level_velocity_max": 19.362324161643727, "outflow_rate_min": 1084.7412191650853, "cost2_min": -117.51311378798991, "outflow_rate_mean": 1226.4821573653987}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016712360084056854, "policy_loss": -0.008649509400129318, "total_loss": 19.203025817871094, "vf_explained_var": 0.9001445174217224, "cur_lr": 0.0005000000237487257, "entropy": 0.7581158876419067, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 19.20850372314453}, "num_steps_trained": 6396183, "grad_time_ms": 11937.593, "num_steps_sampled": 6396183, "sample_time_ms": 21474.19, "load_time_ms": 14.503, "update_time_ms": 9.833}, "timesteps_since_restore": 6396183, "time_total_s": 4980.262592315674, "timestamp": 1558608110, "time_since_restore": 4980.262592315674, "policy_reward_mean": {}, "training_iteration": 146, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565208>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565080>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6788, "timesteps_total": 6396183, "episode_reward_mean": -518.536465228178, "episodes_this_iter": 43, "date": "2019-05-23_10-41-50", "time_this_iter_s": 32.06162881851196, "num_metric_batches_dropped": 0, "episode_reward_min": -732.381360963501}
{"iterations_since_restore": 147, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -239.2854717766996, "timesteps_this_iter": 41905, "custom_metrics": {"cost1_max": 229.95816875283265, "cost1_min": 146.83367811186736, "system_level_velocity_mean": 15.958767975779558, "cost2_mean": -98.06409575657347, "cost2_max": -83.54827346885656, "outflow_rate_max": 1454.9653508757026, "cost1_mean": 189.0474659194866, "system_level_velocity_min": 12.512680924069885, "system_level_velocity_max": 19.427241483613923, "outflow_rate_min": 1051.1602030052848, "cost2_min": -117.51311378798991, "outflow_rate_mean": 1239.5659025814646}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015312200412154198, "policy_loss": -0.00976528786122799, "total_loss": 22.736600875854492, "vf_explained_var": 0.8753586411476135, "cur_lr": 0.0005000000237487257, "entropy": 0.7581241726875305, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 22.743459701538086}, "num_steps_trained": 6438088, "grad_time_ms": 11793.398, "num_steps_sampled": 6438088, "sample_time_ms": 21384.278, "load_time_ms": 14.331, "update_time_ms": 9.587}, "timesteps_since_restore": 6438088, "time_total_s": 5013.2188947200775, "timestamp": 1558608143, "time_since_restore": 5013.2188947200775, "policy_reward_mean": {}, "training_iteration": 147, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ba8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565160>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6840, "timesteps_total": 6438088, "episode_reward_mean": -501.7190788666971, "episodes_this_iter": 52, "date": "2019-05-23_10-42-23", "time_this_iter_s": 32.95630240440369, "num_metric_batches_dropped": 0, "episode_reward_min": -768.999828800938}
{"iterations_since_restore": 148, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -231.7958229765199, "timesteps_this_iter": 42612, "custom_metrics": {"cost1_max": 229.95816875283265, "cost1_min": 141.87970873813484, "system_level_velocity_mean": 16.13850804418605, "cost2_mean": -96.43202437250574, "cost2_max": -82.95523271593697, "outflow_rate_max": 1454.9653508757026, "cost1_mean": 190.90816641370606, "system_level_velocity_min": 12.057482157626048, "system_level_velocity_max": 19.427241483613923, "outflow_rate_min": 1006.9719773519163, "cost2_min": -114.58732075793841, "outflow_rate_mean": 1249.4742444490992}, "done": false, "pid": 51578, "episode_len_mean": 324.8, "info": {"default": {"kl": 0.01805933192372322, "policy_loss": -0.011000039055943489, "total_loss": 16.481184005737305, "vf_explained_var": 0.9090145826339722, "cur_lr": 0.0005000000237487257, "entropy": 0.7746526002883911, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 16.488754272460938}, "num_steps_trained": 6480700, "grad_time_ms": 11735.038, "num_steps_sampled": 6480700, "sample_time_ms": 21328.633, "load_time_ms": 15.218, "update_time_ms": 9.324}, "timesteps_since_restore": 6480700, "time_total_s": 5044.771682739258, "timestamp": 1558608174, "time_since_restore": 5044.771682739258, "policy_reward_mean": {}, "training_iteration": 148, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374e0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375c0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6884, "timesteps_total": 6480700, "episode_reward_mean": -489.68093261804484, "episodes_this_iter": 44, "date": "2019-05-23_10-42-54", "time_this_iter_s": 31.552788019180298, "num_metric_batches_dropped": 0, "episode_reward_min": -793.1906180623778}
{"iterations_since_restore": 149, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.52422549018442, "timesteps_this_iter": 42935, "custom_metrics": {"cost1_max": 228.5601159962156, "cost1_min": 86.84663039036043, "system_level_velocity_mean": 16.061556323480783, "cost2_mean": -96.04495928947146, "cost2_max": -45.964929889949104, "outflow_rate_max": 1449.102414182118, "cost1_mean": 188.64853993599857, "system_level_velocity_min": 12.057482157626048, "system_level_velocity_max": 19.280899731524336, "outflow_rate_min": 817.0246396035195, "cost2_min": -114.80378250885926, "outflow_rate_mean": 1238.5202242233186}, "done": false, "pid": 51578, "episode_len_mean": 322.8, "info": {"default": {"kl": 0.01684400998055935, "policy_loss": -0.00810701958835125, "total_loss": 22.026912689208984, "vf_explained_var": 0.8826670050621033, "cur_lr": 0.0005000000237487257, "entropy": 0.7658999562263489, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 22.031822204589844}, "num_steps_trained": 6523635, "grad_time_ms": 11688.118, "num_steps_sampled": 6523635, "sample_time_ms": 21240.673, "load_time_ms": 14.812, "update_time_ms": 9.55}, "timesteps_since_restore": 6523635, "time_total_s": 5076.079016685486, "timestamp": 1558608206, "time_since_restore": 5076.079016685486, "policy_reward_mean": {}, "training_iteration": 149, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ac8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565208>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565048>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6928, "timesteps_total": 6523635, "episode_reward_mean": -491.4648312977075, "episodes_this_iter": 44, "date": "2019-05-23_10-43-26", "time_this_iter_s": 31.307333946228027, "num_metric_batches_dropped": 0, "episode_reward_min": -793.1906180623778}
{"iterations_since_restore": 150, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.898775073000298, "timesteps_this_iter": 44167, "custom_metrics": {"cost1_max": 228.5601159962156, "cost1_min": 23.228071886958546, "system_level_velocity_mean": 15.840310283852778, "cost2_mean": -95.82279540107658, "cost2_max": -20.336441471542706, "outflow_rate_max": 1445.9356162927247, "cost1_mean": 184.19983205324118, "system_level_velocity_min": 12.193244481916361, "system_level_velocity_max": 19.280899731524336, "outflow_rate_min": 465.8227828158284, "cost2_min": -124.74063518897765, "outflow_rate_mean": 1217.6377589602737}, "done": false, "pid": 51578, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.018736155703663826, "policy_loss": -0.00794213730841875, "total_loss": 20.14356803894043, "vf_explained_var": 0.8945873975753784, "cur_lr": 0.0005000000237487257, "entropy": 0.779630184173584, "cur_kl_coeff": 0.1898437738418579, "vf_loss": 20.1479549407959}, "num_steps_trained": 6567802, "grad_time_ms": 11575.25, "num_steps_sampled": 6567802, "sample_time_ms": 21258.722, "load_time_ms": 14.757, "update_time_ms": 9.545}, "timesteps_since_restore": 6567802, "time_total_s": 5109.388241291046, "timestamp": 1558608239, "time_since_restore": 5109.388241291046, "policy_reward_mean": {}, "training_iteration": 150, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537400>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca58>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 6979, "timesteps_total": 6567802, "episode_reward_mean": -501.7545444452834, "episodes_this_iter": 51, "date": "2019-05-23_10-43-59", "time_this_iter_s": 33.3092246055603, "num_metric_batches_dropped": 0, "episode_reward_min": -778.556225612191}
{"iterations_since_restore": 151, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.898775073000298, "timesteps_this_iter": 42746, "custom_metrics": {"cost1_max": 229.3947370940751, "cost1_min": 23.228071886958546, "system_level_velocity_mean": 15.554888030377036, "cost2_mean": -95.43875940669324, "cost2_max": -20.336441471542706, "outflow_rate_max": 1440.1222854668554, "cost1_mean": 182.091964053492, "system_level_velocity_min": 12.193244481916361, "system_level_velocity_max": 19.336787506784205, "outflow_rate_min": 465.8227828158284, "cost2_min": -124.74063518897765, "outflow_rate_mean": 1210.4800996075176}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.020266883075237274, "policy_loss": -0.009852572344243526, "total_loss": 16.055065155029297, "vf_explained_var": 0.9187400341033936, "cur_lr": 0.0005000000237487257, "entropy": 0.7610512375831604, "cur_kl_coeff": 0.18984375894069672, "vf_loss": 16.06106948852539}, "num_steps_trained": 6610548, "grad_time_ms": 11403.994, "num_steps_sampled": 6610548, "sample_time_ms": 21200.034, "load_time_ms": 14.727, "update_time_ms": 9.588}, "timesteps_since_restore": 6610548, "time_total_s": 5140.512922048569, "timestamp": 1558608270, "time_since_restore": 5140.512922048569, "policy_reward_mean": {}, "training_iteration": 151, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845379b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468dd30>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541390>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7024, "timesteps_total": 6610548, "episode_reward_mean": -522.1453265116695, "episodes_this_iter": 45, "date": "2019-05-23_10-44-30", "time_this_iter_s": 31.124680757522583, "num_metric_batches_dropped": 0, "episode_reward_min": -778.556225612191}
{"iterations_since_restore": 152, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.668214877602132, "timesteps_this_iter": 43145, "custom_metrics": {"cost1_max": 229.3947370940751, "cost1_min": 24.563238766438786, "system_level_velocity_mean": 15.666385015419342, "cost2_mean": -93.80237984751324, "cost2_max": -18.9973220527769, "outflow_rate_max": 1436.9626347916794, "cost1_mean": 182.02247291976258, "system_level_velocity_min": 12.566132620896004, "system_level_velocity_max": 19.603048540542623, "outflow_rate_min": 512.3531863872981, "cost2_min": -124.74063518897765, "outflow_rate_mean": 1210.0814979119255}, "done": false, "pid": 51578, "episode_len_mean": 320.12, "info": {"default": {"kl": 0.015035380609333515, "policy_loss": -0.009830543771386147, "total_loss": 18.299942016601562, "vf_explained_var": 0.9067663550376892, "cur_lr": 0.0005000000237487257, "entropy": 0.7694077491760254, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 18.305492401123047}, "num_steps_trained": 6653693, "grad_time_ms": 11450.879, "num_steps_sampled": 6653693, "sample_time_ms": 21199.834, "load_time_ms": 14.695, "update_time_ms": 9.486}, "timesteps_since_restore": 6653693, "time_total_s": 5174.616472244263, "timestamp": 1558608304, "time_since_restore": 5174.616472244263, "policy_reward_mean": {}, "training_iteration": 152, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565630>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565320>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7070, "timesteps_total": 6653693, "episode_reward_mean": -511.2536954345129, "episodes_this_iter": 46, "date": "2019-05-23_10-45-04", "time_this_iter_s": 34.10355019569397, "num_metric_batches_dropped": 0, "episode_reward_min": -763.4031705035181}
{"iterations_since_restore": 153, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.668214877602132, "timesteps_this_iter": 43478, "custom_metrics": {"cost1_max": 229.3947370940751, "cost1_min": 24.563238766438786, "system_level_velocity_mean": 15.734123383042627, "cost2_mean": -93.05350089131363, "cost2_max": -18.9973220527769, "outflow_rate_max": 1436.9626347916794, "cost1_mean": 182.96734989915743, "system_level_velocity_min": 12.577259720776265, "system_level_velocity_max": 19.603048540542623, "outflow_rate_min": 512.3531863872981, "cost2_min": -114.72397733278432, "outflow_rate_mean": 1211.7161848318701}, "done": false, "pid": 51578, "episode_len_mean": 320.12, "info": {"default": {"kl": 0.014210685156285763, "policy_loss": -0.007113785017281771, "total_loss": 16.297534942626953, "vf_explained_var": 0.9159020781517029, "cur_lr": 0.0005000000237487257, "entropy": 0.7713081240653992, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 16.300601959228516}, "num_steps_trained": 6697171, "grad_time_ms": 11776.795, "num_steps_sampled": 6697171, "sample_time_ms": 21224.384, "load_time_ms": 16.086, "update_time_ms": 9.739}, "timesteps_since_restore": 6697171, "time_total_s": 5212.383328437805, "timestamp": 1558608342, "time_since_restore": 5212.383328437805, "policy_reward_mean": {}, "training_iteration": 153, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565be0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565b70>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565908>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7114, "timesteps_total": 6697171, "episode_reward_mean": -505.6735643991323, "episodes_this_iter": 44, "date": "2019-05-23_10-45-42", "time_this_iter_s": 37.76685619354248, "num_metric_batches_dropped": 0, "episode_reward_min": -763.4031705035181}
{"iterations_since_restore": 154, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.92217632121148, "timesteps_this_iter": 42564, "custom_metrics": {"cost1_max": 229.07361311846967, "cost1_min": 150.0543209667421, "system_level_velocity_mean": 15.626577342858495, "cost2_mean": -94.3284027308809, "cost2_max": -71.03591013207534, "outflow_rate_max": 1436.7505522378196, "cost1_mean": 185.18809271724479, "system_level_velocity_min": 12.637169183366412, "system_level_velocity_max": 19.421159190074725, "outflow_rate_min": 1074.7847803661268, "cost2_min": -117.11415339492075, "outflow_rate_mean": 1220.4506419685808}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014218057505786419, "policy_loss": -0.007338136900216341, "total_loss": 20.568647384643555, "vf_explained_var": 0.8912561535835266, "cur_lr": 0.0005000000237487257, "entropy": 0.7581115365028381, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 20.57193946838379}, "num_steps_trained": 6739735, "grad_time_ms": 11817.096, "num_steps_sampled": 6739735, "sample_time_ms": 21178.014, "load_time_ms": 16.333, "update_time_ms": 9.636}, "timesteps_since_restore": 6739735, "time_total_s": 5245.378486633301, "timestamp": 1558608375, "time_since_restore": 5245.378486633301, "policy_reward_mean": {}, "training_iteration": 154, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b70>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7166, "timesteps_total": 6739735, "episode_reward_mean": -513.5402977256496, "episodes_this_iter": 52, "date": "2019-05-23_10-46-15", "time_this_iter_s": 32.995158195495605, "num_metric_batches_dropped": 0, "episode_reward_min": -753.7196433513935}
{"iterations_since_restore": 155, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -233.83924528356246, "timesteps_this_iter": 42147, "custom_metrics": {"cost1_max": 229.64360274106946, "cost1_min": 143.13630847959928, "system_level_velocity_mean": 15.843234681369525, "cost2_mean": -92.55646398440629, "cost2_max": -71.03591013207534, "outflow_rate_max": 1436.7505522378196, "cost1_mean": 187.55489127690853, "system_level_velocity_min": 11.886865430585967, "system_level_velocity_max": 19.427847191185172, "outflow_rate_min": 1074.7847803661268, "cost2_min": -117.11415339492075, "outflow_rate_mean": 1230.2630479117097}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013961156830191612, "policy_loss": -0.006855021696537733, "total_loss": 18.798181533813477, "vf_explained_var": 0.9004845023155212, "cur_lr": 0.0005000000237487257, "entropy": 0.7662421464920044, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 18.80105972290039}, "num_steps_trained": 6781882, "grad_time_ms": 11713.384, "num_steps_sampled": 6781882, "sample_time_ms": 21049.165, "load_time_ms": 15.638, "update_time_ms": 9.622}, "timesteps_since_restore": 6781882, "time_total_s": 5277.020911216736, "timestamp": 1558608407, "time_since_restore": 5277.020911216736, "policy_reward_mean": {}, "training_iteration": 155, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cd68>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b38>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549f28>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7208, "timesteps_total": 6781882, "episode_reward_mean": -499.1737364431465, "episodes_this_iter": 42, "date": "2019-05-23_10-46-47", "time_this_iter_s": 31.64242458343506, "num_metric_batches_dropped": 0, "episode_reward_min": -753.7196433513935}
{"iterations_since_restore": 156, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -233.83924528356246, "timesteps_this_iter": 42225, "custom_metrics": {"cost1_max": 229.64360274106946, "cost1_min": 143.13630847959928, "system_level_velocity_mean": 15.916535894127778, "cost2_mean": -91.82226237540172, "cost2_max": -77.66068229134464, "outflow_rate_max": 1435.652312959192, "cost1_mean": 188.2505769363498, "system_level_velocity_min": 11.886865430585967, "system_level_velocity_max": 19.427847191185172, "outflow_rate_min": 1083.5524836325185, "cost2_min": -116.01024008102256, "outflow_rate_mean": 1230.7747086347556}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013620959594845772, "policy_loss": -0.007233876734972, "total_loss": 21.08368682861328, "vf_explained_var": 0.8874325156211853, "cur_lr": 0.0005000000237487257, "entropy": 0.7667486071586609, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 21.0870418548584}, "num_steps_trained": 6824107, "grad_time_ms": 11799.825, "num_steps_sampled": 6824107, "sample_time_ms": 20958.877, "load_time_ms": 15.121, "update_time_ms": 9.602}, "timesteps_since_restore": 6824107, "time_total_s": 5309.035566568375, "timestamp": 1558608439, "time_since_restore": 5309.035566568375, "policy_reward_mean": {}, "training_iteration": 156, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541588>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541f98>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df7f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7253, "timesteps_total": 6824107, "episode_reward_mean": -495.517556581659, "episodes_this_iter": 45, "date": "2019-05-23_10-47-19", "time_this_iter_s": 32.014655351638794, "num_metric_batches_dropped": 0, "episode_reward_min": -733.9594193369157}
{"iterations_since_restore": 157, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -233.83924528356246, "timesteps_this_iter": 42225, "custom_metrics": {"cost1_max": 229.7218250557762, "cost1_min": 148.2872776965634, "system_level_velocity_mean": 16.076257312565122, "cost2_mean": -91.27323524330886, "cost2_max": -76.95623994311202, "outflow_rate_max": 1437.405977232418, "cost1_mean": 190.53339913261843, "system_level_velocity_min": 12.608176855457971, "system_level_velocity_max": 19.40398013685362, "outflow_rate_min": 1077.1313151927434, "cost2_min": -116.01024008102256, "outflow_rate_mean": 1244.2995929180872}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014898317866027355, "policy_loss": -0.008138950914144516, "total_loss": 16.455717086791992, "vf_explained_var": 0.9085619449615479, "cur_lr": 0.0005000000237487257, "entropy": 0.7652363181114197, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 16.459613800048828}, "num_steps_trained": 6866332, "grad_time_ms": 11825.371, "num_steps_sampled": 6866332, "sample_time_ms": 20919.602, "load_time_ms": 14.736, "update_time_ms": 9.63}, "timesteps_since_restore": 6866332, "time_total_s": 5341.851312875748, "timestamp": 1558608472, "time_since_restore": 5341.851312875748, "policy_reward_mean": {}, "training_iteration": 157, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b00>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541390>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7305, "timesteps_total": 6866332, "episode_reward_mean": -480.32197237820475, "episodes_this_iter": 52, "date": "2019-05-23_10-47-52", "time_this_iter_s": 32.81574630737305, "num_metric_batches_dropped": 0, "episode_reward_min": -729.8721376135646}
{"iterations_since_restore": 158, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -232.99501443972258, "timesteps_this_iter": 41795, "custom_metrics": {"cost1_max": 229.7218250557762, "cost1_min": 151.04829430065502, "system_level_velocity_mean": 16.169219461585104, "cost2_mean": -90.63778562001414, "cost2_max": -74.82894268054744, "outflow_rate_max": 1437.405977232418, "cost1_mean": 191.6943015477353, "system_level_velocity_min": 12.743410818889322, "system_level_velocity_max": 19.418835116744923, "outflow_rate_min": 1077.1313151927434, "cost2_min": -110.58630834279606, "outflow_rate_mean": 1248.840536600105}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01350834034383297, "policy_loss": -0.007428308017551899, "total_loss": 19.20200538635254, "vf_explained_var": 0.8963009119033813, "cur_lr": 0.0005000000237487257, "entropy": 0.7630738615989685, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.20558738708496}, "num_steps_trained": 6908127, "grad_time_ms": 11849.723, "num_steps_sampled": 6908127, "sample_time_ms": 20716.265, "load_time_ms": 13.829, "update_time_ms": 9.565}, "timesteps_since_restore": 6908127, "time_total_s": 5371.613758802414, "timestamp": 1558608502, "time_since_restore": 5371.613758802414, "policy_reward_mean": {}, "training_iteration": 158, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565940>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845653c8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e80>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7346, "timesteps_total": 6908127, "episode_reward_mean": -473.4554156429102, "episodes_this_iter": 41, "date": "2019-05-23_10-48-22", "time_this_iter_s": 29.76244592666626, "num_metric_batches_dropped": 0, "episode_reward_min": -728.1460436122687}
{"iterations_since_restore": 159, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -232.99501443972258, "timesteps_this_iter": 43578, "custom_metrics": {"cost1_max": 230.0518335279742, "cost1_min": 145.45416721491353, "system_level_velocity_mean": 16.01807204001002, "cost2_mean": -91.1095979152245, "cost2_max": -74.82894268054744, "outflow_rate_max": 1434.608946025073, "cost1_mean": 189.6641027151644, "system_level_velocity_min": 12.339842175402042, "system_level_velocity_max": 19.542475629427543, "outflow_rate_min": 1047.9089285714288, "cost2_min": -110.58630834279606, "outflow_rate_mean": 1236.8343113573976}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014795665629208088, "policy_loss": -0.008915104903280735, "total_loss": 18.29046058654785, "vf_explained_var": 0.906351625919342, "cur_lr": 0.0005000000237487257, "entropy": 0.7706785202026367, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 18.295162200927734}, "num_steps_trained": 6951705, "grad_time_ms": 12023.421, "num_steps_sampled": 6951705, "sample_time_ms": 20542.257, "load_time_ms": 14.822, "update_time_ms": 9.478}, "timesteps_since_restore": 6951705, "time_total_s": 5402.938565254211, "timestamp": 1558608533, "time_since_restore": 5402.938565254211, "policy_reward_mean": {}, "training_iteration": 159, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b358>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bb70>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac18>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7391, "timesteps_total": 6951705, "episode_reward_mean": -488.08360522915905, "episodes_this_iter": 45, "date": "2019-05-23_10-48-53", "time_this_iter_s": 31.324806451797485, "num_metric_batches_dropped": 0, "episode_reward_min": -748.3081365426095}
{"iterations_since_restore": 160, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.5120626791782, "timesteps_this_iter": 41904, "custom_metrics": {"cost1_max": 230.0518335279742, "cost1_min": 145.45416721491353, "system_level_velocity_mean": 15.813426460746287, "cost2_mean": -90.45465448357434, "cost2_max": -75.7186427492368, "outflow_rate_max": 1431.230903325302, "cost1_mean": 187.1956166495823, "system_level_velocity_min": 12.339842175402042, "system_level_velocity_max": 19.542475629427543, "outflow_rate_min": 1047.9089285714288, "cost2_min": -110.58630834279606, "outflow_rate_mean": 1222.8877321757018}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014766319654881954, "policy_loss": -0.008606933057308197, "total_loss": 16.966869354248047, "vf_explained_var": 0.9044992327690125, "cur_lr": 0.0005000000237487257, "entropy": 0.7745274305343628, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 16.971269607543945}, "num_steps_trained": 6993609, "grad_time_ms": 12123.11, "num_steps_sampled": 6993609, "sample_time_ms": 20375.191, "load_time_ms": 15.629, "update_time_ms": 9.402}, "timesteps_since_restore": 6993609, "time_total_s": 5435.567284345627, "timestamp": 1558608566, "time_since_restore": 5435.567284345627, "policy_reward_mean": {}, "training_iteration": 160, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b588>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a828>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a358>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7444, "timesteps_total": 6993609, "episode_reward_mean": -505.20613658498604, "episodes_this_iter": 53, "date": "2019-05-23_10-49-26", "time_this_iter_s": 32.628719091415405, "num_metric_batches_dropped": 0, "episode_reward_min": -748.3081365426095}
{"iterations_since_restore": 161, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.31871909395775, "timesteps_this_iter": 40334, "custom_metrics": {"cost1_max": 230.0518335279742, "cost1_min": 152.79787012600661, "system_level_velocity_mean": 16.319435647817667, "cost2_mean": -88.59287390198138, "cost2_max": -74.4527443888831, "outflow_rate_max": 1437.8194553102562, "cost1_mean": 193.38798870642026, "system_level_velocity_min": 12.900645193214839, "system_level_velocity_max": 19.542475629427543, "outflow_rate_min": 1081.5269696523358, "cost2_min": -110.4839922930082, "outflow_rate_mean": 1249.179710937826}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015688011422753334, "policy_loss": -0.007337718736380339, "total_loss": 19.325117111206055, "vf_explained_var": 0.8920509219169617, "cur_lr": 0.0005000000237487257, "entropy": 0.7523735165596008, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.327987670898438}, "num_steps_trained": 7033943, "grad_time_ms": 12194.607, "num_steps_sampled": 7033943, "sample_time_ms": 20204.298, "load_time_ms": 15.024, "update_time_ms": 9.357}, "timesteps_since_restore": 7033943, "time_total_s": 5465.703852891922, "timestamp": 1558608596, "time_since_restore": 5465.703852891922, "policy_reward_mean": {}, "training_iteration": 161, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456abe0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa58>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456afd0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7486, "timesteps_total": 7033943, "episode_reward_mean": -465.5604661444461, "episodes_this_iter": 42, "date": "2019-05-23_10-49-56", "time_this_iter_s": 30.136568546295166, "num_metric_batches_dropped": 0, "episode_reward_min": -723.101504251412}
{"iterations_since_restore": 162, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.18432318306301, "timesteps_this_iter": 41695, "custom_metrics": {"cost1_max": 229.9669821626555, "cost1_min": 152.16657104141095, "system_level_velocity_mean": 16.419517199728165, "cost2_mean": -89.04799151188983, "cost2_max": -71.65635519430353, "outflow_rate_max": 1437.8194553102562, "cost1_mean": 194.4921324297029, "system_level_velocity_min": 12.93951642361387, "system_level_velocity_max": 19.468885045217103, "outflow_rate_min": 1077.029310979338, "cost2_min": -108.39701263477568, "outflow_rate_mean": 1255.711599821185}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016219137236475945, "policy_loss": -0.008785477839410305, "total_loss": 19.689088821411133, "vf_explained_var": 0.8947445750236511, "cur_lr": 0.0005000000237487257, "entropy": 0.7557045817375183, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 19.693256378173828}, "num_steps_trained": 7075638, "grad_time_ms": 12123.846, "num_steps_sampled": 7075638, "sample_time_ms": 20029.528, "load_time_ms": 14.204, "update_time_ms": 9.163}, "timesteps_since_restore": 7075638, "time_total_s": 5497.323468208313, "timestamp": 1558608627, "time_since_restore": 5497.323468208313, "policy_reward_mean": {}, "training_iteration": 162, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a160>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456acc0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab70>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7530, "timesteps_total": 7075638, "episode_reward_mean": -455.87068083523235, "episodes_this_iter": 44, "date": "2019-05-23_10-50-27", "time_this_iter_s": 31.61961531639099, "num_metric_batches_dropped": 0, "episode_reward_min": -711.5814328136295}
{"iterations_since_restore": 163, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.18432318306301, "timesteps_this_iter": 43112, "custom_metrics": {"cost1_max": 229.9669821626555, "cost1_min": 146.5003334309106, "system_level_velocity_mean": 15.970411810991054, "cost2_mean": -89.00756335530936, "cost2_max": -71.56653324614443, "outflow_rate_max": 1434.5956620003376, "cost1_mean": 189.1032763655281, "system_level_velocity_min": 12.467657486503889, "system_level_velocity_max": 19.468885045217103, "outflow_rate_min": 1044.3489638363922, "cost2_min": -107.27062215724243, "outflow_rate_mean": 1233.7098345562079}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014997558668255806, "policy_loss": -0.009219344705343246, "total_loss": 19.093997955322266, "vf_explained_var": 0.8948774933815002, "cur_lr": 0.0005000000237487257, "entropy": 0.7696852087974548, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.098947525024414}, "num_steps_trained": 7118750, "grad_time_ms": 11756.561, "num_steps_sampled": 7118750, "sample_time_ms": 19957.685, "load_time_ms": 13.551, "update_time_ms": 8.808}, "timesteps_since_restore": 7118750, "time_total_s": 5530.679254770279, "timestamp": 1558608661, "time_since_restore": 5530.679254770279, "policy_reward_mean": {}, "training_iteration": 163, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa58>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac18>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a320>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7581, "timesteps_total": 7118750, "episode_reward_mean": -485.76092920481045, "episodes_this_iter": 51, "date": "2019-05-23_10-51-01", "time_this_iter_s": 33.35578656196594, "num_metric_batches_dropped": 0, "episode_reward_min": -743.7407303188156}
{"iterations_since_restore": 164, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.987922484111195, "timesteps_this_iter": 41540, "custom_metrics": {"cost1_max": 227.74722175569795, "cost1_min": 23.454109155921376, "system_level_velocity_mean": 15.85358519902809, "cost2_mean": -87.55326572733648, "cost2_max": -18.888310837066655, "outflow_rate_max": 1427.9666909041362, "cost1_mean": 185.6583269529666, "system_level_velocity_min": 12.467657486503889, "system_level_velocity_max": 19.28634798750242, "outflow_rate_min": 477.9372180334546, "cost2_min": -106.2793534258997, "outflow_rate_mean": 1215.4932987082432}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.013372824527323246, "policy_loss": -0.006286676973104477, "total_loss": 16.141956329345703, "vf_explained_var": 0.9116858839988708, "cur_lr": 0.0005000000237487257, "entropy": 0.7557498216629028, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 16.144433975219727}, "num_steps_trained": 7160290, "grad_time_ms": 11852.63, "num_steps_sampled": 7160290, "sample_time_ms": 20008.781, "load_time_ms": 13.356, "update_time_ms": 8.809}, "timesteps_since_restore": 7160290, "time_total_s": 5565.14066028595, "timestamp": 1558608695, "time_since_restore": 5565.14066028595, "policy_reward_mean": {}, "training_iteration": 164, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557748>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845573c8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cc18>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7627, "timesteps_total": 7160290, "episode_reward_mean": -489.2444170894328, "episodes_this_iter": 46, "date": "2019-05-23_10-51-35", "time_this_iter_s": 34.461405515670776, "num_metric_batches_dropped": 0, "episode_reward_min": -743.7407303188156}
{"iterations_since_restore": 165, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.987922484111195, "timesteps_this_iter": 42373, "custom_metrics": {"cost1_max": 229.8777164030886, "cost1_min": 23.454109155921376, "system_level_velocity_mean": 16.0006032836354, "cost2_mean": -86.75691930722631, "cost2_max": -18.888310837066655, "outflow_rate_max": 1431.9497781702355, "cost1_mean": 187.26254962929463, "system_level_velocity_min": 12.738150234366348, "system_level_velocity_max": 19.476715757586952, "outflow_rate_min": 477.9372180334546, "cost2_min": -104.8701435771469, "outflow_rate_mean": 1220.6729001918313}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.016020359471440315, "policy_loss": -0.007276387885212898, "total_loss": 16.641448974609375, "vf_explained_var": 0.9132832288742065, "cur_lr": 0.0005000000237487257, "entropy": 0.7786758542060852, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 16.644163131713867}, "num_steps_trained": 7202663, "grad_time_ms": 11967.575, "num_steps_sampled": 7202663, "sample_time_ms": 20132.504, "load_time_ms": 13.816, "update_time_ms": 8.914}, "timesteps_since_restore": 7202663, "time_total_s": 5599.14319896698, "timestamp": 1558608729, "time_since_restore": 5599.14319896698, "policy_reward_mean": {}, "training_iteration": 165, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae80>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a128>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab00>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7671, "timesteps_total": 7202663, "episode_reward_mean": -479.8060210720148, "episodes_this_iter": 44, "date": "2019-05-23_10-52-09", "time_this_iter_s": 34.00253868103027, "num_metric_batches_dropped": 0, "episode_reward_min": -741.9563041701172}
{"iterations_since_restore": 166, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -232.9985853925477, "timesteps_this_iter": 42427, "custom_metrics": {"cost1_max": 229.8777164030886, "cost1_min": 146.8017719603049, "system_level_velocity_mean": 15.798981465989772, "cost2_mean": -87.34058580487246, "cost2_max": -66.77645201045495, "outflow_rate_max": 1431.9497781702355, "cost1_mean": 186.99510641117573, "system_level_velocity_min": 12.542946703205308, "system_level_velocity_max": 19.476715757586952, "outflow_rate_min": 1032.8224927097385, "cost2_min": -108.17480125429397, "outflow_rate_mean": 1220.2547864039138}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01521273609250784, "policy_loss": -0.009094595909118652, "total_loss": 17.103036880493164, "vf_explained_var": 0.909994900226593, "cur_lr": 0.0005000000237487257, "entropy": 0.8041566014289856, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 17.10780143737793}, "num_steps_trained": 7245090, "grad_time_ms": 12021.241, "num_steps_sampled": 7245090, "sample_time_ms": 20165.947, "load_time_ms": 13.158, "update_time_ms": 8.893}, "timesteps_since_restore": 7245090, "time_total_s": 5632.034874677658, "timestamp": 1558608762, "time_since_restore": 5632.034874677658, "policy_reward_mean": {}, "training_iteration": 166, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae48>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a358>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa20>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7715, "timesteps_total": 7245090, "episode_reward_mean": -496.2380434568212, "episodes_this_iter": 44, "date": "2019-05-23_10-52-42", "time_this_iter_s": 32.8916757106781, "num_metric_batches_dropped": 0, "episode_reward_min": -751.010844903928}
{"iterations_since_restore": 167, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -232.9985853925477, "timesteps_this_iter": 41388, "custom_metrics": {"cost1_max": 229.8777164030886, "cost1_min": 146.8017719603049, "system_level_velocity_mean": 16.01503293909543, "cost2_mean": -85.9909024401694, "cost2_max": -66.44995163949638, "outflow_rate_max": 1429.4198433965853, "cost1_mean": 189.65405512045214, "system_level_velocity_min": 12.41973066871866, "system_level_velocity_max": 19.476715757586952, "outflow_rate_min": 1032.8224927097385, "cost2_min": -115.93488326248266, "outflow_rate_mean": 1229.5441513892174}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01446328591555357, "policy_loss": -0.007494626101106405, "total_loss": 20.029380798339844, "vf_explained_var": 0.8905097246170044, "cur_lr": 0.0005000000237487257, "entropy": 0.7875316143035889, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 20.03275489807129}, "num_steps_trained": 7286478, "grad_time_ms": 12027.141, "num_steps_sampled": 7286478, "sample_time_ms": 20096.553, "load_time_ms": 13.344, "update_time_ms": 8.902}, "timesteps_since_restore": 7286478, "time_total_s": 5664.2132778167725, "timestamp": 1558608794, "time_since_restore": 5664.2132778167725, "policy_reward_mean": {}, "training_iteration": 167, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456af98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a860>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a9e8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7767, "timesteps_total": 7286478, "episode_reward_mean": -480.1695500850525, "episodes_this_iter": 52, "date": "2019-05-23_10-53-14", "time_this_iter_s": 32.17840313911438, "num_metric_batches_dropped": 0, "episode_reward_min": -751.010844903928}
{"iterations_since_restore": 168, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -236.14463002242405, "timesteps_this_iter": 41198, "custom_metrics": {"cost1_max": 228.35693583250014, "cost1_min": 148.07112289760914, "system_level_velocity_mean": 16.157550268646176, "cost2_mean": -85.42712948103049, "cost2_max": -66.44995163949638, "outflow_rate_max": 1421.664459544997, "cost1_mean": 191.55919850735572, "system_level_velocity_min": 12.41973066871866, "system_level_velocity_max": 19.409906460995966, "outflow_rate_min": 1044.226776777893, "cost2_min": -115.93488326248266, "outflow_rate_mean": 1237.5345681928625}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014300843700766563, "policy_loss": -0.007224752102047205, "total_loss": 15.995429039001465, "vf_explained_var": 0.9145020246505737, "cur_lr": 0.0005000000237487257, "entropy": 0.8053334355354309, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 15.998581886291504}, "num_steps_trained": 7327676, "grad_time_ms": 11989.513, "num_steps_sampled": 7327676, "sample_time_ms": 20228.708, "load_time_ms": 14.13, "update_time_ms": 8.92}, "timesteps_since_restore": 7327676, "time_total_s": 5694.952971696854, "timestamp": 1558608825, "time_since_restore": 5694.952971696854, "policy_reward_mean": {}, "training_iteration": 168, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b0b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2e8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b588>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7808, "timesteps_total": 7327676, "episode_reward_mean": -468.78178307446245, "episodes_this_iter": 41, "date": "2019-05-23_10-53-45", "time_this_iter_s": 30.739693880081177, "num_metric_batches_dropped": 0, "episode_reward_min": -728.7534651220797}
{"iterations_since_restore": 169, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -236.14463002242405, "timesteps_this_iter": 41996, "custom_metrics": {"cost1_max": 228.35693583250014, "cost1_min": 144.5676139387441, "system_level_velocity_mean": 16.042020686325728, "cost2_mean": -85.36476454935547, "cost2_max": -65.67219113433451, "outflow_rate_max": 1425.5358567903093, "cost1_mean": 190.0323662972948, "system_level_velocity_min": 12.368339747827264, "system_level_velocity_max": 19.409906460995966, "outflow_rate_min": 1029.499359686462, "cost2_min": -115.93488326248266, "outflow_rate_mean": 1229.479683592121}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014858587644994259, "policy_loss": -0.008123654872179031, "total_loss": 18.639827728271484, "vf_explained_var": 0.8932340741157532, "cur_lr": 0.0005000000237487257, "entropy": 0.8027522563934326, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 18.643720626831055}, "num_steps_trained": 7369672, "grad_time_ms": 11907.717, "num_steps_sampled": 7369672, "sample_time_ms": 20338.323, "load_time_ms": 13.918, "update_time_ms": 9.102}, "timesteps_since_restore": 7369672, "time_total_s": 5726.543711900711, "timestamp": 1558608857, "time_since_restore": 5726.543711900711, "policy_reward_mean": {}, "training_iteration": 169, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a978>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456add8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab70>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7854, "timesteps_total": 7369672, "episode_reward_mean": -477.850862985525, "episodes_this_iter": 46, "date": "2019-05-23_10-54-17", "time_this_iter_s": 31.590740203857422, "num_metric_batches_dropped": 0, "episode_reward_min": -735.4783708434668}
{"iterations_since_restore": 170, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.94536499862744, "timesteps_this_iter": 42365, "custom_metrics": {"cost1_max": 228.8099652240893, "cost1_min": 144.5676139387441, "system_level_velocity_mean": 15.881363762015221, "cost2_mean": -85.13110265600129, "cost2_max": -65.67219113433451, "outflow_rate_max": 1425.5358567903093, "cost1_mean": 188.16229678395567, "system_level_velocity_min": 12.18479773103958, "system_level_velocity_max": 19.39088954694351, "outflow_rate_min": 1029.499359686462, "cost2_min": -105.5666110838265, "outflow_rate_mean": 1218.6417944129428}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015178002417087555, "policy_loss": -0.008343908935785294, "total_loss": 22.071557998657227, "vf_explained_var": 0.8771097660064697, "cur_lr": 0.0005000000237487257, "entropy": 0.8094428777694702, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 22.075580596923828}, "num_steps_trained": 7412037, "grad_time_ms": 11846.292, "num_steps_sampled": 7412037, "sample_time_ms": 20291.027, "load_time_ms": 14.056, "update_time_ms": 9.148}, "timesteps_since_restore": 7412037, "time_total_s": 5758.104214191437, "timestamp": 1558608888, "time_since_restore": 5758.104214191437, "policy_reward_mean": {}, "training_iteration": 170, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa20>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a780>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a6d8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7906, "timesteps_total": 7412037, "episode_reward_mean": -489.14988293587425, "episodes_this_iter": 52, "date": "2019-05-23_10-54-48", "time_this_iter_s": 31.560502290725708, "num_metric_batches_dropped": 0, "episode_reward_min": -756.1852491562689}
{"iterations_since_restore": 171, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.183590069296315, "timesteps_this_iter": 40817, "custom_metrics": {"cost1_max": 229.12766259002228, "cost1_min": 24.692692407977983, "system_level_velocity_mean": 16.043676967612253, "cost2_mean": -83.70116606521493, "cost2_max": -17.52833151039738, "outflow_rate_max": 1428.7234288188588, "cost1_mean": 188.1301744328615, "system_level_velocity_min": 12.18479773103958, "system_level_velocity_max": 19.357093436482746, "outflow_rate_min": 518.6392970701784, "cost2_min": -114.63389592446633, "outflow_rate_mean": 1221.978069918283}, "done": false, "pid": 51578, "episode_len_mean": 322.12, "info": {"default": {"kl": 0.017518604174256325, "policy_loss": -0.010567601770162582, "total_loss": 16.399635314941406, "vf_explained_var": 0.9103936553001404, "cur_lr": 0.0005000000237487257, "entropy": 0.8061524629592896, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 16.405214309692383}, "num_steps_trained": 7452854, "grad_time_ms": 11881.246, "num_steps_sampled": 7452854, "sample_time_ms": 20402.11, "load_time_ms": 14.121, "update_time_ms": 9.008}, "timesteps_since_restore": 7452854, "time_total_s": 5789.69540476799, "timestamp": 1558608920, "time_since_restore": 5789.69540476799, "policy_reward_mean": {}, "training_iteration": 171, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a908>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a128>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aba8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7948, "timesteps_total": 7452854, "episode_reward_mean": -473.41225143011184, "episodes_this_iter": 42, "date": "2019-05-23_10-55-20", "time_this_iter_s": 31.591190576553345, "num_metric_batches_dropped": 0, "episode_reward_min": -776.9875257505521}
{"iterations_since_restore": 172, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.41265575874544, "timesteps_this_iter": 42153, "custom_metrics": {"cost1_max": 229.12766259002228, "cost1_min": 18.238562262126155, "system_level_velocity_mean": 16.09237034285289, "cost2_mean": -82.82130170437544, "cost2_max": -15.933376596306026, "outflow_rate_max": 1428.7234288188588, "cost1_mean": 186.7334588907064, "system_level_velocity_min": 12.2207979187759, "system_level_velocity_max": 19.46633009678653, "outflow_rate_min": 454.9250223567449, "cost2_min": -114.63389592446633, "outflow_rate_mean": 1219.7854188666624}, "done": false, "pid": 51578, "episode_len_mean": 319.14, "info": {"default": {"kl": 0.01608043909072876, "policy_loss": -0.00924925971776247, "total_loss": 15.714648246765137, "vf_explained_var": 0.9179972410202026, "cur_lr": 0.0005000000237487257, "entropy": 0.8082911968231201, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 15.719316482543945}, "num_steps_trained": 7495007, "grad_time_ms": 11980.889, "num_steps_sampled": 7495007, "sample_time_ms": 20567.705, "load_time_ms": 14.799, "update_time_ms": 9.152}, "timesteps_since_restore": 7495007, "time_total_s": 5823.97989320755, "timestamp": 1558608954, "time_since_restore": 5823.97989320755, "policy_reward_mean": {}, "training_iteration": 172, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565a20>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565d30>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565390>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 7994, "timesteps_total": 7495007, "episode_reward_mean": -465.0950950487401, "episodes_this_iter": 46, "date": "2019-05-23_10-55-54", "time_this_iter_s": 34.28448843955994, "num_metric_batches_dropped": 0, "episode_reward_min": -776.9875257505521}
{"iterations_since_restore": 173, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.41265575874544, "timesteps_this_iter": 41286, "custom_metrics": {"cost1_max": 228.73484501354966, "cost1_min": 18.238562262126155, "system_level_velocity_mean": 16.12427629786804, "cost2_mean": -84.30571369883022, "cost2_max": -15.933376596306026, "outflow_rate_max": 1428.7234288188588, "cost1_mean": 189.1919394264336, "system_level_velocity_min": 11.55824964282234, "system_level_velocity_max": 19.46633009678653, "outflow_rate_min": 454.9250223567449, "cost2_min": -119.11454665116561, "outflow_rate_mean": 1232.5841258451064}, "done": false, "pid": 51578, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.014878797344863415, "policy_loss": -0.00783153809607029, "total_loss": 20.043668746948242, "vf_explained_var": 0.8871718645095825, "cur_lr": 0.0005000000237487257, "entropy": 0.7972262501716614, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 20.047264099121094}, "num_steps_trained": 7536293, "grad_time_ms": 12009.337, "num_steps_sampled": 7536293, "sample_time_ms": 20403.875, "load_time_ms": 14.683, "update_time_ms": 9.39}, "timesteps_since_restore": 7536293, "time_total_s": 5856.006936311722, "timestamp": 1558608986, "time_since_restore": 5856.006936311722, "policy_reward_mean": {}, "training_iteration": 173, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ad68>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845347f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557978>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8047, "timesteps_total": 7536293, "episode_reward_mean": -463.02370453040135, "episodes_this_iter": 53, "date": "2019-05-23_10-56-26", "time_this_iter_s": 32.02704310417175, "num_metric_batches_dropped": 0, "episode_reward_min": -729.1954449590304}
{"iterations_since_restore": 174, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -147.8327563789719, "timesteps_this_iter": 39775, "custom_metrics": {"cost1_max": 228.81477885077436, "cost1_min": 139.7765876037484, "system_level_velocity_mean": 16.226899137499053, "cost2_mean": -83.33849939599968, "cost2_max": -57.98264143028996, "outflow_rate_max": 1425.758763785975, "cost1_mean": 191.68270265721992, "system_level_velocity_min": 11.55824964282234, "system_level_velocity_max": 19.414844667953922, "outflow_rate_min": 1075.2735309635436, "cost2_min": -119.11454665116561, "outflow_rate_mean": 1238.9206343973697}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.014103920198976994, "policy_loss": -0.009100920520722866, "total_loss": 14.983722686767578, "vf_explained_var": 0.9130162596702576, "cur_lr": 0.0005000000237487257, "entropy": 0.7901559472084045, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 14.988807678222656}, "num_steps_trained": 7576068, "grad_time_ms": 11883.816, "num_steps_sampled": 7576068, "sample_time_ms": 20177.19, "load_time_ms": 13.859, "update_time_ms": 9.425}, "timesteps_since_restore": 7576068, "time_total_s": 5886.940567970276, "timestamp": 1558609017, "time_since_restore": 5886.940567970276, "policy_reward_mean": {}, "training_iteration": 174, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557080>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557f60>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557748>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8089, "timesteps_total": 7576068, "episode_reward_mean": -456.9883898207032, "episodes_this_iter": 42, "date": "2019-05-23_10-56-57", "time_this_iter_s": 30.933631658554077, "num_metric_batches_dropped": 0, "episode_reward_min": -729.1954449590304}
{"iterations_since_restore": 175, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -102.24061421931876, "timesteps_this_iter": 42572, "custom_metrics": {"cost1_max": 228.81477885077436, "cost1_min": 85.38438691769497, "system_level_velocity_mean": 16.22736547034317, "cost2_mean": -82.30803241375162, "cost2_max": -48.217790709690775, "outflow_rate_max": 1420.3914658870544, "cost1_mean": 189.27487716853227, "system_level_velocity_min": 12.759529482194528, "system_level_velocity_max": 19.414844667953922, "outflow_rate_min": 774.5730232303737, "cost2_min": -103.46983590819032, "outflow_rate_mean": 1226.1506354682322}, "done": false, "pid": 51578, "episode_len_mean": 320.72, "info": {"default": {"kl": 0.01621178723871708, "policy_loss": -0.009434886276721954, "total_loss": 17.602468490600586, "vf_explained_var": 0.9047276377677917, "cur_lr": 0.0005000000237487257, "entropy": 0.8131535649299622, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 17.607288360595703}, "num_steps_trained": 7618640, "grad_time_ms": 11820.4, "num_steps_sampled": 7618640, "sample_time_ms": 20092.499, "load_time_ms": 14.117, "update_time_ms": 9.315}, "timesteps_since_restore": 7618640, "time_total_s": 5919.473741054535, "timestamp": 1558609050, "time_since_restore": 5919.473741054535, "policy_reward_mean": {}, "training_iteration": 175, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565898>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845656d8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565c18>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8135, "timesteps_total": 7618640, "episode_reward_mean": -458.0307042214409, "episodes_this_iter": 46, "date": "2019-05-23_10-57-30", "time_this_iter_s": 32.53317308425903, "num_metric_batches_dropped": 0, "episode_reward_min": -711.6495862906222}
{"iterations_since_restore": 176, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.04652457275185, "timesteps_this_iter": 41722, "custom_metrics": {"cost1_max": 228.85209242156742, "cost1_min": 85.38438691769497, "system_level_velocity_mean": 16.05941123731397, "cost2_mean": -83.97418028053707, "cost2_max": -46.57546675535094, "outflow_rate_max": 1420.3914658870544, "cost1_mean": 186.54926430382014, "system_level_velocity_min": 12.715077146814219, "system_level_velocity_max": 19.442679546352167, "outflow_rate_min": 774.5730232303737, "cost2_min": -114.20978826768942, "outflow_rate_mean": 1214.3478240150491}, "done": false, "pid": 51578, "episode_len_mean": 319.92, "info": {"default": {"kl": 0.01638609915971756, "policy_loss": -0.006406988017261028, "total_loss": 20.923973083496094, "vf_explained_var": 0.881777822971344, "cur_lr": 0.0005000000237487257, "entropy": 0.7954388856887817, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 20.92571258544922}, "num_steps_trained": 7660362, "grad_time_ms": 11706.393, "num_steps_sampled": 7660362, "sample_time_ms": 20101.974, "load_time_ms": 15.736, "update_time_ms": 10.313}, "timesteps_since_restore": 7660362, "time_total_s": 5951.342074871063, "timestamp": 1558609082, "time_since_restore": 5951.342074871063, "policy_reward_mean": {}, "training_iteration": 176, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a518>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a438>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845578d0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8186, "timesteps_total": 7660362, "episode_reward_mean": -473.1145581206202, "episodes_this_iter": 51, "date": "2019-05-23_10-58-02", "time_this_iter_s": 31.86833381652832, "num_metric_batches_dropped": 0, "episode_reward_min": -713.2447924866389}
{"iterations_since_restore": 177, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.04652457275185, "timesteps_this_iter": 42076, "custom_metrics": {"cost1_max": 228.85209242156742, "cost1_min": 88.21385232700914, "system_level_velocity_mean": 16.009446652392313, "cost2_mean": -84.85052668694583, "cost2_max": -46.57546675535094, "outflow_rate_max": 1420.3914658870544, "cost1_mean": 188.32904901650815, "system_level_velocity_min": 12.588087313540782, "system_level_velocity_max": 19.45589986021757, "outflow_rate_min": 806.8342188911909, "cost2_min": -114.20978826768942, "outflow_rate_mean": 1223.5564433643813}, "done": false, "pid": 51578, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.014783408492803574, "policy_loss": -0.008148002438247204, "total_loss": 15.932930946350098, "vf_explained_var": 0.9117204546928406, "cur_lr": 0.0005000000237487257, "entropy": 0.8119356036186218, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 15.936868667602539}, "num_steps_trained": 7702438, "grad_time_ms": 11639.01, "num_steps_sampled": 7702438, "sample_time_ms": 20093.118, "load_time_ms": 15.84, "update_time_ms": 10.519}, "timesteps_since_restore": 7702438, "time_total_s": 5982.760271549225, "timestamp": 1558609113, "time_since_restore": 5982.760271549225, "policy_reward_mean": {}, "training_iteration": 177, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566390>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566358>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566278>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8230, "timesteps_total": 7702438, "episode_reward_mean": -477.8727946532796, "episodes_this_iter": 44, "date": "2019-05-23_10-58-33", "time_this_iter_s": 31.41819667816162, "num_metric_batches_dropped": 0, "episode_reward_min": -738.8675418468189}
{"iterations_since_restore": 178, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -223.071839544649, "timesteps_this_iter": 41736, "custom_metrics": {"cost1_max": 229.29272553004665, "cost1_min": 144.84458362147925, "system_level_velocity_mean": 16.117368446968925, "cost2_mean": -85.57857872352945, "cost2_max": -65.50363692165075, "outflow_rate_max": 1420.8544888981985, "cost1_mean": 190.8125803524542, "system_level_velocity_min": 12.268070329420885, "system_level_velocity_max": 19.554658910569866, "outflow_rate_min": 1034.3960565476189, "cost2_min": -103.87459229276675, "outflow_rate_mean": 1236.58489660567}, "done": false, "pid": 51578, "episode_len_mean": 324.8, "info": {"default": {"kl": 0.015902092680335045, "policy_loss": -0.00946658942848444, "total_loss": 20.080787658691406, "vf_explained_var": 0.8969029188156128, "cur_lr": 0.0005000000237487257, "entropy": 0.815293550491333, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 20.085723876953125}, "num_steps_trained": 7744174, "grad_time_ms": 11568.172, "num_steps_sampled": 7744174, "sample_time_ms": 20152.492, "load_time_ms": 15.801, "update_time_ms": 10.568}, "timesteps_since_restore": 7744174, "time_total_s": 6013.354494094849, "timestamp": 1558609144, "time_since_restore": 6013.354494094849, "policy_reward_mean": {}, "training_iteration": 178, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530748>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566a90>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8273, "timesteps_total": 7744174, "episode_reward_mean": -472.90748044549343, "episodes_this_iter": 43, "date": "2019-05-23_10-59-04", "time_this_iter_s": 30.59422254562378, "num_metric_batches_dropped": 0, "episode_reward_min": -757.9542423755009}
{"iterations_since_restore": 179, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -147.05985620842623, "timesteps_this_iter": 43046, "custom_metrics": {"cost1_max": 229.29272553004665, "cost1_min": 144.84458362147925, "system_level_velocity_mean": 15.987467921178435, "cost2_mean": -86.68595943842854, "cost2_max": -58.98903116983914, "outflow_rate_max": 1430.282125295642, "cost1_mean": 188.1610777642229, "system_level_velocity_min": 12.268070329420885, "system_level_velocity_max": 19.554658910569866, "outflow_rate_min": 1034.3960565476189, "cost2_min": -115.18876827158135, "outflow_rate_mean": 1227.6243400365483}, "done": false, "pid": 51578, "episode_len_mean": 323.62, "info": {"default": {"kl": 0.016020584851503372, "policy_loss": -0.007544542197138071, "total_loss": 15.42480754852295, "vf_explained_var": 0.9197967052459717, "cur_lr": 0.0005000000237487257, "entropy": 0.8069944977760315, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 15.427789688110352}, "num_steps_trained": 7787220, "grad_time_ms": 11583.938, "num_steps_sampled": 7787220, "sample_time_ms": 20287.251, "load_time_ms": 15.637, "update_time_ms": 10.365}, "timesteps_since_restore": 7787220, "time_total_s": 6046.4472506046295, "timestamp": 1558609177, "time_since_restore": 6046.4472506046295, "policy_reward_mean": {}, "training_iteration": 179, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845660b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845660f0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565278>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8321, "timesteps_total": 7787220, "episode_reward_mean": -483.3072091033306, "episodes_this_iter": 48, "date": "2019-05-23_10-59-37", "time_this_iter_s": 33.092756509780884, "num_metric_batches_dropped": 0, "episode_reward_min": -757.9542423755009}
{"iterations_since_restore": 180, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -147.05985620842623, "timesteps_this_iter": 43170, "custom_metrics": {"cost1_max": 229.01927649424368, "cost1_min": 145.7904944013149, "system_level_velocity_mean": 15.6078791907816, "cost2_mean": -88.11110572867562, "cost2_max": -58.98903116983914, "outflow_rate_max": 1430.282125295642, "cost1_mean": 183.87902939821413, "system_level_velocity_min": 12.653161255677869, "system_level_velocity_max": 19.461742601930997, "outflow_rate_min": 1063.4774507139514, "cost2_min": -115.18876827158135, "outflow_rate_mean": 1208.997924403035}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.01536464411765337, "policy_loss": -0.008202971890568733, "total_loss": 16.001371383666992, "vf_explained_var": 0.918429434299469, "cur_lr": 0.0005000000237487257, "entropy": 0.7948885560035706, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 16.005197525024414}, "num_steps_trained": 7830390, "grad_time_ms": 11539.407, "num_steps_sampled": 7830390, "sample_time_ms": 20435.027, "load_time_ms": 15.716, "update_time_ms": 10.444}, "timesteps_since_restore": 7830390, "time_total_s": 6079.029927492142, "timestamp": 1558609210, "time_since_restore": 6079.029927492142, "policy_reward_mean": {}, "training_iteration": 180, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557908>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557eb8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8370, "timesteps_total": 7830390, "episode_reward_mean": -509.64535039528835, "episodes_this_iter": 49, "date": "2019-05-23_11-00-10", "time_this_iter_s": 32.58267688751221, "num_metric_batches_dropped": 0, "episode_reward_min": -741.7487325695979}
{"iterations_since_restore": 181, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.784155143412434, "timesteps_this_iter": 42083, "custom_metrics": {"cost1_max": 229.01927649424368, "cost1_min": 23.247461445537404, "system_level_velocity_mean": 15.682632199401011, "cost2_mean": -87.9378366242473, "cost2_max": -19.653448508650136, "outflow_rate_max": 1431.112700681723, "cost1_mean": 183.77364204324584, "system_level_velocity_min": 12.443471145081057, "system_level_velocity_max": 19.480702328010562, "outflow_rate_min": 462.43348918263234, "cost2_min": -113.64567365548908, "outflow_rate_mean": 1207.6046048000935}, "done": false, "pid": 51578, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.014761744067072868, "policy_loss": -0.007744858972728252, "total_loss": 19.10212516784668, "vf_explained_var": 0.8991571068763733, "cur_lr": 0.0005000000237487257, "entropy": 0.8015619516372681, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.105667114257812}, "num_steps_trained": 7872473, "grad_time_ms": 11619.712, "num_steps_sampled": 7872473, "sample_time_ms": 20528.794, "load_time_ms": 15.658, "update_time_ms": 10.757}, "timesteps_since_restore": 7872473, "time_total_s": 6112.369609594345, "timestamp": 1558609243, "time_since_restore": 6112.369609594345, "policy_reward_mean": {}, "training_iteration": 181, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a6d8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab70>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a438>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8413, "timesteps_total": 7872473, "episode_reward_mean": -503.06847596413047, "episodes_this_iter": 43, "date": "2019-05-23_11-00-43", "time_this_iter_s": 33.33968210220337, "num_metric_batches_dropped": 0, "episode_reward_min": -747.374571046056}
{"iterations_since_restore": 182, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.784155143412434, "timesteps_this_iter": 42748, "custom_metrics": {"cost1_max": 229.01927649424368, "cost1_min": 23.247461445537404, "system_level_velocity_mean": 15.915705910943442, "cost2_mean": -86.08727621328288, "cost2_max": -19.653448508650136, "outflow_rate_max": 1431.112700681723, "cost1_mean": 185.22229793596603, "system_level_velocity_min": 12.443471145081057, "system_level_velocity_max": 19.480702328010562, "outflow_rate_min": 462.43348918263234, "cost2_min": -113.64567365548908, "outflow_rate_mean": 1209.8781551399998}, "done": false, "pid": 51578, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.015930606052279472, "policy_loss": -0.007212379015982151, "total_loss": 17.633041381835938, "vf_explained_var": 0.9097414612770081, "cur_lr": 0.0005000000237487257, "entropy": 0.8118134140968323, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 17.635719299316406}, "num_steps_trained": 7915221, "grad_time_ms": 11672.195, "num_steps_sampled": 7915221, "sample_time_ms": 20425.952, "load_time_ms": 15.561, "update_time_ms": 10.735}, "timesteps_since_restore": 7915221, "time_total_s": 6146.142009496689, "timestamp": 1558609277, "time_since_restore": 6146.142009496689, "policy_reward_mean": {}, "training_iteration": 182, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565c50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845653c8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565da0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8461, "timesteps_total": 7915221, "episode_reward_mean": -486.29996467941527, "episodes_this_iter": 48, "date": "2019-05-23_11-01-17", "time_this_iter_s": 33.77239990234375, "num_metric_batches_dropped": 0, "episode_reward_min": -747.374571046056}
{"iterations_since_restore": 183, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -26.722981934723297, "timesteps_this_iter": 41825, "custom_metrics": {"cost1_max": 229.1909673834211, "cost1_min": 23.270744974173667, "system_level_velocity_mean": 16.021278894631212, "cost2_mean": -85.8483343063536, "cost2_max": -17.843781511472667, "outflow_rate_max": 1429.910168108881, "cost1_mean": 185.13984558788377, "system_level_velocity_min": 12.63740448884198, "system_level_velocity_max": 19.45569961653776, "outflow_rate_min": 508.5934821910148, "cost2_min": -106.88924489411187, "outflow_rate_mean": 1208.898785212317}, "done": false, "pid": 51578, "episode_len_mean": 318.1, "info": {"default": {"kl": 0.01438781525939703, "policy_loss": -0.008438335731625557, "total_loss": 21.71616554260254, "vf_explained_var": 0.8872390389442444, "cur_lr": 0.0005000000237487257, "entropy": 0.7916005253791809, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 21.72050666809082}, "num_steps_trained": 7957046, "grad_time_ms": 11587.972, "num_steps_sampled": 7957046, "sample_time_ms": 20500.459, "load_time_ms": 15.736, "update_time_ms": 10.782}, "timesteps_since_restore": 7957046, "time_total_s": 6178.057771205902, "timestamp": 1558609309, "time_since_restore": 6178.057771205902, "policy_reward_mean": {}, "training_iteration": 183, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566320>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845660b8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566160>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8512, "timesteps_total": 7957046, "episode_reward_mean": -476.8020319892572, "episodes_this_iter": 51, "date": "2019-05-23_11-01-49", "time_this_iter_s": 31.915761709213257, "num_metric_batches_dropped": 0, "episode_reward_min": -715.6369523175823}
{"iterations_since_restore": 184, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -26.722981934723297, "timesteps_this_iter": 43650, "custom_metrics": {"cost1_max": 229.1909673834211, "cost1_min": 23.270744974173667, "system_level_velocity_mean": 15.747420713755032, "cost2_mean": -88.0741653975867, "cost2_max": -17.843781511472667, "outflow_rate_max": 1430.004839770619, "cost1_mean": 183.18616186365992, "system_level_velocity_min": 12.637289743789086, "system_level_velocity_max": 19.467632349882688, "outflow_rate_min": 508.5934821910148, "cost2_min": -114.29573295101574, "outflow_rate_mean": 1201.2487817984243}, "done": false, "pid": 51578, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.015668289735913277, "policy_loss": -0.008014456368982792, "total_loss": 16.089712142944336, "vf_explained_var": 0.9142950773239136, "cur_lr": 0.0005000000237487257, "entropy": 0.7987019419670105, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 16.093265533447266}, "num_steps_trained": 8000696, "grad_time_ms": 11568.736, "num_steps_sampled": 8000696, "sample_time_ms": 20769.963, "load_time_ms": 16.524, "update_time_ms": 10.527}, "timesteps_since_restore": 8000696, "time_total_s": 6211.50800204277, "timestamp": 1558609342, "time_since_restore": 6211.50800204277, "policy_reward_mean": {}, "training_iteration": 184, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557eb8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557908>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557710>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8555, "timesteps_total": 8000696, "episode_reward_mean": -499.43455985302245, "episodes_this_iter": 43, "date": "2019-05-23_11-02-22", "time_this_iter_s": 33.450230836868286, "num_metric_batches_dropped": 0, "episode_reward_min": -729.5960566481534}
{"iterations_since_restore": 185, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -26.722981934723297, "timesteps_this_iter": 43568, "custom_metrics": {"cost1_max": 229.12957134424437, "cost1_min": 23.270744974173667, "system_level_velocity_mean": 15.55536627396412, "cost2_mean": -88.92994360320836, "cost2_max": -17.843781511472667, "outflow_rate_max": 1439.2486556135443, "cost1_mean": 180.36105402459827, "system_level_velocity_min": 12.258026099456066, "system_level_velocity_max": 19.467632349882688, "outflow_rate_min": 472.1492185913593, "cost2_min": -114.29573295101574, "outflow_rate_mean": 1191.139872085819}, "done": false, "pid": 51578, "episode_len_mean": 319.22, "info": {"default": {"kl": 0.015271582640707493, "policy_loss": -0.007713505998253822, "total_loss": 20.072032928466797, "vf_explained_var": 0.8946149945259094, "cur_lr": 0.0005000000237487257, "entropy": 0.809336245059967, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 20.07539939880371}, "num_steps_trained": 8044264, "grad_time_ms": 11392.445, "num_steps_sampled": 8044264, "sample_time_ms": 20957.789, "load_time_ms": 16.29, "update_time_ms": 10.388}, "timesteps_since_restore": 8044264, "time_total_s": 6244.150014400482, "timestamp": 1558609375, "time_since_restore": 6244.150014400482, "policy_reward_mean": {}, "training_iteration": 185, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565cc0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565eb8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565b70>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8603, "timesteps_total": 8044264, "episode_reward_mean": -512.0213972853044, "episodes_this_iter": 48, "date": "2019-05-23_11-02-55", "time_this_iter_s": 32.64201235771179, "num_metric_batches_dropped": 0, "episode_reward_min": -755.5404721569761}
{"iterations_since_restore": 186, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.781973873020387, "timesteps_this_iter": 42036, "custom_metrics": {"cost1_max": 229.007845039725, "cost1_min": 24.76108504685959, "system_level_velocity_mean": 15.818702305923521, "cost2_mean": -90.15527681100544, "cost2_max": -20.86508247720394, "outflow_rate_max": 1439.2486556135443, "cost1_mean": 185.5473165851077, "system_level_velocity_min": 12.258026099456066, "system_level_velocity_max": 19.48924972968575, "outflow_rate_min": 472.1492185913593, "cost2_min": -108.93763217383969, "outflow_rate_mean": 1215.547795407114}, "done": false, "pid": 51578, "episode_len_mean": 322.12, "info": {"default": {"kl": 0.01439732313156128, "policy_loss": -0.007011032663285732, "total_loss": 18.751384735107422, "vf_explained_var": 0.8973297476768494, "cur_lr": 0.0005000000237487257, "entropy": 0.799509584903717, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 18.754295349121094}, "num_steps_trained": 8086300, "grad_time_ms": 11288.476, "num_steps_sampled": 8086300, "sample_time_ms": 21090.613, "load_time_ms": 15.713, "update_time_ms": 9.434}, "timesteps_since_restore": 8086300, "time_total_s": 6276.291218280792, "timestamp": 1558609407, "time_since_restore": 6276.291218280792, "policy_reward_mean": {}, "training_iteration": 186, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca20>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c470>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c208>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8652, "timesteps_total": 8086300, "episode_reward_mean": -496.6139103882984, "episodes_this_iter": 49, "date": "2019-05-23_11-03-27", "time_this_iter_s": 32.14120388031006, "num_metric_batches_dropped": 0, "episode_reward_min": -755.5404721569761}
{"iterations_since_restore": 187, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -232.09263453857244, "timesteps_this_iter": 43284, "custom_metrics": {"cost1_max": 229.007845039725, "cost1_min": 143.41300395681498, "system_level_velocity_mean": 15.733663506186753, "cost2_mean": -91.27996507263926, "cost2_max": -74.64111026492442, "outflow_rate_max": 1434.3014908092475, "cost1_mean": 186.38654039763904, "system_level_velocity_min": 12.241748741288518, "system_level_velocity_max": 19.48924972968575, "outflow_rate_min": 1027.8060173981976, "cost2_min": -109.35460843733222, "outflow_rate_mean": 1220.815135455175}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01626635529100895, "policy_loss": -0.009861472062766552, "total_loss": 19.322490692138672, "vf_explained_var": 0.9008274674415588, "cur_lr": 0.0005000000237487257, "entropy": 0.8136091828346252, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.327720642089844}, "num_steps_trained": 8129584, "grad_time_ms": 11408.832, "num_steps_sampled": 8129584, "sample_time_ms": 21284.745, "load_time_ms": 16.001, "update_time_ms": 9.415}, "timesteps_since_restore": 8129584, "time_total_s": 6310.895770072937, "timestamp": 1558609442, "time_since_restore": 6310.895770072937, "policy_reward_mean": {}, "training_iteration": 187, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566a20>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566c88>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566320>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8695, "timesteps_total": 8129584, "episode_reward_mean": -507.3175680732092, "episodes_this_iter": 43, "date": "2019-05-23_11-04-02", "time_this_iter_s": 34.604551792144775, "num_metric_batches_dropped": 0, "episode_reward_min": -758.0418777359338}
{"iterations_since_restore": 188, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -233.56109052582664, "timesteps_this_iter": 42810, "custom_metrics": {"cost1_max": 230.26466317093485, "cost1_min": 143.3673886530256, "system_level_velocity_mean": 15.653657016566461, "cost2_mean": -91.30271440958406, "cost2_max": -75.01527906745851, "outflow_rate_max": 1434.3014908092475, "cost1_mean": 185.39572394820388, "system_level_velocity_min": 11.996225234429083, "system_level_velocity_max": 19.551034528228122, "outflow_rate_min": 1046.1418218372771, "cost2_min": -112.44928316350942, "outflow_rate_mean": 1215.1392103335775}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015036000870168209, "policy_loss": -0.008794573135674, "total_loss": 18.45427703857422, "vf_explained_var": 0.9044313430786133, "cur_lr": 0.0005000000237487257, "entropy": 0.8108410239219666, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 18.45878791809082}, "num_steps_trained": 8172394, "grad_time_ms": 11569.782, "num_steps_sampled": 8172394, "sample_time_ms": 21450.844, "load_time_ms": 15.87, "update_time_ms": 9.58}, "timesteps_since_restore": 8172394, "time_total_s": 6344.759343385696, "timestamp": 1558609476, "time_since_restore": 6344.759343385696, "policy_reward_mean": {}, "training_iteration": 188, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565be0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565a20>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565400>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8740, "timesteps_total": 8172394, "episode_reward_mean": -516.5878503497636, "episodes_this_iter": 45, "date": "2019-05-23_11-04-36", "time_this_iter_s": 33.8635733127594, "num_metric_batches_dropped": 0, "episode_reward_min": -766.9547441959884}
{"iterations_since_restore": 189, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -233.56109052582664, "timesteps_this_iter": 41680, "custom_metrics": {"cost1_max": 230.26466317093485, "cost1_min": 143.3673886530256, "system_level_velocity_mean": 15.967540865270523, "cost2_mean": -90.72059036710633, "cost2_max": -72.51365402456744, "outflow_rate_max": 1435.083468353982, "cost1_mean": 189.22467216893693, "system_level_velocity_min": 11.996225234429083, "system_level_velocity_max": 19.551034528228122, "outflow_rate_min": 1046.1418218372771, "cost2_min": -112.44928316350942, "outflow_rate_mean": 1234.4333952332656}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01593051292002201, "policy_loss": -0.008941533043980598, "total_loss": 18.75138282775879, "vf_explained_var": 0.9033945798873901, "cur_lr": 0.0005000000237487257, "entropy": 0.7943896651268005, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 18.75578498840332}, "num_steps_trained": 8214074, "grad_time_ms": 11519.501, "num_steps_sampled": 8214074, "sample_time_ms": 21366.031, "load_time_ms": 15.983, "update_time_ms": 9.599}, "timesteps_since_restore": 8214074, "time_total_s": 6376.504197835922, "timestamp": 1558609507, "time_since_restore": 6376.504197835922, "policy_reward_mean": {}, "training_iteration": 189, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ef0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652b0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565f60>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8788, "timesteps_total": 8214074, "episode_reward_mean": -492.20708032330134, "episodes_this_iter": 48, "date": "2019-05-23_11-05-07", "time_this_iter_s": 31.74485445022583, "num_metric_batches_dropped": 0, "episode_reward_min": -766.9547441959884}
{"iterations_since_restore": 190, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -233.56109052582664, "timesteps_this_iter": 40823, "custom_metrics": {"cost1_max": 230.26466317093485, "cost1_min": 149.55513119892464, "system_level_velocity_mean": 16.361938541705626, "cost2_mean": -90.8161662494931, "cost2_max": -72.51365402456744, "outflow_rate_max": 1436.8204980709465, "cost1_mean": 194.25639539935963, "system_level_velocity_min": 12.533396662054342, "system_level_velocity_max": 19.551034528228122, "outflow_rate_min": 1032.726406207429, "cost2_min": -111.8412391303287, "outflow_rate_mean": 1259.3468670995871}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01718372106552124, "policy_loss": -0.009440158493816853, "total_loss": 20.05821418762207, "vf_explained_var": 0.8874121904373169, "cur_lr": 0.0005000000237487257, "entropy": 0.8082005977630615, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 20.062761306762695}, "num_steps_trained": 8254897, "grad_time_ms": 11439.293, "num_steps_sampled": 8254897, "sample_time_ms": 21274.02, "load_time_ms": 14.952, "update_time_ms": 9.759}, "timesteps_since_restore": 8254897, "time_total_s": 6407.34601020813, "timestamp": 1558609538, "time_since_restore": 6407.34601020813, "policy_reward_mean": {}, "training_iteration": 190, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bfd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2748>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2320>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8834, "timesteps_total": 8254897, "episode_reward_mean": -461.8392534371103, "episodes_this_iter": 46, "date": "2019-05-23_11-05-38", "time_this_iter_s": 30.84181237220764, "num_metric_batches_dropped": 0, "episode_reward_min": -770.6063244822485}
{"iterations_since_restore": 191, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -236.89339496269181, "timesteps_this_iter": 43506, "custom_metrics": {"cost1_max": 229.36135920295078, "cost1_min": 149.55513119892464, "system_level_velocity_mean": 16.19929580803733, "cost2_mean": -90.93757782114177, "cost2_max": -72.51365402456744, "outflow_rate_max": 1436.8204980709465, "cost1_mean": 192.41502805609963, "system_level_velocity_min": 12.533396662054342, "system_level_velocity_max": 19.427365579714007, "outflow_rate_min": 1032.726406207429, "cost2_min": -109.39183343518314, "outflow_rate_mean": 1250.435446460468}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015787415206432343, "policy_loss": -0.0072479150258004665, "total_loss": 19.48801040649414, "vf_explained_var": 0.8970806002616882, "cur_lr": 0.0005000000237487257, "entropy": 0.8186609745025635, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 19.49076271057129}, "num_steps_trained": 8298403, "grad_time_ms": 11254.658, "num_steps_sampled": 8298403, "sample_time_ms": 21331.228, "load_time_ms": 15.657, "update_time_ms": 9.539}, "timesteps_since_restore": 8298403, "time_total_s": 6439.407798051834, "timestamp": 1558609570, "time_since_restore": 6439.407798051834, "policy_reward_mean": {}, "training_iteration": 191, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565080>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565208>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565cf8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8878, "timesteps_total": 8298403, "episode_reward_mean": -473.0684870755201, "episodes_this_iter": 44, "date": "2019-05-23_11-06-10", "time_this_iter_s": 32.061787843704224, "num_metric_batches_dropped": 0, "episode_reward_min": -770.6063244822485}
{"iterations_since_restore": 192, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -235.43178470912375, "timesteps_this_iter": 43713, "custom_metrics": {"cost1_max": 229.3194079986747, "cost1_min": 149.59272942036216, "system_level_velocity_mean": 15.623202667794732, "cost2_mean": -93.34031699498765, "cost2_max": -78.23170351616182, "outflow_rate_max": 1441.5315869986546, "cost1_mean": 185.4161615806137, "system_level_velocity_min": 12.729667339145582, "system_level_velocity_max": 19.35066021229813, "outflow_rate_min": 1051.3244775445723, "cost2_min": -108.5563797087282, "outflow_rate_mean": 1219.6737669824336}, "done": false, "pid": 51578, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015646375715732574, "policy_loss": -0.0097222113981843, "total_loss": 16.351945877075195, "vf_explained_var": 0.9095810055732727, "cur_lr": 0.0005000000237487257, "entropy": 0.8088944554328918, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 16.357213973999023}, "num_steps_trained": 8342116, "grad_time_ms": 11087.057, "num_steps_sampled": 8342116, "sample_time_ms": 21444.269, "load_time_ms": 15.984, "update_time_ms": 9.458}, "timesteps_since_restore": 8342116, "time_total_s": 6472.648326635361, "timestamp": 1558609604, "time_since_restore": 6472.648326635361, "policy_reward_mean": {}, "training_iteration": 192, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846bd898>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846bd7b8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a6d8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8925, "timesteps_total": 8342116, "episode_reward_mean": -514.0380850305266, "episodes_this_iter": 47, "date": "2019-05-23_11-06-44", "time_this_iter_s": 33.24052858352661, "num_metric_batches_dropped": 0, "episode_reward_min": -734.395746174324}
{"iterations_since_restore": 193, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.27131498622026, "timesteps_this_iter": 42682, "custom_metrics": {"cost1_max": 229.3194079986747, "cost1_min": 23.023359296105458, "system_level_velocity_mean": 15.626944711009767, "cost2_mean": -92.31085989038391, "cost2_max": -17.90911382638875, "outflow_rate_max": 1441.5315869986546, "cost1_mean": 181.92867868175983, "system_level_velocity_min": 12.120399199643124, "system_level_velocity_max": 19.35066021229813, "outflow_rate_min": 512.5194798574704, "cost2_min": -108.5563797087282, "outflow_rate_mean": 1202.6330656012144}, "done": false, "pid": 51578, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.01483155693858862, "policy_loss": -0.008163334801793098, "total_loss": 19.068201065063477, "vf_explained_var": 0.8955572843551636, "cur_lr": 0.0005000000237487257, "entropy": 0.8099167346954346, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.072141647338867}, "num_steps_trained": 8384798, "grad_time_ms": 11103.47, "num_steps_sampled": 8384798, "sample_time_ms": 21677.57, "load_time_ms": 15.982, "update_time_ms": 9.264}, "timesteps_since_restore": 8384798, "time_total_s": 6507.067455768585, "timestamp": 1558609638, "time_since_restore": 6507.067455768585, "policy_reward_mean": {}, "training_iteration": 193, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565940>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565588>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 8976, "timesteps_total": 8384798, "episode_reward_mean": -510.53298203784937, "episodes_this_iter": 51, "date": "2019-05-23_11-07-18", "time_this_iter_s": 34.41912913322449, "num_metric_batches_dropped": 0, "episode_reward_min": -783.4343173525167}
{"iterations_since_restore": 194, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.058185035232103, "timesteps_this_iter": 43669, "custom_metrics": {"cost1_max": 227.80053751764598, "cost1_min": 18.12342518005302, "system_level_velocity_mean": 15.652827738014766, "cost2_mean": -90.55996670804552, "cost2_max": -14.62279843979678, "outflow_rate_max": 1435.6061030667292, "cost1_mean": 180.06750318289994, "system_level_velocity_min": 12.120399199643124, "system_level_velocity_max": 19.156121586402435, "outflow_rate_min": 496.0238329292389, "cost2_min": -110.2806503313898, "outflow_rate_mean": 1192.0280954103673}, "done": false, "pid": 51578, "episode_len_mean": 317.04, "info": {"default": {"kl": 0.017605232074856758, "policy_loss": -0.00939171016216278, "total_loss": 16.491886138916016, "vf_explained_var": 0.9158275127410889, "cur_lr": 0.0005000000237487257, "entropy": 0.8091301918029785, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 16.49626350402832}, "num_steps_trained": 8428467, "grad_time_ms": 10920.607, "num_steps_sampled": 8428467, "sample_time_ms": 21867.21, "load_time_ms": 16.02, "update_time_ms": 9.274}, "timesteps_since_restore": 8428467, "time_total_s": 6540.569271326065, "timestamp": 1558609672, "time_since_restore": 6540.569271326065, "policy_reward_mean": {}, "training_iteration": 194, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566048>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566390>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f60>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9018, "timesteps_total": 8428467, "episode_reward_mean": -508.73676648377057, "episodes_this_iter": 42, "date": "2019-05-23_11-07-52", "time_this_iter_s": 33.50181555747986, "num_metric_batches_dropped": 0, "episode_reward_min": -783.4343173525167}
{"iterations_since_restore": 195, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.058185035232103, "timesteps_this_iter": 43110, "custom_metrics": {"cost1_max": 230.69660547573102, "cost1_min": 18.12342518005302, "system_level_velocity_mean": 15.761936334971145, "cost2_mean": -91.25814875652077, "cost2_max": -14.62279843979678, "outflow_rate_max": 1435.0752821832552, "cost1_mean": 183.37856034936803, "system_level_velocity_min": 12.097718913290475, "system_level_velocity_max": 19.632349046293665, "outflow_rate_min": 496.0238329292389, "cost2_min": -118.5275453672994, "outflow_rate_mean": 1208.9293586814085}, "done": false, "pid": 51578, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.016233043745160103, "policy_loss": -0.008687563240528107, "total_loss": 19.737632751464844, "vf_explained_var": 0.893704354763031, "cur_lr": 0.0005000000237487257, "entropy": 0.7975505590438843, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 19.741697311401367}, "num_steps_trained": 8471577, "grad_time_ms": 10883.623, "num_steps_sampled": 8471577, "sample_time_ms": 21936.727, "load_time_ms": 16.234, "update_time_ms": 9.178}, "timesteps_since_restore": 8471577, "time_total_s": 6573.536874294281, "timestamp": 1558609705, "time_since_restore": 6573.536874294281, "policy_reward_mean": {}, "training_iteration": 195, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f26d8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2e48>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2518>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9066, "timesteps_total": 8471577, "episode_reward_mean": -505.30233145254635, "episodes_this_iter": 48, "date": "2019-05-23_11-08-25", "time_this_iter_s": 32.96760296821594, "num_metric_batches_dropped": 0, "episode_reward_min": -775.3411087471728}
{"iterations_since_restore": 196, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -93.86853577264662, "timesteps_this_iter": 42652, "custom_metrics": {"cost1_max": 230.69660547573102, "cost1_min": 87.68664910147793, "system_level_velocity_mean": 15.884853601064872, "cost2_mean": -92.38007894981429, "cost2_max": -51.19278838482302, "outflow_rate_max": 1436.3072794446932, "cost1_mean": 187.03668651006336, "system_level_velocity_min": 12.097718913290475, "system_level_velocity_max": 19.632349046293665, "outflow_rate_min": 814.6919993513411, "cost2_min": -118.5275453672994, "outflow_rate_mean": 1227.007273578648}, "done": false, "pid": 51578, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016950350254774094, "policy_loss": -0.006907162256538868, "total_loss": 21.248456954956055, "vf_explained_var": 0.8852956891059875, "cur_lr": 0.0005000000237487257, "entropy": 0.7941456437110901, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 21.25053596496582}, "num_steps_trained": 8514229, "grad_time_ms": 10867.473, "num_steps_sampled": 8514229, "sample_time_ms": 22051.443, "load_time_ms": 16.355, "update_time_ms": 9.18}, "timesteps_since_restore": 8514229, "time_total_s": 6606.662714719772, "timestamp": 1558609738, "time_since_restore": 6606.662714719772, "policy_reward_mean": {}, "training_iteration": 196, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845663c8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845661d0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566780>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9117, "timesteps_total": 8514229, "episode_reward_mean": -497.29718699639466, "episodes_this_iter": 51, "date": "2019-05-23_11-08-58", "time_this_iter_s": 33.12584042549133, "num_metric_batches_dropped": 0, "episode_reward_min": -775.3411087471728}
{"iterations_since_restore": 197, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -152.93951755976607, "timesteps_this_iter": 42794, "custom_metrics": {"cost1_max": 229.0596695391414, "cost1_min": 144.70499624715677, "system_level_velocity_mean": 15.773219586807716, "cost2_mean": -92.53921493434007, "cost2_max": -69.4638286888972, "outflow_rate_max": 1436.3072794446932, "cost1_mean": 186.30855668057436, "system_level_velocity_min": 12.818170553373488, "system_level_velocity_max": 19.323519283661366, "outflow_rate_min": 1052.7462063109758, "cost2_min": -113.46886691015958, "outflow_rate_mean": 1223.470827714123}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.01494569517672062, "policy_loss": -0.0072133527137339115, "total_loss": 17.715150833129883, "vf_explained_var": 0.9066908359527588, "cur_lr": 0.0005000000237487257, "entropy": 0.8000025749206543, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 17.718107223510742}, "num_steps_trained": 8557023, "grad_time_ms": 10636.246, "num_steps_sampled": 8557023, "sample_time_ms": 21939.179, "load_time_ms": 15.966, "update_time_ms": 9.192}, "timesteps_since_restore": 8557023, "time_total_s": 6637.788571357727, "timestamp": 1558609769, "time_since_restore": 6637.788571357727, "policy_reward_mean": {}, "training_iteration": 197, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557908>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557da0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ba8>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9160, "timesteps_total": 8557023, "episode_reward_mean": -504.9747194931736, "episodes_this_iter": 43, "date": "2019-05-23_11-09-29", "time_this_iter_s": 31.125856637954712, "num_metric_batches_dropped": 0, "episode_reward_min": -755.327509762699}
{"iterations_since_restore": 198, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -152.93951755976607, "timesteps_this_iter": 42453, "custom_metrics": {"cost1_max": 229.64412203782578, "cost1_min": 144.70499624715677, "system_level_velocity_mean": 15.866667957433368, "cost2_mean": -91.39254941968211, "cost2_max": -69.4638286888972, "outflow_rate_max": 1432.7235627604248, "cost1_mean": 187.40246380052352, "system_level_velocity_min": 12.421330527389829, "system_level_velocity_max": 19.42187949678007, "outflow_rate_min": 1057.9093998347971, "cost2_min": -113.46886691015958, "outflow_rate_mean": 1228.0396129419896}, "done": false, "pid": 51578, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.016480686143040657, "policy_loss": -0.008981531485915184, "total_loss": 21.047945022583008, "vf_explained_var": 0.887431263923645, "cur_lr": 0.0005000000237487257, "entropy": 0.795972466468811, "cur_kl_coeff": 0.28476566076278687, "vf_loss": 21.052236557006836}, "num_steps_trained": 8599476, "grad_time_ms": 10503.793, "num_steps_sampled": 8599476, "sample_time_ms": 22007.281, "load_time_ms": 15.83, "update_time_ms": 9.274}, "timesteps_since_restore": 8599476, "time_total_s": 6671.0074198246, "timestamp": 1558609802, "time_since_restore": 6671.0074198246, "policy_reward_mean": {}, "training_iteration": 198, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2e48>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2780>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2c50>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9205, "timesteps_total": 8599476, "episode_reward_mean": -498.09699074024377, "episodes_this_iter": 45, "date": "2019-05-23_11-10-02", "time_this_iter_s": 33.21884846687317, "num_metric_batches_dropped": 0, "episode_reward_min": -757.3433046760124}
{"iterations_since_restore": 199, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -26.58293247443231, "timesteps_this_iter": 42539, "custom_metrics": {"cost1_max": 229.64412203782578, "cost1_min": 23.369457428408428, "system_level_velocity_mean": 16.020262832018492, "cost2_mean": -92.0303668563051, "cost2_max": -18.057758615871336, "outflow_rate_max": 1441.7162121212118, "cost1_mean": 187.45368294603617, "system_level_velocity_min": 12.421330527389829, "system_level_velocity_max": 19.42187949678007, "outflow_rate_min": 515.1876692262412, "cost2_min": -116.13488384561181, "outflow_rate_mean": 1226.4767309025688}, "done": false, "pid": 51578, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.016881223767995834, "policy_loss": -0.006994877941906452, "total_loss": 23.184852600097656, "vf_explained_var": 0.8700193762779236, "cur_lr": 0.0005000000237487257, "entropy": 0.7813588380813599, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 23.187040328979492}, "num_steps_trained": 8642015, "grad_time_ms": 10528.327, "num_steps_sampled": 8642015, "sample_time_ms": 22058.251, "load_time_ms": 15.102, "update_time_ms": 9.444}, "timesteps_since_restore": 8642015, "time_total_s": 6703.50074672699, "timestamp": 1558609835, "time_since_restore": 6703.50074672699, "policy_reward_mean": {}, "training_iteration": 199, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566390>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566b38>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849617f0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9256, "timesteps_total": 8642015, "episode_reward_mean": -483.81955806745714, "episodes_this_iter": 51, "date": "2019-05-23_11-10-35", "time_this_iter_s": 32.493326902389526, "num_metric_batches_dropped": 0, "episode_reward_min": -784.6961468414636}
{"iterations_since_restore": 200, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -19.885285008118398, "timesteps_this_iter": 42594, "custom_metrics": {"cost1_max": 229.17297537301798, "cost1_min": 18.193855839827755, "system_level_velocity_mean": 15.974042701391136, "cost2_mean": -90.64753913648, "cost2_max": -14.68214958544151, "outflow_rate_max": 1441.7162121212118, "cost1_mean": 182.74378955134083, "system_level_velocity_min": 12.426851549529795, "system_level_velocity_max": 19.445561491344744, "outflow_rate_min": 494.27405165189856, "cost2_min": -116.13488384561181, "outflow_rate_mean": 1206.7526974388177}, "done": true, "pid": 51578, "episode_len_mean": 315.06, "info": {"default": {"kl": 0.016196154057979584, "policy_loss": -0.008678743615746498, "total_loss": 19.668212890625, "vf_explained_var": 0.892700731754303, "cur_lr": 0.0005000000237487257, "entropy": 0.8118177652359009, "cur_kl_coeff": 0.2847656309604645, "vf_loss": 19.672279357910156}, "num_steps_trained": 8684609, "grad_time_ms": 10650.424, "num_steps_sampled": 8684609, "sample_time_ms": 22063.033, "load_time_ms": 15.458, "update_time_ms": 9.366}, "timesteps_since_restore": 8684609, "time_total_s": 6735.618413448334, "timestamp": 1558609867, "time_since_restore": 6735.618413448334, "policy_reward_mean": {}, "training_iteration": 200, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "use_gae": true, "vf_share_layers": false, "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2e10>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f22b0>"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 3", "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "kl_coeff": 0.2, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "zero_mean": true, "use_lstm": false, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "dim": 84, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "experiment_id": "4c0ffe08cd114610852551a5f1395742", "episodes_total": 9303, "timesteps_total": 8684609, "episode_reward_mean": -482.87888791173253, "episodes_this_iter": 47, "date": "2019-05-23_11-11-07", "time_this_iter_s": 32.117666721343994, "num_metric_batches_dropped": 0, "episode_reward_min": -784.6961468414636}
