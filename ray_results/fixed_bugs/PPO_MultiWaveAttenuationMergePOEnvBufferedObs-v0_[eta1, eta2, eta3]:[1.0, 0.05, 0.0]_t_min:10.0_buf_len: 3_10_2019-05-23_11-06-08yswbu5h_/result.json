{"iterations_since_restore": 1, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -526.0835085125486, "timesteps_this_iter": 42615, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 139.4843596702109, "cost1_mean": 122.04539546499855, "system_level_velocity_mean": 10.107457695592172, "cost2_mean": -50.44687344917928, "cost2_max": -31.15576258485875, "outflow_rate_max": 958.5321766413051, "cost1_min": 101.55666092334062, "system_level_velocity_min": 8.529242809466542, "system_level_velocity_max": 11.587865497337228, "outflow_rate_min": 412.14041811846676, "cost2_min": -72.80758637559919, "outflow_rate_mean": 751.0654029797901}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.0030608614906668663, "total_loss": 36.398155212402344, "vf_explained_var": -3.069100557695492e-06, "cur_lr": 0.0005000000237487257, "entropy": 1.4180885553359985, "cur_kl_coeff": 0.20000003278255463, "vf_loss": 36.39870834350586, "policy_loss": -0.0011618920834735036}, "num_steps_trained": 42615, "update_time_ms": 896.102, "sample_time_ms": 18661.655, "load_time_ms": 70.76, "num_steps_sampled": 42615, "grad_time_ms": 12839.596}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 32.60274338722229, "timestamp": 1558609612, "time_since_restore": 32.60274338722229, "policy_reward_mean": {}, "training_iteration": 1, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845496d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530518>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 42615, "episodes_total": 40, "timesteps_total": 42615, "episode_reward_mean": -723.6248097938076, "episodes_this_iter": 40, "date": "2019-05-23_11-06-52", "time_this_iter_s": 32.60274338722229, "num_metric_batches_dropped": 0, "episode_reward_min": -1081.9190795207599}
{"iterations_since_restore": 2, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -526.0835085125486, "timesteps_this_iter": 42649, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 148.08841189460185, "cost1_mean": 124.4497977705712, "system_level_velocity_mean": 10.334027056513282, "cost2_mean": -50.803583434485546, "cost2_max": -30.225978604634037, "outflow_rate_max": 958.5321766413051, "cost1_min": 101.55666092334062, "system_level_velocity_min": 8.529242809466542, "system_level_velocity_max": 11.95056757117365, "outflow_rate_min": 412.14041811846676, "cost2_min": -83.45303271143082, "outflow_rate_mean": 765.2265904179782}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.002497102366760373, "total_loss": 62.96670913696289, "vf_explained_var": 6.441239293053513e-06, "cur_lr": 0.0005000000237487257, "entropy": 1.3967427015304565, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 62.967124938964844, "policy_loss": -0.0006657404010184109}, "num_steps_trained": 85264, "update_time_ms": 453.84, "sample_time_ms": 19335.852, "load_time_ms": 43.192, "num_steps_sampled": 85264, "grad_time_ms": 12537.198}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 64.98975682258606, "timestamp": 1558609645, "time_since_restore": 64.98975682258606, "policy_reward_mean": {}, "training_iteration": 2, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfa20>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 85264, "episodes_total": 80, "timesteps_total": 85264, "episode_reward_mean": -711.6328261461053, "episodes_this_iter": 40, "date": "2019-05-23_11-07-25", "time_this_iter_s": 32.38701343536377, "num_metric_batches_dropped": 0, "episode_reward_min": -1081.9190795207599}
{"iterations_since_restore": 3, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -509.7032189995007, "timesteps_this_iter": 42774, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 158.21011009048465, "cost1_mean": 129.17755622277969, "system_level_velocity_mean": 10.717713114029394, "cost2_mean": -53.072301735000366, "cost2_max": -30.225978604634037, "outflow_rate_max": 1067.811142545114, "cost1_min": 100.4519506676115, "system_level_velocity_min": 8.441007446373067, "system_level_velocity_max": 12.935809486216646, "outflow_rate_min": 412.14041811846676, "cost2_min": -86.10431221032951, "outflow_rate_mean": 801.4750409214321}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.008273085579276085, "total_loss": 86.86280822753906, "vf_explained_var": 0.013950399123132229, "cur_lr": 0.0005000000237487257, "entropy": 1.3757437467575073, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 86.8641128540039, "policy_loss": -0.0017147623002529144}, "num_steps_trained": 128038, "update_time_ms": 305.769, "sample_time_ms": 19302.509, "load_time_ms": 33.659, "num_steps_sampled": 128038, "grad_time_ms": 11873.185}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 94.88891315460205, "timestamp": 1558609675, "time_since_restore": 94.88891315460205, "policy_reward_mean": {}, "training_iteration": 3, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab70>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 128038, "episodes_total": 120, "timesteps_total": 128038, "episode_reward_mean": -694.9251875714049, "episodes_this_iter": 40, "date": "2019-05-23_11-07-55", "time_this_iter_s": 29.89915633201599, "num_metric_batches_dropped": 0, "episode_reward_min": -1081.9190795207599}
{"iterations_since_restore": 4, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.04194386131786, "timesteps_this_iter": 40208, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 175.53492269211824, "cost1_mean": 140.01825661355468, "system_level_velocity_mean": 11.794545208522333, "cost2_mean": -57.46085806385158, "cost2_max": -22.762062314985243, "outflow_rate_max": 1138.1849173211542, "cost1_min": 22.25411966607293, "system_level_velocity_min": 8.441007446373067, "system_level_velocity_max": 17.806325895835688, "outflow_rate_min": 460.7989278777953, "cost2_min": -89.3576394259398, "outflow_rate_mean": 900.1184078834452}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.008669617585837841, "total_loss": 116.08820343017578, "vf_explained_var": 0.05369161069393158, "cur_lr": 0.0005000000237487257, "entropy": 1.387754201889038, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 116.08919525146484, "policy_loss": -0.0014435934135690331}, "num_steps_trained": 168246, "update_time_ms": 232.088, "sample_time_ms": 19892.597, "load_time_ms": 30.081, "num_steps_sampled": 168246, "grad_time_ms": 11443.194}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 126.84422278404236, "timestamp": 1558609707, "time_since_restore": 126.84422278404236, "policy_reward_mean": {}, "training_iteration": 4, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845664a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f60>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 168246, "episodes_total": 181, "timesteps_total": 168246, "episode_reward_mean": -620.9607765144698, "episodes_this_iter": 61, "date": "2019-05-23_11-08-27", "time_this_iter_s": 31.955309629440308, "num_metric_batches_dropped": 0, "episode_reward_min": -888.5342109364867}
{"iterations_since_restore": 5, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.04194386131786, "timesteps_this_iter": 38223, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 177.15819791121686, "cost1_mean": 150.36617549733865, "system_level_velocity_mean": 12.708364928356396, "cost2_mean": -57.860493207867414, "cost2_max": -22.762062314985243, "outflow_rate_max": 1138.1849173211542, "cost1_min": 22.25411966607293, "system_level_velocity_min": 9.582456156208536, "system_level_velocity_max": 17.806325895835688, "outflow_rate_min": 460.7989278777953, "cost2_min": -89.3576394259398, "outflow_rate_mean": 976.2617009009628}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.009421493858098984, "total_loss": 36.712249755859375, "vf_explained_var": 0.6659591794013977, "cur_lr": 0.0005000000237487257, "entropy": 1.356528878211975, "cur_kl_coeff": 0.05000000447034836, "vf_loss": 36.714683532714844, "policy_loss": -0.002904738299548626}, "num_steps_trained": 206469, "update_time_ms": 187.652, "sample_time_ms": 19645.435, "load_time_ms": 26.752, "num_steps_sampled": 206469, "grad_time_ms": 10931.278}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 154.47875237464905, "timestamp": 1558609734, "time_since_restore": 154.47875237464905, "policy_reward_mean": {}, "training_iteration": 5, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ad30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac50>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 206469, "episodes_total": 221, "timesteps_total": 206469, "episode_reward_mean": -555.589884472313, "episodes_this_iter": 40, "date": "2019-05-23_11-08-54", "time_this_iter_s": 27.63452959060669, "num_metric_batches_dropped": 0, "episode_reward_min": -805.5636669073514}
{"iterations_since_restore": 6, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -376.0239203278141, "timesteps_this_iter": 39054, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 195.5337849781585, "cost1_mean": 160.7508048160823, "system_level_velocity_mean": 13.437074152621033, "cost2_mean": -60.69905205187167, "cost2_max": -40.449275521473936, "outflow_rate_max": 1212.9941276346608, "cost1_min": 124.58091593048283, "system_level_velocity_min": 10.416269225714672, "system_level_velocity_max": 16.341060286703325, "outflow_rate_min": 739.5917704918035, "cost2_min": -97.43482240655871, "outflow_rate_mean": 1038.6616780385482}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.009978525340557098, "total_loss": 38.965309143066406, "vf_explained_var": 0.7637402415275574, "cur_lr": 0.0005000000237487257, "entropy": 1.3420554399490356, "cur_kl_coeff": 0.05000000447034836, "vf_loss": 38.96760940551758, "policy_loss": -0.002798669971525669}, "num_steps_trained": 245523, "update_time_ms": 157.705, "sample_time_ms": 19606.391, "load_time_ms": 25.303, "num_steps_sampled": 245523, "grad_time_ms": 10791.245}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 184.08110308647156, "timestamp": 1558609764, "time_since_restore": 184.08110308647156, "policy_reward_mean": {}, "training_iteration": 6, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f27f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 245523, "episodes_total": 261, "timesteps_total": 245523, "episode_reward_mean": -513.8775179159395, "episodes_this_iter": 40, "date": "2019-05-23_11-09-24", "time_this_iter_s": 29.60235071182251, "num_metric_batches_dropped": 0, "episode_reward_min": -805.1593360589364}
{"iterations_since_restore": 7, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -337.06877310746034, "timesteps_this_iter": 39560, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 203.6441622070306, "cost1_mean": 176.06212424724407, "system_level_velocity_mean": 14.664433389581886, "cost2_mean": -74.55558978906738, "cost2_max": -41.118196146013254, "outflow_rate_max": 1308.5866141233146, "cost1_min": 124.58091593048283, "system_level_velocity_min": 10.416269225714672, "system_level_velocity_max": 17.000917162821064, "outflow_rate_min": 769.9907166517693, "cost2_min": -115.8190571427138, "outflow_rate_mean": 1138.68184449561}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.010840184986591339, "total_loss": 40.63877487182617, "vf_explained_var": 0.7671018838882446, "cur_lr": 0.0005000000237487257, "entropy": 1.3287172317504883, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 40.64087677001953, "policy_loss": -0.002645509084686637}, "num_steps_trained": 285083, "update_time_ms": 136.139, "sample_time_ms": 19808.859, "load_time_ms": 23.905, "num_steps_sampled": 285083, "grad_time_ms": 10621.064}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 214.79861283302307, "timestamp": 1558609795, "time_since_restore": 214.79861283302307, "policy_reward_mean": {}, "training_iteration": 7, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566518>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 285083, "episodes_total": 321, "timesteps_total": 285083, "episode_reward_mean": -461.2891593215949, "episodes_this_iter": 60, "date": "2019-05-23_11-09-55", "time_this_iter_s": 30.717509746551514, "num_metric_batches_dropped": 0, "episode_reward_min": -805.1593360589364}
{"iterations_since_restore": 8, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.779188197378726, "timesteps_this_iter": 41962, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 213.2436602986999, "cost1_mean": 180.1022338297496, "system_level_velocity_mean": 15.083143004879018, "cost2_mean": -89.88529204131164, "cost2_max": -20.006788414389547, "outflow_rate_max": 1399.600771541411, "cost1_min": 17.891665461760926, "system_level_velocity_min": 11.802039440082458, "system_level_velocity_max": 17.827408913593132, "outflow_rate_min": 457.848998964932, "cost2_min": -126.88828019324487, "outflow_rate_mean": 1173.3875544735395}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.008299906738102436, "total_loss": 33.904117584228516, "vf_explained_var": 0.7934339046478271, "cur_lr": 0.0005000000237487257, "entropy": 1.3197370767593384, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 33.905662536621094, "policy_loss": -0.001960726222023368}, "num_steps_trained": 327045, "update_time_ms": 119.996, "sample_time_ms": 19720.205, "load_time_ms": 23.174, "num_steps_sampled": 327045, "grad_time_ms": 10708.067}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 245.31424283981323, "timestamp": 1558609825, "time_since_restore": 245.31424283981323, "policy_reward_mean": {}, "training_iteration": 8, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfd30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df9b0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 327045, "episodes_total": 362, "timesteps_total": 327045, "episode_reward_mean": -464.4957113800159, "episodes_this_iter": 41, "date": "2019-05-23_11-10-25", "time_this_iter_s": 30.51563000679016, "num_metric_batches_dropped": 0, "episode_reward_min": -762.4172087861551}
{"iterations_since_restore": 9, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.779188197378726, "timesteps_this_iter": 42860, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.21649598794127, "cost1_mean": 182.48189332779395, "system_level_velocity_mean": 15.268928572048926, "cost2_mean": -100.27801901250209, "cost2_max": -20.006788414389547, "outflow_rate_max": 1404.3900697865352, "cost1_min": 17.891665461760926, "system_level_velocity_min": 11.802039440082458, "system_level_velocity_max": 18.25203542339532, "outflow_rate_min": 457.848998964932, "cost2_min": -126.88828019324487, "outflow_rate_mean": 1191.4164805792043}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.008996305987238884, "total_loss": 33.2893180847168, "vf_explained_var": 0.796812117099762, "cur_lr": 0.0005000000237487257, "entropy": 1.3118717670440674, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 33.29161071777344, "policy_loss": -0.0027378348167985678}, "num_steps_trained": 369905, "update_time_ms": 107.437, "sample_time_ms": 19641.043, "load_time_ms": 22.609, "num_steps_sampled": 369905, "grad_time_ms": 10856.688}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 276.48468828201294, "timestamp": 1558609856, "time_since_restore": 276.48468828201294, "policy_reward_mean": {}, "training_iteration": 9, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845575f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557710>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 369905, "episodes_total": 402, "timesteps_total": 369905, "episode_reward_mean": -477.5313972044164, "episodes_this_iter": 40, "date": "2019-05-23_11-10-56", "time_this_iter_s": 31.170445442199707, "num_metric_batches_dropped": 0, "episode_reward_min": -769.4133598001571}
{"iterations_since_restore": 10, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -282.33121034743374, "timesteps_this_iter": 47351, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.75030965273083, "cost1_mean": 178.59295916618808, "system_level_velocity_mean": 14.869436554508914, "cost2_mean": -111.39737987502103, "cost2_max": -90.69415196437257, "outflow_rate_max": 1429.7007096038758, "cost1_min": 140.63260291958574, "system_level_velocity_min": 11.566907279900981, "system_level_velocity_max": 18.58874773746383, "outflow_rate_min": 957.7654249652855, "cost2_min": -136.4572878462825, "outflow_rate_mean": 1177.543471260111}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.00796619150787592, "total_loss": 32.572425842285156, "vf_explained_var": 0.7985605001449585, "cur_lr": 0.0005000000237487257, "entropy": 1.316353440284729, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 32.57451629638672, "policy_loss": -0.002491132589057088}, "num_steps_trained": 417256, "update_time_ms": 97.432, "sample_time_ms": 20165.673, "load_time_ms": 22.702, "num_steps_sampled": 417256, "grad_time_ms": 11940.339}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 323.38209223747253, "timestamp": 1558609903, "time_since_restore": 323.38209223747253, "policy_reward_mean": {}, "training_iteration": 10, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845665f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566be0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 417256, "episodes_total": 460, "timesteps_total": 417256, "episode_reward_mean": -554.6641706477698, "episodes_this_iter": 58, "date": "2019-05-23_11-11-43", "time_this_iter_s": 46.897403955459595, "num_metric_batches_dropped": 0, "episode_reward_min": -807.784033381545}
{"iterations_since_restore": 11, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -278.9420389567936, "timesteps_this_iter": 45169, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.8329480565003, "cost1_mean": 174.6071515633751, "system_level_velocity_mean": 14.56732444128188, "cost2_mean": -116.00651996602991, "cost2_max": -101.14656456842282, "outflow_rate_max": 1436.5049638219987, "cost1_min": 128.2772671996532, "system_level_velocity_min": 10.73376985563048, "system_level_velocity_max": 18.58874773746383, "outflow_rate_min": 932.4642327666086, "cost2_min": -136.4572878462825, "outflow_rate_mean": 1169.2160515376138}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.007029404863715172, "total_loss": 29.439130783081055, "vf_explained_var": 0.8308324217796326, "cur_lr": 0.0005000000237487257, "entropy": 1.289892554283142, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 29.44061279296875, "policy_loss": -0.0018309002043679357}, "num_steps_trained": 462425, "update_time_ms": 11.908, "sample_time_ms": 21395.392, "load_time_ms": 17.686, "num_steps_sampled": 462425, "grad_time_ms": 12079.518}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 368.73351216316223, "timestamp": 1558609949, "time_since_restore": 368.73351216316223, "policy_reward_mean": {}, "training_iteration": 11, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565a90>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 462425, "episodes_total": 502, "timesteps_total": 462425, "episode_reward_mean": -593.2246620532147, "episodes_this_iter": 42, "date": "2019-05-23_11-12-29", "time_this_iter_s": 45.3514199256897, "num_metric_batches_dropped": 0, "episode_reward_min": -898.1999592488083}
{"iterations_since_restore": 12, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.35178599497731, "timesteps_this_iter": 45531, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.8329480565003, "cost1_mean": 174.47309202457845, "system_level_velocity_mean": 14.731506884134852, "cost2_mean": -117.15040706366355, "cost2_max": -23.59070088468802, "outflow_rate_max": 1436.5049638219987, "cost1_min": 23.093556876003742, "system_level_velocity_min": 10.73376985563048, "system_level_velocity_max": 18.58874773746383, "outflow_rate_min": 485.4734778267821, "cost2_min": -136.5922311006287, "outflow_rate_mean": 1175.7105790659873}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.007557196542620659, "total_loss": 26.059799194335938, "vf_explained_var": 0.8699713945388794, "cur_lr": 0.0005000000237487257, "entropy": 1.2855849266052246, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 26.06083869934082, "policy_loss": -0.0014207522617653012}, "num_steps_trained": 507956, "update_time_ms": 11.543, "sample_time_ms": 21314.597, "load_time_ms": 18.062, "num_steps_sampled": 507956, "grad_time_ms": 12174.023}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 401.23755717277527, "timestamp": 1558609981, "time_since_restore": 401.23755717277527, "policy_reward_mean": {}, "training_iteration": 12, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f25f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f20b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f24a8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 507956, "episodes_total": 543, "timesteps_total": 507956, "episode_reward_mean": -578.941568042027, "episodes_this_iter": 41, "date": "2019-05-23_11-13-01", "time_this_iter_s": 32.50404500961304, "num_metric_batches_dropped": 0, "episode_reward_min": -898.1999592488083}
{"iterations_since_restore": 13, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.931551662361088, "timesteps_this_iter": 45907, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.33031477017238, "cost1_mean": 176.0984001676643, "system_level_velocity_mean": 15.16356028627978, "cost2_mean": -120.37628488488217, "cost2_max": -22.899750243167404, "outflow_rate_max": 1442.5918408455523, "cost1_min": 23.093556876003742, "system_level_velocity_min": 11.726503161708719, "system_level_velocity_max": 18.734410171691827, "outflow_rate_min": 485.4734778267821, "cost2_min": -154.63836712305755, "outflow_rate_mean": 1189.2530227086206}, "episode_len_mean": 317.12, "info": {"default": {"kl": 0.008812982589006424, "total_loss": 34.16722106933594, "vf_explained_var": 0.8294454216957092, "cur_lr": 0.0005000000237487257, "entropy": 1.2598401308059692, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 34.169532775878906, "policy_loss": -0.0027595392893999815}, "num_steps_trained": 553863, "update_time_ms": 11.551, "sample_time_ms": 21477.461, "load_time_ms": 18.586, "num_steps_sampled": 553863, "grad_time_ms": 12456.623}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 435.62243461608887, "timestamp": 1558610016, "time_since_restore": 435.62243461608887, "policy_reward_mean": {}, "training_iteration": 13, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566240>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 553863, "episodes_total": 600, "timesteps_total": 553863, "episode_reward_mean": -546.8075813251317, "episodes_this_iter": 57, "date": "2019-05-23_11-13-36", "time_this_iter_s": 34.3848774433136, "num_metric_batches_dropped": 0, "episode_reward_min": -820.669405811146}
{"iterations_since_restore": 14, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.931551662361088, "timesteps_this_iter": 43065, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.33031477017238, "cost1_mean": 179.88571487048574, "system_level_velocity_mean": 15.464284546781766, "cost2_mean": -120.64851954861581, "cost2_max": -22.899750243167404, "outflow_rate_max": 1442.5918408455523, "cost1_min": 23.127259053772818, "system_level_velocity_min": 12.230502054694878, "system_level_velocity_max": 18.734410171691827, "outflow_rate_min": 485.4734778267822, "cost2_min": -154.63836712305755, "outflow_rate_mean": 1211.0264173990947}, "episode_len_mean": 317.12, "info": {"default": {"kl": 0.009301610291004181, "total_loss": 31.787004470825195, "vf_explained_var": 0.8351879119873047, "cur_lr": 0.0005000000237487257, "entropy": 1.2525814771652222, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 31.789737701416016, "policy_loss": -0.003193911397829652}, "num_steps_trained": 596928, "update_time_ms": 11.43, "sample_time_ms": 21285.752, "load_time_ms": 18.478, "num_steps_sampled": 596928, "grad_time_ms": 12653.756}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 467.6051912307739, "timestamp": 1558610048, "time_since_restore": 467.6051912307739, "policy_reward_mean": {}, "training_iteration": 14, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845419e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a748>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 596928, "episodes_total": 645, "timesteps_total": 596928, "episode_reward_mean": -522.2851737065412, "episodes_this_iter": 45, "date": "2019-05-23_11-14-08", "time_this_iter_s": 31.98275661468506, "num_metric_batches_dropped": 0, "episode_reward_min": -784.2450582826239}
{"iterations_since_restore": 15, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.185539238020322, "timesteps_this_iter": 44739, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 222.26650047747785, "cost1_mean": 180.49246188904024, "system_level_velocity_mean": 15.344565513555672, "cost2_mean": -121.6428276344356, "cost2_max": -23.44703280716653, "outflow_rate_max": 1440.7250593844087, "cost1_min": 23.15500824558707, "system_level_velocity_min": 12.11567237584785, "system_level_velocity_max": 18.625294524331633, "outflow_rate_min": 485.4734778267822, "cost2_min": -144.91253609217785, "outflow_rate_mean": 1216.597646167927}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.007543470244854689, "total_loss": 26.358043670654297, "vf_explained_var": 0.8649675846099854, "cur_lr": 0.0005000000237487257, "entropy": 1.2449997663497925, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 26.360170364379883, "policy_loss": -0.0025000886525958776}, "num_steps_trained": 641667, "update_time_ms": 11.396, "sample_time_ms": 21453.196, "load_time_ms": 18.703, "num_steps_sampled": 641667, "grad_time_ms": 12980.443}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 500.19727301597595, "timestamp": 1558610080, "time_since_restore": 500.19727301597595, "policy_reward_mean": {}, "training_iteration": 15, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfa90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d05f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfba8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 641667, "episodes_total": 686, "timesteps_total": 641667, "episode_reward_mean": -532.0012527376203, "episodes_this_iter": 41, "date": "2019-05-23_11-14-40", "time_this_iter_s": 32.592081785202026, "num_metric_batches_dropped": 0, "episode_reward_min": -810.3988373995414}
{"iterations_since_restore": 16, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -273.55899196311174, "timesteps_this_iter": 46495, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.91281532088965, "cost1_mean": 179.97211362285196, "system_level_velocity_mean": 15.042091556563339, "cost2_mean": -124.9206038885848, "cost2_max": -105.21118082498347, "outflow_rate_max": 1445.7677726242014, "cost1_min": 143.65956248622217, "system_level_velocity_min": 12.11567237584785, "system_level_velocity_max": 18.79001399394083, "outflow_rate_min": 1049.2377477668126, "cost2_min": -148.03558327141178, "outflow_rate_mean": 1216.9885607563097}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.008961625397205353, "total_loss": 23.337299346923828, "vf_explained_var": 0.8811162710189819, "cur_lr": 0.0005000000237487257, "entropy": 1.233736276626587, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 23.34047508239746, "policy_loss": -0.0036234622821211815}, "num_steps_trained": 688162, "update_time_ms": 11.422, "sample_time_ms": 21518.696, "load_time_ms": 18.846, "num_steps_sampled": 688162, "grad_time_ms": 13230.328}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 532.9794020652771, "timestamp": 1558610113, "time_since_restore": 532.9794020652771, "policy_reward_mean": {}, "training_iteration": 16, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2cf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b630>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 688162, "episodes_total": 726, "timesteps_total": 688162, "episode_reward_mean": -563.7225195620276, "episodes_this_iter": 40, "date": "2019-05-23_11-15-13", "time_this_iter_s": 32.78212904930115, "num_metric_batches_dropped": 0, "episode_reward_min": -810.3988373995414}
{"iterations_since_restore": 17, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -272.50573597327127, "timesteps_this_iter": 44437, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 224.00093464828407, "cost1_mean": 180.90912479518894, "system_level_velocity_mean": 15.123435042726761, "cost2_mean": -127.34357126115712, "cost2_max": -109.74185524632243, "outflow_rate_max": 1448.2785870566631, "cost1_min": 140.71993458965616, "system_level_velocity_min": 11.8770097841296, "system_level_velocity_max": 18.80052446919502, "outflow_rate_min": 1024.8134765695133, "cost2_min": -152.61015561812187, "outflow_rate_mean": 1224.906193657622}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.008615145459771156, "total_loss": 29.637956619262695, "vf_explained_var": 0.8484166264533997, "cur_lr": 0.0005000000237487257, "entropy": 1.2127999067306519, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 29.640073776245117, "policy_loss": -0.0025484184734523296}, "num_steps_trained": 732599, "update_time_ms": 11.628, "sample_time_ms": 21563.026, "load_time_ms": 19.109, "num_steps_sampled": 732599, "grad_time_ms": 13479.383}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 566.6609213352203, "timestamp": 1558610147, "time_since_restore": 566.6609213352203, "policy_reward_mean": {}, "training_iteration": 17, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454ba20>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 732599, "episodes_total": 785, "timesteps_total": 732599, "episode_reward_mean": -560.5535475637423, "episodes_this_iter": 59, "date": "2019-05-23_11-15-47", "time_this_iter_s": 33.68151926994324, "num_metric_batches_dropped": 0, "episode_reward_min": -828.966162420469}
{"iterations_since_restore": 18, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -105.30525812788942, "timesteps_this_iter": 44979, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 224.00093464828407, "cost1_mean": 179.87808539226444, "system_level_velocity_mean": 15.16473245141983, "cost2_mean": -127.6737508477157, "cost2_max": -63.50494486238621, "outflow_rate_max": 1448.2785870566631, "cost1_min": 86.50740147629031, "system_level_velocity_min": 11.400229978581445, "system_level_velocity_max": 18.80052446919502, "outflow_rate_min": 821.3522658471703, "cost2_min": -152.61015561812187, "outflow_rate_mean": 1219.9595911975566}, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.008155099116265774, "total_loss": 23.343355178833008, "vf_explained_var": 0.880150318145752, "cur_lr": 0.0005000000237487257, "entropy": 1.2275174856185913, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 23.345247268676758, "policy_loss": -0.0022962037473917007}, "num_steps_trained": 777578, "update_time_ms": 11.715, "sample_time_ms": 21758.719, "load_time_ms": 18.875, "num_steps_sampled": 777578, "grad_time_ms": 13557.517}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 599.9237751960754, "timestamp": 1558610180, "time_since_restore": 599.9237751960754, "policy_reward_mean": {}, "training_iteration": 18, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa1d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa0b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faa90>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 777578, "episodes_total": 827, "timesteps_total": 777578, "episode_reward_mean": -557.760253914867, "episodes_this_iter": 42, "date": "2019-05-23_11-16-20", "time_this_iter_s": 33.2628538608551, "num_metric_batches_dropped": 0, "episode_reward_min": -828.966162420469}
{"iterations_since_restore": 19, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.981367295833962, "timesteps_this_iter": 44976, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 224.00093464828407, "cost1_mean": 178.05535587731288, "system_level_velocity_mean": 15.3571335779254, "cost2_mean": -124.84852077887918, "cost2_max": -24.103722289128555, "outflow_rate_max": 1445.9913805339986, "cost1_min": 23.13735252630604, "system_level_velocity_min": 11.400229978581445, "system_level_velocity_max": 18.904450967675857, "outflow_rate_min": 487.27071284982367, "cost2_min": -149.91591301581684, "outflow_rate_mean": 1211.6839021555277}, "episode_len_mean": 317.06, "info": {"default": {"kl": 0.010664231143891811, "total_loss": 26.015230178833008, "vf_explained_var": 0.8730048537254333, "cur_lr": 0.0005000000237487257, "entropy": 1.2219452857971191, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 26.018428802490234, "policy_loss": -0.003733574878424406}, "num_steps_trained": 822554, "update_time_ms": 11.826, "sample_time_ms": 21934.953, "load_time_ms": 18.092, "num_steps_sampled": 822554, "grad_time_ms": 13574.031}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 633.011045217514, "timestamp": 1558610213, "time_since_restore": 633.011045217514, "policy_reward_mean": {}, "training_iteration": 19, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfa90>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 822554, "episodes_total": 870, "timesteps_total": 822554, "episode_reward_mean": -538.1691044975689, "episodes_this_iter": 43, "date": "2019-05-23_11-16-53", "time_this_iter_s": 33.0872700214386, "num_metric_batches_dropped": 0, "episode_reward_min": -836.2902172303598}
{"iterations_since_restore": 20, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.981367295833962, "timesteps_this_iter": 45306, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 222.0982393530615, "cost1_mean": 179.25215236134534, "system_level_velocity_mean": 15.397720131175888, "cost2_mean": -125.58525605520525, "cost2_max": -24.103722289128555, "outflow_rate_max": 1444.28281314274, "cost1_min": 23.13735252630604, "system_level_velocity_min": 12.034469940494747, "system_level_velocity_max": 18.904450967675857, "outflow_rate_min": 487.27071284982367, "cost2_min": -149.21733235649717, "outflow_rate_mean": 1216.2784594021102}, "episode_len_mean": 317.96, "info": {"default": {"kl": 0.008953557349741459, "total_loss": 26.85813331604004, "vf_explained_var": 0.8637647032737732, "cur_lr": 0.0005000000237487257, "entropy": 1.2175997495651245, "cur_kl_coeff": 0.05000000447034836, "vf_loss": 26.859336853027344, "policy_loss": -0.0016509655397385359}, "num_steps_trained": 867860, "update_time_ms": 12.07, "sample_time_ms": 21617.692, "load_time_ms": 16.817, "num_steps_sampled": 867860, "grad_time_ms": 12784.974}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 668.649736404419, "timestamp": 1558610249, "time_since_restore": 668.649736404419, "policy_reward_mean": {}, "training_iteration": 20, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456af60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac50>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 867860, "episodes_total": 925, "timesteps_total": 867860, "episode_reward_mean": -535.854028005187, "episodes_this_iter": 55, "date": "2019-05-23_11-17-29", "time_this_iter_s": 35.63869118690491, "num_metric_batches_dropped": 0, "episode_reward_min": -836.2902172303598}
{"iterations_since_restore": 21, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.505837263884313, "timesteps_this_iter": 44348, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.01906667236568, "cost1_mean": 180.03293789691764, "system_level_velocity_mean": 15.292708583843039, "cost2_mean": -127.51788407242762, "cost2_max": -23.98664348828845, "outflow_rate_max": 1444.28281314274, "cost1_min": 24.419250437362198, "system_level_velocity_min": 12.355203768940994, "system_level_velocity_max": 18.885336675344877, "outflow_rate_min": 518.6392970701784, "cost2_min": -149.53402060676163, "outflow_rate_mean": 1216.8022946243677}, "episode_len_mean": 321.04, "info": {"default": {"kl": 0.00795578584074974, "total_loss": 23.709850311279297, "vf_explained_var": 0.8760961890220642, "cur_lr": 0.0005000000237487257, "entropy": 1.2110909223556519, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 23.71231460571289, "policy_loss": -0.002859901636838913}, "num_steps_trained": 912208, "update_time_ms": 8.986, "sample_time_ms": 20698.503, "load_time_ms": 16.446, "num_steps_sampled": 912208, "grad_time_ms": 12629.378}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 703.2127087116241, "timestamp": 1558610283, "time_since_restore": 703.2127087116241, "policy_reward_mean": {}, "training_iteration": 21, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456add8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456af98>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 912208, "episodes_total": 969, "timesteps_total": 912208, "episode_reward_mean": -549.2165696831025, "episodes_this_iter": 44, "date": "2019-05-23_11-18-03", "time_this_iter_s": 34.5629723072052, "num_metric_batches_dropped": 0, "episode_reward_min": -807.9075039171327}
{"iterations_since_restore": 22, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.505837263884313, "timesteps_this_iter": 44990, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.01906667236568, "cost1_mean": 180.96960568016232, "system_level_velocity_mean": 15.361047986929522, "cost2_mean": -126.74394618798033, "cost2_max": -23.98664348828845, "outflow_rate_max": 1448.2160622669865, "cost1_min": 24.419250437362198, "system_level_velocity_min": 12.586095570433942, "system_level_velocity_max": 18.885336675344877, "outflow_rate_min": 518.6392970701784, "cost2_min": -149.53402060676163, "outflow_rate_mean": 1220.445078140481}, "episode_len_mean": 321.05, "info": {"default": {"kl": 0.009639544412493706, "total_loss": 18.65314292907715, "vf_explained_var": 0.9052273631095886, "cur_lr": 0.0005000000237487257, "entropy": 1.1909654140472412, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 18.654882431030273, "policy_loss": -0.002221635775640607}, "num_steps_trained": 957198, "update_time_ms": 9.187, "sample_time_ms": 20825.05, "load_time_ms": 15.468, "num_steps_sampled": 957198, "grad_time_ms": 12575.291}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 736.4652576446533, "timestamp": 1558610317, "time_since_restore": 736.4652576446533, "policy_reward_mean": {}, "training_iteration": 22, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a2b0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 957198, "episodes_total": 1013, "timesteps_total": 957198, "episode_reward_mean": -544.7504644246529, "episodes_this_iter": 44, "date": "2019-05-23_11-18-37", "time_this_iter_s": 33.252548933029175, "num_metric_batches_dropped": 0, "episode_reward_min": -779.9511128600583}
{"iterations_since_restore": 23, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.917521809027523, "timesteps_this_iter": 46944, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.33935936024466, "cost1_mean": 177.72833678202852, "system_level_velocity_mean": 15.077501922852532, "cost2_mean": -129.00492586873273, "cost2_max": -24.515059456843634, "outflow_rate_max": 1448.2160622669865, "cost1_min": 24.799866706193527, "system_level_velocity_min": 12.257342690828386, "system_level_velocity_max": 18.5903245016092, "outflow_rate_min": 504.4267301378316, "cost2_min": -148.7136897927869, "outflow_rate_mean": 1204.7296820300364}, "episode_len_mean": 321.06, "info": {"default": {"kl": 0.00929440837353468, "total_loss": 19.387714385986328, "vf_explained_var": 0.8963060975074768, "cur_lr": 0.0005000000237487257, "entropy": 1.1840543746948242, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 19.389358520507812, "policy_loss": -0.002110624685883522}, "num_steps_trained": 1004142, "update_time_ms": 9.264, "sample_time_ms": 20850.221, "load_time_ms": 15.531, "num_steps_sampled": 1004142, "grad_time_ms": 12582.306}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 771.1558525562286, "timestamp": 1558610352, "time_since_restore": 771.1558525562286, "policy_reward_mean": {}, "training_iteration": 23, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566128>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1004142, "episodes_total": 1062, "timesteps_total": 1004142, "episode_reward_mean": -567.4330078368389, "episodes_this_iter": 49, "date": "2019-05-23_11-19-12", "time_this_iter_s": 34.69059491157532, "num_metric_batches_dropped": 0, "episode_reward_min": -790.4125068600546}
{"iterations_since_restore": 24, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.917521809027523, "timesteps_this_iter": 44960, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 222.07175081325857, "cost1_mean": 178.70346618071832, "system_level_velocity_mean": 15.071379358619504, "cost2_mean": -130.27754327732177, "cost2_max": -24.515059456843634, "outflow_rate_max": 1449.1702141184342, "cost1_min": 24.799866706193527, "system_level_velocity_min": 12.01362058715158, "system_level_velocity_max": 18.51079716214368, "outflow_rate_min": 504.4267301378316, "cost2_min": -151.6324850700087, "outflow_rate_mean": 1209.9543254109024}, "episode_len_mean": 322.13, "info": {"default": {"kl": 0.01157697569578886, "total_loss": 21.593711853027344, "vf_explained_var": 0.8859699964523315, "cur_lr": 0.0005000000237487257, "entropy": 1.170914649963379, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 21.596935272216797, "policy_loss": -0.0038005467504262924}, "num_steps_trained": 1049102, "update_time_ms": 9.269, "sample_time_ms": 20899.186, "load_time_ms": 15.586, "num_steps_sampled": 1049102, "grad_time_ms": 12695.471}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 804.7847380638123, "timestamp": 1558610385, "time_since_restore": 804.7847380638123, "policy_reward_mean": {}, "training_iteration": 24, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f20b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f20f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1049102, "episodes_total": 1109, "timesteps_total": 1049102, "episode_reward_mean": -568.1802318829949, "episodes_this_iter": 47, "date": "2019-05-23_11-19-45", "time_this_iter_s": 33.62888550758362, "num_metric_batches_dropped": 0, "episode_reward_min": -790.4125068600546}
{"iterations_since_restore": 25, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -108.4070232411855, "timesteps_this_iter": 44828, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 222.07175081325857, "cost1_mean": 181.09387207890597, "system_level_velocity_mean": 15.201344715948123, "cost2_mean": -129.43104955634638, "cost2_max": -62.41011422543592, "outflow_rate_max": 1449.1702141184342, "cost1_min": 85.84020606900864, "system_level_velocity_min": 12.01362058715158, "system_level_velocity_max": 18.51079716214368, "outflow_rate_min": 811.9997228452146, "cost2_min": -151.6324850700087, "outflow_rate_mean": 1227.3725676345864}, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.011330029927194118, "total_loss": 20.260177612304688, "vf_explained_var": 0.8934192061424255, "cur_lr": 0.0005000000237487257, "entropy": 1.1567872762680054, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 20.263429641723633, "policy_loss": -0.0038187711033970118}, "num_steps_trained": 1093930, "update_time_ms": 9.285, "sample_time_ms": 20911.015, "load_time_ms": 15.779, "num_steps_sampled": 1093930, "grad_time_ms": 12770.382}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 838.2590281963348, "timestamp": 1558610419, "time_since_restore": 838.2590281963348, "policy_reward_mean": {}, "training_iteration": 25, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f25c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b128>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1093930, "episodes_total": 1155, "timesteps_total": 1093930, "episode_reward_mean": -554.3091694262671, "episodes_this_iter": 46, "date": "2019-05-23_11-20-19", "time_this_iter_s": 33.47429013252258, "num_metric_batches_dropped": 0, "episode_reward_min": -780.3869631489413}
{"iterations_since_restore": 26, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -108.4070232411855, "timesteps_this_iter": 44804, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.82133626742123, "cost1_mean": 183.6485465574395, "system_level_velocity_mean": 15.444717144370152, "cost2_mean": -127.56374305430627, "cost2_max": -62.41011422543592, "outflow_rate_max": 1443.0319839000058, "cost1_min": 85.84020606900864, "system_level_velocity_min": 11.268237701086266, "system_level_velocity_max": 18.45216323190784, "outflow_rate_min": 811.9997228452146, "cost2_min": -148.69776130827972, "outflow_rate_mean": 1238.9957404813388}, "episode_len_mean": 321.92, "info": {"default": {"kl": 0.010654900223016739, "total_loss": 24.860389709472656, "vf_explained_var": 0.8595028519630432, "cur_lr": 0.0005000000237487257, "entropy": 1.1515789031982422, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 24.862564086914062, "policy_loss": -0.0027040038257837296}, "num_steps_trained": 1138734, "update_time_ms": 9.51, "sample_time_ms": 20947.209, "load_time_ms": 14.967, "num_steps_sampled": 1138734, "grad_time_ms": 12789.858}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 871.5748608112335, "timestamp": 1558610452, "time_since_restore": 871.5748608112335, "policy_reward_mean": {}, "training_iteration": 26, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a0f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ada0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a4a8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1138734, "episodes_total": 1204, "timesteps_total": 1138734, "episode_reward_mean": -531.6680643859803, "episodes_this_iter": 49, "date": "2019-05-23_11-20-52", "time_this_iter_s": 33.31583261489868, "num_metric_batches_dropped": 0, "episode_reward_min": -839.8628244387686}
{"iterations_since_restore": 27, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -102.53775940404881, "timesteps_this_iter": 45430, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.42373794134414, "cost1_mean": 181.94482885570298, "system_level_velocity_mean": 15.294378817840295, "cost2_mean": -129.00898125204066, "cost2_max": -60.32585632015397, "outflow_rate_max": 1449.401729762333, "cost1_min": 78.03109061316289, "system_level_velocity_min": 11.268237701086266, "system_level_velocity_max": 18.234890919657445, "outflow_rate_min": 730.9510133328097, "cost2_min": -147.93722267089635, "outflow_rate_mean": 1230.645227322214}, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.01006515696644783, "total_loss": 18.389326095581055, "vf_explained_var": 0.8987396359443665, "cur_lr": 0.0005000000237487257, "entropy": 1.144195795059204, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 18.391952514648438, "policy_loss": -0.0031296308152377605}, "num_steps_trained": 1184164, "update_time_ms": 9.526, "sample_time_ms": 20795.737, "load_time_ms": 15.009, "num_steps_sampled": 1184164, "grad_time_ms": 12879.05}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 904.6186289787292, "timestamp": 1558610485, "time_since_restore": 904.6186289787292, "policy_reward_mean": {}, "training_iteration": 27, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566940>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1184164, "episodes_total": 1249, "timesteps_total": 1184164, "episode_reward_mean": -541.0620162708626, "episodes_this_iter": 45, "date": "2019-05-23_11-21-25", "time_this_iter_s": 33.04376816749573, "num_metric_batches_dropped": 0, "episode_reward_min": -839.8628244387686}
{"iterations_since_restore": 28, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -102.53775940404881, "timesteps_this_iter": 45588, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.50595881518464, "cost1_mean": 179.06970995395986, "system_level_velocity_mean": 14.993956196684048, "cost2_mean": -131.11466626724905, "cost2_max": -60.32585632015397, "outflow_rate_max": 1449.401729762333, "cost1_min": 78.03109061316289, "system_level_velocity_min": 11.550903040229112, "system_level_velocity_max": 18.30636483620758, "outflow_rate_min": 730.9510133328097, "cost2_min": -147.93722267089635, "outflow_rate_mean": 1219.7866118915463}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.012858596630394459, "total_loss": 22.569015502929688, "vf_explained_var": 0.8737714290618896, "cur_lr": 0.0005000000237487257, "entropy": 1.1502903699874878, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 22.572189331054688, "policy_loss": -0.003817608579993248}, "num_steps_trained": 1229752, "update_time_ms": 9.403, "sample_time_ms": 20749.357, "load_time_ms": 15.157, "num_steps_sampled": 1229752, "grad_time_ms": 12941.016}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 938.047623872757, "timestamp": 1558610519, "time_since_restore": 938.047623872757, "policy_reward_mean": {}, "training_iteration": 28, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faa58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa3c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa898>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1229752, "episodes_total": 1292, "timesteps_total": 1229752, "episode_reward_mean": -564.0108726669113, "episodes_this_iter": 43, "date": "2019-05-23_11-21-59", "time_this_iter_s": 33.42899489402771, "num_metric_batches_dropped": 0, "episode_reward_min": -881.9873151295742}
{"iterations_since_restore": 29, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -98.59106974313619, "timesteps_this_iter": 45143, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.50595881518464, "cost1_mean": 180.12496376877584, "system_level_velocity_mean": 15.286517611633073, "cost2_mean": -127.7579884505149, "cost2_max": -57.28158213104981, "outflow_rate_max": 1444.6989468181503, "cost1_min": 78.03109061316289, "system_level_velocity_min": 11.550903040229112, "system_level_velocity_max": 18.30636483620758, "outflow_rate_min": 730.9510133328097, "cost2_min": -147.93722267089635, "outflow_rate_mean": 1226.7751163344064}, "episode_len_mean": 318.76, "info": {"default": {"kl": 0.010270210914313793, "total_loss": 21.33111572265625, "vf_explained_var": 0.880103349685669, "cur_lr": 0.0005000000237487257, "entropy": 1.1396154165267944, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 21.333473205566406, "policy_loss": -0.0028723389841616154}, "num_steps_trained": 1274895, "update_time_ms": 9.265, "sample_time_ms": 20672.928, "load_time_ms": 15.828, "num_steps_sampled": 1274895, "grad_time_ms": 12978.549}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 970.7518491744995, "timestamp": 1558610551, "time_since_restore": 970.7518491744995, "policy_reward_mean": {}, "training_iteration": 29, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846985f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698160>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1274895, "episodes_total": 1337, "timesteps_total": 1274895, "episode_reward_mean": -534.0510013922145, "episodes_this_iter": 45, "date": "2019-05-23_11-22-31", "time_this_iter_s": 32.704225301742554, "num_metric_batches_dropped": 0, "episode_reward_min": -881.9873151295742}
{"iterations_since_restore": 30, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -98.59106974313619, "timesteps_this_iter": 45707, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.34763357173478, "cost1_mean": 180.53030528338823, "system_level_velocity_mean": 15.206634449429226, "cost2_mean": -128.35404181478788, "cost2_max": -57.28158213104981, "outflow_rate_max": 1445.2514985187624, "cost1_min": 78.37111495539985, "system_level_velocity_min": 11.849810465843245, "system_level_velocity_max": 18.193578224605247, "outflow_rate_min": 758.5771328453262, "cost2_min": -148.78562887328644, "outflow_rate_mean": 1229.1370794665845}, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.011630012653768063, "total_loss": 20.59467124938965, "vf_explained_var": 0.8873584866523743, "cur_lr": 0.0005000000237487257, "entropy": 1.1353952884674072, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 20.598146438598633, "policy_loss": -0.0040566325187683105}, "num_steps_trained": 1320602, "update_time_ms": 9.028, "sample_time_ms": 20699.756, "load_time_ms": 16.431, "num_steps_sampled": 1320602, "grad_time_ms": 12879.812}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1005.6637532711029, "timestamp": 1558610586, "time_since_restore": 1005.6637532711029, "policy_reward_mean": {}, "training_iteration": 30, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698c18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698be0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1320602, "episodes_total": 1391, "timesteps_total": 1320602, "episode_reward_mean": -543.0689732670203, "episodes_this_iter": 54, "date": "2019-05-23_11-23-06", "time_this_iter_s": 34.911904096603394, "num_metric_batches_dropped": 0, "episode_reward_min": -834.301947533716}
{"iterations_since_restore": 31, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -113.4352209919856, "timesteps_this_iter": 44625, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.86800741614547, "cost1_mean": 179.80390493934348, "system_level_velocity_mean": 15.050003943145692, "cost2_mean": -129.11112258424816, "cost2_max": -64.77083909791592, "outflow_rate_max": 1446.4162668662507, "cost1_min": 83.44165922178253, "system_level_velocity_min": 11.849810465843245, "system_level_velocity_max": 18.23953585305983, "outflow_rate_min": 766.3701793329419, "cost2_min": -148.78562887328644, "outflow_rate_mean": 1223.732633431511}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.011062182486057281, "total_loss": 22.374908447265625, "vf_explained_var": 0.880486249923706, "cur_lr": 0.0005000000237487257, "entropy": 1.1157245635986328, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 22.377655029296875, "policy_loss": -0.003297090530395508}, "num_steps_trained": 1365227, "update_time_ms": 9.011, "sample_time_ms": 20563.462, "load_time_ms": 16.9, "num_steps_sampled": 1365227, "grad_time_ms": 12901.299}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1039.1157965660095, "timestamp": 1558610620, "time_since_restore": 1039.1157965660095, "policy_reward_mean": {}, "training_iteration": 31, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5f8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1365227, "episodes_total": 1435, "timesteps_total": 1365227, "episode_reward_mean": -562.2015221689232, "episodes_this_iter": 44, "date": "2019-05-23_11-23-40", "time_this_iter_s": 33.452043294906616, "num_metric_batches_dropped": 0, "episode_reward_min": -834.0508683033688}
{"iterations_since_restore": 32, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.575779685966282, "timesteps_this_iter": 44490, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.83696991450796, "cost1_mean": 181.2165243628476, "system_level_velocity_mean": 15.403574784788466, "cost2_mean": -125.90922683252025, "cost2_max": -18.938375593861583, "outflow_rate_max": 1447.9117947912296, "cost1_min": 18.779599856060212, "system_level_velocity_min": 11.796134304831465, "system_level_velocity_max": 18.500946794828515, "outflow_rate_min": 497.50056700217027, "cost2_min": -148.78562887328644, "outflow_rate_mean": 1233.5287506982247}, "episode_len_mean": 318.93, "info": {"default": {"kl": 0.01183081604540348, "total_loss": 23.227550506591797, "vf_explained_var": 0.8782391548156738, "cur_lr": 0.0005000000237487257, "entropy": 1.1106371879577637, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 23.230894088745117, "policy_loss": -0.003935437183827162}, "num_steps_trained": 1409717, "update_time_ms": 9.185, "sample_time_ms": 20578.654, "load_time_ms": 16.94, "num_steps_sampled": 1409717, "grad_time_ms": 12839.951}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1071.8821413516998, "timestamp": 1558610653, "time_since_restore": 1071.8821413516998, "policy_reward_mean": {}, "training_iteration": 32, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faf60>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1409717, "episodes_total": 1479, "timesteps_total": 1409717, "episode_reward_mean": -531.2104201884487, "episodes_this_iter": 44, "date": "2019-05-23_11-24-13", "time_this_iter_s": 32.76634478569031, "num_metric_batches_dropped": 0, "episode_reward_min": -853.6130671536182}
{"iterations_since_restore": 33, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.575779685966282, "timesteps_this_iter": 45966, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.89362982228803, "cost1_mean": 180.945475327023, "system_level_velocity_mean": 15.29274282261251, "cost2_mean": -126.84035888075479, "cost2_max": -18.938375593861583, "outflow_rate_max": 1450.6444396497081, "cost1_min": 18.779599856060212, "system_level_velocity_min": 11.796134304831465, "system_level_velocity_max": 18.554710410908122, "outflow_rate_min": 497.50056700217027, "cost2_min": -148.34857585338233, "outflow_rate_mean": 1232.4180236722962}, "episode_len_mean": 320.93, "info": {"default": {"kl": 0.011712547391653061, "total_loss": 21.27082633972168, "vf_explained_var": 0.8936414122581482, "cur_lr": 0.0005000000237487257, "entropy": 1.122243046760559, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 21.27326011657715, "policy_loss": -0.0030204805079847574}, "num_steps_trained": 1455683, "update_time_ms": 8.986, "sample_time_ms": 20661.252, "load_time_ms": 16.702, "num_steps_sampled": 1455683, "grad_time_ms": 12680.452}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1105.7938795089722, "timestamp": 1558610686, "time_since_restore": 1105.7938795089722, "policy_reward_mean": {}, "training_iteration": 33, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa780>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1455683, "episodes_total": 1532, "timesteps_total": 1455683, "episode_reward_mean": -544.9410465622245, "episodes_this_iter": 53, "date": "2019-05-23_11-24-46", "time_this_iter_s": 33.91173815727234, "num_metric_batches_dropped": 0, "episode_reward_min": -853.6130671536182}
{"iterations_since_restore": 34, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.798527183646744, "timesteps_this_iter": 44250, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.89362982228803, "cost1_mean": 175.81317013675275, "system_level_velocity_mean": 15.328335651717696, "cost2_mean": -125.26752902807404, "cost2_max": -19.523859816691548, "outflow_rate_max": 1461.1794770875388, "cost1_min": 17.64897909793409, "system_level_velocity_min": 11.64849423041005, "system_level_velocity_max": 18.845890450700598, "outflow_rate_min": 448.5093812448499, "cost2_min": -148.99791309798746, "outflow_rate_mean": 1207.2891951526603}, "episode_len_mean": 312.8, "info": {"default": {"kl": 0.010973313823342323, "total_loss": 22.13216781616211, "vf_explained_var": 0.8869869709014893, "cur_lr": 0.0005000000237487257, "entropy": 1.1080950498580933, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 22.134227752685547, "policy_loss": -0.002607897622510791}, "num_steps_trained": 1499933, "update_time_ms": 8.777, "sample_time_ms": 20799.253, "load_time_ms": 15.864, "num_steps_sampled": 1499933, "grad_time_ms": 12522.516}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1139.1975948810577, "timestamp": 1558610720, "time_since_restore": 1139.1975948810577, "policy_reward_mean": {}, "training_iteration": 34, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faeb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa2e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1499933, "episodes_total": 1579, "timesteps_total": 1499933, "episode_reward_mean": -534.7086226626346, "episodes_this_iter": 47, "date": "2019-05-23_11-25-20", "time_this_iter_s": 33.40371537208557, "num_metric_batches_dropped": 0, "episode_reward_min": -845.7467585343358}
{"iterations_since_restore": 35, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.14128610017352, "timesteps_this_iter": 44605, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.5273343217305, "cost1_mean": 175.97484376970814, "system_level_velocity_mean": 15.541640953790468, "cost2_mean": -124.13774800874717, "cost2_max": -19.523859816691548, "outflow_rate_max": 1461.1794770875388, "cost1_min": 17.64897909793409, "system_level_velocity_min": 11.64849423041005, "system_level_velocity_max": 18.845890450700598, "outflow_rate_min": 448.5093812448499, "cost2_min": -148.99791309798746, "outflow_rate_mean": 1210.6051022239285}, "episode_len_mean": 308.64, "info": {"default": {"kl": 0.011323953047394753, "total_loss": 18.365890502929688, "vf_explained_var": 0.9056854844093323, "cur_lr": 0.0005000000237487257, "entropy": 1.0931284427642822, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 18.36932373046875, "policy_loss": -0.003997417166829109}, "num_steps_trained": 1544538, "update_time_ms": 8.751, "sample_time_ms": 20938.127, "load_time_ms": 15.719, "num_steps_sampled": 1544538, "grad_time_ms": 12449.647}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1173.3154454231262, "timestamp": 1558610754, "time_since_restore": 1173.3154454231262, "policy_reward_mean": {}, "training_iteration": 35, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501358>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1544538, "episodes_total": 1624, "timesteps_total": 1544538, "episode_reward_mean": -509.1822934906932, "episodes_this_iter": 45, "date": "2019-05-23_11-25-54", "time_this_iter_s": 34.11785054206848, "num_metric_batches_dropped": 0, "episode_reward_min": -845.7467585343358}
{"iterations_since_restore": 36, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.14128610017352, "timesteps_this_iter": 46804, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 221.5273343217305, "cost1_mean": 175.24856363552698, "system_level_velocity_mean": 15.236593150870913, "cost2_mean": -126.68814200480553, "cost2_max": -20.250149973588854, "outflow_rate_max": 1456.5169552058114, "cost1_min": 17.837554654514307, "system_level_velocity_min": 11.94474111492285, "system_level_velocity_max": 18.845890450700598, "outflow_rate_min": 431.75782487237836, "cost2_min": -148.89694893590868, "outflow_rate_mean": 1204.9761242850054}, "episode_len_mean": 312.98, "info": {"default": {"kl": 0.011280425824224949, "total_loss": 18.122346878051758, "vf_explained_var": 0.9105698466300964, "cur_lr": 0.0005000000237487257, "entropy": 1.0881099700927734, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 18.12480926513672, "policy_loss": -0.0030274668242782354}, "num_steps_trained": 1591342, "update_time_ms": 8.547, "sample_time_ms": 21103.006, "load_time_ms": 16.174, "num_steps_sampled": 1591342, "grad_time_ms": 12437.399}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1208.1837885379791, "timestamp": 1558610789, "time_since_restore": 1208.1837885379791, "policy_reward_mean": {}, "training_iteration": 36, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501c88>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1591342, "episodes_total": 1673, "timesteps_total": 1591342, "episode_reward_mean": -539.5946878343489, "episodes_this_iter": 49, "date": "2019-05-23_11-26-29", "time_this_iter_s": 34.868343114852905, "num_metric_batches_dropped": 0, "episode_reward_min": -824.7541665266145}
{"iterations_since_restore": 37, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.51778902107752, "timesteps_this_iter": 45462, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.27481723909145, "cost1_mean": 173.36490269160234, "system_level_velocity_mean": 15.055882233901205, "cost2_mean": -127.89145900860017, "cost2_max": -20.596880232360963, "outflow_rate_max": 1456.5169552058114, "cost1_min": 17.837554654514307, "system_level_velocity_min": 11.734615624031335, "system_level_velocity_max": 18.777692494680764, "outflow_rate_min": 431.75782487237836, "cost2_min": -148.89694893590868, "outflow_rate_mean": 1193.0974182571524}, "episode_len_mean": 314.14, "info": {"default": {"kl": 0.010947695933282375, "total_loss": 20.33831214904785, "vf_explained_var": 0.8995180130004883, "cur_lr": 0.0005000000237487257, "entropy": 1.0662388801574707, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 20.342267990112305, "policy_loss": -0.0045025534927845}, "num_steps_trained": 1636804, "update_time_ms": 8.671, "sample_time_ms": 21455.579, "load_time_ms": 15.223, "num_steps_sampled": 1636804, "grad_time_ms": 12414.554}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1244.5265264511108, "timestamp": 1558610825, "time_since_restore": 1244.5265264511108, "policy_reward_mean": {}, "training_iteration": 37, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1636804, "episodes_total": 1723, "timesteps_total": 1636804, "episode_reward_mean": -561.0860630958772, "episodes_this_iter": 50, "date": "2019-05-23_11-27-05", "time_this_iter_s": 36.342737913131714, "num_metric_batches_dropped": 0, "episode_reward_min": -836.0082671657165}
{"iterations_since_restore": 38, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -23.08740969363055, "timesteps_this_iter": 45046, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.81468080732952, "cost1_mean": 178.1156158644122, "system_level_velocity_mean": 15.132953200242598, "cost2_mean": -129.8978811909847, "cost2_max": -20.596880232360963, "outflow_rate_max": 1455.689039239898, "cost1_min": 17.936418739806708, "system_level_velocity_min": 11.624079232590011, "system_level_velocity_max": 18.777692494680764, "outflow_rate_min": 444.6769763958757, "cost2_min": -148.6443948360259, "outflow_rate_mean": 1219.1525875906098}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.012292147614061832, "total_loss": 21.72797966003418, "vf_explained_var": 0.8904043436050415, "cur_lr": 0.0005000000237487257, "entropy": 1.0625567436218262, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 21.732376098632812, "policy_loss": -0.0050101978704333305}, "num_steps_trained": 1681850, "update_time_ms": 8.841, "sample_time_ms": 21561.71, "load_time_ms": 14.652, "num_steps_sampled": 1681850, "grad_time_ms": 12367.192}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1278.5431699752808, "timestamp": 1558610859, "time_since_restore": 1278.5431699752808, "policy_reward_mean": {}, "training_iteration": 38, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fac88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fac18>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1681850, "episodes_total": 1768, "timesteps_total": 1681850, "episode_reward_mean": -560.0657891278704, "episodes_this_iter": 45, "date": "2019-05-23_11-27-39", "time_this_iter_s": 34.01664352416992, "num_metric_batches_dropped": 0, "episode_reward_min": -877.4839805983338}
{"iterations_since_restore": 39, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -273.56518546296877, "timesteps_this_iter": 44534, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.82413086951163, "cost1_mean": 183.9720025021475, "system_level_velocity_mean": 15.323283837626951, "cost2_mean": -129.78977477147046, "cost2_max": -111.03252184111625, "outflow_rate_max": 1458.914158083296, "cost1_min": 137.43525009808283, "system_level_velocity_min": 11.624079232590011, "system_level_velocity_max": 18.670733476098924, "outflow_rate_min": 992.5699535156313, "cost2_min": -148.73132830929018, "outflow_rate_mean": 1249.0038890512692}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.010151256807148457, "total_loss": 21.61432647705078, "vf_explained_var": 0.8917282223701477, "cur_lr": 0.0005000000237487257, "entropy": 1.051245927810669, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 21.617107391357422, "policy_loss": -0.00328708509914577}, "num_steps_trained": 1726384, "update_time_ms": 9.306, "sample_time_ms": 21897.793, "load_time_ms": 13.818, "num_steps_sampled": 1726384, "grad_time_ms": 12268.553}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1313.6214001178741, "timestamp": 1558610895, "time_since_restore": 1313.6214001178741, "policy_reward_mean": {}, "training_iteration": 39, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501860>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1726384, "episodes_total": 1812, "timesteps_total": 1726384, "episode_reward_mean": -547.1117912372448, "episodes_this_iter": 44, "date": "2019-05-23_11-28-15", "time_this_iter_s": 35.078230142593384, "num_metric_batches_dropped": 0, "episode_reward_min": -877.4839805983338}
{"iterations_since_restore": 40, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.49057137499159, "timesteps_this_iter": 45400, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.82413086951163, "cost1_mean": 179.88544268682597, "system_level_velocity_mean": 15.549469604486028, "cost2_mean": -125.24909295512944, "cost2_max": -21.045098126168167, "outflow_rate_max": 1458.914158083296, "cost1_min": 17.838228105474894, "system_level_velocity_min": 12.069820415917038, "system_level_velocity_max": 18.72365053151393, "outflow_rate_min": 437.2949997643919, "cost2_min": -148.73132830929018, "outflow_rate_mean": 1226.2236180451794}, "episode_len_mean": 315.04, "info": {"default": {"kl": 0.012669360265135765, "total_loss": 16.539653778076172, "vf_explained_var": 0.9200879335403442, "cur_lr": 0.0005000000237487257, "entropy": 1.0541832447052002, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 16.543777465820312, "policy_loss": -0.004756342153996229}, "num_steps_trained": 1771784, "update_time_ms": 9.289, "sample_time_ms": 22006.845, "load_time_ms": 13.837, "num_steps_sampled": 1771784, "grad_time_ms": 12199.566}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1348.9384768009186, "timestamp": 1558610930, "time_since_restore": 1348.9384768009186, "policy_reward_mean": {}, "training_iteration": 40, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b0f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1771784, "episodes_total": 1864, "timesteps_total": 1771784, "episode_reward_mean": -522.1326144437783, "episodes_this_iter": 52, "date": "2019-05-23_11-28-50", "time_this_iter_s": 35.317076683044434, "num_metric_batches_dropped": 0, "episode_reward_min": -834.4866976812921}
{"iterations_since_restore": 41, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.49057137499159, "timesteps_this_iter": 44443, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.4999890089873, "cost1_mean": 177.46258700425173, "system_level_velocity_mean": 15.35663078085017, "cost2_mean": -126.95457816999247, "cost2_max": -21.045098126168167, "outflow_rate_max": 1456.6303587442194, "cost1_min": 17.838228105474894, "system_level_velocity_min": 12.069820415917038, "system_level_velocity_max": 18.72365053151393, "outflow_rate_min": 437.2949997643919, "cost2_min": -150.8872452368263, "outflow_rate_mean": 1214.2049659759405}, "episode_len_mean": 315.04, "info": {"default": {"kl": 0.010917379520833492, "total_loss": 18.273744583129883, "vf_explained_var": 0.9118542671203613, "cur_lr": 0.0005000000237487257, "entropy": 1.0457539558410645, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 18.276134490966797, "policy_loss": -0.002936294535174966}, "num_steps_trained": 1816227, "update_time_ms": 9.168, "sample_time_ms": 22040.005, "load_time_ms": 13.347, "num_steps_sampled": 1816227, "grad_time_ms": 12142.114}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1382.0993993282318, "timestamp": 1558610963, "time_since_restore": 1382.0993993282318, "policy_reward_mean": {}, "training_iteration": 41, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566828>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1816227, "episodes_total": 1909, "timesteps_total": 1816227, "episode_reward_mean": -538.6712790646567, "episodes_this_iter": 45, "date": "2019-05-23_11-29-23", "time_this_iter_s": 33.16092252731323, "num_metric_batches_dropped": 0, "episode_reward_min": -834.4866976812921}
{"iterations_since_restore": 42, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.49057137499159, "timesteps_this_iter": 45378, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.29986241583825, "cost1_mean": 180.69882069145157, "system_level_velocity_mean": 15.333928274472669, "cost2_mean": -129.07509651988002, "cost2_max": -21.045098126168167, "outflow_rate_max": 1460.2890430011391, "cost1_min": 17.838228105474894, "system_level_velocity_min": 12.26048006702086, "system_level_velocity_max": 18.68348125333997, "outflow_rate_min": 437.2949997643919, "cost2_min": -150.8872452368263, "outflow_rate_mean": 1230.0614630323678}, "episode_len_mean": 319.94, "info": {"default": {"kl": 0.014802800491452217, "total_loss": 17.951112747192383, "vf_explained_var": 0.9129548072814941, "cur_lr": 0.0005000000237487257, "entropy": 1.040825605392456, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 17.956195831298828, "policy_loss": -0.0058243125677108765}, "num_steps_trained": 1861605, "update_time_ms": 8.926, "sample_time_ms": 22019.957, "load_time_ms": 14.174, "num_steps_sampled": 1861605, "grad_time_ms": 12173.749}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1414.9996361732483, "timestamp": 1558610996, "time_since_restore": 1414.9996361732483, "policy_reward_mean": {}, "training_iteration": 42, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844facc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faf60>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1861605, "episodes_total": 1951, "timesteps_total": 1861605, "episode_reward_mean": -543.9212703468419, "episodes_this_iter": 42, "date": "2019-05-23_11-29-56", "time_this_iter_s": 32.90023684501648, "num_metric_batches_dropped": 0, "episode_reward_min": -805.3717814553587}
{"iterations_since_restore": 43, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.726260615169853, "timesteps_this_iter": 45740, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.29986241583825, "cost1_mean": 179.46015100269855, "system_level_velocity_mean": 15.211470886156828, "cost2_mean": -130.25321616955245, "cost2_max": -19.615775334892177, "outflow_rate_max": 1460.2890430011391, "cost1_min": 18.06590304042644, "system_level_velocity_min": 12.159055653455933, "system_level_velocity_max": 18.86353788859523, "outflow_rate_min": 470.30216034021953, "cost2_min": -152.82861982718256, "outflow_rate_mean": 1221.9497353487866}, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.014224707148969173, "total_loss": 20.394393920898438, "vf_explained_var": 0.9035938382148743, "cur_lr": 0.0005000000237487257, "entropy": 1.0461559295654297, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 20.39899444580078, "policy_loss": -0.0053122942335903645}, "num_steps_trained": 1907345, "update_time_ms": 8.832, "sample_time_ms": 22006.561, "load_time_ms": 14.312, "num_steps_sampled": 1907345, "grad_time_ms": 12228.09}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1449.3116567134857, "timestamp": 1558611030, "time_since_restore": 1449.3116567134857, "policy_reward_mean": {}, "training_iteration": 43, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845013c8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1907345, "episodes_total": 2003, "timesteps_total": 1907345, "episode_reward_mean": -558.4252090873957, "episodes_this_iter": 52, "date": "2019-05-23_11-30-30", "time_this_iter_s": 34.31202054023743, "num_metric_batches_dropped": 0, "episode_reward_min": -837.7764881299845}
{"iterations_since_restore": 44, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.726260615169853, "timesteps_this_iter": 45399, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.5293129277216, "cost1_mean": 176.1973323127553, "system_level_velocity_mean": 15.122667534063503, "cost2_mean": -129.1487014497229, "cost2_max": -19.615775334892177, "outflow_rate_max": 1457.2152056277057, "cost1_min": 18.06590304042644, "system_level_velocity_min": 11.939676419912951, "system_level_velocity_max": 18.86353788859523, "outflow_rate_min": 421.09351213821293, "cost2_min": -152.82861982718256, "outflow_rate_mean": 1206.7460211313187}, "episode_len_mean": 317.94, "info": {"default": {"kl": 0.011086244136095047, "total_loss": 18.060300827026367, "vf_explained_var": 0.9143432974815369, "cur_lr": 0.0005000000237487257, "entropy": 1.0423377752304077, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 18.0626220703125, "policy_loss": -0.0028787555638700724}, "num_steps_trained": 1952744, "update_time_ms": 8.832, "sample_time_ms": 21937.726, "load_time_ms": 15.098, "num_steps_sampled": 1952744, "grad_time_ms": 12301.212}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1482.7837550640106, "timestamp": 1558611064, "time_since_restore": 1482.7837550640106, "policy_reward_mean": {}, "training_iteration": 44, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a7f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1952744, "episodes_total": 2051, "timesteps_total": 1952744, "episode_reward_mean": -564.8486288116528, "episodes_this_iter": 48, "date": "2019-05-23_11-31-04", "time_this_iter_s": 33.4720983505249, "num_metric_batches_dropped": 0, "episode_reward_min": -837.7764881299845}
{"iterations_since_restore": 45, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.58831430020093, "timesteps_this_iter": 45364, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.5293129277216, "cost1_mean": 179.5941418357594, "system_level_velocity_mean": 15.14480192747105, "cost2_mean": -130.45018111645496, "cost2_max": -27.827714229282627, "outflow_rate_max": 1457.2152056277057, "cost1_min": 22.75131947528447, "system_level_velocity_min": 11.939676419912951, "system_level_velocity_max": 18.5007210861512, "outflow_rate_min": 421.09351213821293, "cost2_min": -150.23680136035597, "outflow_rate_mean": 1225.3116459623243}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.014722224324941635, "total_loss": 19.316776275634766, "vf_explained_var": 0.9114047288894653, "cur_lr": 0.0005000000237487257, "entropy": 1.0172491073608398, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 19.320594787597656, "policy_loss": -0.004554323852062225}, "num_steps_trained": 1998108, "update_time_ms": 8.71, "sample_time_ms": 21777.773, "load_time_ms": 14.627, "num_steps_sampled": 1998108, "grad_time_ms": 12355.293}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1515.844407081604, "timestamp": 1558611097, "time_since_restore": 1515.844407081604, "policy_reward_mean": {}, "training_iteration": 45, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508ac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508b38>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1998108, "episodes_total": 2093, "timesteps_total": 1998108, "episode_reward_mean": -563.4059283033058, "episodes_this_iter": 42, "date": "2019-05-23_11-31-37", "time_this_iter_s": 33.060652017593384, "num_metric_batches_dropped": 0, "episode_reward_min": -812.4614511924011}
{"iterations_since_restore": 46, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -276.6141692226184, "timesteps_this_iter": 44486, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.03843912622523, "cost1_mean": 183.32669749015025, "system_level_velocity_mean": 15.297703148442556, "cost2_mean": -129.72659455475983, "cost2_max": -113.43086926889133, "outflow_rate_max": 1454.8771281162346, "cost1_min": 142.90150141535318, "system_level_velocity_min": 11.96580269086665, "system_level_velocity_max": 18.598126432666803, "outflow_rate_min": 1064.9557187780777, "cost2_min": -149.40137122818084, "outflow_rate_mean": 1241.3128157262936}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014825734309852123, "total_loss": 21.81847381591797, "vf_explained_var": 0.8918638229370117, "cur_lr": 0.0005000000237487257, "entropy": 1.0126731395721436, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 21.82188606262207, "policy_loss": -0.004151397384703159}, "num_steps_trained": 2042594, "update_time_ms": 8.861, "sample_time_ms": 21713.64, "load_time_ms": 13.986, "num_steps_sampled": 2042594, "grad_time_ms": 12324.697}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1549.7418644428253, "timestamp": 1558611131, "time_since_restore": 1549.7418644428253, "policy_reward_mean": {}, "training_iteration": 46, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bf60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b0f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84680d30>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2042594, "episodes_total": 2143, "timesteps_total": 2042594, "episode_reward_mean": -554.9923360311491, "episodes_this_iter": 50, "date": "2019-05-23_11-32-11", "time_this_iter_s": 33.89745736122131, "num_metric_batches_dropped": 0, "episode_reward_min": -827.0144468455583}
{"iterations_since_restore": 47, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -106.240161182308, "timesteps_this_iter": 44112, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.03843912622523, "cost1_mean": 184.97329462416872, "system_level_velocity_mean": 15.551339318406294, "cost2_mean": -129.00189638316357, "cost2_max": -62.1223103357683, "outflow_rate_max": 1455.955577492434, "cost1_min": 86.53248493575661, "system_level_velocity_min": 12.065383375462206, "system_level_velocity_max": 18.71458802490767, "outflow_rate_min": 818.6719199879858, "cost2_min": -150.1596465064351, "outflow_rate_mean": 1246.8375516590863}, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.014015983790159225, "total_loss": 19.097713470458984, "vf_explained_var": 0.9020891189575195, "cur_lr": 0.0005000000237487257, "entropy": 0.991089403629303, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 19.10192108154297, "policy_loss": -0.004907263908535242}, "num_steps_trained": 2086706, "update_time_ms": 8.682, "sample_time_ms": 21433.422, "load_time_ms": 14.772, "num_steps_sampled": 2086706, "grad_time_ms": 12258.221}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1582.6221175193787, "timestamp": 1558611164, "time_since_restore": 1582.6221175193787, "policy_reward_mean": {}, "training_iteration": 47, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501828>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2086706, "episodes_total": 2190, "timesteps_total": 2086706, "episode_reward_mean": -534.7080775293947, "episodes_this_iter": 47, "date": "2019-05-23_11-32-44", "time_this_iter_s": 32.880253076553345, "num_metric_batches_dropped": 0, "episode_reward_min": -827.0144468455583}
{"iterations_since_restore": 48, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.34261168384151, "timesteps_this_iter": 45757, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.482272178016, "cost1_mean": 181.97665355986695, "system_level_velocity_mean": 15.395452993988735, "cost2_mean": -129.74985347965298, "cost2_max": -59.82412938377154, "outflow_rate_max": 1456.9142232154566, "cost1_min": 79.78702794946678, "system_level_velocity_min": 11.94630231652014, "system_level_velocity_max": 18.71458802490767, "outflow_rate_min": 779.3828178558341, "cost2_min": -150.39580940601573, "outflow_rate_mean": 1233.7101016141983}, "episode_len_mean": 320.94, "info": {"default": {"kl": 0.014194997027516365, "total_loss": 17.631223678588867, "vf_explained_var": 0.9084863066673279, "cur_lr": 0.0005000000237487257, "entropy": 0.9755298495292664, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 17.635316848754883, "policy_loss": -0.004802277777343988}, "num_steps_trained": 2132463, "update_time_ms": 8.55, "sample_time_ms": 21410.675, "load_time_ms": 15.499, "num_steps_sampled": 2132463, "grad_time_ms": 12368.575}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1617.521693944931, "timestamp": 1558611199, "time_since_restore": 1617.521693944931, "policy_reward_mean": {}, "training_iteration": 48, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f98>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2132463, "episodes_total": 2235, "timesteps_total": 2132463, "episode_reward_mean": -543.8905950381475, "episodes_this_iter": 45, "date": "2019-05-23_11-33-19", "time_this_iter_s": 34.89957642555237, "num_metric_batches_dropped": 0, "episode_reward_min": -853.6141229202464}
{"iterations_since_restore": 49, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.34261168384151, "timesteps_this_iter": 46123, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.482272178016, "cost1_mean": 180.1967913121133, "system_level_velocity_mean": 15.113983953724969, "cost2_mean": -130.40856988618182, "cost2_max": -59.82412938377154, "outflow_rate_max": 1456.9142232154566, "cost1_min": 79.78702794946678, "system_level_velocity_min": 11.94630231652014, "system_level_velocity_max": 18.67330970487008, "outflow_rate_min": 779.3828178558341, "cost2_min": -150.39580940601573, "outflow_rate_mean": 1227.8904280635602}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01579011231660843, "total_loss": 17.50387191772461, "vf_explained_var": 0.9106955528259277, "cur_lr": 0.0005000000237487257, "entropy": 0.9754384160041809, "cur_kl_coeff": 0.05000000447034836, "vf_loss": 17.508012771606445, "policy_loss": -0.0049317944794893265}, "num_steps_trained": 2178586, "update_time_ms": 8.097, "sample_time_ms": 21241.695, "load_time_ms": 16.28, "num_steps_sampled": 2178586, "grad_time_ms": 12464.561}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1651.8777916431427, "timestamp": 1558611233, "time_since_restore": 1651.8777916431427, "policy_reward_mean": {}, "training_iteration": 49, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508828>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845086d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2178586, "episodes_total": 2280, "timesteps_total": 2178586, "episode_reward_mean": -566.5210056155162, "episodes_this_iter": 45, "date": "2019-05-23_11-33-53", "time_this_iter_s": 34.35609769821167, "num_metric_batches_dropped": 0, "episode_reward_min": -853.6141229202464}
{"iterations_since_restore": 50, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.49823712000652, "timesteps_this_iter": 45382, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.482272178016, "cost1_mean": 178.13104105353375, "system_level_velocity_mean": 15.064870243587125, "cost2_mean": -128.58270093630495, "cost2_max": -59.425741338120865, "outflow_rate_max": 1456.8932781649241, "cost1_min": 79.79689003384516, "system_level_velocity_min": 11.795825417470683, "system_level_velocity_max": 18.67330970487008, "outflow_rate_min": 772.2545770135933, "cost2_min": -150.39580940601573, "outflow_rate_mean": 1222.7188868948715}, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.015600756742060184, "total_loss": 18.70974349975586, "vf_explained_var": 0.9071645736694336, "cur_lr": 0.0005000000237487257, "entropy": 0.9600405693054199, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 18.714614868164062, "policy_loss": -0.005651724059134722}, "num_steps_trained": 2223968, "update_time_ms": 8.247, "sample_time_ms": 21072.797, "load_time_ms": 15.699, "num_steps_sampled": 2223968, "grad_time_ms": 12480.035}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1685.6647968292236, "timestamp": 1558611267, "time_since_restore": 1685.6647968292236, "policy_reward_mean": {}, "training_iteration": 50, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508c88>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2223968, "episodes_total": 2330, "timesteps_total": 2223968, "episode_reward_mean": -565.4903890922383, "episodes_this_iter": 50, "date": "2019-05-23_11-34-27", "time_this_iter_s": 33.78700518608093, "num_metric_batches_dropped": 0, "episode_reward_min": -840.2088214384302}
{"iterations_since_restore": 51, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.49823712000652, "timesteps_this_iter": 45110, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.89977760739805, "cost1_mean": 177.83091820118477, "system_level_velocity_mean": 15.133913362815788, "cost2_mean": -127.95855500232624, "cost2_max": -59.425741338120865, "outflow_rate_max": 1459.3043749870103, "cost1_min": 79.79689003384516, "system_level_velocity_min": 11.795825417470683, "system_level_velocity_max": 18.630958180918036, "outflow_rate_min": 772.2545770135933, "cost2_min": -148.67532182678622, "outflow_rate_mean": 1220.2410223772881}, "episode_len_mean": 319.66, "info": {"default": {"kl": 0.014585917815566063, "total_loss": 17.97442626953125, "vf_explained_var": 0.9110700488090515, "cur_lr": 0.0005000000237487257, "entropy": 0.9598684906959534, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 17.97832489013672, "policy_loss": -0.004627292510122061}, "num_steps_trained": 2269078, "update_time_ms": 8.055, "sample_time_ms": 21124.189, "load_time_ms": 15.182, "num_steps_sampled": 2269078, "grad_time_ms": 12458.269}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1719.1338398456573, "timestamp": 1558611300, "time_since_restore": 1719.1338398456573, "policy_reward_mean": {}, "training_iteration": 51, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa4e0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2269078, "episodes_total": 2376, "timesteps_total": 2269078, "episode_reward_mean": -561.3894764514388, "episodes_this_iter": 46, "date": "2019-05-23_11-35-00", "time_this_iter_s": 33.469043016433716, "num_metric_batches_dropped": 0, "episode_reward_min": -840.2088214384302}
{"iterations_since_restore": 52, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.0525278952684, "timesteps_this_iter": 46636, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.89977760739805, "cost1_mean": 177.82889705174296, "system_level_velocity_mean": 15.021868488869288, "cost2_mean": -128.77102668157994, "cost2_max": -61.2698423529621, "outflow_rate_max": 1459.3043749870103, "cost1_min": 80.07562305344554, "system_level_velocity_min": 11.730289067182072, "system_level_velocity_max": 18.630958180918036, "outflow_rate_min": 772.2545770135933, "cost2_min": -148.67532182678622, "outflow_rate_mean": 1220.3916413450543}, "episode_len_mean": 321.74, "info": {"default": {"kl": 0.016370605677366257, "total_loss": 15.107349395751953, "vf_explained_var": 0.9262228608131409, "cur_lr": 0.0005000000237487257, "entropy": 0.9512791037559509, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 15.111624717712402, "policy_loss": -0.005094107240438461}, "num_steps_trained": 2315714, "update_time_ms": 7.969, "sample_time_ms": 21137.801, "load_time_ms": 15.063, "num_steps_sampled": 2315714, "grad_time_ms": 12496.574}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1752.5242714881897, "timestamp": 1558611334, "time_since_restore": 1752.5242714881897, "policy_reward_mean": {}, "training_iteration": 52, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845665f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2315714, "episodes_total": 2420, "timesteps_total": 2315714, "episode_reward_mean": -573.8947264891352, "episodes_this_iter": 44, "date": "2019-05-23_11-35-34", "time_this_iter_s": 33.39043164253235, "num_metric_batches_dropped": 0, "episode_reward_min": -868.7646822869638}
{"iterations_since_restore": 53, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -106.14276646295406, "timesteps_this_iter": 45679, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 223.82962825017836, "cost1_mean": 176.69560613631336, "system_level_velocity_mean": 14.854786521061484, "cost2_mean": -129.2845517780872, "cost2_max": -65.53584846693651, "outflow_rate_max": 1458.830685488957, "cost1_min": 88.20150635468869, "system_level_velocity_min": 11.730289067182072, "system_level_velocity_max": 18.881444765858497, "outflow_rate_min": 822.3428142853121, "cost2_min": -148.67532182678622, "outflow_rate_mean": 1215.58046639598}, "episode_len_mean": 323.03, "info": {"default": {"kl": 0.015662608668208122, "total_loss": 17.187213897705078, "vf_explained_var": 0.9158484935760498, "cur_lr": 0.0005000000237487257, "entropy": 0.940945029258728, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 17.191293716430664, "policy_loss": -0.004862628877162933}, "num_steps_trained": 2361393, "update_time_ms": 7.991, "sample_time_ms": 21104.78, "load_time_ms": 15.023, "num_steps_sampled": 2361393, "grad_time_ms": 12449.723}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1786.0323588848114, "timestamp": 1558611367, "time_since_restore": 1786.0323588848114, "policy_reward_mean": {}, "training_iteration": 53, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84680d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fadd8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2361393, "episodes_total": 2468, "timesteps_total": 2361393, "episode_reward_mean": -587.8869087024732, "episodes_this_iter": 48, "date": "2019-05-23_11-36-07", "time_this_iter_s": 33.508087396621704, "num_metric_batches_dropped": 0, "episode_reward_min": -868.7646822869638}
{"iterations_since_restore": 54, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -105.89490682621914, "timesteps_this_iter": 45188, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 222.87441970004164, "cost1_mean": 177.84494797301838, "system_level_velocity_mean": 15.059551212756267, "cost2_mean": -127.73840787598947, "cost2_max": -63.43349213160825, "outflow_rate_max": 1458.830685488957, "cost1_min": 85.16463355036728, "system_level_velocity_min": 12.109902873582381, "system_level_velocity_max": 18.881444765858497, "outflow_rate_min": 802.6552168573594, "cost2_min": -147.80848071826978, "outflow_rate_mean": 1222.1897555837413}, "episode_len_mean": 321.03, "info": {"default": {"kl": 0.014505991712212563, "total_loss": 13.805863380432129, "vf_explained_var": 0.9342916011810303, "cur_lr": 0.0005000000237487257, "entropy": 0.9182139039039612, "cur_kl_coeff": 0.05000000447034836, "vf_loss": 13.809383392333984, "policy_loss": -0.00424533523619175}, "num_steps_trained": 2406581, "update_time_ms": 7.895, "sample_time_ms": 21149.801, "load_time_ms": 14.869, "num_steps_sampled": 2406581, "grad_time_ms": 12415.659}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1819.6091990470886, "timestamp": 1558611401, "time_since_restore": 1819.6091990470886, "policy_reward_mean": {}, "training_iteration": 54, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845084e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508f28>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2406581, "episodes_total": 2515, "timesteps_total": 2406581, "episode_reward_mean": -567.7303839951599, "episodes_this_iter": 47, "date": "2019-05-23_11-36-41", "time_this_iter_s": 33.57684016227722, "num_metric_batches_dropped": 0, "episode_reward_min": -798.5214659272798}
{"iterations_since_restore": 55, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.585655738251116, "timesteps_this_iter": 44773, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 222.87441970004164, "cost1_mean": 180.2684080417747, "system_level_velocity_mean": 15.257155388329661, "cost2_mean": -128.14456769635748, "cost2_max": -24.90107285195642, "outflow_rate_max": 1458.830685488957, "cost1_min": 24.40886120128852, "system_level_velocity_min": 11.735907734633955, "system_level_velocity_max": 18.625828342500327, "outflow_rate_min": 490.1441433404906, "cost2_min": -151.54977435673572, "outflow_rate_mean": 1231.1835204852216}, "episode_len_mean": 320.12, "info": {"default": {"kl": 0.019866956397891045, "total_loss": 20.319660186767578, "vf_explained_var": 0.8947800993919373, "cur_lr": 0.0005000000237487257, "entropy": 0.8794025778770447, "cur_kl_coeff": 0.050000011920928955, "vf_loss": 20.326162338256836, "policy_loss": -0.007493317127227783}, "num_steps_trained": 2451354, "update_time_ms": 7.975, "sample_time_ms": 21276.451, "load_time_ms": 15.654, "num_steps_sampled": 2451354, "grad_time_ms": 12309.739}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1852.912430524826, "timestamp": 1558611434, "time_since_restore": 1852.912430524826, "policy_reward_mean": {}, "training_iteration": 55, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845087f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508cc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845082b0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2451354, "episodes_total": 2560, "timesteps_total": 2451354, "episode_reward_mean": -545.4710976580035, "episodes_this_iter": 45, "date": "2019-05-23_11-37-14", "time_this_iter_s": 33.30323147773743, "num_metric_batches_dropped": 0, "episode_reward_min": -831.7051277437182}
{"iterations_since_restore": 56, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.585655738251116, "timesteps_this_iter": 44417, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.9744010089171, "cost1_mean": 183.4228132902963, "system_level_velocity_mean": 15.34906116404935, "cost2_mean": -128.21139067805277, "cost2_max": -24.90107285195642, "outflow_rate_max": 1451.6170753379627, "cost1_min": 24.40886120128852, "system_level_velocity_min": 11.735907734633955, "system_level_velocity_max": 18.587921185802536, "outflow_rate_min": 490.1441433404906, "cost2_min": -151.54977435673572, "outflow_rate_mean": 1243.8460831179705}, "episode_len_mean": 322.12, "info": {"default": {"kl": 0.020735016092658043, "total_loss": 17.841033935546875, "vf_explained_var": 0.9005222916603088, "cur_lr": 0.0005000000237487257, "entropy": 0.9065248966217041, "cur_kl_coeff": 0.05000000819563866, "vf_loss": 17.843433380126953, "policy_loss": -0.0034363344311714172}, "num_steps_trained": 2495771, "update_time_ms": 7.971, "sample_time_ms": 21255.612, "load_time_ms": 16.398, "num_steps_sampled": 2495771, "grad_time_ms": 12264.061}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1886.147170305252, "timestamp": 1558611468, "time_since_restore": 1886.147170305252, "policy_reward_mean": {}, "training_iteration": 56, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bd30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fada0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2495771, "episodes_total": 2608, "timesteps_total": 2495771, "episode_reward_mean": -535.6230996228234, "episodes_this_iter": 48, "date": "2019-05-23_11-37-48", "time_this_iter_s": 33.234739780426025, "num_metric_batches_dropped": 0, "episode_reward_min": -831.7051277437182}
{"iterations_since_restore": 57, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -96.19511659924048, "timesteps_this_iter": 44983, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.80232780911223, "cost1_mean": 184.0190208489456, "system_level_velocity_mean": 15.462976529232714, "cost2_mean": -127.32253081639908, "cost2_max": -61.747353024343916, "outflow_rate_max": 1448.7007201889023, "cost1_min": 79.67813659906071, "system_level_velocity_min": 11.735907734633955, "system_level_velocity_max": 18.463911044385263, "outflow_rate_min": 766.8650174574587, "cost2_min": -146.83701943403463, "outflow_rate_mean": 1243.9118148702353}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.014461473561823368, "total_loss": 19.709321975708008, "vf_explained_var": 0.8857093453407288, "cur_lr": 0.0005000000237487257, "entropy": 0.8884308934211731, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 19.714017868041992, "policy_loss": -0.005780759267508984}, "num_steps_trained": 2540754, "update_time_ms": 7.839, "sample_time_ms": 21306.728, "load_time_ms": 16.534, "num_steps_sampled": 2540754, "grad_time_ms": 12450.146}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1921.3993804454803, "timestamp": 1558611503, "time_since_restore": 1921.3993804454803, "policy_reward_mean": {}, "training_iteration": 57, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844facc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa1d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845662e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2540754, "episodes_total": 2658, "timesteps_total": 2540754, "episode_reward_mean": -526.9157241506439, "episodes_this_iter": 50, "date": "2019-05-23_11-38-23", "time_this_iter_s": 35.25221014022827, "num_metric_batches_dropped": 0, "episode_reward_min": -830.0646149987315}
{"iterations_since_restore": 58, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -96.19511659924048, "timesteps_this_iter": 46066, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.84503354797664, "cost1_mean": 182.46810534578626, "system_level_velocity_mean": 15.341476975792075, "cost2_mean": -127.29265527446789, "cost2_max": -61.747353024343916, "outflow_rate_max": 1451.618909186052, "cost1_min": 79.67813659906071, "system_level_velocity_min": 11.930276730154217, "system_level_velocity_max": 18.463911044385263, "outflow_rate_min": 766.8650174574587, "cost2_min": -146.2210603539351, "outflow_rate_mean": 1239.9638668300865}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.016004526987671852, "total_loss": 14.977924346923828, "vf_explained_var": 0.9204559922218323, "cur_lr": 0.0005000000237487257, "entropy": 0.8826203942298889, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 14.982154846191406, "policy_loss": -0.0054326183162629604}, "num_steps_trained": 2586820, "update_time_ms": 7.834, "sample_time_ms": 21269.902, "load_time_ms": 15.892, "num_steps_sampled": 2586820, "grad_time_ms": 12305.681}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1954.4617865085602, "timestamp": 1558611536, "time_since_restore": 1954.4617865085602, "policy_reward_mean": {}, "training_iteration": 58, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501978>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2586820, "episodes_total": 2701, "timesteps_total": 2586820, "episode_reward_mean": -535.0974756500931, "episodes_this_iter": 43, "date": "2019-05-23_11-38-56", "time_this_iter_s": 33.062406063079834, "num_metric_batches_dropped": 0, "episode_reward_min": -842.0230193569403}
{"iterations_since_restore": 59, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -289.46852620991666, "timesteps_this_iter": 47188, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.84503354797664, "cost1_mean": 177.5984650675651, "system_level_velocity_mean": 14.703253198566903, "cost2_mean": -130.54278151452752, "cost2_max": -112.97829713197103, "outflow_rate_max": 1451.618909186052, "cost1_min": 133.74821887383337, "system_level_velocity_min": 11.042991178267647, "system_level_velocity_max": 18.233111237580413, "outflow_rate_min": 1050.3196480331262, "cost2_min": -146.83516429880922, "outflow_rate_mean": 1222.976481862264}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01592218317091465, "total_loss": 17.01821517944336, "vf_explained_var": 0.914956271648407, "cur_lr": 0.0005000000237487257, "entropy": 0.9067374467849731, "cur_kl_coeff": 0.07499999552965164, "vf_loss": 17.02311897277832, "policy_loss": -0.00609798775985837}, "num_steps_trained": 2634008, "update_time_ms": 7.795, "sample_time_ms": 21245.509, "load_time_ms": 15.965, "num_steps_sampled": 2634008, "grad_time_ms": 12321.198}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 1988.7211680412292, "timestamp": 1558611570, "time_since_restore": 1988.7211680412292, "policy_reward_mean": {}, "training_iteration": 59, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508160>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2634008, "episodes_total": 2747, "timesteps_total": 2634008, "episode_reward_mean": -587.1971007747593, "episodes_this_iter": 46, "date": "2019-05-23_11-39-30", "time_this_iter_s": 34.25938153266907, "num_metric_batches_dropped": 0, "episode_reward_min": -855.4803448389437}
{"iterations_since_restore": 60, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.29524842252231, "timesteps_this_iter": 46706, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.9410197821607, "cost1_mean": 174.0964308438405, "system_level_velocity_mean": 14.665990048465924, "cost2_mean": -130.00957549529602, "cost2_max": -22.960060857736682, "outflow_rate_max": 1448.666579477918, "cost1_min": 24.58298383277585, "system_level_velocity_min": 11.042991178267647, "system_level_velocity_max": 18.820252517255586, "outflow_rate_min": 507.35127965118886, "cost2_min": -146.83516429880922, "outflow_rate_mean": 1201.4097079744931}, "episode_len_mean": 321.02, "info": {"default": {"kl": 0.01592663675546646, "total_loss": 16.70598030090332, "vf_explained_var": 0.9149366021156311, "cur_lr": 0.0005000000237487257, "entropy": 0.9049878716468811, "cur_kl_coeff": 0.07499999552965164, "vf_loss": 16.71040916442871, "policy_loss": -0.005625411868095398}, "num_steps_trained": 2680714, "update_time_ms": 7.592, "sample_time_ms": 21373.637, "load_time_ms": 15.8, "num_steps_sampled": 2680714, "grad_time_ms": 12297.141}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2023.5327324867249, "timestamp": 1558611605, "time_since_restore": 2023.5327324867249, "policy_reward_mean": {}, "training_iteration": 60, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ada0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846988d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a828>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2680714, "episodes_total": 2796, "timesteps_total": 2680714, "episode_reward_mean": -592.5423377044035, "episodes_this_iter": 49, "date": "2019-05-23_11-40-05", "time_this_iter_s": 34.811564445495605, "num_metric_batches_dropped": 0, "episode_reward_min": -864.6276267336086}
{"iterations_since_restore": 61, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.708930259961008, "timesteps_this_iter": 44827, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.94108595796365, "cost1_mean": 174.70712623900246, "system_level_velocity_mean": 14.925241499285196, "cost2_mean": -128.20797917659615, "cost2_max": -18.519209506640564, "outflow_rate_max": 1447.8516699048987, "cost1_min": 17.637941955916713, "system_level_velocity_min": 11.360234878699247, "system_level_velocity_max": 18.820252517255586, "outflow_rate_min": 456.9659565674539, "cost2_min": -146.77628232382477, "outflow_rate_mean": 1202.9771111356706}, "episode_len_mean": 316.94, "info": {"default": {"kl": 0.016625823453068733, "total_loss": 18.522207260131836, "vf_explained_var": 0.9089932441711426, "cur_lr": 0.0005000000237487257, "entropy": 0.9040154218673706, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 18.52740478515625, "policy_loss": -0.006445474456995726}, "num_steps_trained": 2725541, "update_time_ms": 7.71, "sample_time_ms": 21472.051, "load_time_ms": 16.18, "num_steps_sampled": 2725541, "grad_time_ms": 12257.933}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2057.5813448429108, "timestamp": 1558611639, "time_since_restore": 2057.5813448429108, "policy_reward_mean": {}, "training_iteration": 61, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845082e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508470>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2725541, "episodes_total": 2842, "timesteps_total": 2725541, "episode_reward_mean": -565.9833649478551, "episodes_this_iter": 46, "date": "2019-05-23_11-40-39", "time_this_iter_s": 34.04861235618591, "num_metric_batches_dropped": 0, "episode_reward_min": -864.6276267336086}
{"iterations_since_restore": 62, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.708930259961008, "timesteps_this_iter": 45565, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.94108595796365, "cost1_mean": 176.42302795811418, "system_level_velocity_mean": 15.130088840552274, "cost2_mean": -126.10732699618146, "cost2_max": -18.519209506640564, "outflow_rate_max": 1447.8516699048987, "cost1_min": 17.637941955916713, "system_level_velocity_min": 11.360234878699247, "system_level_velocity_max": 18.581128278342707, "outflow_rate_min": 456.9659565674539, "cost2_min": -147.02486667586004, "outflow_rate_mean": 1212.7113216086466}, "episode_len_mean": 316.04, "info": {"default": {"kl": 0.01817554421722889, "total_loss": 17.92632293701172, "vf_explained_var": 0.9077780842781067, "cur_lr": 0.0005000000237487257, "entropy": 0.8998798131942749, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 17.931215286254883, "policy_loss": -0.006255509331822395}, "num_steps_trained": 2771106, "update_time_ms": 7.61, "sample_time_ms": 21571.57, "load_time_ms": 16.289, "num_steps_sampled": 2771106, "grad_time_ms": 12174.745}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2091.1381533145905, "timestamp": 1558611673, "time_since_restore": 2091.1381533145905, "policy_reward_mean": {}, "training_iteration": 62, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fda0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fe48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f6d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2771106, "episodes_total": 2889, "timesteps_total": 2771106, "episode_reward_mean": -548.8930255178683, "episodes_this_iter": 47, "date": "2019-05-23_11-41-13", "time_this_iter_s": 33.55680847167969, "num_metric_batches_dropped": 0, "episode_reward_min": -864.6276267336086}
{"iterations_since_restore": 63, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.275168770699416, "timesteps_this_iter": 45677, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.01397326513137, "cost1_mean": 177.5226043625487, "system_level_velocity_mean": 15.302072343299574, "cost2_mean": -124.87059398833236, "cost2_max": -22.057979686703764, "outflow_rate_max": 1448.5812167345657, "cost1_min": 22.73122861838822, "system_level_velocity_min": 11.68250616608838, "system_level_velocity_max": 18.610320693642418, "outflow_rate_min": 506.5568824271423, "cost2_min": -147.02486667586004, "outflow_rate_mean": 1220.6919175005976}, "episode_len_mean": 315.14, "info": {"default": {"kl": 0.015743428841233253, "total_loss": 18.87807273864746, "vf_explained_var": 0.9036872386932373, "cur_lr": 0.0005000000237487257, "entropy": 0.8818936944007874, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 18.88067054748535, "policy_loss": -0.0037792983930557966}, "num_steps_trained": 2816783, "update_time_ms": 7.567, "sample_time_ms": 21624.884, "load_time_ms": 15.999, "num_steps_sampled": 2816783, "grad_time_ms": 12201.091}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2125.4438993930817, "timestamp": 1558611707, "time_since_restore": 2125.4438993930817, "policy_reward_mean": {}, "training_iteration": 63, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508b38>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2816783, "episodes_total": 2940, "timesteps_total": 2816783, "episode_reward_mean": -535.4350590171795, "episodes_this_iter": 51, "date": "2019-05-23_11-41-47", "time_this_iter_s": 34.30574607849121, "num_metric_batches_dropped": 0, "episode_reward_min": -839.4660517408357}
{"iterations_since_restore": 64, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.7241031811188, "timesteps_this_iter": 46088, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.01397326513137, "cost1_mean": 175.4366726419468, "system_level_velocity_mean": 15.06276800226625, "cost2_mean": -125.4618598707145, "cost2_max": -22.057979686703764, "outflow_rate_max": 1450.1485010822505, "cost1_min": 22.73122861838822, "system_level_velocity_min": 11.68250616608838, "system_level_velocity_max": 18.610320693642418, "outflow_rate_min": 513.1510694623687, "cost2_min": -147.5074221035653, "outflow_rate_mean": 1215.632093395841}, "episode_len_mean": 316.06, "info": {"default": {"kl": 0.017106447368860245, "total_loss": 14.304642677307129, "vf_explained_var": 0.9271551370620728, "cur_lr": 0.0005000000237487257, "entropy": 0.8950859904289246, "cur_kl_coeff": 0.07499999552965164, "vf_loss": 14.30748176574707, "policy_loss": -0.004121642094105482}, "num_steps_trained": 2862871, "update_time_ms": 7.939, "sample_time_ms": 21596.696, "load_time_ms": 15.96, "num_steps_sampled": 2862871, "grad_time_ms": 12249.022}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2159.202286720276, "timestamp": 1558611741, "time_since_restore": 2159.202286720276, "policy_reward_mean": {}, "training_iteration": 64, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845080f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508e10>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2862871, "episodes_total": 2985, "timesteps_total": 2862871, "episode_reward_mean": -551.0765512007432, "episodes_this_iter": 45, "date": "2019-05-23_11-42-21", "time_this_iter_s": 33.758387327194214, "num_metric_batches_dropped": 0, "episode_reward_min": -839.4660517408357}
{"iterations_since_restore": 65, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.7241031811188, "timesteps_this_iter": 44204, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.72825598349488, "cost1_mean": 177.94806887353917, "system_level_velocity_mean": 15.034059956023803, "cost2_mean": -126.15543225721507, "cost2_max": -22.057979686703764, "outflow_rate_max": 1450.1485010822505, "cost1_min": 22.73122861838822, "system_level_velocity_min": 11.709874066803142, "system_level_velocity_max": 18.4536889864022, "outflow_rate_min": 513.1510694623687, "cost2_min": -147.5074221035653, "outflow_rate_mean": 1229.0002154375245}, "episode_len_mean": 320.12, "info": {"default": {"kl": 0.016305087134242058, "total_loss": 21.154455184936523, "vf_explained_var": 0.8905057311058044, "cur_lr": 0.0005000000237487257, "entropy": 0.8676503300666809, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 21.15888786315918, "policy_loss": -0.005657056346535683}, "num_steps_trained": 2907075, "update_time_ms": 7.82, "sample_time_ms": 21522.371, "load_time_ms": 15.91, "num_steps_sampled": 2907075, "grad_time_ms": 12261.267}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2191.8588860034943, "timestamp": 1558611774, "time_since_restore": 2191.8588860034943, "policy_reward_mean": {}, "training_iteration": 65, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2cf8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2907075, "episodes_total": 3030, "timesteps_total": 2907075, "episode_reward_mean": -554.8291268734015, "episodes_this_iter": 45, "date": "2019-05-23_11-42-54", "time_this_iter_s": 32.656599283218384, "num_metric_batches_dropped": 0, "episode_reward_min": -824.1997354499055}
{"iterations_since_restore": 66, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -290.2931046304642, "timesteps_this_iter": 45797, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.72825598349488, "cost1_mean": 184.5031445405639, "system_level_velocity_mean": 15.311040523281081, "cost2_mean": -126.55539105459424, "cost2_max": -110.79289446145134, "outflow_rate_max": 1450.1485010822505, "cost1_min": 138.11881392472412, "system_level_velocity_min": 11.709874066803142, "system_level_velocity_max": 18.25584790682312, "outflow_rate_min": 1061.9771546635181, "cost2_min": -145.74348086856583, "outflow_rate_mean": 1256.4079533864162}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01857874169945717, "total_loss": 17.860036849975586, "vf_explained_var": 0.9086998105049133, "cur_lr": 0.0005000000237487257, "entropy": 0.8592565059661865, "cur_kl_coeff": 0.07499999552965164, "vf_loss": 17.86447525024414, "policy_loss": -0.0058332025073468685}, "num_steps_trained": 2952872, "update_time_ms": 7.595, "sample_time_ms": 21627.884, "load_time_ms": 15.855, "num_steps_sampled": 2952872, "grad_time_ms": 12500.302}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2228.5470912456512, "timestamp": 1558611810, "time_since_restore": 2228.5470912456512, "policy_reward_mean": {}, "training_iteration": 66, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845015c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2952872, "episodes_total": 3077, "timesteps_total": 2952872, "episode_reward_mean": -538.345584806825, "episodes_this_iter": 47, "date": "2019-05-23_11-43-30", "time_this_iter_s": 36.68820524215698, "num_metric_batches_dropped": 0, "episode_reward_min": -828.6922205197523}
{"iterations_since_restore": 67, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.782249872330752, "timesteps_this_iter": 44250, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.23514858732165, "cost1_mean": 180.25792908887811, "system_level_velocity_mean": 15.264414556829825, "cost2_mean": -126.09743550298047, "cost2_max": -20.763034876271146, "outflow_rate_max": 1449.891362576818, "cost1_min": 17.715653032280898, "system_level_velocity_min": 11.794471883938034, "system_level_velocity_max": 18.15859385644474, "outflow_rate_min": 431.75782487237836, "cost2_min": -147.1177667085003, "outflow_rate_mean": 1234.7313402855966}, "episode_len_mean": 319.04, "info": {"default": {"kl": 0.016537629067897797, "total_loss": 14.928027153015137, "vf_explained_var": 0.9230529069900513, "cur_lr": 0.0005000000237487257, "entropy": 0.8445335626602173, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 14.93178653717041, "policy_loss": -0.004999273922294378}, "num_steps_trained": 2997122, "update_time_ms": 7.796, "sample_time_ms": 21725.683, "load_time_ms": 14.939, "num_steps_sampled": 2997122, "grad_time_ms": 12346.982}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2263.251692056656, "timestamp": 1558611845, "time_since_restore": 2263.251692056656, "policy_reward_mean": {}, "training_iteration": 67, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456acf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a0f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2997122, "episodes_total": 3126, "timesteps_total": 2997122, "episode_reward_mean": -533.6377499138932, "episodes_this_iter": 49, "date": "2019-05-23_11-44-05", "time_this_iter_s": 34.70460081100464, "num_metric_batches_dropped": 0, "episode_reward_min": -828.6922205197523}
{"iterations_since_restore": 68, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.782249872330752, "timesteps_this_iter": 45249, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.23514858732165, "cost1_mean": 177.66809361230008, "system_level_velocity_mean": 15.304545818878672, "cost2_mean": -124.84214861093014, "cost2_max": -20.763034876271146, "outflow_rate_max": 1449.891362576818, "cost1_min": 17.680444019011023, "system_level_velocity_min": 11.561057110955282, "system_level_velocity_max": 18.291757601035545, "outflow_rate_min": 431.75782487237836, "cost2_min": -147.1177667085003, "outflow_rate_mean": 1225.1860932792522}, "episode_len_mean": 314.06, "info": {"default": {"kl": 0.01822950318455696, "total_loss": 15.312408447265625, "vf_explained_var": 0.920958936214447, "cur_lr": 0.0005000000237487257, "entropy": 0.8526867032051086, "cur_kl_coeff": 0.07499999552965164, "vf_loss": 15.316397666931152, "policy_loss": -0.005357517395168543}, "num_steps_trained": 3042371, "update_time_ms": 8.054, "sample_time_ms": 21769.144, "load_time_ms": 15.432, "num_steps_sampled": 3042371, "grad_time_ms": 12410.598}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2297.4232058525085, "timestamp": 1558611879, "time_since_restore": 2297.4232058525085, "policy_reward_mean": {}, "training_iteration": 68, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845016d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3042371, "episodes_total": 3172, "timesteps_total": 3042371, "episode_reward_mean": -522.3449449502355, "episodes_this_iter": 46, "date": "2019-05-23_11-44-39", "time_this_iter_s": 34.17151379585266, "num_metric_batches_dropped": 0, "episode_reward_min": -876.9330843857988}
{"iterations_since_restore": 69, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.912080777638263, "timesteps_this_iter": 45489, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.23514858732165, "cost1_mean": 181.51539057748676, "system_level_velocity_mean": 15.306815804339749, "cost2_mean": -125.75215640248925, "cost2_max": -21.145760769325005, "outflow_rate_max": 1449.891362576818, "cost1_min": 17.680444019011023, "system_level_velocity_min": 11.561057110955282, "system_level_velocity_max": 18.291757601035545, "outflow_rate_min": 431.75782487237836, "cost2_min": -146.95537815406246, "outflow_rate_mean": 1245.5527683811174}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.017978474497795105, "total_loss": 19.278322219848633, "vf_explained_var": 0.9045180678367615, "cur_lr": 0.0005000000237487257, "entropy": 0.8506205081939697, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 19.28359603881836, "policy_loss": -0.006622047163546085}, "num_steps_trained": 3087860, "update_time_ms": 8.323, "sample_time_ms": 21786.909, "load_time_ms": 15.3, "num_steps_sampled": 3087860, "grad_time_ms": 12378.164}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2331.532517671585, "timestamp": 1558611913, "time_since_restore": 2331.532517671585, "policy_reward_mean": {}, "training_iteration": 69, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2a20>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f20f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2c88>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3087860, "episodes_total": 3218, "timesteps_total": 3087860, "episode_reward_mean": -529.4067610839089, "episodes_this_iter": 46, "date": "2019-05-23_11-45-13", "time_this_iter_s": 34.10931181907654, "num_metric_batches_dropped": 0, "episode_reward_min": -876.9330843857988}
{"iterations_since_restore": 70, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -111.05841993136818, "timesteps_this_iter": 45944, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.20046080146108, "cost1_mean": 178.59649738220716, "system_level_velocity_mean": 15.016577409064729, "cost2_mean": -127.28803262329859, "cost2_max": -62.01007869534127, "outflow_rate_max": 1448.3399825306194, "cost1_min": 83.37647989959709, "system_level_velocity_min": 10.255603434227897, "system_level_velocity_max": 18.165459790010164, "outflow_rate_min": 778.1157551306469, "cost2_min": -147.18189610466453, "outflow_rate_mean": 1230.1679202229252}, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.018935954198241234, "total_loss": 19.640300750732422, "vf_explained_var": 0.9039518237113953, "cur_lr": 0.0005000000237487257, "entropy": 0.8281762599945068, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 19.645376205444336, "policy_loss": -0.006496872287243605}, "num_steps_trained": 3133804, "update_time_ms": 8.371, "sample_time_ms": 21709.012, "load_time_ms": 16.247, "num_steps_sampled": 3133804, "grad_time_ms": 12400.236}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2365.808641433716, "timestamp": 1558611948, "time_since_restore": 2365.808641433716, "policy_reward_mean": {}, "training_iteration": 70, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa6a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faa58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa438>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3133804, "episodes_total": 3268, "timesteps_total": 3133804, "episode_reward_mean": -554.2840659224552, "episodes_this_iter": 50, "date": "2019-05-23_11-45-48", "time_this_iter_s": 34.27612376213074, "num_metric_batches_dropped": 0, "episode_reward_min": -867.5397133810089}
{"iterations_since_restore": 71, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.419856480899046, "timesteps_this_iter": 44837, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.20046080146108, "cost1_mean": 176.48612516068954, "system_level_velocity_mean": 15.05660254089948, "cost2_mean": -127.1241810706978, "cost2_max": -25.246512251473515, "outflow_rate_max": 1446.7931358264113, "cost1_min": 23.036715396710598, "system_level_velocity_min": 10.255603434227897, "system_level_velocity_max": 18.409041024872625, "outflow_rate_min": 458.6011256799932, "cost2_min": -147.50626884708015, "outflow_rate_mean": 1220.6950381738302}, "episode_len_mean": 317.05, "info": {"default": {"kl": 0.019620461389422417, "total_loss": 18.273792266845703, "vf_explained_var": 0.9110759496688843, "cur_lr": 0.0005000000237487257, "entropy": 0.8138346672058105, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 18.27817153930664, "policy_loss": -0.005852585658431053}, "num_steps_trained": 3178641, "update_time_ms": 8.447, "sample_time_ms": 21716.571, "load_time_ms": 16.574, "num_steps_sampled": 3178641, "grad_time_ms": 12369.135}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2399.635730743408, "timestamp": 1558611982, "time_since_restore": 2399.635730743408, "policy_reward_mean": {}, "training_iteration": 71, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501898>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3178641, "episodes_total": 3313, "timesteps_total": 3178641, "episode_reward_mean": -546.6792953898245, "episodes_this_iter": 45, "date": "2019-05-23_11-46-22", "time_this_iter_s": 33.82708930969238, "num_metric_batches_dropped": 0, "episode_reward_min": -867.5397133810089}
{"iterations_since_restore": 72, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.419856480899046, "timesteps_this_iter": 45654, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.84823092629557, "cost1_mean": 180.67461907743944, "system_level_velocity_mean": 15.218018452978074, "cost2_mean": -126.28230436669452, "cost2_max": -25.246512251473515, "outflow_rate_max": 1446.7931358264113, "cost1_min": 23.036715396710598, "system_level_velocity_min": 11.962779967431247, "system_level_velocity_max": 18.409041024872625, "outflow_rate_min": 458.6011256799932, "cost2_min": -147.50626884708015, "outflow_rate_mean": 1234.3841837312218}, "episode_len_mean": 321.05, "info": {"default": {"kl": 0.019057510420680046, "total_loss": 18.01772689819336, "vf_explained_var": 0.9132770895957947, "cur_lr": 0.0005000000237487257, "entropy": 0.8384069204330444, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 18.023353576660156, "policy_loss": -0.007055354304611683}, "num_steps_trained": 3224295, "update_time_ms": 8.431, "sample_time_ms": 21842.587, "load_time_ms": 15.792, "num_steps_sampled": 3224295, "grad_time_ms": 12309.604}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2433.8479351997375, "timestamp": 1558612016, "time_since_restore": 2433.8479351997375, "policy_reward_mean": {}, "training_iteration": 72, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a0f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3224295, "episodes_total": 3359, "timesteps_total": 3224295, "episode_reward_mean": -543.4187987285183, "episodes_this_iter": 46, "date": "2019-05-23_11-46-56", "time_this_iter_s": 34.212204456329346, "num_metric_batches_dropped": 0, "episode_reward_min": -826.3846226723361}
{"iterations_since_restore": 73, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -293.90427144292863, "timesteps_this_iter": 45301, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.84823092629557, "cost1_mean": 181.2912851703569, "system_level_velocity_mean": 15.079403457293107, "cost2_mean": -126.55629989438584, "cost2_max": -111.77655211976271, "outflow_rate_max": 1446.7931358264113, "cost1_min": 133.27804794415968, "system_level_velocity_min": 11.172980681017147, "system_level_velocity_max": 18.273718014261295, "outflow_rate_min": 1036.3382142857145, "cost2_min": -149.4066053201803, "outflow_rate_mean": 1233.0986377890774}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.019499152898788452, "total_loss": 20.688800811767578, "vf_explained_var": 0.8959956765174866, "cur_lr": 0.0005000000237487257, "entropy": 0.8187121152877808, "cur_kl_coeff": 0.07499999552965164, "vf_loss": 20.69259262084961, "policy_loss": -0.00525372801348567}, "num_steps_trained": 3269596, "update_time_ms": 8.476, "sample_time_ms": 22018.943, "load_time_ms": 15.731, "num_steps_sampled": 3269596, "grad_time_ms": 12305.325}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2469.8810381889343, "timestamp": 1558612052, "time_since_restore": 2469.8810381889343, "policy_reward_mean": {}, "training_iteration": 73, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845081d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508ac8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3269596, "episodes_total": 3406, "timesteps_total": 3269596, "episode_reward_mean": -562.8612083519258, "episodes_this_iter": 47, "date": "2019-05-23_11-47-32", "time_this_iter_s": 36.03310298919678, "num_metric_batches_dropped": 0, "episode_reward_min": -843.2326823658227}
{"iterations_since_restore": 74, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.484307236084458, "timesteps_this_iter": 43996, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.0213805316743, "cost1_mean": 182.04548631047112, "system_level_velocity_mean": 15.384528505133055, "cost2_mean": -124.70948255652303, "cost2_max": -18.421796863527902, "outflow_rate_max": 1453.43639010909, "cost1_min": 17.82104248798692, "system_level_velocity_min": 11.172980681017147, "system_level_velocity_max": 18.474326242155822, "outflow_rate_min": 492.0625426222078, "cost2_min": -149.4066053201803, "outflow_rate_mean": 1244.840023880365}, "episode_len_mean": 320.05, "info": {"default": {"kl": 0.02021867036819458, "total_loss": 17.746904373168945, "vf_explained_var": 0.9093651175498962, "cur_lr": 0.0005000000237487257, "entropy": 0.7980333566665649, "cur_kl_coeff": 0.07499998807907104, "vf_loss": 17.75151824951172, "policy_loss": -0.006128484848886728}, "num_steps_trained": 3313592, "update_time_ms": 8.512, "sample_time_ms": 22252.102, "load_time_ms": 15.614, "num_steps_sampled": 3313592, "grad_time_ms": 12218.117}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2505.094566345215, "timestamp": 1558612087, "time_since_restore": 2505.094566345215, "policy_reward_mean": {}, "training_iteration": 74, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456af60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a9e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3313592, "episodes_total": 3454, "timesteps_total": 3313592, "episode_reward_mean": -526.1206940912484, "episodes_this_iter": 48, "date": "2019-05-23_11-48-07", "time_this_iter_s": 35.21352815628052, "num_metric_batches_dropped": 0, "episode_reward_min": -853.2200800022258}
{"iterations_since_restore": 75, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.484307236084458, "timesteps_this_iter": 44416, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.59233428581223, "cost1_mean": 183.83094748148625, "system_level_velocity_mean": 15.584026484702504, "cost2_mean": -123.35008795456426, "cost2_max": -18.421796863527902, "outflow_rate_max": 1453.43639010909, "cost1_min": 17.82104248798692, "system_level_velocity_min": 11.468527360111834, "system_level_velocity_max": 18.474326242155822, "outflow_rate_min": 492.0625426222078, "cost2_min": -149.4066053201803, "outflow_rate_mean": 1256.8404724657212}, "episode_len_mean": 318.99, "info": {"default": {"kl": 0.017308177426457405, "total_loss": 18.163410186767578, "vf_explained_var": 0.910827100276947, "cur_lr": 0.0005000000237487257, "entropy": 0.817598819732666, "cur_kl_coeff": 0.11249999701976776, "vf_loss": 18.168384552001953, "policy_loss": -0.006921154446899891}, "num_steps_trained": 3358008, "update_time_ms": 8.427, "sample_time_ms": 22355.865, "load_time_ms": 15.308, "num_steps_sampled": 3358008, "grad_time_ms": 12492.968}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2541.5534212589264, "timestamp": 1558612124, "time_since_restore": 2541.5534212589264, "policy_reward_mean": {}, "training_iteration": 75, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f7f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3358008, "episodes_total": 3499, "timesteps_total": 3358008, "episode_reward_mean": -506.21977998420954, "episodes_this_iter": 45, "date": "2019-05-23_11-48-44", "time_this_iter_s": 36.45885491371155, "num_metric_batches_dropped": 0, "episode_reward_min": -861.065765230848}
{"iterations_since_restore": 76, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -116.40649372091596, "timesteps_this_iter": 45862, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.59233428581223, "cost1_mean": 181.18297435174247, "system_level_velocity_mean": 15.217564598411677, "cost2_mean": -125.50149413665237, "cost2_max": -65.87178052155426, "outflow_rate_max": 1449.3151110038607, "cost1_min": 81.87043549620068, "system_level_velocity_min": 11.648403947828573, "system_level_velocity_max": 18.266858865693422, "outflow_rate_min": 741.5185622755598, "cost2_min": -147.4248678538317, "outflow_rate_mean": 1239.2066884495641}, "episode_len_mean": 321.94, "info": {"default": {"kl": 0.02047748677432537, "total_loss": 17.628393173217773, "vf_explained_var": 0.9156028628349304, "cur_lr": 0.0005000000237487257, "entropy": 0.8061287999153137, "cur_kl_coeff": 0.11250000447034836, "vf_loss": 17.633197784423828, "policy_loss": -0.007108994759619236}, "num_steps_trained": 3403870, "update_time_ms": 8.714, "sample_time_ms": 22261.638, "load_time_ms": 14.886, "num_steps_sampled": 3403870, "grad_time_ms": 12254.944}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2574.9043056964874, "timestamp": 1558612157, "time_since_restore": 2574.9043056964874, "policy_reward_mean": {}, "training_iteration": 76, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a0f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ad30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845016d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3403870, "episodes_total": 3547, "timesteps_total": 3403870, "episode_reward_mean": -543.3254994349761, "episodes_this_iter": 48, "date": "2019-05-23_11-49-17", "time_this_iter_s": 33.350884437561035, "num_metric_batches_dropped": 0, "episode_reward_min": -861.065765230848}
{"iterations_since_restore": 77, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -116.40649372091596, "timesteps_this_iter": 43948, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.76987004858495, "cost1_mean": 181.31452066109912, "system_level_velocity_mean": 15.169708520194362, "cost2_mean": -126.58464939684335, "cost2_max": -65.87178052155426, "outflow_rate_max": 1446.5243800779326, "cost1_min": 81.87043549620068, "system_level_velocity_min": 11.648403947828573, "system_level_velocity_max": 18.238366435814857, "outflow_rate_min": 741.5185622755598, "cost2_min": -147.4248678538317, "outflow_rate_mean": 1238.3744525638874}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01629296876490116, "total_loss": 17.035633087158203, "vf_explained_var": 0.9106836915016174, "cur_lr": 0.0005000000237487257, "entropy": 0.7857666015625, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 17.038349151611328, "policy_loss": -0.005466341972351074}, "num_steps_trained": 3447818, "update_time_ms": 8.446, "sample_time_ms": 22178.19, "load_time_ms": 15.668, "num_steps_sampled": 3447818, "grad_time_ms": 12134.343}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2607.5562915802, "timestamp": 1558612190, "time_since_restore": 2607.5562915802, "policy_reward_mean": {}, "training_iteration": 77, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501978>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3447818, "episodes_total": 3592, "timesteps_total": 3447818, "episode_reward_mean": -549.2439665969895, "episodes_this_iter": 45, "date": "2019-05-23_11-49-50", "time_this_iter_s": 32.65198588371277, "num_metric_batches_dropped": 0, "episode_reward_min": -861.065765230848}
{"iterations_since_restore": 78, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -290.66840602285833, "timesteps_this_iter": 45126, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.76987004858495, "cost1_mean": 186.06140596196406, "system_level_velocity_mean": 15.441378157346419, "cost2_mean": -127.00893614717363, "cost2_max": -111.07698503523368, "outflow_rate_max": 1446.5243800779326, "cost1_min": 132.52466426793336, "system_level_velocity_min": 11.116932414865095, "system_level_velocity_max": 18.238366435814857, "outflow_rate_min": 1023.5813851414423, "cost2_min": -147.2206621763458, "outflow_rate_mean": 1256.9258880012069}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015003248117864132, "total_loss": 19.10822868347168, "vf_explained_var": 0.9062511920928955, "cur_lr": 0.0005000000237487257, "entropy": 0.7758715152740479, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 19.110740661621094, "policy_loss": -0.005041233263909817}, "num_steps_trained": 3492944, "update_time_ms": 8.236, "sample_time_ms": 22131.592, "load_time_ms": 15.108, "num_steps_sampled": 3492944, "grad_time_ms": 12052.078}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2640.4135704040527, "timestamp": 1558612223, "time_since_restore": 2640.4135704040527, "policy_reward_mean": {}, "training_iteration": 78, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845019e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845014e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501470>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3492944, "episodes_total": 3639, "timesteps_total": 3492944, "episode_reward_mean": -529.0376177610424, "episodes_this_iter": 47, "date": "2019-05-23_11-50-23", "time_this_iter_s": 32.85727882385254, "num_metric_batches_dropped": 0, "episode_reward_min": -866.0668978732116}
{"iterations_since_restore": 79, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -292.256217123782, "timesteps_this_iter": 45780, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.76987004858495, "cost1_mean": 182.39110548855305, "system_level_velocity_mean": 15.162972330011995, "cost2_mean": -127.68299121863183, "cost2_max": -111.71728910968147, "outflow_rate_max": 1447.4180931589613, "cost1_min": 132.52466426793336, "system_level_velocity_min": 11.116932414865095, "system_level_velocity_max": 18.230774313273503, "outflow_rate_min": 1023.5813851414423, "cost2_min": -147.2206621763458, "outflow_rate_mean": 1239.117016984328}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014692293480038643, "total_loss": 17.417818069458008, "vf_explained_var": 0.9133296608924866, "cur_lr": 0.0005000000237487257, "entropy": 0.7824218273162842, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 17.42107391357422, "policy_loss": -0.0057355728931725025}, "num_steps_trained": 3538724, "update_time_ms": 8.172, "sample_time_ms": 22117.176, "load_time_ms": 15.252, "num_steps_sampled": 3538724, "grad_time_ms": 11975.591}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2673.6141033172607, "timestamp": 1558612256, "time_since_restore": 2673.6141033172607, "policy_reward_mean": {}, "training_iteration": 79, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f25f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fd30>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3538724, "episodes_total": 3685, "timesteps_total": 3538724, "episode_reward_mean": -554.3769340602887, "episodes_this_iter": 46, "date": "2019-05-23_11-50-56", "time_this_iter_s": 33.20053291320801, "num_metric_batches_dropped": 0, "episode_reward_min": -866.0668978732116}
{"iterations_since_restore": 80, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.93173714838477, "timesteps_this_iter": 45357, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.29599496259667, "cost1_mean": 177.62540897187594, "system_level_velocity_mean": 15.051532071520317, "cost2_mean": -125.8629666295725, "cost2_max": -18.947881236197407, "outflow_rate_max": 1449.0057657504751, "cost1_min": 18.625310915415994, "system_level_velocity_min": 11.668188712117846, "system_level_velocity_max": 18.368046118903724, "outflow_rate_min": 497.50056700217027, "cost2_min": -146.501469070822, "outflow_rate_mean": 1220.871724327249}, "episode_len_mean": 320.03, "info": {"default": {"kl": 0.01549768727272749, "total_loss": 17.883024215698242, "vf_explained_var": 0.910123348236084, "cur_lr": 0.0005000000237487257, "entropy": 0.7833946943283081, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 17.88736343383789, "policy_loss": -0.0069540636613965034}, "num_steps_trained": 3584081, "update_time_ms": 8.12, "sample_time_ms": 22237.443, "load_time_ms": 15.123, "num_steps_sampled": 3584081, "grad_time_ms": 11862.287}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2707.9554159641266, "timestamp": 1558612290, "time_since_restore": 2707.9554159641266, "policy_reward_mean": {}, "training_iteration": 80, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845085c0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3584081, "episodes_total": 3733, "timesteps_total": 3584081, "episode_reward_mean": -558.9880687616866, "episodes_this_iter": 48, "date": "2019-05-23_11-51-30", "time_this_iter_s": 34.341312646865845, "num_metric_batches_dropped": 0, "episode_reward_min": -853.2897346492387}
{"iterations_since_restore": 81, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.93173714838477, "timesteps_this_iter": 44273, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.48570346827938, "cost1_mean": 180.2197141859314, "system_level_velocity_mean": 15.35716517512651, "cost2_mean": -124.27735504027272, "cost2_max": -18.947881236197407, "outflow_rate_max": 1450.8621302900196, "cost1_min": 18.625310915415994, "system_level_velocity_min": 11.668188712117846, "system_level_velocity_max": 18.397123842739823, "outflow_rate_min": 497.50056700217027, "cost2_min": -146.0756875899613, "outflow_rate_mean": 1232.8500661700975}, "episode_len_mean": 318.05, "info": {"default": {"kl": 0.01606898568570614, "total_loss": 18.85066795349121, "vf_explained_var": 0.9077000021934509, "cur_lr": 0.0005000000237487257, "entropy": 0.7656964063644409, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 18.853368759155273, "policy_loss": -0.005411971360445023}, "num_steps_trained": 3628354, "update_time_ms": 8.408, "sample_time_ms": 22160.997, "load_time_ms": 15.022, "num_steps_sampled": 3628354, "grad_time_ms": 11897.607}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2741.366317510605, "timestamp": 1558612324, "time_since_restore": 2741.366317510605, "policy_reward_mean": {}, "training_iteration": 81, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa8d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844facc0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3628354, "episodes_total": 3781, "timesteps_total": 3628354, "episode_reward_mean": -531.1482720943951, "episodes_this_iter": 48, "date": "2019-05-23_11-52-04", "time_this_iter_s": 33.41090154647827, "num_metric_batches_dropped": 0, "episode_reward_min": -853.2897346492387}
{"iterations_since_restore": 82, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -111.36732360407422, "timesteps_this_iter": 44462, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.48570346827938, "cost1_mean": 185.82082536492098, "system_level_velocity_mean": 15.540087514575012, "cost2_mean": -125.61394266779006, "cost2_max": -61.9554747443253, "outflow_rate_max": 1450.8621302900196, "cost1_min": 85.40875159378028, "system_level_velocity_min": 11.771786269454452, "system_level_velocity_max": 18.397123842739823, "outflow_rate_min": 808.9666509636618, "cost2_min": -148.24516621112963, "outflow_rate_mean": 1257.7554711882628}, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.013753220438957214, "total_loss": 21.031692504882812, "vf_explained_var": 0.8922401666641235, "cur_lr": 0.0005000000237487257, "entropy": 0.7711710929870605, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 21.034330368041992, "policy_loss": -0.004958807490766048}, "num_steps_trained": 3672816, "update_time_ms": 8.71, "sample_time_ms": 22021.064, "load_time_ms": 15.022, "num_steps_sampled": 3672816, "grad_time_ms": 11959.073}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2774.8115677833557, "timestamp": 1558612357, "time_since_restore": 2774.8115677833557, "policy_reward_mean": {}, "training_iteration": 82, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fe10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fcf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f630>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3672816, "episodes_total": 3827, "timesteps_total": 3672816, "episode_reward_mean": -521.8526580198373, "episodes_this_iter": 46, "date": "2019-05-23_11-52-37", "time_this_iter_s": 33.445250272750854, "num_metric_batches_dropped": 0, "episode_reward_min": -845.0811082338556}
{"iterations_since_restore": 83, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -290.603333729203, "timesteps_this_iter": 45185, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.48570346827938, "cost1_mean": 185.44425562096515, "system_level_velocity_mean": 15.408822203277873, "cost2_mean": -126.44695170940308, "cost2_max": -110.842552454754, "outflow_rate_max": 1450.8621302900196, "cost1_min": 139.3607174851366, "system_level_velocity_min": 11.771786269454452, "system_level_velocity_max": 18.34435202273224, "outflow_rate_min": 1022.1052505199473, "cost2_min": -148.24516621112963, "outflow_rate_mean": 1255.9581262411455}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016387976706027985, "total_loss": 19.585453033447266, "vf_explained_var": 0.9016329646110535, "cur_lr": 0.0005000000237487257, "entropy": 0.759710967540741, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 19.590436935424805, "policy_loss": -0.007748992182314396}, "num_steps_trained": 3718001, "update_time_ms": 8.903, "sample_time_ms": 21779.163, "load_time_ms": 15.296, "num_steps_sampled": 3718001, "grad_time_ms": 11987.251}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2808.7145569324493, "timestamp": 1558612391, "time_since_restore": 2808.7145569324493, "policy_reward_mean": {}, "training_iteration": 83, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845089b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a9e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3718001, "episodes_total": 3873, "timesteps_total": 3718001, "episode_reward_mean": -535.7133143331481, "episodes_this_iter": 46, "date": "2019-05-23_11-53-11", "time_this_iter_s": 33.90298914909363, "num_metric_batches_dropped": 0, "episode_reward_min": -853.4092267888261}
{"iterations_since_restore": 84, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -114.16266862100126, "timesteps_this_iter": 43791, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.9128613001265, "cost1_mean": 184.6118186337844, "system_level_velocity_mean": 15.450726168907183, "cost2_mean": -125.0419494278663, "cost2_max": -64.42808673443045, "outflow_rate_max": 1448.7511681170738, "cost1_min": 85.00754363277302, "system_level_velocity_min": 11.877979702850563, "system_level_velocity_max": 18.242867438158388, "outflow_rate_min": 787.9691062648099, "cost2_min": -145.06119808984246, "outflow_rate_mean": 1252.771072887932}, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.016784539446234703, "total_loss": 18.520427703857422, "vf_explained_var": 0.902852475643158, "cur_lr": 0.0005000000237487257, "entropy": 0.760006308555603, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 18.5247859954834, "policy_loss": -0.00718883378431201}, "num_steps_trained": 3761792, "update_time_ms": 8.57, "sample_time_ms": 21592.778, "load_time_ms": 15.533, "num_steps_sampled": 3761792, "grad_time_ms": 12102.652}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2843.224671125412, "timestamp": 1558612426, "time_since_restore": 2843.224671125412, "policy_reward_mean": {}, "training_iteration": 84, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508d68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845086d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3761792, "episodes_total": 3918, "timesteps_total": 3761792, "episode_reward_mean": -528.7735879146014, "episodes_this_iter": 45, "date": "2019-05-23_11-53-46", "time_this_iter_s": 34.51011419296265, "num_metric_batches_dropped": 0, "episode_reward_min": -853.4092267888261}
{"iterations_since_restore": 85, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -114.16266862100126, "timesteps_this_iter": 45068, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.9128613001265, "cost1_mean": 184.2369678492497, "system_level_velocity_mean": 15.441193273026279, "cost2_mean": -125.3286309876725, "cost2_max": -64.42808673443045, "outflow_rate_max": 1448.7511681170738, "cost1_min": 85.00754363277302, "system_level_velocity_min": 11.662935241847595, "system_level_velocity_max": 18.214807881002613, "outflow_rate_min": 787.9691062648099, "cost2_min": -145.06119808984246, "outflow_rate_mean": 1247.8524203559284}, "episode_len_mean": 322.86, "info": {"default": {"kl": 0.015835173428058624, "total_loss": 17.24376678466797, "vf_explained_var": 0.9120794534683228, "cur_lr": 0.0005000000237487257, "entropy": 0.7564609050750732, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 17.247037887573242, "policy_loss": -0.005943266674876213}, "num_steps_trained": 3806860, "update_time_ms": 8.983, "sample_time_ms": 21588.686, "load_time_ms": 15.797, "num_steps_sampled": 3806860, "grad_time_ms": 11881.253}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2877.4042506217957, "timestamp": 1558612460, "time_since_restore": 2877.4042506217957, "policy_reward_mean": {}, "training_iteration": 85, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f26d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2e48>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3806860, "episodes_total": 3963, "timesteps_total": 3806860, "episode_reward_mean": -531.9731028927606, "episodes_this_iter": 45, "date": "2019-05-23_11-54-20", "time_this_iter_s": 34.17957949638367, "num_metric_batches_dropped": 0, "episode_reward_min": -838.2023921955157}
{"iterations_since_restore": 86, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -282.3150621709105, "timesteps_this_iter": 44491, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.08588722467687, "cost1_mean": 184.98549330505287, "system_level_velocity_mean": 15.39499522166868, "cost2_mean": -126.01583524745585, "cost2_max": -112.27399745218491, "outflow_rate_max": 1448.678924466339, "cost1_min": 137.53561908019887, "system_level_velocity_min": 11.662935241847595, "system_level_velocity_max": 18.18493468662573, "outflow_rate_min": 1057.8589311121912, "cost2_min": -143.79367540158978, "outflow_rate_mean": 1246.843023007358}, "episode_len_mean": 324.84, "info": {"default": {"kl": 0.015573648735880852, "total_loss": 17.71285629272461, "vf_explained_var": 0.9112662076950073, "cur_lr": 0.0005000000237487257, "entropy": 0.7643216252326965, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 17.716428756713867, "policy_loss": -0.006197988521307707}, "num_steps_trained": 3851351, "update_time_ms": 8.769, "sample_time_ms": 21544.915, "load_time_ms": 16.207, "num_steps_sampled": 3851351, "grad_time_ms": 11854.473}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2910.0557312965393, "timestamp": 1558612492, "time_since_restore": 2910.0557312965393, "policy_reward_mean": {}, "training_iteration": 86, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845015f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845014e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845014a8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3851351, "episodes_total": 4011, "timesteps_total": 3851351, "episode_reward_mean": -540.4156167992317, "episodes_this_iter": 48, "date": "2019-05-23_11-54-52", "time_this_iter_s": 32.65148067474365, "num_metric_batches_dropped": 0, "episode_reward_min": -838.2023921955157}
{"iterations_since_restore": 87, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -112.3362292419592, "timesteps_this_iter": 44454, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.08588722467687, "cost1_mean": 184.1530334670723, "system_level_velocity_mean": 15.406726210502226, "cost2_mean": -125.01192088405762, "cost2_max": -60.435630008127184, "outflow_rate_max": 1448.678924466339, "cost1_min": 83.28753579565277, "system_level_velocity_min": 11.619006696584142, "system_level_velocity_max": 18.18493468662573, "outflow_rate_min": 783.0108388393303, "cost2_min": -143.81048349359153, "outflow_rate_mean": 1245.2153809998924}, "episode_len_mean": 322.84, "info": {"default": {"kl": 0.01500337477773428, "total_loss": 19.51682472229004, "vf_explained_var": 0.9009577035903931, "cur_lr": 0.0005000000237487257, "entropy": 0.7585118412971497, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 19.520252227783203, "policy_loss": -0.005958802532404661}, "num_steps_trained": 3895805, "update_time_ms": 8.898, "sample_time_ms": 21536.964, "load_time_ms": 14.946, "num_steps_sampled": 3895805, "grad_time_ms": 11948.874}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2943.56396484375, "timestamp": 1558612526, "time_since_restore": 2943.56396484375, "policy_reward_mean": {}, "training_iteration": 87, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845140f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845147b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514240>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3895805, "episodes_total": 4059, "timesteps_total": 3895805, "episode_reward_mean": -533.0331315825657, "episodes_this_iter": 48, "date": "2019-05-23_11-55-26", "time_this_iter_s": 33.50823354721069, "num_metric_batches_dropped": 0, "episode_reward_min": -838.2023921955157}
{"iterations_since_restore": 88, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -112.3362292419592, "timesteps_this_iter": 45843, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.5943138788814, "cost1_mean": 182.8233184225078, "system_level_velocity_mean": 15.276350306523705, "cost2_mean": -126.31366916098382, "cost2_max": -60.435630008127184, "outflow_rate_max": 1446.598457496852, "cost1_min": 83.28753579565277, "system_level_velocity_min": 11.619006696584142, "system_level_velocity_max": 18.25479262011949, "outflow_rate_min": 783.0108388393303, "cost2_min": -145.31691033863797, "outflow_rate_mean": 1240.3493535470154}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01706770434975624, "total_loss": 14.396446228027344, "vf_explained_var": 0.9306417107582092, "cur_lr": 0.0005000000237487257, "entropy": 0.7768312692642212, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 14.400717735290527, "policy_loss": -0.007150873076170683}, "num_steps_trained": 3941648, "update_time_ms": 8.851, "sample_time_ms": 21574.404, "load_time_ms": 15.399, "num_steps_sampled": 3941648, "grad_time_ms": 11964.629}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 2976.9591751098633, "timestamp": 1558612559, "time_since_restore": 2976.9591751098633, "policy_reward_mean": {}, "training_iteration": 88, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508d68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845085c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508ef0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3941648, "episodes_total": 4102, "timesteps_total": 3941648, "episode_reward_mean": -541.3146865218885, "episodes_this_iter": 43, "date": "2019-05-23_11-55-59", "time_this_iter_s": 33.39521026611328, "num_metric_batches_dropped": 0, "episode_reward_min": -845.5081713794564}
{"iterations_since_restore": 89, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -293.04114548462894, "timesteps_this_iter": 45017, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.05594640361923, "cost1_mean": 183.75582030330506, "system_level_velocity_mean": 15.25946883412885, "cost2_mean": -126.78230035502904, "cost2_max": -110.2444351634721, "outflow_rate_max": 1448.0219723957175, "cost1_min": 137.79731726514632, "system_level_velocity_min": 11.65509082853516, "system_level_velocity_max": 18.25479262011949, "outflow_rate_min": 1061.2565378855943, "cost2_min": -145.31691033863797, "outflow_rate_mean": 1247.996890144418}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013730964623391628, "total_loss": 16.914243698120117, "vf_explained_var": 0.9221737384796143, "cur_lr": 0.0005000000237487257, "entropy": 0.7958092093467712, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 16.917049407958984, "policy_loss": -0.0051232292316854}, "num_steps_trained": 3986665, "update_time_ms": 8.832, "sample_time_ms": 21573.427, "load_time_ms": 15.196, "num_steps_sampled": 3986665, "grad_time_ms": 12036.904}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3010.8880050182343, "timestamp": 1558612593, "time_since_restore": 3010.8880050182343, "policy_reward_mean": {}, "training_iteration": 89, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa4a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fadd8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3986665, "episodes_total": 4150, "timesteps_total": 3986665, "episode_reward_mean": -544.2207416409191, "episodes_this_iter": 48, "date": "2019-05-23_11-56-33", "time_this_iter_s": 33.92882990837097, "num_metric_batches_dropped": 0, "episode_reward_min": -845.5081713794564}
{"iterations_since_restore": 90, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -294.1098578523994, "timesteps_this_iter": 45593, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.79823363371673, "cost1_mean": 181.49598823918666, "system_level_velocity_mean": 15.089890317756588, "cost2_mean": -125.69704747330367, "cost2_max": -110.2444351634721, "outflow_rate_max": 1448.0219723957175, "cost1_min": 142.0865175682996, "system_level_velocity_min": 12.013119602187304, "system_level_velocity_max": 18.227538033586473, "outflow_rate_min": 1061.2565378855943, "cost2_min": -146.66634341808503, "outflow_rate_mean": 1240.8518192355994}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015151308849453926, "total_loss": 16.492799758911133, "vf_explained_var": 0.9229992032051086, "cur_lr": 0.0005000000237487257, "entropy": 0.7967130541801453, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 16.49692153930664, "policy_loss": -0.006677383556962013}, "num_steps_trained": 4032258, "update_time_ms": 8.986, "sample_time_ms": 21387.526, "load_time_ms": 15.155, "num_steps_sampled": 4032258, "grad_time_ms": 12158.725}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3044.5772953033447, "timestamp": 1558612627, "time_since_restore": 3044.5772953033447, "policy_reward_mean": {}, "training_iteration": 90, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f20f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4032258, "episodes_total": 4196, "timesteps_total": 4032258, "episode_reward_mean": -558.0030902880414, "episodes_this_iter": 46, "date": "2019-05-23_11-57-07", "time_this_iter_s": 33.689290285110474, "num_metric_batches_dropped": 0, "episode_reward_min": -820.9094862175695}
{"iterations_since_restore": 91, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -111.56356938649816, "timesteps_this_iter": 44165, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.08642461263474, "cost1_mean": 181.72451059906325, "system_level_velocity_mean": 15.318018067133542, "cost2_mean": -123.50875552051761, "cost2_max": -62.45114786446962, "outflow_rate_max": 1448.6489131172668, "cost1_min": 85.05839963384206, "system_level_velocity_min": 12.013119602187304, "system_level_velocity_max": 18.242310446459488, "outflow_rate_min": 778.3105061954327, "cost2_min": -146.66634341808503, "outflow_rate_mean": 1241.1968895208267}, "episode_len_mean": 321.05, "info": {"default": {"kl": 0.015257680788636208, "total_loss": 18.743179321289062, "vf_explained_var": 0.91032874584198, "cur_lr": 0.0005000000237487257, "entropy": 0.7770971059799194, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 18.747373580932617, "policy_loss": -0.0067687020637094975}, "num_steps_trained": 4076423, "update_time_ms": 8.738, "sample_time_ms": 21253.844, "load_time_ms": 14.954, "num_steps_sampled": 4076423, "grad_time_ms": 12245.142}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3077.5053396224976, "timestamp": 1558612660, "time_since_restore": 3077.5053396224976, "policy_reward_mean": {}, "training_iteration": 91, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845015f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501cc0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4076423, "episodes_total": 4244, "timesteps_total": 4076423, "episode_reward_mean": -535.9704426681204, "episodes_this_iter": 48, "date": "2019-05-23_11-57-40", "time_this_iter_s": 32.92804431915283, "num_metric_batches_dropped": 0, "episode_reward_min": -822.6521460084381}
{"iterations_since_restore": 92, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -111.56356938649816, "timesteps_this_iter": 44926, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.82397452652884, "cost1_mean": 184.4175498165617, "system_level_velocity_mean": 15.519009265126728, "cost2_mean": -124.79344897705538, "cost2_max": -62.45114786446962, "outflow_rate_max": 1448.6489131172668, "cost1_min": 85.05839963384206, "system_level_velocity_min": 11.892956304885328, "system_level_velocity_max": 18.29169074348683, "outflow_rate_min": 778.3105061954327, "cost2_min": -147.46081938795976, "outflow_rate_mean": 1255.0191117302695}, "episode_len_mean": 321.05, "info": {"default": {"kl": 0.01541720237582922, "total_loss": 15.648563385009766, "vf_explained_var": 0.9217730760574341, "cur_lr": 0.0005000000237487257, "entropy": 0.7747045755386353, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 15.65214729309082, "policy_loss": -0.006184470374137163}, "num_steps_trained": 4121349, "update_time_ms": 8.523, "sample_time_ms": 21219.091, "load_time_ms": 15.581, "num_steps_sampled": 4121349, "grad_time_ms": 12329.851}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3111.4568934440613, "timestamp": 1558612694, "time_since_restore": 3111.4568934440613, "policy_reward_mean": {}, "training_iteration": 92, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f1d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fd68>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4121349, "episodes_total": 4290, "timesteps_total": 4121349, "episode_reward_mean": -517.1676966767275, "episodes_this_iter": 46, "date": "2019-05-23_11-58-14", "time_this_iter_s": 33.95155382156372, "num_metric_batches_dropped": 0, "episode_reward_min": -822.6521460084381}
{"iterations_since_restore": 93, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.388705108604164, "timesteps_this_iter": 45282, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.82397452652884, "cost1_mean": 180.807935422386, "system_level_velocity_mean": 15.163638751072058, "cost2_mean": -127.07948807089774, "cost2_max": -22.699252671337934, "outflow_rate_max": 1447.494731938976, "cost1_min": 23.039683136563372, "system_level_velocity_min": 11.892956304885328, "system_level_velocity_max": 18.548012455947106, "outflow_rate_min": 491.2472742482783, "cost2_min": -147.46081938795976, "outflow_rate_mean": 1240.1178039060815}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.015532354824244976, "total_loss": 12.951605796813965, "vf_explained_var": 0.9382560849189758, "cur_lr": 0.0005000000237487257, "entropy": 0.7885197401046753, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 12.956594467163086, "policy_loss": -0.007608138956129551}, "num_steps_trained": 4166631, "update_time_ms": 8.319, "sample_time_ms": 21247.183, "load_time_ms": 14.785, "num_steps_sampled": 4166631, "grad_time_ms": 12321.149}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3145.5421121120453, "timestamp": 1558612728, "time_since_restore": 3145.5421121120453, "policy_reward_mean": {}, "training_iteration": 93, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845082e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508748>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4166631, "episodes_total": 4336, "timesteps_total": 4166631, "episode_reward_mean": -544.4741914541786, "episodes_this_iter": 46, "date": "2019-05-23_11-58-48", "time_this_iter_s": 34.08521866798401, "num_metric_batches_dropped": 0, "episode_reward_min": -821.5239389271645}
{"iterations_since_restore": 94, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.540108430768427, "timesteps_this_iter": 45434, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.85344226073232, "cost1_mean": 178.2043123210193, "system_level_velocity_mean": 15.108316092656658, "cost2_mean": -125.70128045234046, "cost2_max": -20.731851667095007, "outflow_rate_max": 1446.7966818772431, "cost1_min": 17.81047468876685, "system_level_velocity_min": 11.664422103863103, "system_level_velocity_max": 18.548012455947106, "outflow_rate_min": 440.0050268646629, "cost2_min": -146.65751578327152, "outflow_rate_mean": 1223.3011578706435}, "episode_len_mean": 319.12, "info": {"default": {"kl": 0.014632354490458965, "total_loss": 16.138574600219727, "vf_explained_var": 0.9238916635513306, "cur_lr": 0.0005000000237487257, "entropy": 0.7923445105552673, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 16.142080307006836, "policy_loss": -0.005975660402327776}, "num_steps_trained": 4212065, "update_time_ms": 8.249, "sample_time_ms": 21369.498, "load_time_ms": 14.03, "num_steps_sampled": 4212065, "grad_time_ms": 12261.082}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3180.655485868454, "timestamp": 1558612763, "time_since_restore": 3180.655485868454, "policy_reward_mean": {}, "training_iteration": 94, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456af60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845142e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4212065, "episodes_total": 4386, "timesteps_total": 4212065, "episode_reward_mean": -546.6350749289239, "episodes_this_iter": 50, "date": "2019-05-23_11-59-23", "time_this_iter_s": 35.11337375640869, "num_metric_batches_dropped": 0, "episode_reward_min": -853.2934451751581}
{"iterations_since_restore": 95, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.540108430768427, "timesteps_this_iter": 44305, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.77730972007768, "cost1_mean": 182.0117094787048, "system_level_velocity_mean": 15.262541953598577, "cost2_mean": -125.44290943729335, "cost2_max": -20.731851667095007, "outflow_rate_max": 1445.619574054472, "cost1_min": 17.81047468876685, "system_level_velocity_min": 11.664422103863103, "system_level_velocity_max": 18.282844545695475, "outflow_rate_min": 440.0050268646629, "cost2_min": -147.04587462533271, "outflow_rate_mean": 1240.3210043929957}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.016903996467590332, "total_loss": 14.917559623718262, "vf_explained_var": 0.9259768128395081, "cur_lr": 0.0005000000237487257, "entropy": 0.7634069919586182, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 14.921098709106445, "policy_loss": -0.0063926903530955315}, "num_steps_trained": 4256370, "update_time_ms": 7.831, "sample_time_ms": 21327.728, "load_time_ms": 14.154, "num_steps_sampled": 4256370, "grad_time_ms": 12208.205}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3213.8952412605286, "timestamp": 1558612797, "time_since_restore": 3213.8952412605286, "policy_reward_mean": {}, "training_iteration": 95, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508240>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4256370, "episodes_total": 4431, "timesteps_total": 4256370, "episode_reward_mean": -538.1673538839824, "episodes_this_iter": 45, "date": "2019-05-23_11-59-57", "time_this_iter_s": 33.239755392074585, "num_metric_batches_dropped": 0, "episode_reward_min": -853.2934451751581}
{"iterations_since_restore": 96, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -291.24715830027236, "timesteps_this_iter": 45231, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.92615606611702, "cost1_mean": 184.63558537718055, "system_level_velocity_mean": 15.324648086576138, "cost2_mean": -125.9071746026165, "cost2_max": -110.49411903963289, "outflow_rate_max": 1447.4287420065248, "cost1_min": 140.2772737095553, "system_level_velocity_min": 11.763951987223072, "system_level_velocity_max": 18.282844545695475, "outflow_rate_min": 1044.4885714285715, "cost2_min": -147.04587462533271, "outflow_rate_mean": 1251.7200718207232}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01795780658721924, "total_loss": 18.06095314025879, "vf_explained_var": 0.9126465916633606, "cur_lr": 0.0005000000237487257, "entropy": 0.7673898339271545, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 18.065412521362305, "policy_loss": -0.007488477509468794}, "num_steps_trained": 4301601, "update_time_ms": 7.757, "sample_time_ms": 21353.668, "load_time_ms": 14.223, "num_steps_sampled": 4301601, "grad_time_ms": 12279.495}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3247.5317947864532, "timestamp": 1558612830, "time_since_restore": 3247.5317947864532, "policy_reward_mean": {}, "training_iteration": 96, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514c88>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4301601, "episodes_total": 4476, "timesteps_total": 4301601, "episode_reward_mean": -538.439940345968, "episodes_this_iter": 45, "date": "2019-05-23_12-00-30", "time_this_iter_s": 33.63655352592468, "num_metric_batches_dropped": 0, "episode_reward_min": -853.1802995904632}
{"iterations_since_restore": 97, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -112.39557591242719, "timesteps_this_iter": 45793, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.92615606611702, "cost1_mean": 179.4064430191955, "system_level_velocity_mean": 15.007359281892798, "cost2_mean": -127.58256000682317, "cost2_max": -62.950464294354965, "outflow_rate_max": 1447.4287420065248, "cost1_min": 85.24026150339971, "system_level_velocity_min": 11.763951987223072, "system_level_velocity_max": 18.25169282716029, "outflow_rate_min": 793.8910858961816, "cost2_min": -147.73362895605476, "outflow_rate_mean": 1227.3204515346347}, "episode_len_mean": 323.02, "info": {"default": {"kl": 0.017011987045407295, "total_loss": 14.551262855529785, "vf_explained_var": 0.9310601949691772, "cur_lr": 0.0005000000237487257, "entropy": 0.764885663986206, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 14.556041717529297, "policy_loss": -0.007650603074580431}, "num_steps_trained": 4347394, "update_time_ms": 8.126, "sample_time_ms": 21359.904, "load_time_ms": 15.668, "num_steps_sampled": 4347394, "grad_time_ms": 12321.172}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3281.5462460517883, "timestamp": 1558612864, "time_since_restore": 3281.5462460517883, "policy_reward_mean": {}, "training_iteration": 97, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514390>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4347394, "episodes_total": 4524, "timesteps_total": 4347394, "episode_reward_mean": -562.1255505108962, "episodes_this_iter": 48, "date": "2019-05-23_12-01-04", "time_this_iter_s": 34.01445126533508, "num_metric_batches_dropped": 0, "episode_reward_min": -853.1802995904632}
{"iterations_since_restore": 98, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.51683906187714, "timesteps_this_iter": 44783, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.83521776210569, "cost1_mean": 180.4682713193251, "system_level_velocity_mean": 15.200903591403483, "cost2_mean": -126.82871402387147, "cost2_max": -57.395329485926716, "outflow_rate_max": 1446.9887355274054, "cost1_min": 78.3132086043726, "system_level_velocity_min": 11.855020609184551, "system_level_velocity_max": 18.25169282716029, "outflow_rate_min": 768.068681400158, "cost2_min": -147.73362895605476, "outflow_rate_mean": 1234.3941701934095}, "episode_len_mean": 320.94, "info": {"default": {"kl": 0.016884375363588333, "total_loss": 15.418861389160156, "vf_explained_var": 0.925467848777771, "cur_lr": 0.0005000000237487257, "entropy": 0.7646234035491943, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 15.424715042114258, "policy_loss": -0.008702488616108894}, "num_steps_trained": 4392177, "update_time_ms": 8.253, "sample_time_ms": 21260.869, "load_time_ms": 15.819, "num_steps_sampled": 4392177, "grad_time_ms": 12436.675}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3315.1031398773193, "timestamp": 1558612898, "time_since_restore": 3315.1031398773193, "policy_reward_mean": {}, "training_iteration": 98, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fae10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fb70>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4392177, "episodes_total": 4568, "timesteps_total": 4392177, "episode_reward_mean": -541.1458679724387, "episodes_this_iter": 44, "date": "2019-05-23_12-01-38", "time_this_iter_s": 33.556893825531006, "num_metric_batches_dropped": 0, "episode_reward_min": -827.6503670845646}
{"iterations_since_restore": 99, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.51683906187714, "timesteps_this_iter": 44475, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.58292445537137, "cost1_mean": 184.1736919953757, "system_level_velocity_mean": 15.390358641668085, "cost2_mean": -127.00218345319996, "cost2_max": -57.395329485926716, "outflow_rate_max": 1448.6557627869975, "cost1_min": 78.3132086043726, "system_level_velocity_min": 11.850929612576742, "system_level_velocity_max": 18.289086633565294, "outflow_rate_min": 768.068681400158, "cost2_min": -146.86228479284028, "outflow_rate_mean": 1251.5394316856741}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.017419667914509773, "total_loss": 14.348379135131836, "vf_explained_var": 0.9302331209182739, "cur_lr": 0.0005000000237487257, "entropy": 0.7314264178276062, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 14.350653648376465, "policy_loss": -0.005213139578700066}, "num_steps_trained": 4436652, "update_time_ms": 8.252, "sample_time_ms": 21107.991, "load_time_ms": 16.089, "num_steps_sampled": 4436652, "grad_time_ms": 12491.363}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3348.041440486908, "timestamp": 1558612931, "time_since_restore": 3348.041440486908, "policy_reward_mean": {}, "training_iteration": 99, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508278>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4436652, "episodes_total": 4614, "timesteps_total": 4436652, "episode_reward_mean": -526.8588629932854, "episodes_this_iter": 46, "date": "2019-05-23_12-02-11", "time_this_iter_s": 32.93830060958862, "num_metric_batches_dropped": 0, "episode_reward_min": -834.3417788242625}
{"iterations_since_restore": 100, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -113.12465442115446, "timesteps_this_iter": 45894, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.58292445537137, "cost1_mean": 181.57121411344468, "system_level_velocity_mean": 15.196219233182624, "cost2_mean": -126.89478982556868, "cost2_max": -64.0388103246994, "outflow_rate_max": 1448.6557627869975, "cost1_min": 87.17632270749846, "system_level_velocity_min": 11.850929612576742, "system_level_velocity_max": 18.289086633565294, "outflow_rate_min": 813.1987001408198, "cost2_min": -146.86228479284028, "outflow_rate_mean": 1237.3504256360318}, "episode_len_mean": 323.05, "info": {"default": {"kl": 0.015682769939303398, "total_loss": 16.16704559326172, "vf_explained_var": 0.9255396723747253, "cur_lr": 0.0005000000237487257, "entropy": 0.7715991139411926, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 16.171415328979492, "policy_loss": -0.007015829440206289}, "num_steps_trained": 4482546, "update_time_ms": 8.486, "sample_time_ms": 21087.389, "load_time_ms": 15.31, "num_steps_sampled": 4482546, "grad_time_ms": 12541.416}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3382.0176351070404, "timestamp": 1558612965, "time_since_restore": 3382.0176351070404, "policy_reward_mean": {}, "training_iteration": 100, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845140b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845149b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514048>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4482546, "episodes_total": 4665, "timesteps_total": 4482546, "episode_reward_mean": -545.6624609558253, "episodes_this_iter": 51, "date": "2019-05-23_12-02-45", "time_this_iter_s": 33.976194620132446, "num_metric_batches_dropped": 0, "episode_reward_min": -834.3417788242625}
{"iterations_since_restore": 101, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -113.12465442115446, "timesteps_this_iter": 45520, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.7372017115653, "cost1_mean": 180.67135711380953, "system_level_velocity_mean": 15.12695123681744, "cost2_mean": -126.5672436003515, "cost2_max": -64.0388103246994, "outflow_rate_max": 1445.3743525949703, "cost1_min": 87.17632270749846, "system_level_velocity_min": 11.710175197163835, "system_level_velocity_max": 18.25622158779603, "outflow_rate_min": 813.1987001408198, "cost2_min": -146.85633164454813, "outflow_rate_mean": 1228.8178090022864}, "episode_len_mean": 323.05, "info": {"default": {"kl": 0.017673630267381668, "total_loss": 17.347450256347656, "vf_explained_var": 0.9118947982788086, "cur_lr": 0.0005000000237487257, "entropy": 0.754076361656189, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 17.350494384765625, "policy_loss": -0.006026329938322306}, "num_steps_trained": 4528066, "update_time_ms": 8.269, "sample_time_ms": 21089.268, "load_time_ms": 15.654, "num_steps_sampled": 4528066, "grad_time_ms": 12533.981}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3414.9054164886475, "timestamp": 1558612998, "time_since_restore": 3414.9054164886475, "policy_reward_mean": {}, "training_iteration": 101, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508160>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4528066, "episodes_total": 4708, "timesteps_total": 4528066, "episode_reward_mean": -554.743224038654, "episodes_this_iter": 43, "date": "2019-05-23_12-03-18", "time_this_iter_s": 32.887781381607056, "num_metric_batches_dropped": 0, "episode_reward_min": -855.9901356030999}
{"iterations_since_restore": 102, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -286.4386155145565, "timesteps_this_iter": 43593, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.3765301887215, "cost1_mean": 184.80981061152198, "system_level_velocity_mean": 15.339975383068424, "cost2_mean": -127.77137254358655, "cost2_max": -108.21117209890127, "outflow_rate_max": 1446.7774180327863, "cost1_min": 139.3840166630009, "system_level_velocity_min": 11.710175197163835, "system_level_velocity_max": 18.27729633573454, "outflow_rate_min": 1015.5445605661621, "cost2_min": -149.40849631650724, "outflow_rate_mean": 1249.5580518827803}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01703520677983761, "total_loss": 13.097590446472168, "vf_explained_var": 0.9321890473365784, "cur_lr": 0.0005000000237487257, "entropy": 0.7450448274612427, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 13.101404190063477, "policy_loss": -0.006689243484288454}, "num_steps_trained": 4571659, "update_time_ms": 8.261, "sample_time_ms": 21089.636, "load_time_ms": 16.024, "num_steps_sampled": 4571659, "grad_time_ms": 12405.709}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3447.563675880432, "timestamp": 1558613030, "time_since_restore": 3447.563675880432, "policy_reward_mean": {}, "training_iteration": 102, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faa58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fac18>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4571659, "episodes_total": 4754, "timesteps_total": 4571659, "episode_reward_mean": -537.2657653412577, "episodes_this_iter": 46, "date": "2019-05-23_12-03-50", "time_this_iter_s": 32.65825939178467, "num_metric_batches_dropped": 0, "episode_reward_min": -855.9901356030999}
{"iterations_since_restore": 103, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -286.4386155145565, "timesteps_this_iter": 44591, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.41964586094036, "cost1_mean": 185.42723982491555, "system_level_velocity_mean": 15.401008947937216, "cost2_mean": -125.98827818663175, "cost2_max": -108.21117209890127, "outflow_rate_max": 1446.7774180327863, "cost1_min": 142.63501600773574, "system_level_velocity_min": 11.955136740443423, "system_level_velocity_max": 18.284028208736792, "outflow_rate_min": 1059.1156053541886, "cost2_min": -149.40849631650724, "outflow_rate_mean": 1261.839199808679}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01696128025650978, "total_loss": 15.480581283569336, "vf_explained_var": 0.927956223487854, "cur_lr": 0.0005000000237487257, "entropy": 0.7802317142486572, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 15.484989166259766, "policy_loss": -0.007271296810358763}, "num_steps_trained": 4616250, "update_time_ms": 8.389, "sample_time_ms": 21157.717, "load_time_ms": 16.833, "num_steps_sampled": 4616250, "grad_time_ms": 12430.041}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3482.6061305999756, "timestamp": 1558613066, "time_since_restore": 3482.6061305999756, "policy_reward_mean": {}, "training_iteration": 103, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845080f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508630>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4616250, "episodes_total": 4802, "timesteps_total": 4616250, "episode_reward_mean": -528.5265663407553, "episodes_this_iter": 48, "date": "2019-05-23_12-04-26", "time_this_iter_s": 35.04245471954346, "num_metric_batches_dropped": 0, "episode_reward_min": -826.2091202124226}
{"iterations_since_restore": 104, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -290.1649273934069, "timesteps_this_iter": 44430, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.41964586094036, "cost1_mean": 185.83792175467244, "system_level_velocity_mean": 15.433005250138788, "cost2_mean": -124.9247146939901, "cost2_max": -109.39759385084109, "outflow_rate_max": 1446.7774180327863, "cost1_min": 143.44400953559776, "system_level_velocity_min": 12.059321294049273, "system_level_velocity_max": 18.284028208736792, "outflow_rate_min": 1068.7173258733656, "cost2_min": -145.81879659523665, "outflow_rate_mean": 1263.803979802844}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015605788677930832, "total_loss": 17.804676055908203, "vf_explained_var": 0.9184874892234802, "cur_lr": 0.0005000000237487257, "entropy": 0.7744035124778748, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 17.80731773376465, "policy_loss": -0.005273404531180859}, "num_steps_trained": 4660680, "update_time_ms": 9.028, "sample_time_ms": 20949.054, "load_time_ms": 17.473, "num_steps_sampled": 4660680, "grad_time_ms": 12431.756}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3515.6820459365845, "timestamp": 1558613099, "time_since_restore": 3515.6820459365845, "policy_reward_mean": {}, "training_iteration": 104, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514b00>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4660680, "episodes_total": 4848, "timesteps_total": 4660680, "episode_reward_mean": -525.9316214592532, "episodes_this_iter": 46, "date": "2019-05-23_12-04-59", "time_this_iter_s": 33.07591533660889, "num_metric_batches_dropped": 0, "episode_reward_min": -815.8116163825459}
{"iterations_since_restore": 105, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -292.7098407026599, "timesteps_this_iter": 45983, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.03595902066425, "cost1_mean": 183.1182843721159, "system_level_velocity_mean": 15.194384118727488, "cost2_mean": -126.20056942093977, "cost2_max": -109.73164385456155, "outflow_rate_max": 1448.2864429230185, "cost1_min": 140.48003604343336, "system_level_velocity_min": 11.665080745956725, "system_level_velocity_max": 18.262877501667738, "outflow_rate_min": 1082.0460736747527, "cost2_min": -146.39702498301503, "outflow_rate_mean": 1248.1191235841832}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017742542549967766, "total_loss": 13.220142364501953, "vf_explained_var": 0.9374641180038452, "cur_lr": 0.0005000000237487257, "entropy": 0.7851814031600952, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 13.224303245544434, "policy_loss": -0.007155316881835461}, "num_steps_trained": 4706663, "update_time_ms": 9.414, "sample_time_ms": 20898.781, "load_time_ms": 17.413, "num_steps_sampled": 4706663, "grad_time_ms": 12578.159}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3549.884627342224, "timestamp": 1558613133, "time_since_restore": 3549.884627342224, "policy_reward_mean": {}, "training_iteration": 105, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa518>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4706663, "episodes_total": 4893, "timesteps_total": 4706663, "episode_reward_mean": -545.2188606124245, "episodes_this_iter": 45, "date": "2019-05-23_12-05-33", "time_this_iter_s": 34.20258140563965, "num_metric_batches_dropped": 0, "episode_reward_min": -814.4446594018867}
{"iterations_since_restore": 106, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -108.72492914840299, "timesteps_this_iter": 45853, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.03595902066425, "cost1_mean": 177.26720316836202, "system_level_velocity_mean": 14.941879041887983, "cost2_mean": -126.51118551397204, "cost2_max": -59.606474780711515, "outflow_rate_max": 1448.2864429230185, "cost1_min": 83.73609785019492, "system_level_velocity_min": 10.826775902469201, "system_level_velocity_max": 18.437072327226176, "outflow_rate_min": 809.9666690570984, "cost2_min": -146.39702498301503, "outflow_rate_mean": 1216.2053168466232}, "episode_len_mean": 321.05, "info": {"default": {"kl": 0.017237676307559013, "total_loss": 17.659029006958008, "vf_explained_var": 0.9163690209388733, "cur_lr": 0.0005000000237487257, "entropy": 0.8060067296028137, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 17.662721633911133, "policy_loss": -0.006602741312235594}, "num_steps_trained": 4752516, "update_time_ms": 9.43, "sample_time_ms": 20837.971, "load_time_ms": 17.396, "num_steps_sampled": 4752516, "grad_time_ms": 12667.352}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3583.7970650196075, "timestamp": 1558613167, "time_since_restore": 3583.7970650196075, "policy_reward_mean": {}, "training_iteration": 106, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508278>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4752516, "episodes_total": 4940, "timesteps_total": 4752516, "episode_reward_mean": -564.7157535452976, "episodes_this_iter": 47, "date": "2019-05-23_12-06-07", "time_this_iter_s": 33.91243767738342, "num_metric_batches_dropped": 0, "episode_reward_min": -837.0587291289565}
{"iterations_since_restore": 107, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -98.17307840724094, "timesteps_this_iter": 45310, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.25760650916416, "cost1_mean": 176.88532329810016, "system_level_velocity_mean": 15.04204324473943, "cost2_mean": -124.07081705508745, "cost2_max": -56.323434971214326, "outflow_rate_max": 1446.0883164436577, "cost1_min": 78.27810248726087, "system_level_velocity_min": 10.826775902469201, "system_level_velocity_max": 18.437072327226176, "outflow_rate_min": 775.6470377503667, "cost2_min": -144.48155974982598, "outflow_rate_mean": 1215.8862850613175}, "episode_len_mean": 318.97, "info": {"default": {"kl": 0.015719156712293625, "total_loss": 14.108711242675781, "vf_explained_var": 0.9343219995498657, "cur_lr": 0.0005000000237487257, "entropy": 0.802531361579895, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 14.113099098205566, "policy_loss": -0.007039765827357769}, "num_steps_trained": 4797826, "update_time_ms": 9.166, "sample_time_ms": 20777.359, "load_time_ms": 17.741, "num_steps_sampled": 4797826, "grad_time_ms": 12674.557}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3617.2654087543488, "timestamp": 1558613200, "time_since_restore": 3617.2654087543488, "policy_reward_mean": {}, "training_iteration": 107, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514518>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514b00>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4797826, "episodes_total": 4991, "timesteps_total": 4797826, "episode_reward_mean": -556.0560379926361, "episodes_this_iter": 51, "date": "2019-05-23_12-06-40", "time_this_iter_s": 33.46834373474121, "num_metric_batches_dropped": 0, "episode_reward_min": -837.0587291289565}
{"iterations_since_restore": 108, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -98.17307840724094, "timesteps_this_iter": 44954, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.25760650916416, "cost1_mean": 176.54004626431131, "system_level_velocity_mean": 15.10663911205944, "cost2_mean": -123.39422798575781, "cost2_max": -56.323434971214326, "outflow_rate_max": 1446.0883164436577, "cost1_min": 78.27810248726087, "system_level_velocity_min": 11.920138093418776, "system_level_velocity_max": 18.459531626370985, "outflow_rate_min": 775.6470377503667, "cost2_min": -147.4932745645254, "outflow_rate_mean": 1217.347846002709}, "episode_len_mean": 316.99, "info": {"default": {"kl": 0.01584772579371929, "total_loss": 16.48432731628418, "vf_explained_var": 0.9280285835266113, "cur_lr": 0.0005000000237487257, "entropy": 0.7821050882339478, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 16.487199783325195, "policy_loss": -0.005545517895370722}, "num_steps_trained": 4842780, "update_time_ms": 9.136, "sample_time_ms": 20826.459, "load_time_ms": 17.062, "num_steps_sampled": 4842780, "grad_time_ms": 12570.221}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3650.254497051239, "timestamp": 1558613233, "time_since_restore": 3650.254497051239, "policy_reward_mean": {}, "training_iteration": 108, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501400>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4842780, "episodes_total": 5036, "timesteps_total": 4842780, "episode_reward_mean": -546.534248583129, "episodes_this_iter": 45, "date": "2019-05-23_12-07-13", "time_this_iter_s": 32.98908829689026, "num_metric_batches_dropped": 0, "episode_reward_min": -807.919438192623}
{"iterations_since_restore": 109, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -98.17307840724094, "timesteps_this_iter": 44208, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.22533643673614, "cost1_mean": 179.65897187356245, "system_level_velocity_mean": 15.359080494875133, "cost2_mean": -123.14113486133282, "cost2_max": -56.323434971214326, "outflow_rate_max": 1448.1961255218405, "cost1_min": 78.27810248726087, "system_level_velocity_min": 12.196348840507703, "system_level_velocity_max": 18.459531626370985, "outflow_rate_min": 775.6470377503667, "cost2_min": -147.4932745645254, "outflow_rate_mean": 1230.0125074919183}, "episode_len_mean": 316.99, "info": {"default": {"kl": 0.016387851908802986, "total_loss": 16.260456085205078, "vf_explained_var": 0.9242960810661316, "cur_lr": 0.0005000000237487257, "entropy": 0.7668358683586121, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 16.26390838623047, "policy_loss": -0.006216567009687424}, "num_steps_trained": 4886988, "update_time_ms": 9.024, "sample_time_ms": 21045.989, "load_time_ms": 17.172, "num_steps_sampled": 4886988, "grad_time_ms": 12446.492}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3684.164804458618, "timestamp": 1558613267, "time_since_restore": 3684.164804458618, "policy_reward_mean": {}, "training_iteration": 109, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845146a0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4886988, "episodes_total": 5079, "timesteps_total": 4886988, "episode_reward_mean": -528.0531547253264, "episodes_this_iter": 43, "date": "2019-05-23_12-07-47", "time_this_iter_s": 33.91030740737915, "num_metric_batches_dropped": 0, "episode_reward_min": -791.6296383009466}
{"iterations_since_restore": 110, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -113.51006035965953, "timesteps_this_iter": 45873, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.79125527000824, "cost1_mean": 182.47354304341354, "system_level_velocity_mean": 15.274883756815008, "cost2_mean": -124.05623135303718, "cost2_max": -61.97480880461689, "outflow_rate_max": 1448.1961255218405, "cost1_min": 87.59848370115469, "system_level_velocity_min": 11.191699513631612, "system_level_velocity_max": 18.459531626370985, "outflow_rate_min": 826.124258454228, "cost2_min": -143.51667943776232, "outflow_rate_mean": 1245.1875910227195}, "episode_len_mean": 323.05, "info": {"default": {"kl": 0.01837613433599472, "total_loss": 18.548234939575195, "vf_explained_var": 0.9122171401977539, "cur_lr": 0.0005000000237487257, "entropy": 0.7965793609619141, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 18.552494049072266, "policy_loss": -0.007362251169979572}, "num_steps_trained": 4932861, "update_time_ms": 8.831, "sample_time_ms": 21159.353, "load_time_ms": 17.926, "num_steps_sampled": 4932861, "grad_time_ms": 12392.719}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3718.7450580596924, "timestamp": 1558613302, "time_since_restore": 3718.7450580596924, "policy_reward_mean": {}, "training_iteration": 110, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faeb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa6d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5c0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4932861, "episodes_total": 5129, "timesteps_total": 4932861, "episode_reward_mean": -540.640515272065, "episodes_this_iter": 50, "date": "2019-05-23_12-08-22", "time_this_iter_s": 34.58025360107422, "num_metric_batches_dropped": 0, "episode_reward_min": -829.4172506881777}
{"iterations_since_restore": 111, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -295.9134287319733, "timesteps_this_iter": 45710, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.36228023166444, "cost1_mean": 178.77988396680988, "system_level_velocity_mean": 14.885845496910488, "cost2_mean": -126.0734270458242, "cost2_max": -112.73123650322115, "outflow_rate_max": 1445.7999846146881, "cost1_min": 131.91067117360245, "system_level_velocity_min": 11.191699513631612, "system_level_velocity_max": 18.19567752485366, "outflow_rate_min": 1061.7160991314763, "cost2_min": -145.38806476116486, "outflow_rate_mean": 1227.1432968756033}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01825106143951416, "total_loss": 15.605491638183594, "vf_explained_var": 0.9279171228408813, "cur_lr": 0.0005000000237487257, "entropy": 0.7780283093452454, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 15.609435081481934, "policy_loss": -0.007023762445896864}, "num_steps_trained": 4978571, "update_time_ms": 9.031, "sample_time_ms": 21227.891, "load_time_ms": 17.772, "num_steps_sampled": 4978571, "grad_time_ms": 12404.773}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3752.4321722984314, "timestamp": 1558613336, "time_since_restore": 3752.4321722984314, "policy_reward_mean": {}, "training_iteration": 111, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fab00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa438>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4978571, "episodes_total": 5174, "timesteps_total": 4978571, "episode_reward_mean": -574.8276520178722, "episodes_this_iter": 45, "date": "2019-05-23_12-08-56", "time_this_iter_s": 33.687114238739014, "num_metric_batches_dropped": 0, "episode_reward_min": -829.4172506881777}
{"iterations_since_restore": 112, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.843464870273994, "timesteps_this_iter": 45557, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.36228023166444, "cost1_mean": 176.90789551823332, "system_level_velocity_mean": 14.9044809801705, "cost2_mean": -125.27992238316355, "cost2_max": -20.584209716315932, "outflow_rate_max": 1449.1530847145489, "cost1_min": 18.03227223012365, "system_level_velocity_min": 11.585277280398678, "system_level_velocity_max": 18.13302606727504, "outflow_rate_min": 444.6769763958757, "cost2_min": -145.38806476116486, "outflow_rate_mean": 1216.5622524907587}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.017862647771835327, "total_loss": 16.97814178466797, "vf_explained_var": 0.9185314774513245, "cur_lr": 0.0005000000237487257, "entropy": 0.7774353623390198, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 16.981645584106445, "policy_loss": -0.006520501803606749}, "num_steps_trained": 5024128, "update_time_ms": 9.049, "sample_time_ms": 21300.889, "load_time_ms": 17.754, "num_steps_sampled": 5024128, "grad_time_ms": 12709.861}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3788.8901562690735, "timestamp": 1558613372, "time_since_restore": 3788.8901562690735, "policy_reward_mean": {}, "training_iteration": 112, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845080b8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5024128, "episodes_total": 5219, "timesteps_total": 5024128, "episode_reward_mean": -574.1365344474851, "episodes_this_iter": 45, "date": "2019-05-23_12-09-32", "time_this_iter_s": 36.45798397064209, "num_metric_batches_dropped": 0, "episode_reward_min": -859.965072049523}
{"iterations_since_restore": 113, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.843464870273994, "timesteps_this_iter": 45831, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.24549082922516, "cost1_mean": 177.9145655966273, "system_level_velocity_mean": 14.984521029894502, "cost2_mean": -125.53842581139654, "cost2_max": -20.584209716315932, "outflow_rate_max": 1449.1530847145489, "cost1_min": 18.03227223012365, "system_level_velocity_min": 11.585277280398678, "system_level_velocity_max": 18.159768831817445, "outflow_rate_min": 444.6769763958757, "cost2_min": -145.28461437655193, "outflow_rate_mean": 1218.0670782662598}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.018784895539283752, "total_loss": 17.736560821533203, "vf_explained_var": 0.9170897006988525, "cur_lr": 0.0005000000237487257, "entropy": 0.7830150723457336, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 17.740995407104492, "policy_loss": -0.007605335675179958}, "num_steps_trained": 5069959, "update_time_ms": 8.95, "sample_time_ms": 21220.416, "load_time_ms": 17.561, "num_steps_sampled": 5069959, "grad_time_ms": 12664.402}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3822.6348807811737, "timestamp": 1558613406, "time_since_restore": 3822.6348807811737, "policy_reward_mean": {}, "training_iteration": 113, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fed30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fee80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe550>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5069959, "episodes_total": 5269, "timesteps_total": 5069959, "episode_reward_mean": -569.2917841393387, "episodes_this_iter": 50, "date": "2019-05-23_12-10-06", "time_this_iter_s": 33.74472451210022, "num_metric_batches_dropped": 0, "episode_reward_min": -859.965072049523}
{"iterations_since_restore": 114, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -110.33881815239293, "timesteps_this_iter": 43870, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.13102873638434, "cost1_mean": 182.38444734627186, "system_level_velocity_mean": 15.310969769157085, "cost2_mean": -125.42279049730672, "cost2_max": -62.33025987160748, "outflow_rate_max": 1448.4436989795918, "cost1_min": 83.63597380063332, "system_level_velocity_min": 12.117613868618053, "system_level_velocity_max": 18.26065019046452, "outflow_rate_min": 793.7509287431322, "cost2_min": -145.16553208693344, "outflow_rate_mean": 1236.2887451222498}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01851261965930462, "total_loss": 15.756490707397461, "vf_explained_var": 0.9252076745033264, "cur_lr": 0.0005000000237487257, "entropy": 0.7567706108093262, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 15.761811256408691, "policy_loss": -0.00844427477568388}, "num_steps_trained": 5113829, "update_time_ms": 8.373, "sample_time_ms": 21296.145, "load_time_ms": 17.555, "num_steps_sampled": 5113829, "grad_time_ms": 12575.153}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3855.5618875026703, "timestamp": 1558613439, "time_since_restore": 3855.5618875026703, "policy_reward_mean": {}, "training_iteration": 114, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5113829, "episodes_total": 5316, "timesteps_total": 5113829, "episode_reward_mean": -545.5528414452738, "episodes_this_iter": 47, "date": "2019-05-23_12-10-39", "time_this_iter_s": 32.92700672149658, "num_metric_batches_dropped": 0, "episode_reward_min": -801.8971179503668}
{"iterations_since_restore": 115, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -110.33881815239293, "timesteps_this_iter": 44204, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.57256586352383, "cost1_mean": 184.05288844152304, "system_level_velocity_mean": 15.515913205190284, "cost2_mean": -125.09834179849982, "cost2_max": -62.33025987160748, "outflow_rate_max": 1448.4436989795918, "cost1_min": 83.63597380063332, "system_level_velocity_min": 12.693802153390788, "system_level_velocity_max": 18.341247845736333, "outflow_rate_min": 793.7509287431322, "cost2_min": -143.93018232859106, "outflow_rate_mean": 1247.8269233968908}, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.016185564920306206, "total_loss": 15.607604026794434, "vf_explained_var": 0.9216529726982117, "cur_lr": 0.0005000000237487257, "entropy": 0.7466892600059509, "cur_kl_coeff": 0.16875001788139343, "vf_loss": 15.609518051147461, "policy_loss": -0.004644719418138266}, "num_steps_trained": 5158033, "update_time_ms": 8.028, "sample_time_ms": 21383.772, "load_time_ms": 17.262, "num_steps_sampled": 5158033, "grad_time_ms": 12386.641}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3888.7540698051453, "timestamp": 1558613472, "time_since_restore": 3888.7540698051453, "policy_reward_mean": {}, "training_iteration": 115, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feb00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe2e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5158033, "episodes_total": 5360, "timesteps_total": 5158033, "episode_reward_mean": -527.2710968994606, "episodes_this_iter": 44, "date": "2019-05-23_12-11-12", "time_this_iter_s": 33.192182302474976, "num_metric_batches_dropped": 0, "episode_reward_min": -777.6636538301877}
{"iterations_since_restore": 116, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.264567373195277, "timesteps_this_iter": 46246, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.58873142811234, "cost1_mean": 179.84354497253167, "system_level_velocity_mean": 15.238469892608164, "cost2_mean": -124.91903257806581, "cost2_max": -22.35278822670929, "outflow_rate_max": 1446.208314285411, "cost1_min": 22.91785907162313, "system_level_velocity_min": 11.717115186860358, "system_level_velocity_max": 18.48765675706406, "outflow_rate_min": 504.740621259614, "cost2_min": -142.20380644353946, "outflow_rate_mean": 1227.5291226431173}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.0190858393907547, "total_loss": 17.274517059326172, "vf_explained_var": 0.9151021838188171, "cur_lr": 0.0005000000237487257, "entropy": 0.7845215797424316, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 17.27725601196289, "policy_loss": -0.00596045795828104}, "num_steps_trained": 5204279, "update_time_ms": 8.128, "sample_time_ms": 21553.186, "load_time_ms": 16.639, "num_steps_sampled": 5204279, "grad_time_ms": 12309.125}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3923.6052339076996, "timestamp": 1558613507, "time_since_restore": 3923.6052339076996, "policy_reward_mean": {}, "training_iteration": 116, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fee10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fea20>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5204279, "episodes_total": 5406, "timesteps_total": 5204279, "episode_reward_mean": -551.2190286410247, "episodes_this_iter": 46, "date": "2019-05-23_12-11-47", "time_this_iter_s": 34.85116410255432, "num_metric_batches_dropped": 0, "episode_reward_min": -810.8652247133606}
{"iterations_since_restore": 117, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.264567373195277, "timesteps_this_iter": 44484, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.58873142811234, "cost1_mean": 179.28844695233747, "system_level_velocity_mean": 15.17426163926705, "cost2_mean": -125.72635014836256, "cost2_max": -22.35278822670929, "outflow_rate_max": 1446.0422208070563, "cost1_min": 22.91785907162313, "system_level_velocity_min": 11.068324773202692, "system_level_velocity_max": 18.48765675706406, "outflow_rate_min": 504.740621259614, "cost2_min": -148.15140709146112, "outflow_rate_mean": 1226.7736815482738}, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.01890615001320839, "total_loss": 18.18476676940918, "vf_explained_var": 0.9062172174453735, "cur_lr": 0.0005000000237487257, "entropy": 0.7448534965515137, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 18.18860626220703, "policy_loss": -0.00702949333935976}, "num_steps_trained": 5248763, "update_time_ms": 8.255, "sample_time_ms": 21605.59, "load_time_ms": 16.103, "num_steps_sampled": 5248763, "grad_time_ms": 12278.461}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3957.286502122879, "timestamp": 1558613541, "time_since_restore": 3957.286502122879, "policy_reward_mean": {}, "training_iteration": 117, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501978>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5248763, "episodes_total": 5455, "timesteps_total": 5248763, "episode_reward_mean": -555.0589478792498, "episodes_this_iter": 49, "date": "2019-05-23_12-12-21", "time_this_iter_s": 33.68126821517944, "num_metric_batches_dropped": 0, "episode_reward_min": -837.6541272341896}
{"iterations_since_restore": 118, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -188.34246429564593, "timesteps_this_iter": 45352, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.93829716572068, "cost1_mean": 182.05207990841748, "system_level_velocity_mean": 15.220185563247654, "cost2_mean": -126.19297488050543, "cost2_max": -90.57274121575122, "outflow_rate_max": 1448.8046077168428, "cost1_min": 134.46578467643567, "system_level_velocity_min": 11.068324773202692, "system_level_velocity_max": 18.267600140839836, "outflow_rate_min": 1080.673104222821, "cost2_min": -148.15140709146112, "outflow_rate_mean": 1245.3899195884044}, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.020918697118759155, "total_loss": 18.16144561767578, "vf_explained_var": 0.9127878546714783, "cur_lr": 0.0005000000237487257, "entropy": 0.7614710927009583, "cur_kl_coeff": 0.16875003278255463, "vf_loss": 18.165050506591797, "policy_loss": -0.007132901344448328}, "num_steps_trained": 5294115, "update_time_ms": 8.313, "sample_time_ms": 21604.663, "load_time_ms": 16.665, "num_steps_sampled": 5294115, "grad_time_ms": 12321.52}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 3990.7065601348877, "timestamp": 1558613574, "time_since_restore": 3990.7065601348877, "policy_reward_mean": {}, "training_iteration": 118, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fed68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fed30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe7f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5294115, "episodes_total": 5501, "timesteps_total": 5294115, "episode_reward_mean": -550.108319025378, "episodes_this_iter": 46, "date": "2019-05-23_12-12-54", "time_this_iter_s": 33.42005801200867, "num_metric_batches_dropped": 0, "episode_reward_min": -837.6541272341896}
{"iterations_since_restore": 119, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.662172149551708, "timesteps_this_iter": 45116, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.00253986155752, "cost1_mean": 179.88913304478126, "system_level_velocity_mean": 15.14106003575002, "cost2_mean": -124.40055582247845, "cost2_max": -22.48475814181594, "outflow_rate_max": 1451.6100189296285, "cost1_min": 22.95186315806246, "system_level_velocity_min": 11.068324773202692, "system_level_velocity_max": 18.62302821251771, "outflow_rate_min": 512.526719921723, "cost2_min": -145.57782744778024, "outflow_rate_mean": 1237.8444745817555}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.016880584880709648, "total_loss": 15.772573471069336, "vf_explained_var": 0.927092969417572, "cur_lr": 0.0005000000237487257, "entropy": 0.758948564529419, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.77512264251709, "policy_loss": -0.006822427734732628}, "num_steps_trained": 5339231, "update_time_ms": 8.334, "sample_time_ms": 21523.543, "load_time_ms": 16.416, "num_steps_sampled": 5339231, "grad_time_ms": 12354.312}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4024.1258380413055, "timestamp": 1558613608, "time_since_restore": 4024.1258380413055, "policy_reward_mean": {}, "training_iteration": 119, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe748>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5339231, "episodes_total": 5546, "timesteps_total": 5339231, "episode_reward_mean": -552.0781058858375, "episodes_this_iter": 45, "date": "2019-05-23_12-13-28", "time_this_iter_s": 33.41927790641785, "num_metric_batches_dropped": 0, "episode_reward_min": -837.6541272341896}
{"iterations_since_restore": 120, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.662172149551708, "timesteps_this_iter": 43504, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.00253986155752, "cost1_mean": 184.94302675148586, "system_level_velocity_mean": 15.529388809810433, "cost2_mean": -123.55356839676395, "cost2_max": -22.48475814181594, "outflow_rate_max": 1451.6100189296285, "cost1_min": 22.95186315806246, "system_level_velocity_min": 12.055924682556679, "system_level_velocity_max": 18.62302821251771, "outflow_rate_min": 512.526719921723, "cost2_min": -148.1424651591924, "outflow_rate_mean": 1256.0426669163405}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.015427961945533752, "total_loss": 17.7373104095459, "vf_explained_var": 0.9030030965805054, "cur_lr": 0.0005000000237487257, "entropy": 0.7366959452629089, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 17.741025924682617, "policy_loss": -0.007620849646627903}, "num_steps_trained": 5382735, "update_time_ms": 8.405, "sample_time_ms": 21442.318, "load_time_ms": 16.43, "num_steps_sampled": 5382735, "grad_time_ms": 12249.173}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4056.8546867370605, "timestamp": 1558613640, "time_since_restore": 4056.8546867370605, "policy_reward_mean": {}, "training_iteration": 120, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe0f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe198>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5382735, "episodes_total": 5596, "timesteps_total": 5382735, "episode_reward_mean": -519.570049793061, "episodes_this_iter": 50, "date": "2019-05-23_12-14-00", "time_this_iter_s": 32.728848695755005, "num_metric_batches_dropped": 0, "episode_reward_min": -797.116840006732}
{"iterations_since_restore": 121, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -289.89427943522276, "timesteps_this_iter": 43882, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.78005766060005, "cost1_mean": 187.69197436630188, "system_level_velocity_mean": 15.593989858431852, "cost2_mean": -124.61519915832864, "cost2_max": -110.77037205267587, "outflow_rate_max": 1453.1725645589934, "cost1_min": 144.5325564367588, "system_level_velocity_min": 12.069775721489147, "system_level_velocity_max": 18.278020277965123, "outflow_rate_min": 1084.2863245234296, "cost2_min": -148.1424651591924, "outflow_rate_mean": 1265.0404979121877}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015326318331062794, "total_loss": 16.862573623657227, "vf_explained_var": 0.9144275784492493, "cur_lr": 0.0005000000237487257, "entropy": 0.7482238411903381, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.865957260131836, "policy_loss": -0.007263030391186476}, "num_steps_trained": 5426617, "update_time_ms": 8.335, "sample_time_ms": 21499.047, "load_time_ms": 16.392, "num_steps_sampled": 5426617, "grad_time_ms": 12318.71}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4091.8347113132477, "timestamp": 1558613675, "time_since_restore": 4091.8347113132477, "policy_reward_mean": {}, "training_iteration": 121, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514080>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5426617, "episodes_total": 5641, "timesteps_total": 5426617, "episode_reward_mean": -519.4033099222419, "episodes_this_iter": 45, "date": "2019-05-23_12-14-35", "time_this_iter_s": 34.980024576187134, "num_metric_batches_dropped": 0, "episode_reward_min": -823.0559825505834}
{"iterations_since_restore": 122, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -106.8415946604939, "timesteps_this_iter": 46398, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.78005766060005, "cost1_mean": 183.0761234334579, "system_level_velocity_mean": 15.344395885026868, "cost2_mean": -124.38698257876675, "cost2_max": -60.312134820552615, "outflow_rate_max": 1453.1725645589934, "cost1_min": 83.86981874740799, "system_level_velocity_min": 12.016466378331568, "system_level_velocity_max": 18.460663156613858, "outflow_rate_min": 808.8253734896268, "cost2_min": -147.85151454900887, "outflow_rate_mean": 1245.5942504289715}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.015415871515870094, "total_loss": 15.81159782409668, "vf_explained_var": 0.9247473478317261, "cur_lr": 0.0005000000237487257, "entropy": 0.7702299356460571, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.813040733337402, "policy_loss": -0.005345761310309172}, "num_steps_trained": 5473015, "update_time_ms": 8.602, "sample_time_ms": 21340.729, "load_time_ms": 15.874, "num_steps_sampled": 5473015, "grad_time_ms": 12171.296}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4125.216527700424, "timestamp": 1558613709, "time_since_restore": 4125.216527700424, "policy_reward_mean": {}, "training_iteration": 122, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845015f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501400>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5473015, "episodes_total": 5683, "timesteps_total": 5473015, "episode_reward_mean": -538.8819442068421, "episodes_this_iter": 42, "date": "2019-05-23_12-15-09", "time_this_iter_s": 33.381816387176514, "num_metric_batches_dropped": 0, "episode_reward_min": -829.8814093246078}
{"iterations_since_restore": 123, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.40489830749947, "timesteps_this_iter": 45809, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.0107266288935, "cost1_mean": 176.7893060250734, "system_level_velocity_mean": 14.948907731227699, "cost2_mean": -125.21113625070356, "cost2_max": -58.41469572320778, "outflow_rate_max": 1447.0792233177654, "cost1_min": 77.83032505719143, "system_level_velocity_min": 12.016466378331568, "system_level_velocity_max": 18.460663156613858, "outflow_rate_min": 753.5693411230407, "cost2_min": -145.2315979202605, "outflow_rate_mean": 1219.2550420875173}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.01452684123069048, "total_loss": 14.763179779052734, "vf_explained_var": 0.9268292188644409, "cur_lr": 0.0005000000237487257, "entropy": 0.7587321400642395, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.765108108520508, "policy_loss": -0.005606067832559347}, "num_steps_trained": 5518824, "update_time_ms": 8.649, "sample_time_ms": 21286.031, "load_time_ms": 16.385, "num_steps_sampled": 5518824, "grad_time_ms": 12286.298}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4159.584500551224, "timestamp": 1558613743, "time_since_restore": 4159.584500551224, "policy_reward_mean": {}, "training_iteration": 123, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844facc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fad68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5c0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5518824, "episodes_total": 5732, "timesteps_total": 5518824, "episode_reward_mean": -566.5702408732757, "episodes_this_iter": 49, "date": "2019-05-23_12-15-43", "time_this_iter_s": 34.36797285079956, "num_metric_batches_dropped": 0, "episode_reward_min": -829.8814093246078}
{"iterations_since_restore": 124, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.40489830749947, "timesteps_this_iter": 44748, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.32536026452715, "cost1_mean": 179.41692565233257, "system_level_velocity_mean": 15.14219819264234, "cost2_mean": -124.98114299618976, "cost2_max": -58.41469572320778, "outflow_rate_max": 1448.527672019998, "cost1_min": 77.83032505719143, "system_level_velocity_min": 11.959489959578358, "system_level_velocity_max": 18.270604613654875, "outflow_rate_min": 730.3031573934006, "cost2_min": -146.98956797317388, "outflow_rate_mean": 1231.1788680659454}, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.015645049512386322, "total_loss": 12.973179817199707, "vf_explained_var": 0.9371098875999451, "cur_lr": 0.0005000000237487257, "entropy": 0.7432780861854553, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 12.976344108581543, "policy_loss": -0.007124933414161205}, "num_steps_trained": 5563572, "update_time_ms": 8.615, "sample_time_ms": 21159.186, "load_time_ms": 16.664, "num_steps_sampled": 5563572, "grad_time_ms": 12371.186}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4192.104998588562, "timestamp": 1558613776, "time_since_restore": 4192.104998588562, "policy_reward_mean": {}, "training_iteration": 124, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5563572, "episodes_total": 5781, "timesteps_total": 5563572, "episode_reward_mean": -546.9078791464278, "episodes_this_iter": 49, "date": "2019-05-23_12-16-16", "time_this_iter_s": 32.52049803733826, "num_metric_batches_dropped": 0, "episode_reward_min": -797.7560676485616}
{"iterations_since_restore": 125, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.5148956009492, "timesteps_this_iter": 44240, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.34490484099396, "cost1_mean": 182.17802407862527, "system_level_velocity_mean": 15.250340706426343, "cost2_mean": -125.41279374681476, "cost2_max": -60.33402806305271, "outflow_rate_max": 1448.527672019998, "cost1_min": 78.45797906133964, "system_level_velocity_min": 11.959489959578358, "system_level_velocity_max": 18.287043188784878, "outflow_rate_min": 730.3031573934006, "cost2_min": -146.98956797317388, "outflow_rate_mean": 1243.0835535409126}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01715737022459507, "total_loss": 13.600687980651855, "vf_explained_var": 0.9339850544929504, "cur_lr": 0.0005000000237487257, "entropy": 0.7276759743690491, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 13.603448867797852, "policy_loss": -0.007104284130036831}, "num_steps_trained": 5607812, "update_time_ms": 8.719, "sample_time_ms": 21002.368, "load_time_ms": 16.629, "num_steps_sampled": 5607812, "grad_time_ms": 12418.989}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4224.203217983246, "timestamp": 1558613808, "time_since_restore": 4224.203217983246, "policy_reward_mean": {}, "training_iteration": 125, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845664a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845087f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5607812, "episodes_total": 5824, "timesteps_total": 5607812, "episode_reward_mean": -539.5928503687346, "episodes_this_iter": 43, "date": "2019-05-23_12-16-48", "time_this_iter_s": 32.09821939468384, "num_metric_batches_dropped": 0, "episode_reward_min": -797.7560676485616}
{"iterations_since_restore": 126, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.948851916494636, "timesteps_this_iter": 45751, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.34490484099396, "cost1_mean": 180.90699802665077, "system_level_velocity_mean": 15.206006820371778, "cost2_mean": -123.8499615889646, "cost2_max": -19.89282383949447, "outflow_rate_max": 1446.952532241278, "cost1_min": 17.968055877728613, "system_level_velocity_min": 11.330830299470191, "system_level_velocity_max": 18.287043188784878, "outflow_rate_min": 447.40921683303424, "cost2_min": -144.5082683666804, "outflow_rate_mean": 1236.0261327485446}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.015290610492229462, "total_loss": 14.424574851989746, "vf_explained_var": 0.9346240162849426, "cur_lr": 0.0005000000237487257, "entropy": 0.7792688608169556, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.427868843078613, "policy_loss": -0.0071641686372458935}, "num_steps_trained": 5653563, "update_time_ms": 8.592, "sample_time_ms": 20943.861, "load_time_ms": 17.388, "num_steps_sampled": 5653563, "grad_time_ms": 12415.369}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4258.421281337738, "timestamp": 1558613842, "time_since_restore": 4258.421281337738, "policy_reward_mean": {}, "training_iteration": 126, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fea90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe630>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5653563, "episodes_total": 5873, "timesteps_total": 5653563, "episode_reward_mean": -544.558127299063, "episodes_this_iter": 49, "date": "2019-05-23_12-17-22", "time_this_iter_s": 34.21806335449219, "num_metric_batches_dropped": 0, "episode_reward_min": -851.3636661662626}
{"iterations_since_restore": 127, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.948851916494636, "timesteps_this_iter": 45368, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.22714838588468, "cost1_mean": 179.1030593766793, "system_level_velocity_mean": 15.04358172701919, "cost2_mean": -124.87262085226473, "cost2_max": -19.89282383949447, "outflow_rate_max": 1446.952532241278, "cost1_min": 17.968055877728613, "system_level_velocity_min": 11.330830299470191, "system_level_velocity_max": 18.27846429548898, "outflow_rate_min": 447.40921683303424, "cost2_min": -146.0923325126771, "outflow_rate_mean": 1229.0648257708867}, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.015400886535644531, "total_loss": 13.390878677368164, "vf_explained_var": 0.9379249811172485, "cur_lr": 0.0005000000237487257, "entropy": 0.7516416311264038, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.39436149597168, "policy_loss": -0.0073804669082164764}, "num_steps_trained": 5698931, "update_time_ms": 8.398, "sample_time_ms": 20949.871, "load_time_ms": 17.339, "num_steps_sampled": 5698931, "grad_time_ms": 12446.059}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4292.484146118164, "timestamp": 1558613876, "time_since_restore": 4292.484146118164, "policy_reward_mean": {}, "training_iteration": 127, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845080b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845082e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5698931, "episodes_total": 5921, "timesteps_total": 5698931, "episode_reward_mean": -555.4462912578515, "episodes_this_iter": 48, "date": "2019-05-23_12-17-56", "time_this_iter_s": 34.062864780426025, "num_metric_batches_dropped": 0, "episode_reward_min": -851.3636661662626}
{"iterations_since_restore": 128, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.41616166255616, "timesteps_this_iter": 46304, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.22082739317773, "cost1_mean": 178.74925165591577, "system_level_velocity_mean": 14.974866467585377, "cost2_mean": -125.85537593150885, "cost2_max": -55.60074481692171, "outflow_rate_max": 1447.9837056869117, "cost1_min": 78.41207592766591, "system_level_velocity_min": 11.028847182763403, "system_level_velocity_max": 18.17297472730033, "outflow_rate_min": 737.9337868332078, "cost2_min": -146.0923325126771, "outflow_rate_mean": 1227.4821865431593}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.015677766874432564, "total_loss": 11.654569625854492, "vf_explained_var": 0.9471328854560852, "cur_lr": 0.0005000000237487257, "entropy": 0.7692471146583557, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 11.658119201660156, "policy_loss": -0.007518060505390167}, "num_steps_trained": 5745235, "update_time_ms": 8.349, "sample_time_ms": 20914.772, "load_time_ms": 17.73, "num_steps_sampled": 5745235, "grad_time_ms": 12525.641}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4326.389737844467, "timestamp": 1558613910, "time_since_restore": 4326.389737844467, "policy_reward_mean": {}, "training_iteration": 128, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501e80>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5745235, "episodes_total": 5966, "timesteps_total": 5745235, "episode_reward_mean": -563.0858606896279, "episodes_this_iter": 45, "date": "2019-05-23_12-18-30", "time_this_iter_s": 33.9055917263031, "num_metric_batches_dropped": 0, "episode_reward_min": -852.0732545450214}
{"iterations_since_restore": 129, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -33.72374579195554, "timesteps_this_iter": 43937, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.1339107317665, "cost1_mean": 175.61395669437482, "system_level_velocity_mean": 15.085560987932492, "cost2_mean": -122.34184605896586, "cost2_max": -26.820122635783456, "outflow_rate_max": 1447.9837056869117, "cost1_min": 22.50545994530529, "system_level_velocity_min": 11.028847182763403, "system_level_velocity_max": 18.43571473249506, "outflow_rate_min": 424.4559491199726, "cost2_min": -147.09834332409145, "outflow_rate_mean": 1215.7585714027134}, "episode_len_mean": 316.02, "info": {"default": {"kl": 0.016403717920184135, "total_loss": 18.1759090423584, "vf_explained_var": 0.9124309420585632, "cur_lr": 0.0005000000237487257, "entropy": 0.7534677982330322, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 18.179214477539062, "policy_loss": -0.007458858657628298}, "num_steps_trained": 5789172, "update_time_ms": 8.552, "sample_time_ms": 20806.238, "load_time_ms": 17.98, "num_steps_sampled": 5789172, "grad_time_ms": 12605.836}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4359.531650543213, "timestamp": 1558613943, "time_since_restore": 4359.531650543213, "policy_reward_mean": {}, "training_iteration": 129, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514b70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845145f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514710>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5789172, "episodes_total": 6013, "timesteps_total": 5789172, "episode_reward_mean": -544.7953542706015, "episodes_this_iter": 47, "date": "2019-05-23_12-19-03", "time_this_iter_s": 33.14191269874573, "num_metric_batches_dropped": 0, "episode_reward_min": -859.9481563719236}
{"iterations_since_restore": 130, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -31.518638208292113, "timesteps_this_iter": 44821, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.1339107317665, "cost1_mean": 178.12208642929636, "system_level_velocity_mean": 15.43144673141724, "cost2_mean": -120.83236382808101, "cost2_max": -22.30553723962026, "outflow_rate_max": 1445.4908966574556, "cost1_min": 22.50545994530529, "system_level_velocity_min": 11.410010717598054, "system_level_velocity_max": 18.45340563359979, "outflow_rate_min": 424.4559491199726, "cost2_min": -147.09834332409145, "outflow_rate_mean": 1229.0283970896226}, "episode_len_mean": 313.26, "info": {"default": {"kl": 0.01578620821237564, "total_loss": 16.083484649658203, "vf_explained_var": 0.9243752360343933, "cur_lr": 0.0005000000237487257, "entropy": 0.7590579390525818, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.08629608154297, "policy_loss": -0.006805681623518467}, "num_steps_trained": 5833993, "update_time_ms": 8.336, "sample_time_ms": 20886.494, "load_time_ms": 18.268, "num_steps_sampled": 5833993, "grad_time_ms": 12691.221}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4393.908722162247, "timestamp": 1558613978, "time_since_restore": 4393.908722162247, "policy_reward_mean": {}, "training_iteration": 130, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845080b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508908>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5833993, "episodes_total": 6062, "timesteps_total": 5833993, "episode_reward_mean": -511.8430705927812, "episodes_this_iter": 49, "date": "2019-05-23_12-19-38", "time_this_iter_s": 34.37707161903381, "num_metric_batches_dropped": 0, "episode_reward_min": -859.9481563719236}
{"iterations_since_restore": 131, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.41519463475468, "timesteps_this_iter": 44706, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.91746886916644, "cost1_mean": 179.60099791661992, "system_level_velocity_mean": 15.464032693826317, "cost2_mean": -121.70743807202149, "cost2_max": -18.342860323485066, "outflow_rate_max": 1445.8677911078482, "cost1_min": 17.847234211405524, "system_level_velocity_min": 11.410010717598054, "system_level_velocity_max": 18.45340563359979, "outflow_rate_min": 491.72746604051014, "cost2_min": -143.94400470710443, "outflow_rate_mean": 1229.8426077762422}, "episode_len_mean": 315.18, "info": {"default": {"kl": 0.015362958423793316, "total_loss": 15.672971725463867, "vf_explained_var": 0.9224456548690796, "cur_lr": 0.0005000000237487257, "entropy": 0.7434557676315308, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.675232887268066, "policy_loss": -0.006151552312076092}, "num_steps_trained": 5878699, "update_time_ms": 8.34, "sample_time_ms": 20966.589, "load_time_ms": 18.189, "num_steps_sampled": 5878699, "grad_time_ms": 12556.071}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4428.305136442184, "timestamp": 1558614012, "time_since_restore": 4428.305136442184, "policy_reward_mean": {}, "training_iteration": 131, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe470>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5878699, "episodes_total": 6111, "timesteps_total": 5878699, "episode_reward_mean": -515.3897100486133, "episodes_this_iter": 49, "date": "2019-05-23_12-20-12", "time_this_iter_s": 34.396414279937744, "num_metric_batches_dropped": 0, "episode_reward_min": -837.4196443532837}
{"iterations_since_restore": 132, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.41519463475468, "timesteps_this_iter": 43864, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.91746886916644, "cost1_mean": 180.6280270910625, "system_level_velocity_mean": 15.400507459065786, "cost2_mean": -123.14546864920649, "cost2_max": -18.342860323485066, "outflow_rate_max": 1445.8677911078482, "cost1_min": 17.847234211405524, "system_level_velocity_min": 11.410010717598054, "system_level_velocity_max": 18.31527581425812, "outflow_rate_min": 492.0625426222078, "cost2_min": -145.80408071291203, "outflow_rate_mean": 1231.3500162125263}, "episode_len_mean": 317.86, "info": {"default": {"kl": 0.01602908968925476, "total_loss": 16.799551010131836, "vf_explained_var": 0.9180501103401184, "cur_lr": 0.0005000000237487257, "entropy": 0.7224594354629517, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.802963256835938, "policy_loss": -0.007468716241419315}, "num_steps_trained": 5922563, "update_time_ms": 8.078, "sample_time_ms": 21031.463, "load_time_ms": 18.292, "num_steps_sampled": 5922563, "grad_time_ms": 12441.074}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4461.21105837822, "timestamp": 1558614045, "time_since_restore": 4461.21105837822, "policy_reward_mean": {}, "training_iteration": 132, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845081d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508c50>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5922563, "episodes_total": 6157, "timesteps_total": 5922563, "episode_reward_mean": -524.5105381830992, "episodes_this_iter": 46, "date": "2019-05-23_12-20-45", "time_this_iter_s": 32.905921936035156, "num_metric_batches_dropped": 0, "episode_reward_min": -837.4196443532837}
{"iterations_since_restore": 133, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.41519463475468, "timesteps_this_iter": 45227, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.54948762930758, "cost1_mean": 179.84741292508662, "system_level_velocity_mean": 15.47754695904788, "cost2_mean": -123.92242127546331, "cost2_max": -18.342860323485066, "outflow_rate_max": 1445.570330929006, "cost1_min": 17.847234211405524, "system_level_velocity_min": 12.76292255343302, "system_level_velocity_max": 18.323563999848396, "outflow_rate_min": 471.0354357222381, "cost2_min": -145.80408071291203, "outflow_rate_mean": 1228.420712931261}, "episode_len_mean": 314.96, "info": {"default": {"kl": 0.01575319468975067, "total_loss": 12.514031410217285, "vf_explained_var": 0.9379788637161255, "cur_lr": 0.0005000000237487257, "entropy": 0.7110440731048584, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.517423629760742, "policy_loss": -0.007378564681857824}, "num_steps_trained": 5967790, "update_time_ms": 8.22, "sample_time_ms": 20972.05, "load_time_ms": 17.733, "num_steps_sampled": 5967790, "grad_time_ms": 12413.233}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4494.720656633377, "timestamp": 1558614079, "time_since_restore": 4494.720656633377, "policy_reward_mean": {}, "training_iteration": 133, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f25c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f25f8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5967790, "episodes_total": 6203, "timesteps_total": 5967790, "episode_reward_mean": -513.2236324109444, "episodes_this_iter": 46, "date": "2019-05-23_12-21-19", "time_this_iter_s": 33.50959825515747, "num_metric_batches_dropped": 0, "episode_reward_min": -763.9148433712185}
{"iterations_since_restore": 134, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.100131331065093, "timesteps_this_iter": 45938, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.0842877565664, "cost1_mean": 176.19132970700875, "system_level_velocity_mean": 15.12382362684908, "cost2_mean": -123.69126350151092, "cost2_max": -17.575645702420434, "outflow_rate_max": 1445.7989107302158, "cost1_min": 17.920230469880558, "system_level_velocity_min": 11.6026878859285, "system_level_velocity_max": 18.78372559598451, "outflow_rate_min": 471.0354357222381, "cost2_min": -145.55872826001988, "outflow_rate_mean": 1213.8381280842186}, "episode_len_mean": 316.25, "info": {"default": {"kl": 0.01677960343658924, "total_loss": 15.327630996704102, "vf_explained_var": 0.9263026118278503, "cur_lr": 0.0005000000237487257, "entropy": 0.7514594793319702, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.330550193786621, "policy_loss": -0.0071662296541035175}, "num_steps_trained": 6013728, "update_time_ms": 8.494, "sample_time_ms": 21037.103, "load_time_ms": 16.833, "num_steps_sampled": 6013728, "grad_time_ms": 12491.775}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4528.660116434097, "timestamp": 1558614113, "time_since_restore": 4528.660116434097, "policy_reward_mean": {}, "training_iteration": 134, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845082e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508a58>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6013728, "episodes_total": 6252, "timesteps_total": 6013728, "episode_reward_mean": -544.3084116841383, "episodes_this_iter": 49, "date": "2019-05-23_12-21-53", "time_this_iter_s": 33.939459800720215, "num_metric_batches_dropped": 0, "episode_reward_min": -818.4422624891515}
{"iterations_since_restore": 135, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.100131331065093, "timesteps_this_iter": 45984, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.0842877565664, "cost1_mean": 174.6045519093013, "system_level_velocity_mean": 15.00341497049246, "cost2_mean": -123.04686397097612, "cost2_max": -17.575645702420434, "outflow_rate_max": 1447.160157964522, "cost1_min": 17.920230469880558, "system_level_velocity_min": 11.6026878859285, "system_level_velocity_max": 18.78372559598451, "outflow_rate_min": 471.0354357222381, "cost2_min": -146.61611576282195, "outflow_rate_mean": 1205.256964073727}, "episode_len_mean": 316.25, "info": {"default": {"kl": 0.015599275007843971, "total_loss": 14.536088943481445, "vf_explained_var": 0.9306100010871887, "cur_lr": 0.0005000000237487257, "entropy": 0.7260863184928894, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 14.540188789367676, "policy_loss": -0.008047948591411114}, "num_steps_trained": 6059712, "update_time_ms": 8.308, "sample_time_ms": 21143.827, "load_time_ms": 17.274, "num_steps_sampled": 6059712, "grad_time_ms": 12544.151}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4562.355484485626, "timestamp": 1558614146, "time_since_restore": 4562.355484485626, "policy_reward_mean": {}, "training_iteration": 135, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f4a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f6d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6059712, "episodes_total": 6297, "timesteps_total": 6059712, "episode_reward_mean": -555.0410936073051, "episodes_this_iter": 45, "date": "2019-05-23_12-22-26", "time_this_iter_s": 33.69536805152893, "num_metric_batches_dropped": 0, "episode_reward_min": -818.4422624891515}
{"iterations_since_restore": 136, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.61510361212873, "timesteps_this_iter": 45194, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.6080120813835, "cost1_mean": 179.700241926368, "system_level_velocity_mean": 15.074890633261758, "cost2_mean": -125.90135957157429, "cost2_max": -24.338990049769652, "outflow_rate_max": 1452.6235713039798, "cost1_min": 25.108093391507705, "system_level_velocity_min": 11.741027602591023, "system_level_velocity_max": 18.78372559598451, "outflow_rate_min": 513.6726005513933, "cost2_min": -146.61611576282195, "outflow_rate_mean": 1228.0115967538811}, "episode_len_mean": 322.13, "info": {"default": {"kl": 0.015774792060256004, "total_loss": 14.944835662841797, "vf_explained_var": 0.9250657558441162, "cur_lr": 0.0005000000237487257, "entropy": 0.698560357093811, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.948809623718262, "policy_loss": -0.007967705838382244}, "num_steps_trained": 6104906, "update_time_ms": 8.341, "sample_time_ms": 21115.564, "load_time_ms": 16.772, "num_steps_sampled": 6104906, "grad_time_ms": 12468.523}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4595.531523227692, "timestamp": 1558614180, "time_since_restore": 4595.531523227692, "policy_reward_mean": {}, "training_iteration": 136, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845148d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514198>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6104906, "episodes_total": 6342, "timesteps_total": 6104906, "episode_reward_mean": -553.557825972156, "episodes_this_iter": 45, "date": "2019-05-23_12-23-00", "time_this_iter_s": 33.17603874206543, "num_metric_batches_dropped": 0, "episode_reward_min": -810.0933302173642}
{"iterations_since_restore": 137, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -289.2890263884069, "timesteps_this_iter": 44879, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.92095645895057, "cost1_mean": 182.01937294493018, "system_level_velocity_mean": 15.093706221707572, "cost2_mean": -126.66037509253711, "cost2_max": -111.1474132690023, "outflow_rate_max": 1452.6235713039798, "cost1_min": 136.44850621698262, "system_level_velocity_min": 11.412958863521892, "system_level_velocity_max": 18.25406514242002, "outflow_rate_min": 1043.1889677110767, "cost2_min": -145.86906766191424, "outflow_rate_mean": 1242.087495547958}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.0164998359978199, "total_loss": 15.717754364013672, "vf_explained_var": 0.9226683974266052, "cur_lr": 0.0005000000237487257, "entropy": 0.7090948224067688, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.722442626953125, "policy_loss": -0.008865542709827423}, "num_steps_trained": 6149785, "update_time_ms": 8.278, "sample_time_ms": 21131.027, "load_time_ms": 17.002, "num_steps_sampled": 6149785, "grad_time_ms": 12464.54}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4629.700298547745, "timestamp": 1558614214, "time_since_restore": 4629.700298547745, "policy_reward_mean": {}, "training_iteration": 137, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845145f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845145c0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6149785, "episodes_total": 6391, "timesteps_total": 6149785, "episode_reward_mean": -551.1940700356001, "episodes_this_iter": 49, "date": "2019-05-23_12-23-34", "time_this_iter_s": 34.1687753200531, "num_metric_batches_dropped": 0, "episode_reward_min": -844.0435742534463}
{"iterations_since_restore": 138, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.04012226337333, "timesteps_this_iter": 44426, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.92095645895057, "cost1_mean": 178.45024241830455, "system_level_velocity_mean": 15.271456361666681, "cost2_mean": -122.47991739374186, "cost2_max": -56.656795556771094, "outflow_rate_max": 1447.1051700680277, "cost1_min": 78.39357301404885, "system_level_velocity_min": 11.412958863521892, "system_level_velocity_max": 18.25406514242002, "outflow_rate_min": 751.5526311509451, "cost2_min": -145.86906766191424, "outflow_rate_mean": 1226.575606384077}, "episode_len_mean": 316.76, "info": {"default": {"kl": 0.01606796309351921, "total_loss": 15.49572467803955, "vf_explained_var": 0.9258363246917725, "cur_lr": 0.0005000000237487257, "entropy": 0.7031455636024475, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.497797966003418, "policy_loss": -0.006138857454061508}, "num_steps_trained": 6194211, "update_time_ms": 8.274, "sample_time_ms": 21180.935, "load_time_ms": 15.897, "num_steps_sampled": 6194211, "grad_time_ms": 12468.098}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4664.108533382416, "timestamp": 1558614248, "time_since_restore": 4664.108533382416, "policy_reward_mean": {}, "training_iteration": 138, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523b70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523278>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6194211, "episodes_total": 6439, "timesteps_total": 6194211, "episode_reward_mean": -528.5381868271594, "episodes_this_iter": 48, "date": "2019-05-23_12-24-08", "time_this_iter_s": 34.40823483467102, "num_metric_batches_dropped": 0, "episode_reward_min": -844.0435742534463}
{"iterations_since_restore": 139, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.04012226337333, "timesteps_this_iter": 46013, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.5614317295216, "cost1_mean": 178.18842734107145, "system_level_velocity_mean": 15.259897688002662, "cost2_mean": -121.74954572902705, "cost2_max": -56.656795556771094, "outflow_rate_max": 1447.5235867798444, "cost1_min": 78.39357301404885, "system_level_velocity_min": 11.934896650979999, "system_level_velocity_max": 18.219635377981493, "outflow_rate_min": 751.5526311509451, "cost2_min": -145.20821734195573, "outflow_rate_mean": 1223.639845775177}, "episode_len_mean": 316.76, "info": {"default": {"kl": 0.014848889783024788, "total_loss": 13.531981468200684, "vf_explained_var": 0.9389740228652954, "cur_lr": 0.0005000000237487257, "entropy": 0.7298071980476379, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 13.535245895385742, "policy_loss": -0.007022286299616098}, "num_steps_trained": 6240224, "update_time_ms": 8.155, "sample_time_ms": 21228.887, "load_time_ms": 16.146, "num_steps_sampled": 6240224, "grad_time_ms": 12497.061}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4698.030872583389, "timestamp": 1558614282, "time_since_restore": 4698.030872583389, "policy_reward_mean": {}, "training_iteration": 139, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845080f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845081d0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6240224, "episodes_total": 6483, "timesteps_total": 6240224, "episode_reward_mean": -532.8836924820237, "episodes_this_iter": 44, "date": "2019-05-23_12-24-42", "time_this_iter_s": 33.92233920097351, "num_metric_batches_dropped": 0, "episode_reward_min": -796.439425192392}
{"iterations_since_restore": 140, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.33190674889852, "timesteps_this_iter": 45423, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.95105513290991, "cost1_mean": 176.32056821979563, "system_level_velocity_mean": 15.145568140513024, "cost2_mean": -122.04606895907463, "cost2_max": -24.840140592853253, "outflow_rate_max": 1447.5235867798444, "cost1_min": 26.176891039089, "system_level_velocity_min": 11.330155181350808, "system_level_velocity_max": 18.553880258344083, "outflow_rate_min": 520.5018847977186, "cost2_min": -145.34710339024045, "outflow_rate_mean": 1213.5479483617296}, "episode_len_mean": 315.99, "info": {"default": {"kl": 0.014715981669723988, "total_loss": 14.463544845581055, "vf_explained_var": 0.9307600855827332, "cur_lr": 0.0005000000237487257, "entropy": 0.7293820977210999, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.465784072875977, "policy_loss": -0.005964637268334627}, "num_steps_trained": 6285647, "update_time_ms": 8.211, "sample_time_ms": 21111.081, "load_time_ms": 15.833, "num_steps_sampled": 6285647, "grad_time_ms": 12550.021}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4731.746982574463, "timestamp": 1558614316, "time_since_restore": 4731.746982574463, "policy_reward_mean": {}, "training_iteration": 140, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845148d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514da0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6285647, "episodes_total": 6533, "timesteps_total": 6285647, "episode_reward_mean": -541.2238459259163, "episodes_this_iter": 50, "date": "2019-05-23_12-25-16", "time_this_iter_s": 33.71610999107361, "num_metric_batches_dropped": 0, "episode_reward_min": -838.5224555660404}
{"iterations_since_restore": 141, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -32.33190674889852, "timesteps_this_iter": 43636, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.95105513290991, "cost1_mean": 180.15937981738162, "system_level_velocity_mean": 15.356677501656502, "cost2_mean": -123.13710893189128, "cost2_max": -24.840140592853253, "outflow_rate_max": 1445.0009087505593, "cost1_min": 26.176891039089, "system_level_velocity_min": 11.330155181350808, "system_level_velocity_max": 18.553880258344083, "outflow_rate_min": 520.5018847977186, "cost2_min": -145.89621578648564, "outflow_rate_mean": 1230.9784766132898}, "episode_len_mean": 317.99, "info": {"default": {"kl": 0.015766045078635216, "total_loss": 15.972383499145508, "vf_explained_var": 0.9224517941474915, "cur_lr": 0.0005000000237487257, "entropy": 0.7035800814628601, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.976523399353027, "policy_loss": -0.008129340596497059}, "num_steps_trained": 6329283, "update_time_ms": 8.028, "sample_time_ms": 20915.245, "load_time_ms": 16.047, "num_steps_sampled": 6329283, "grad_time_ms": 12537.267}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4764.058430433273, "timestamp": 1558614348, "time_since_restore": 4764.058430433273, "policy_reward_mean": {}, "training_iteration": 141, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6329283, "episodes_total": 6582, "timesteps_total": 6329283, "episode_reward_mean": -526.288762963091, "episodes_this_iter": 49, "date": "2019-05-23_12-25-48", "time_this_iter_s": 32.311447858810425, "num_metric_batches_dropped": 0, "episode_reward_min": -838.5224555660404}
{"iterations_since_restore": 142, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.80755239162216, "timesteps_this_iter": 44750, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.84158238457889, "cost1_mean": 182.77793301786244, "system_level_velocity_mean": 15.452241961918688, "cost2_mean": -123.34505657374336, "cost2_max": -24.177963872544318, "outflow_rate_max": 1445.0009087505593, "cost1_min": 24.175706768859314, "system_level_velocity_min": 11.330155181350808, "system_level_velocity_max": 18.5051250805329, "outflow_rate_min": 503.68683210488206, "cost2_min": -145.89621578648564, "outflow_rate_mean": 1246.2430512594196}, "episode_len_mean": 320.04, "info": {"default": {"kl": 0.015315650030970573, "total_loss": 14.62232780456543, "vf_explained_var": 0.931732714176178, "cur_lr": 0.0005000000237487257, "entropy": 0.7099226117134094, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 14.624415397644043, "policy_loss": -0.005963291507214308}, "num_steps_trained": 6374033, "update_time_ms": 8.867, "sample_time_ms": 20960.337, "load_time_ms": 15.568, "num_steps_sampled": 6374033, "grad_time_ms": 12515.128}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4797.16831111908, "timestamp": 1558614381, "time_since_restore": 4797.16831111908, "policy_reward_mean": {}, "training_iteration": 142, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe780>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6374033, "episodes_total": 6626, "timesteps_total": 6374033, "episode_reward_mean": -518.683939600098, "episodes_this_iter": 44, "date": "2019-05-23_12-26-21", "time_this_iter_s": 33.109880685806274, "num_metric_batches_dropped": 0, "episode_reward_min": -801.8080705424226}
{"iterations_since_restore": 143, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.80755239162216, "timesteps_this_iter": 46607, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.84158238457889, "cost1_mean": 177.20186484792077, "system_level_velocity_mean": 15.11810729427968, "cost2_mean": -123.30677572292785, "cost2_max": -24.177963872544318, "outflow_rate_max": 1444.3252768790442, "cost1_min": 24.175706768859314, "system_level_velocity_min": 12.175834816931374, "system_level_velocity_max": 18.5051250805329, "outflow_rate_min": 503.68683210488206, "cost2_min": -142.87508990257317, "outflow_rate_mean": 1219.6731909159128}, "episode_len_mean": 318.04, "info": {"default": {"kl": 0.015256979502737522, "total_loss": 13.886616706848145, "vf_explained_var": 0.9369937777519226, "cur_lr": 0.0005000000237487257, "entropy": 0.73414546251297, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.889236450195312, "policy_loss": -0.0064826966263353825}, "num_steps_trained": 6420640, "update_time_ms": 8.571, "sample_time_ms": 21066.349, "load_time_ms": 15.846, "num_steps_sampled": 6420640, "grad_time_ms": 12453.536}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4831.098041534424, "timestamp": 1558614415, "time_since_restore": 4831.098041534424, "policy_reward_mean": {}, "training_iteration": 143, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523c50>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6420640, "episodes_total": 6670, "timesteps_total": 6420640, "episode_reward_mean": -545.3560515464882, "episodes_this_iter": 44, "date": "2019-05-23_12-26-55", "time_this_iter_s": 33.92973041534424, "num_metric_batches_dropped": 0, "episode_reward_min": -791.4462111565516}
{"iterations_since_restore": 144, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.05456319145019, "timesteps_this_iter": 43481, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.46719174609893, "cost1_mean": 178.83822955664908, "system_level_velocity_mean": 15.223081354466386, "cost2_mean": -121.73484675988817, "cost2_max": -56.77837648802754, "outflow_rate_max": 1444.7939995425593, "cost1_min": 78.80371204446828, "system_level_velocity_min": 10.750035871029736, "system_level_velocity_max": 18.54951204961324, "outflow_rate_min": 777.7376560733647, "cost2_min": -141.65131116707664, "outflow_rate_mean": 1227.5324157380023}, "episode_len_mean": 318.94, "info": {"default": {"kl": 0.017163990065455437, "total_loss": 15.805727005004883, "vf_explained_var": 0.9235708117485046, "cur_lr": 0.0005000000237487257, "entropy": 0.7028255462646484, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.808306694030762, "policy_loss": -0.006924816872924566}, "num_steps_trained": 6464121, "update_time_ms": 8.612, "sample_time_ms": 21101.726, "load_time_ms": 16.391, "num_steps_sampled": 6464121, "grad_time_ms": 12354.662}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4864.424839735031, "timestamp": 1558614449, "time_since_restore": 4864.424839735031, "policy_reward_mean": {}, "training_iteration": 144, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fcf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f978>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6464121, "episodes_total": 6723, "timesteps_total": 6464121, "episode_reward_mean": -537.3047496722938, "episodes_this_iter": 53, "date": "2019-05-23_12-27-29", "time_this_iter_s": 33.3267982006073, "num_metric_batches_dropped": 0, "episode_reward_min": -779.5797428084473}
{"iterations_since_restore": 145, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.05456319145019, "timesteps_this_iter": 45081, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.40675247144907, "cost1_mean": 180.06111749036893, "system_level_velocity_mean": 15.21577547584179, "cost2_mean": -121.50942103995118, "cost2_max": -56.77837648802754, "outflow_rate_max": 1447.1806424085976, "cost1_min": 78.80371204446828, "system_level_velocity_min": 10.750035871029736, "system_level_velocity_max": 18.54951204961324, "outflow_rate_min": 777.7376560733647, "cost2_min": -144.3973661448357, "outflow_rate_mean": 1233.8364228030787}, "episode_len_mean": 320.94, "info": {"default": {"kl": 0.016799481585621834, "total_loss": 14.343087196350098, "vf_explained_var": 0.9334632754325867, "cur_lr": 0.0005000000237487257, "entropy": 0.7139400839805603, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.34594440460205, "policy_loss": -0.00710955960676074}, "num_steps_trained": 6509202, "update_time_ms": 8.976, "sample_time_ms": 21049.113, "load_time_ms": 16.153, "num_steps_sampled": 6509202, "grad_time_ms": 12484.141}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4898.9133195877075, "timestamp": 1558614483, "time_since_restore": 4898.9133195877075, "policy_reward_mean": {}, "training_iteration": 145, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514128>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6509202, "episodes_total": 6768, "timesteps_total": 6509202, "episode_reward_mean": -540.4157786159936, "episodes_this_iter": 45, "date": "2019-05-23_12-28-03", "time_this_iter_s": 34.48847985267639, "num_metric_batches_dropped": 0, "episode_reward_min": -788.1836713283602}
{"iterations_since_restore": 146, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -288.40347431943985, "timesteps_this_iter": 44173, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.40675247144907, "cost1_mean": 183.73463299684755, "system_level_velocity_mean": 15.281401833677462, "cost2_mean": -122.86811297780085, "cost2_max": -109.87074553054254, "outflow_rate_max": 1447.1806424085976, "cost1_min": 144.68875986940358, "system_level_velocity_min": 12.209688360108428, "system_level_velocity_max": 18.252257379872265, "outflow_rate_min": 1073.472049107825, "cost2_min": -144.3973661448357, "outflow_rate_mean": 1245.5836313613588}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016947980970144272, "total_loss": 14.997994422912598, "vf_explained_var": 0.9306734204292297, "cur_lr": 0.0005000000237487257, "entropy": 0.6780210137367249, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.001259803771973, "policy_loss": -0.007555833086371422}, "num_steps_trained": 6553375, "update_time_ms": 9.189, "sample_time_ms": 20829.932, "load_time_ms": 16.372, "num_steps_sampled": 6553375, "grad_time_ms": 12581.618}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4930.883008480072, "timestamp": 1558614515, "time_since_restore": 4930.883008480072, "policy_reward_mean": {}, "training_iteration": 146, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845234a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845230f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6553375, "episodes_total": 6810, "timesteps_total": 6553375, "episode_reward_mean": -543.047510604165, "episodes_this_iter": 42, "date": "2019-05-23_12-28-35", "time_this_iter_s": 31.969688892364502, "num_metric_batches_dropped": 0, "episode_reward_min": -788.1836713283602}
{"iterations_since_restore": 147, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -107.13261317944209, "timesteps_this_iter": 45964, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.8058965543063, "cost1_mean": 181.7402027885328, "system_level_velocity_mean": 15.231683043047088, "cost2_mean": -122.61208574621598, "cost2_max": -58.278056465231565, "outflow_rate_max": 1447.1806424085976, "cost1_min": 83.5928957528694, "system_level_velocity_min": 11.821612565311392, "system_level_velocity_max": 18.52245442387047, "outflow_rate_min": 814.6973452731046, "cost2_min": -144.85463809638, "outflow_rate_mean": 1242.1683686767908}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016543474048376083, "total_loss": 14.344993591308594, "vf_explained_var": 0.931143581867218, "cur_lr": 0.0005000000237487257, "entropy": 0.7241122722625732, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 14.348775863647461, "policy_loss": -0.007968311198055744}, "num_steps_trained": 6599339, "update_time_ms": 9.331, "sample_time_ms": 20706.727, "load_time_ms": 16.588, "num_steps_sampled": 6599339, "grad_time_ms": 12727.957}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4965.292430877686, "timestamp": 1558614550, "time_since_restore": 4965.292430877686, "policy_reward_mean": {}, "training_iteration": 147, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845233c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523438>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6599339, "episodes_total": 6861, "timesteps_total": 6599339, "episode_reward_mean": -541.8229514958755, "episodes_this_iter": 51, "date": "2019-05-23_12-29-10", "time_this_iter_s": 34.409422397613525, "num_metric_batches_dropped": 0, "episode_reward_min": -811.3446838607359}
{"iterations_since_restore": 148, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.05927855737148, "timesteps_this_iter": 44978, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.8058965543063, "cost1_mean": 179.05352119599746, "system_level_velocity_mean": 15.126685332901731, "cost2_mean": -121.9267523213345, "cost2_max": -55.388847231803034, "outflow_rate_max": 1444.6622704081628, "cost1_min": 79.09070867062697, "system_level_velocity_min": 11.821612565311392, "system_level_velocity_max": 18.52245442387047, "outflow_rate_min": 777.6531328438375, "cost2_min": -145.31642223924774, "outflow_rate_mean": 1228.9568518379604}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.018638886511325836, "total_loss": 16.07284927368164, "vf_explained_var": 0.9270057678222656, "cur_lr": 0.0005000000237487257, "entropy": 0.734437108039856, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.076452255249023, "policy_loss": -0.008318322710692883}, "num_steps_trained": 6644317, "update_time_ms": 9.377, "sample_time_ms": 20647.276, "load_time_ms": 16.623, "num_steps_sampled": 6644317, "grad_time_ms": 12657.664}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 4998.395229101181, "timestamp": 1558614583, "time_since_restore": 4998.395229101181, "policy_reward_mean": {}, "training_iteration": 148, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fea90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fef98>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6644317, "episodes_total": 6906, "timesteps_total": 6644317, "episode_reward_mean": -547.7969732079144, "episodes_this_iter": 45, "date": "2019-05-23_12-29-43", "time_this_iter_s": 33.10279822349548, "num_metric_batches_dropped": 0, "episode_reward_min": -811.3446838607359}
{"iterations_since_restore": 149, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.05927855737148, "timesteps_this_iter": 45803, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.8058965543063, "cost1_mean": 177.5475805679701, "system_level_velocity_mean": 14.986192200953994, "cost2_mean": -121.58623248487105, "cost2_max": -55.388847231803034, "outflow_rate_max": 1444.6622704081628, "cost1_min": 79.09070867062697, "system_level_velocity_min": 12.142954195590269, "system_level_velocity_max": 18.419890112576, "outflow_rate_min": 777.6531328438375, "cost2_min": -145.31642223924774, "outflow_rate_mean": 1218.817156843246}, "episode_len_mean": 320.97, "info": {"default": {"kl": 0.01651538908481598, "total_loss": 16.708024978637695, "vf_explained_var": 0.9232116937637329, "cur_lr": 0.0005000000237487257, "entropy": 0.7135300636291504, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 16.710906982421875, "policy_loss": -0.00706136878579855}, "num_steps_trained": 6690120, "update_time_ms": 9.364, "sample_time_ms": 20616.064, "load_time_ms": 16.287, "num_steps_sampled": 6690120, "grad_time_ms": 12683.719}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5032.264352798462, "timestamp": 1558614617, "time_since_restore": 5032.264352798462, "policy_reward_mean": {}, "training_iteration": 149, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514a58>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6690120, "episodes_total": 6951, "timesteps_total": 6690120, "episode_reward_mean": -558.8533542522638, "episodes_this_iter": 45, "date": "2019-05-23_12-30-17", "time_this_iter_s": 33.869123697280884, "num_metric_batches_dropped": 0, "episode_reward_min": -799.403184193304}
{"iterations_since_restore": 150, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.05927855737148, "timesteps_this_iter": 45460, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.59606342101443, "cost1_mean": 176.12550171129053, "system_level_velocity_mean": 14.982075104314111, "cost2_mean": -122.05929247554162, "cost2_max": -55.388847231803034, "outflow_rate_max": 1441.4441555116673, "cost1_min": 79.09070867062697, "system_level_velocity_min": 12.142954195590269, "system_level_velocity_max": 18.419890112576, "outflow_rate_min": 777.6531328438375, "cost2_min": -145.31642223924774, "outflow_rate_mean": 1209.6913314934839}, "episode_len_mean": 318.97, "info": {"default": {"kl": 0.01646627113223076, "total_loss": 15.456720352172852, "vf_explained_var": 0.9275740385055542, "cur_lr": 0.0005000000237487257, "entropy": 0.7117896676063538, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.460508346557617, "policy_loss": -0.007956857793033123}, "num_steps_trained": 6735580, "update_time_ms": 9.631, "sample_time_ms": 20657.13, "load_time_ms": 16.175, "num_steps_sampled": 6735580, "grad_time_ms": 12651.458}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5066.093235492706, "timestamp": 1558614651, "time_since_restore": 5066.093235492706, "policy_reward_mean": {}, "training_iteration": 150, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9b0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6735580, "episodes_total": 7001, "timesteps_total": 6735580, "episode_reward_mean": -558.3169680278519, "episodes_this_iter": 50, "date": "2019-05-23_12-30-51", "time_this_iter_s": 33.828882694244385, "num_metric_batches_dropped": 0, "episode_reward_min": -799.403184193304}
{"iterations_since_restore": 151, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -108.67083809578855, "timesteps_this_iter": 44440, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.59606342101443, "cost1_mean": 180.55262907027748, "system_level_velocity_mean": 15.102333958824643, "cost2_mean": -122.44330408982088, "cost2_max": -60.35982734639682, "outflow_rate_max": 1449.308363975939, "cost1_min": 83.96184522444918, "system_level_velocity_min": 12.250060145485104, "system_level_velocity_max": 18.380369668688424, "outflow_rate_min": 801.2599276102744, "cost2_min": -143.00302239940513, "outflow_rate_mean": 1232.2625429147154}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01765633001923561, "total_loss": 14.422491073608398, "vf_explained_var": 0.930804431438446, "cur_lr": 0.0005000000237487257, "entropy": 0.6943323016166687, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.42660903930664, "policy_loss": -0.008586534298956394}, "num_steps_trained": 6780020, "update_time_ms": 9.973, "sample_time_ms": 20654.203, "load_time_ms": 15.938, "num_steps_sampled": 6780020, "grad_time_ms": 12735.146}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5099.210646390915, "timestamp": 1558614684, "time_since_restore": 5099.210646390915, "policy_reward_mean": {}, "training_iteration": 151, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845081d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844faeb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f048>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6780020, "episodes_total": 7046, "timesteps_total": 6780020, "episode_reward_mean": -549.2788980828303, "episodes_this_iter": 45, "date": "2019-05-23_12-31-24", "time_this_iter_s": 33.11741089820862, "num_metric_batches_dropped": 0, "episode_reward_min": -783.0827453855976}
{"iterations_since_restore": 152, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.90727598262156, "timesteps_this_iter": 45398, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.59606342101443, "cost1_mean": 179.43308293539448, "system_level_velocity_mean": 15.131147936908091, "cost2_mean": -121.04514709080492, "cost2_max": -54.2202985636638, "outflow_rate_max": 1449.308363975939, "cost1_min": 78.54535888934367, "system_level_velocity_min": 12.23383149261197, "system_level_velocity_max": 18.438402241639178, "outflow_rate_min": 777.42942026237, "cost2_min": -143.0046729766583, "outflow_rate_mean": 1230.7246105070851}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.017176268622279167, "total_loss": 14.058560371398926, "vf_explained_var": 0.9368833303451538, "cur_lr": 0.0005000000237487257, "entropy": 0.7105957865715027, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.061347007751465, "policy_loss": -0.007135174237191677}, "num_steps_trained": 6825418, "update_time_ms": 9.519, "sample_time_ms": 20584.088, "load_time_ms": 15.988, "num_steps_sampled": 6825418, "grad_time_ms": 12870.809}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5132.991573572159, "timestamp": 1558614718, "time_since_restore": 5132.991573572159, "policy_reward_mean": {}, "training_iteration": 152, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523390>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6825418, "episodes_total": 7091, "timesteps_total": 6825418, "episode_reward_mean": -542.4388361395113, "episodes_this_iter": 45, "date": "2019-05-23_12-31-58", "time_this_iter_s": 33.7809271812439, "num_metric_batches_dropped": 0, "episode_reward_min": -779.8075791549284}
{"iterations_since_restore": 153, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.90727598262156, "timesteps_this_iter": 45843, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.97276162604393, "cost1_mean": 179.53354577604904, "system_level_velocity_mean": 15.146861327480856, "cost2_mean": -121.88998382115162, "cost2_max": -54.2202985636638, "outflow_rate_max": 1444.3752535498859, "cost1_min": 78.54535888934367, "system_level_velocity_min": 11.735991822738347, "system_level_velocity_max": 18.438402241639178, "outflow_rate_min": 777.42942026237, "cost2_min": -143.0046729766583, "outflow_rate_mean": 1231.1948072647297}, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.015427697449922562, "total_loss": 14.983952522277832, "vf_explained_var": 0.9284016489982605, "cur_lr": 0.0005000000237487257, "entropy": 0.721595823764801, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 14.986363410949707, "policy_loss": -0.006315952632576227}, "num_steps_trained": 6871261, "update_time_ms": 9.821, "sample_time_ms": 20448.861, "load_time_ms": 15.863, "num_steps_sampled": 6871261, "grad_time_ms": 12938.354}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5166.24213552475, "timestamp": 1558614751, "time_since_restore": 5166.24213552475, "policy_reward_mean": {}, "training_iteration": 153, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845146a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514828>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6871261, "episodes_total": 7141, "timesteps_total": 6871261, "episode_reward_mean": -543.2829669498578, "episodes_this_iter": 50, "date": "2019-05-23_12-32-31", "time_this_iter_s": 33.25056195259094, "num_metric_batches_dropped": 0, "episode_reward_min": -819.5434123490265}
{"iterations_since_restore": 154, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.5939720012416, "timesteps_this_iter": 45078, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.48919826485127, "cost1_mean": 176.85815889637624, "system_level_velocity_mean": 14.972231779678916, "cost2_mean": -121.77951201694857, "cost2_max": -21.28207888691007, "outflow_rate_max": 1446.3506911176382, "cost1_min": 17.81154859953951, "system_level_velocity_min": 11.735991822738347, "system_level_velocity_max": 18.438402241639178, "outflow_rate_min": 431.75782487237836, "cost2_min": -141.1951988484693, "outflow_rate_mean": 1214.3989592418059}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.015446340665221214, "total_loss": 14.350116729736328, "vf_explained_var": 0.9325625896453857, "cur_lr": 0.0005000000237487257, "entropy": 0.7156941294670105, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.352578163146973, "policy_loss": -0.006370179820805788}, "num_steps_trained": 6916339, "update_time_ms": 9.555, "sample_time_ms": 20393.198, "load_time_ms": 16.336, "num_steps_sampled": 6916339, "grad_time_ms": 12964.787}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5199.266932725906, "timestamp": 1558614784, "time_since_restore": 5199.266932725906, "policy_reward_mean": {}, "training_iteration": 154, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f828>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fa20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f358>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6916339, "episodes_total": 7189, "timesteps_total": 6916339, "episode_reward_mean": -559.5567316482789, "episodes_this_iter": 48, "date": "2019-05-23_12-33-04", "time_this_iter_s": 33.024797201156616, "num_metric_batches_dropped": 0, "episode_reward_min": -819.5434123490265}
{"iterations_since_restore": 155, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.5939720012416, "timesteps_this_iter": 45397, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 220.48919826485127, "cost1_mean": 176.8950384749014, "system_level_velocity_mean": 15.019524068382589, "cost2_mean": -121.01737426940352, "cost2_max": -21.28207888691007, "outflow_rate_max": 1446.3506911176382, "cost1_min": 17.81154859953951, "system_level_velocity_min": 11.815964388621646, "system_level_velocity_max": 18.51121171882518, "outflow_rate_min": 431.75782487237836, "cost2_min": -140.32848750857812, "outflow_rate_mean": 1217.1658531844496}, "episode_len_mean": 319.12, "info": {"default": {"kl": 0.015262634493410587, "total_loss": 12.16642951965332, "vf_explained_var": 0.9432421326637268, "cur_lr": 0.0005000000237487257, "entropy": 0.6948057413101196, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.17003059387207, "policy_loss": -0.0074644130654633045}, "num_steps_trained": 6961736, "update_time_ms": 9.415, "sample_time_ms": 20402.518, "load_time_ms": 16.196, "num_steps_sampled": 6961736, "grad_time_ms": 12828.292}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5232.451109409332, "timestamp": 1558614817, "time_since_restore": 5232.451109409332, "policy_reward_mean": {}, "training_iteration": 155, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fe10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f550>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6961736, "episodes_total": 7232, "timesteps_total": 6961736, "episode_reward_mean": -553.2745674447774, "episodes_this_iter": 43, "date": "2019-05-23_12-33-37", "time_this_iter_s": 33.1841766834259, "num_metric_batches_dropped": 0, "episode_reward_min": -793.5641984673526}
{"iterations_since_restore": 156, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.459981316620283, "timesteps_this_iter": 46019, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.61755434718447, "cost1_mean": 179.4815351821756, "system_level_velocity_mean": 15.074972056075083, "cost2_mean": -122.03587565086757, "cost2_max": -21.478835411557615, "outflow_rate_max": 1448.358682432432, "cost1_min": 22.937319560785877, "system_level_velocity_min": 11.889646483024766, "system_level_velocity_max": 18.51121171882518, "outflow_rate_min": 500.3160898688181, "cost2_min": -141.49119717347236, "outflow_rate_mean": 1226.2091554744925}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.0156381968408823, "total_loss": 11.684723854064941, "vf_explained_var": 0.945526659488678, "cur_lr": 0.0005000000237487257, "entropy": 0.7224138379096985, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 11.687640190124512, "policy_loss": -0.006875109858810902}, "num_steps_trained": 7007755, "update_time_ms": 9.425, "sample_time_ms": 20634.167, "load_time_ms": 16.438, "num_steps_sampled": 7007755, "grad_time_ms": 12861.743}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5267.079150438309, "timestamp": 1558614852, "time_since_restore": 5267.079150438309, "policy_reward_mean": {}, "training_iteration": 156, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8451d2e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8451d7b8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7007755, "episodes_total": 7279, "timesteps_total": 7007755, "episode_reward_mean": -554.7893790603393, "episodes_this_iter": 47, "date": "2019-05-23_12-34-12", "time_this_iter_s": 34.62804102897644, "num_metric_batches_dropped": 0, "episode_reward_min": -764.8895768690892}
{"iterations_since_restore": 157, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.31364588296144, "timesteps_this_iter": 45817, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.61755434718447, "cost1_mean": 177.92937406095362, "system_level_velocity_mean": 14.948922509395668, "cost2_mean": -123.45739289266581, "cost2_max": -22.71490496566939, "outflow_rate_max": 1448.358682432432, "cost1_min": 22.93082401572986, "system_level_velocity_min": 11.79119383781994, "system_level_velocity_max": 18.50748697127578, "outflow_rate_min": 506.5568824271422, "cost2_min": -141.49119717347236, "outflow_rate_mean": 1219.7185741350704}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.0158610250800848, "total_loss": 15.242975234985352, "vf_explained_var": 0.9251834750175476, "cur_lr": 0.0005000000237487257, "entropy": 0.7099801898002625, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.24573802947998, "policy_loss": -0.0067762513644993305}, "num_steps_trained": 7053572, "update_time_ms": 9.577, "sample_time_ms": 20824.372, "load_time_ms": 16.425, "num_steps_sampled": 7053572, "grad_time_ms": 12683.351}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5301.5960602760315, "timestamp": 1558614886, "time_since_restore": 5301.5960602760315, "policy_reward_mean": {}, "training_iteration": 157, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844febe0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe080>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7053572, "episodes_total": 7330, "timesteps_total": 7053572, "episode_reward_mean": -564.8256040545508, "episodes_this_iter": 51, "date": "2019-05-23_12-34-46", "time_this_iter_s": 34.51690983772278, "num_metric_batches_dropped": 0, "episode_reward_min": -804.3459213553944}
{"iterations_since_restore": 158, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.91447999727264, "timesteps_this_iter": 45017, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.5468153569317, "cost1_mean": 177.82044204920297, "system_level_velocity_mean": 15.114873691870196, "cost2_mean": -121.85205626829294, "cost2_max": -18.713655741705153, "outflow_rate_max": 1447.20649659864, "cost1_min": 18.619899256907015, "system_level_velocity_min": 11.79119383781994, "system_level_velocity_max": 18.50748697127578, "outflow_rate_min": 497.50056700217027, "cost2_min": -142.48800852293874, "outflow_rate_mean": 1222.1290955661927}, "episode_len_mean": 319.13, "info": {"default": {"kl": 0.016532767564058304, "total_loss": 12.426237106323242, "vf_explained_var": 0.9417178630828857, "cur_lr": 0.0005000000237487257, "entropy": 0.7003481984138489, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 12.429964065551758, "policy_loss": -0.00791152287274599}, "num_steps_trained": 7098589, "update_time_ms": 9.644, "sample_time_ms": 20773.455, "load_time_ms": 17.177, "num_steps_sampled": 7098589, "grad_time_ms": 12838.03}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5335.745742321014, "timestamp": 1558614921, "time_since_restore": 5335.745742321014, "policy_reward_mean": {}, "training_iteration": 158, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845145c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514630>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7098589, "episodes_total": 7373, "timesteps_total": 7098589, "episode_reward_mean": -547.3035783643376, "episodes_this_iter": 43, "date": "2019-05-23_12-35-21", "time_this_iter_s": 34.14968204498291, "num_metric_batches_dropped": 0, "episode_reward_min": -804.3459213553944}
{"iterations_since_restore": 159, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.91447999727264, "timesteps_this_iter": 46372, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.87461122751145, "cost1_mean": 177.73729456161203, "system_level_velocity_mean": 15.06123486014225, "cost2_mean": -121.48104915407625, "cost2_max": -18.713655741705153, "outflow_rate_max": 1447.20649659864, "cost1_min": 18.619899256907015, "system_level_velocity_min": 12.128265802066059, "system_level_velocity_max": 18.29429380647004, "outflow_rate_min": 497.50056700217027, "cost2_min": -142.48800852293874, "outflow_rate_mean": 1219.4676983138986}, "episode_len_mean": 319.95, "info": {"default": {"kl": 0.01797650009393692, "total_loss": 13.610400199890137, "vf_explained_var": 0.93764328956604, "cur_lr": 0.0005000000237487257, "entropy": 0.7208518385887146, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.612914085388184, "policy_loss": -0.007064658682793379}, "num_steps_trained": 7144961, "update_time_ms": 9.96, "sample_time_ms": 20765.527, "load_time_ms": 17.243, "num_steps_sampled": 7144961, "grad_time_ms": 12810.401}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5369.252256393433, "timestamp": 1558614954, "time_since_restore": 5369.252256393433, "policy_reward_mean": {}, "training_iteration": 159, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f2b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450fa58>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7144961, "episodes_total": 7418, "timesteps_total": 7144961, "episode_reward_mean": -553.8544796388487, "episodes_this_iter": 45, "date": "2019-05-23_12-35-54", "time_this_iter_s": 33.50651407241821, "num_metric_batches_dropped": 0, "episode_reward_min": -784.867291950342}
{"iterations_since_restore": 160, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.50536341022466, "timesteps_this_iter": 46140, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.87461122751145, "cost1_mean": 174.42324541683516, "system_level_velocity_mean": 14.750470661647316, "cost2_mean": -121.64776759578622, "cost2_max": -56.22144161923595, "outflow_rate_max": 1445.6838398172702, "cost1_min": 78.67915343969224, "system_level_velocity_min": 11.36360462235125, "system_level_velocity_max": 18.298374488149562, "outflow_rate_min": 767.5141664038507, "cost2_min": -142.24897468812605, "outflow_rate_mean": 1208.1388936783712}, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.01642095297574997, "total_loss": 14.172636985778809, "vf_explained_var": 0.9361154437065125, "cur_lr": 0.0005000000237487257, "entropy": 0.73110032081604, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.173730850219727, "policy_loss": -0.005249635316431522}, "num_steps_trained": 7191101, "update_time_ms": 9.9, "sample_time_ms": 20739.376, "load_time_ms": 17.361, "num_steps_sampled": 7191101, "grad_time_ms": 12855.694}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5403.269449472427, "timestamp": 1558614988, "time_since_restore": 5403.269449472427, "policy_reward_mean": {}, "training_iteration": 160, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8451d2e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8451d7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8451d860>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7191101, "episodes_total": 7468, "timesteps_total": 7191101, "episode_reward_mean": -577.4063193482451, "episodes_this_iter": 50, "date": "2019-05-23_12-36-28", "time_this_iter_s": 34.01719307899475, "num_metric_batches_dropped": 0, "episode_reward_min": -831.4805149183638}
{"iterations_since_restore": 161, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.50536341022466, "timesteps_this_iter": 45569, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.80784048316573, "cost1_mean": 175.2750494711514, "system_level_velocity_mean": 14.72350860381447, "cost2_mean": -121.66983063083673, "cost2_max": -56.41996520966325, "outflow_rate_max": 1445.7981547619047, "cost1_min": 78.67915343969224, "system_level_velocity_min": 11.36360462235125, "system_level_velocity_max": 18.298374488149562, "outflow_rate_min": 771.3383996992463, "cost2_min": -142.24897468812605, "outflow_rate_mean": 1213.1550625551545}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.016089048236608505, "total_loss": 13.472343444824219, "vf_explained_var": 0.9413434863090515, "cur_lr": 0.0005000000237487257, "entropy": 0.695293128490448, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 13.474919319152832, "policy_loss": -0.006649290677160025}, "num_steps_trained": 7236670, "update_time_ms": 9.647, "sample_time_ms": 20722.82, "load_time_ms": 17.689, "num_steps_sampled": 7236670, "grad_time_ms": 12736.46}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5435.0376517772675, "timestamp": 1558615020, "time_since_restore": 5435.0376517772675, "policy_reward_mean": {}, "training_iteration": 161, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845238d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523c18>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7236670, "episodes_total": 7515, "timesteps_total": 7236670, "episode_reward_mean": -583.6019578423443, "episodes_this_iter": 47, "date": "2019-05-23_12-37-00", "time_this_iter_s": 31.768202304840088, "num_metric_batches_dropped": 0, "episode_reward_min": -831.4805149183638}
{"iterations_since_restore": 162, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.31036486433862, "timesteps_this_iter": 45813, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.80784048316573, "cost1_mean": 173.5866113621367, "system_level_velocity_mean": 14.797727424145208, "cost2_mean": -120.49485609893244, "cost2_max": -56.231904621636254, "outflow_rate_max": 1445.7981547619047, "cost1_min": 78.38076367095628, "system_level_velocity_min": 10.205962754135658, "system_level_velocity_max": 18.33053981911061, "outflow_rate_min": 772.4147700643042, "cost2_min": -139.57739945014202, "outflow_rate_mean": 1204.2182403581533}, "episode_len_mean": 318.97, "info": {"default": {"kl": 0.016698097810149193, "total_loss": 16.154926300048828, "vf_explained_var": 0.9290972948074341, "cur_lr": 0.0005000000237487257, "entropy": 0.702483057975769, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 16.15702247619629, "policy_loss": -0.00632347771897912}, "num_steps_trained": 7282483, "update_time_ms": 9.258, "sample_time_ms": 20584.328, "load_time_ms": 18.443, "num_steps_sampled": 7282483, "grad_time_ms": 12511.979}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5465.18310713768, "timestamp": 1558615050, "time_since_restore": 5465.18310713768, "policy_reward_mean": {}, "training_iteration": 162, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849066d8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7282483, "episodes_total": 7560, "timesteps_total": 7282483, "episode_reward_mean": -573.6750940510971, "episodes_this_iter": 45, "date": "2019-05-23_12-37-30", "time_this_iter_s": 30.145455360412598, "num_metric_batches_dropped": 0, "episode_reward_min": -831.4805149183638}
{"iterations_since_restore": 163, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.576496356202938, "timesteps_this_iter": 46643, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.29722516649267, "cost1_mean": 172.55505882551176, "system_level_velocity_mean": 14.884609824506903, "cost2_mean": -119.28565433173817, "cost2_max": -22.33271302067118, "outflow_rate_max": 1445.1089153695536, "cost1_min": 22.8052491605713, "system_level_velocity_min": 10.205962754135658, "system_level_velocity_max": 18.56483443023832, "outflow_rate_min": 514.5009007334598, "cost2_min": -139.57739945014202, "outflow_rate_mean": 1198.1937649581137}, "episode_len_mean": 316.07, "info": {"default": {"kl": 0.014709983952343464, "total_loss": 17.20172119140625, "vf_explained_var": 0.9260208010673523, "cur_lr": 0.0005000000237487257, "entropy": 0.7257558703422546, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 17.20220375061035, "policy_loss": -0.004205849952995777}, "num_steps_trained": 7329126, "update_time_ms": 9.087, "sample_time_ms": 20679.474, "load_time_ms": 18.701, "num_steps_sampled": 7329126, "grad_time_ms": 12291.5}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5497.183417797089, "timestamp": 1558615082, "time_since_restore": 5497.183417797089, "policy_reward_mean": {}, "training_iteration": 163, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501ac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8450f128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7329126, "episodes_total": 7608, "timesteps_total": 7329126, "episode_reward_mean": -564.9220595295931, "episodes_this_iter": 48, "date": "2019-05-23_12-38-02", "time_this_iter_s": 32.00031065940857, "num_metric_batches_dropped": 0, "episode_reward_min": -829.5029293583735}
{"iterations_since_restore": 164, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.576496356202938, "timesteps_this_iter": 46093, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 219.1201343417032, "cost1_mean": 175.79129237757795, "system_level_velocity_mean": 14.817126669815888, "cost2_mean": -121.72012833641938, "cost2_max": -22.33271302067118, "outflow_rate_max": 1445.1089153695536, "cost1_min": 22.8052491605713, "system_level_velocity_min": 11.412288858449308, "system_level_velocity_max": 18.56483443023832, "outflow_rate_min": 514.5009007334598, "cost2_min": -138.06308960819135, "outflow_rate_mean": 1211.9187268041017}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.015838108956813812, "total_loss": 13.299566268920898, "vf_explained_var": 0.937346339225769, "cur_lr": 0.0005000000237487257, "entropy": 0.6876201629638672, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.302278518676758, "policy_loss": -0.006721819285303354}, "num_steps_trained": 7375219, "update_time_ms": 8.968, "sample_time_ms": 20676.244, "load_time_ms": 18.448, "num_steps_sampled": 7375219, "grad_time_ms": 12109.806}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5528.343235731125, "timestamp": 1558615113, "time_since_restore": 5528.343235731125, "policy_reward_mean": {}, "training_iteration": 164, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849065c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df588>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7375219, "episodes_total": 7658, "timesteps_total": 7375219, "episode_reward_mean": -579.122189908477, "episodes_this_iter": 50, "date": "2019-05-23_12-38-33", "time_this_iter_s": 31.159817934036255, "num_metric_batches_dropped": 0, "episode_reward_min": -837.5430444817846}
{"iterations_since_restore": 165, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.576496356202938, "timesteps_this_iter": 46498, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.9769610102183, "cost1_mean": 173.7728475867667, "system_level_velocity_mean": 14.7373428106774, "cost2_mean": -122.8578943989889, "cost2_max": -22.33271302067118, "outflow_rate_max": 1442.0930949637923, "cost1_min": 22.8052491605713, "system_level_velocity_min": 11.531053965114449, "system_level_velocity_max": 18.56483443023832, "outflow_rate_min": 514.5009007334598, "cost2_min": -143.2798213122794, "outflow_rate_mean": 1202.7388220688215}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.016950301826000214, "total_loss": 14.165660858154297, "vf_explained_var": 0.9359266757965088, "cur_lr": 0.0005000000237487257, "entropy": 0.6750956773757935, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 14.168754577636719, "policy_loss": -0.0073838201351463795}, "num_steps_trained": 7421717, "update_time_ms": 8.926, "sample_time_ms": 20596.445, "load_time_ms": 18.397, "num_steps_sampled": 7421717, "grad_time_ms": 12125.0}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5560.889798879623, "timestamp": 1558615146, "time_since_restore": 5560.889798879623, "policy_reward_mean": {}, "training_iteration": 165, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845015c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501470>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7421717, "episodes_total": 7702, "timesteps_total": 7421717, "episode_reward_mean": -581.5752482202317, "episodes_this_iter": 44, "date": "2019-05-23_12-39-06", "time_this_iter_s": 32.546563148498535, "num_metric_batches_dropped": 0, "episode_reward_min": -837.5430444817846}
{"iterations_since_restore": 166, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.190614846261447, "timesteps_this_iter": 46387, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.2588185273574, "cost1_mean": 172.68628362889683, "system_level_velocity_mean": 14.652426370929572, "cost2_mean": -122.57953373127879, "cost2_max": -23.90216012831189, "outflow_rate_max": 1443.5015881605405, "cost1_min": 22.760553720048943, "system_level_velocity_min": 11.617064053149143, "system_level_velocity_max": 18.26011399208499, "outflow_rate_min": 479.24583308252767, "cost2_min": -143.2798213122794, "outflow_rate_mean": 1197.064082908397}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.01492214947938919, "total_loss": 11.412297248840332, "vf_explained_var": 0.9481475353240967, "cur_lr": 0.0005000000237487257, "entropy": 0.6898873448371887, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 11.414361000061035, "policy_loss": -0.00584151316434145}, "num_steps_trained": 7468104, "update_time_ms": 8.986, "sample_time_ms": 20428.218, "load_time_ms": 18.374, "num_steps_sampled": 7468104, "grad_time_ms": 12194.283}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5594.510354280472, "timestamp": 1558615180, "time_since_restore": 5594.510354280472, "policy_reward_mean": {}, "training_iteration": 166, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468b518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feb70>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7468104, "episodes_total": 7748, "timesteps_total": 7468104, "episode_reward_mean": -588.1050084696216, "episodes_this_iter": 46, "date": "2019-05-23_12-39-40", "time_this_iter_s": 33.62055540084839, "num_metric_batches_dropped": 0, "episode_reward_min": -820.5180882291826}
{"iterations_since_restore": 167, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.190614846261447, "timesteps_this_iter": 45016, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.49360687196753, "cost1_mean": 178.36687843514213, "system_level_velocity_mean": 14.993330907962372, "cost2_mean": -122.31675014064247, "cost2_max": -23.90216012831189, "outflow_rate_max": 1443.6338564391272, "cost1_min": 22.760553720048943, "system_level_velocity_min": 11.361874807425432, "system_level_velocity_max": 18.26011399208499, "outflow_rate_min": 479.24583308252767, "cost2_min": -140.8802441553107, "outflow_rate_mean": 1222.9440395514148}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.01635046675801277, "total_loss": 15.834738731384277, "vf_explained_var": 0.9260682463645935, "cur_lr": 0.0005000000237487257, "entropy": 0.6522254347801208, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 15.838117599487305, "policy_loss": -0.007516123354434967}, "num_steps_trained": 7513120, "update_time_ms": 8.802, "sample_time_ms": 20009.226, "load_time_ms": 18.086, "num_steps_sampled": 7513120, "grad_time_ms": 12091.104}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5623.799175977707, "timestamp": 1558615209, "time_since_restore": 5623.799175977707, "policy_reward_mean": {}, "training_iteration": 167, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe7f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7513120, "episodes_total": 7796, "timesteps_total": 7513120, "episode_reward_mean": -561.3060470552765, "episodes_this_iter": 48, "date": "2019-05-23_12-40-09", "time_this_iter_s": 29.288821697235107, "num_metric_batches_dropped": 0, "episode_reward_min": -844.2373957438233}
{"iterations_since_restore": 168, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -296.1560521156801, "timesteps_this_iter": 45721, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.49360687196753, "cost1_mean": 180.45180310740207, "system_level_velocity_mean": 14.986590985677944, "cost2_mean": -124.15928588622366, "cost2_max": -110.12054648065875, "outflow_rate_max": 1443.6338564391272, "cost1_min": 133.24175792093868, "system_level_velocity_min": 11.361874807425432, "system_level_velocity_max": 18.14391480686284, "outflow_rate_min": 1030.7692222313237, "cost2_min": -140.08313757483725, "outflow_rate_mean": 1229.8830035535107}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01717238686978817, "total_loss": 16.027477264404297, "vf_explained_var": 0.9240784049034119, "cur_lr": 0.0005000000237487257, "entropy": 0.6627566814422607, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 16.029644012451172, "policy_loss": -0.006515427492558956}, "num_steps_trained": 7558841, "update_time_ms": 8.74, "sample_time_ms": 20045.089, "load_time_ms": 18.235, "num_steps_sampled": 7558841, "grad_time_ms": 11952.814}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5656.916408777237, "timestamp": 1558615242, "time_since_restore": 5656.916408777237, "policy_reward_mean": {}, "training_iteration": 168, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845235f8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7558841, "episodes_total": 7842, "timesteps_total": 7558841, "episode_reward_mean": -563.9859134147974, "episodes_this_iter": 46, "date": "2019-05-23_12-40-42", "time_this_iter_s": 33.11723279953003, "num_metric_batches_dropped": 0, "episode_reward_min": -844.2373957438233}
{"iterations_since_restore": 169, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -296.1560521156801, "timesteps_this_iter": 46485, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.2065496811604, "cost1_mean": 177.9092569490866, "system_level_velocity_mean": 14.782649792089321, "cost2_mean": -124.08754408788941, "cost2_max": -108.25565418533698, "outflow_rate_max": 1436.5248079475691, "cost1_min": 138.80588495759096, "system_level_velocity_min": 11.604605126801076, "system_level_velocity_max": 18.14391480686284, "outflow_rate_min": 1039.974062134809, "cost2_min": -138.90129640341803, "outflow_rate_mean": 1213.4146682312414}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01700715161859989, "total_loss": 17.925674438476562, "vf_explained_var": 0.9130697846412659, "cur_lr": 0.0005000000237487257, "entropy": 0.6944220066070557, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 17.927743911743164, "policy_loss": -0.006374639458954334}, "num_steps_trained": 7605326, "update_time_ms": 8.436, "sample_time_ms": 19931.208, "load_time_ms": 18.504, "num_steps_sampled": 7605326, "grad_time_ms": 11691.431}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5686.669204711914, "timestamp": 1558615272, "time_since_restore": 5686.669204711914, "policy_reward_mean": {}, "training_iteration": 169, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845019e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501208>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7605326, "episodes_total": 7885, "timesteps_total": 7605326, "episode_reward_mean": -585.0717765577984, "episodes_this_iter": 43, "date": "2019-05-23_12-41-12", "time_this_iter_s": 29.752795934677124, "num_metric_batches_dropped": 0, "episode_reward_min": -858.706781110083}
{"iterations_since_restore": 170, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -298.81590268297737, "timesteps_this_iter": 45135, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.15505101874783, "cost1_mean": 181.19282094237312, "system_level_velocity_mean": 15.009934859278438, "cost2_mean": -122.78129147178535, "cost2_max": -108.25565418533698, "outflow_rate_max": 1445.1285306692507, "cost1_min": 138.80588495759096, "system_level_velocity_min": 11.65874404162459, "system_level_velocity_max": 18.014352508851896, "outflow_rate_min": 1039.974062134809, "cost2_min": -139.68328334132065, "outflow_rate_mean": 1237.4136756670714}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.018946409225463867, "total_loss": 16.957674026489258, "vf_explained_var": 0.9161348938941956, "cur_lr": 0.0005000000237487257, "entropy": 0.6675499081611633, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 16.96082878112793, "policy_loss": -0.007952340878546238}, "num_steps_trained": 7650461, "update_time_ms": 8.289, "sample_time_ms": 19819.437, "load_time_ms": 18.988, "num_steps_sampled": 7650461, "grad_time_ms": 11496.641}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5717.622651815414, "timestamp": 1558615303, "time_since_restore": 5717.622651815414, "policy_reward_mean": {}, "training_iteration": 170, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fea20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fed68>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7650461, "episodes_total": 7934, "timesteps_total": 7650461, "episode_reward_mean": -559.6763118242255, "episodes_this_iter": 49, "date": "2019-05-23_12-41-43", "time_this_iter_s": 30.953447103500366, "num_metric_batches_dropped": 0, "episode_reward_min": -858.706781110083}
{"iterations_since_restore": 171, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.02879053624874, "timesteps_this_iter": 45804, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.0607273621881, "cost1_mean": 181.00949836124752, "system_level_velocity_mean": 15.090481198440749, "cost2_mean": -123.33195695449845, "cost2_max": -54.39004266786667, "outflow_rate_max": 1445.1285306692507, "cost1_min": 78.82582996462526, "system_level_velocity_min": 11.74401254938582, "system_level_velocity_max": 18.250207139391094, "outflow_rate_min": 763.8018402357801, "cost2_min": -141.30813992380055, "outflow_rate_mean": 1243.6656553130679}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.015727145597338676, "total_loss": 13.067656517028809, "vf_explained_var": 0.9370051622390747, "cur_lr": 0.0005000000237487257, "entropy": 0.6719047427177429, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.070243835449219, "policy_loss": -0.0065700761042535305}, "num_steps_trained": 7696265, "update_time_ms": 8.399, "sample_time_ms": 19849.848, "load_time_ms": 18.854, "num_steps_sampled": 7696265, "grad_time_ms": 11485.018}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5749.5729694366455, "timestamp": 1558615335, "time_since_restore": 5749.5729694366455, "policy_reward_mean": {}, "training_iteration": 171, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845232b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523630>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7696265, "episodes_total": 7982, "timesteps_total": 7696265, "episode_reward_mean": -545.6063842998167, "episodes_this_iter": 48, "date": "2019-05-23_12-42-15", "time_this_iter_s": 31.95031762123108, "num_metric_batches_dropped": 0, "episode_reward_min": -821.8575851048225}
{"iterations_since_restore": 172, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.36335029055011, "timesteps_this_iter": 45403, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 216.5961278701296, "cost1_mean": 177.32309008023734, "system_level_velocity_mean": 14.972081746432268, "cost2_mean": -122.41981225142145, "cost2_max": -22.361977699591986, "outflow_rate_max": 1440.7777313955887, "cost1_min": 22.743504398240223, "system_level_velocity_min": 11.239834643800409, "system_level_velocity_max": 18.250207139391094, "outflow_rate_min": 480.59421767541664, "cost2_min": -141.30813992380055, "outflow_rate_mean": 1222.4006316082157}, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.017146965488791466, "total_loss": 14.173917770385742, "vf_explained_var": 0.9315081238746643, "cur_lr": 0.0005000000237487257, "entropy": 0.6686745285987854, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 14.175345420837402, "policy_loss": -0.005769127514213324}, "num_steps_trained": 7741668, "update_time_ms": 8.613, "sample_time_ms": 19904.943, "load_time_ms": 18.733, "num_steps_sampled": 7741668, "grad_time_ms": 11643.449}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5781.846679925919, "timestamp": 1558615367, "time_since_restore": 5781.846679925919, "policy_reward_mean": {}, "training_iteration": 172, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845235f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523fd0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7741668, "episodes_total": 8025, "timesteps_total": 7741668, "episode_reward_mean": -554.8257494422903, "episodes_this_iter": 43, "date": "2019-05-23_12-42-47", "time_this_iter_s": 32.27371048927307, "num_metric_batches_dropped": 0, "episode_reward_min": -826.2989961800675}
{"iterations_since_restore": 173, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.36335029055011, "timesteps_this_iter": 45762, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 216.44932542655428, "cost1_mean": 178.60603859637806, "system_level_velocity_mean": 14.972900312741263, "cost2_mean": -122.36097828782404, "cost2_max": -22.361977699591986, "outflow_rate_max": 1438.770313565841, "cost1_min": 22.743504398240223, "system_level_velocity_min": 11.239834643800409, "system_level_velocity_max": 18.24497781768383, "outflow_rate_min": 480.59421767541664, "cost2_min": -143.94631267901406, "outflow_rate_mean": 1226.431081723173}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.016746599227190018, "total_loss": 15.479263305664062, "vf_explained_var": 0.9250246286392212, "cur_lr": 0.0005000000237487257, "entropy": 0.6814746856689453, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.482865333557129, "policy_loss": -0.007840186357498169}, "num_steps_trained": 7787430, "update_time_ms": 8.549, "sample_time_ms": 19785.511, "load_time_ms": 18.515, "num_steps_sampled": 7787430, "grad_time_ms": 11906.651}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5815.283016681671, "timestamp": 1558615401, "time_since_restore": 5815.283016681671, "policy_reward_mean": {}, "training_iteration": 173, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7787430, "episodes_total": 8073, "timesteps_total": 7787430, "episode_reward_mean": -557.659727302479, "episodes_this_iter": 48, "date": "2019-05-23_12-43-21", "time_this_iter_s": 33.43633675575256, "num_metric_batches_dropped": 0, "episode_reward_min": -826.2989961800675}
{"iterations_since_restore": 174, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -301.75003572633295, "timesteps_this_iter": 45847, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.06024186201222, "cost1_mean": 178.6892866643277, "system_level_velocity_mean": 14.8331715705614, "cost2_mean": -124.00176476021643, "cost2_max": -108.96256121833088, "outflow_rate_max": 1441.5001133535459, "cost1_min": 134.02331759938266, "system_level_velocity_min": 11.303738258120624, "system_level_velocity_max": 17.97700491633087, "outflow_rate_min": 1020.505249017038, "cost2_min": -143.94631267901406, "outflow_rate_mean": 1223.66344228663}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017266755923628807, "total_loss": 17.08772087097168, "vf_explained_var": 0.91628098487854, "cur_lr": 0.0005000000237487257, "entropy": 0.6727068424224854, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 17.09133529663086, "policy_loss": -0.007984284311532974}, "num_steps_trained": 7833277, "update_time_ms": 8.883, "sample_time_ms": 19667.143, "load_time_ms": 18.938, "num_steps_sampled": 7833277, "grad_time_ms": 12025.75}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5846.47136759758, "timestamp": 1558615432, "time_since_restore": 5846.47136759758, "policy_reward_mean": {}, "training_iteration": 174, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a9e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7833277, "episodes_total": 8121, "timesteps_total": 7833277, "episode_reward_mean": -574.6428911397823, "episodes_this_iter": 48, "date": "2019-05-23_12-43-52", "time_this_iter_s": 31.188350915908813, "num_metric_batches_dropped": 0, "episode_reward_min": -843.5881902385681}
{"iterations_since_restore": 175, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.845726923757358, "timesteps_this_iter": 45813, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.06024186201222, "cost1_mean": 175.2256539025501, "system_level_velocity_mean": 14.974776716793583, "cost2_mean": -121.5531257870371, "cost2_max": -20.551008512246856, "outflow_rate_max": 1441.5001133535459, "cost1_min": 17.68213140119028, "system_level_velocity_min": 11.479971027560758, "system_level_velocity_max": 18.40600367104655, "outflow_rate_min": 442.8785900830537, "cost2_min": -142.2080707900147, "outflow_rate_mean": 1209.3601276394306}, "episode_len_mean": 317.17, "info": {"default": {"kl": 0.015855975449085236, "total_loss": 13.14712142944336, "vf_explained_var": 0.9379650354385376, "cur_lr": 0.0005000000237487257, "entropy": 0.6803871393203735, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.15029525756836, "policy_loss": -0.007186687085777521}, "num_steps_trained": 7879090, "update_time_ms": 8.908, "sample_time_ms": 19688.438, "load_time_ms": 19.081, "num_steps_sampled": 7879090, "grad_time_ms": 11960.622}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5878.577327013016, "timestamp": 1558615464, "time_since_restore": 5878.577327013016, "policy_reward_mean": {}, "training_iteration": 175, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523b00>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7879090, "episodes_total": 8168, "timesteps_total": 7879090, "episode_reward_mean": -554.5004515462781, "episodes_this_iter": 47, "date": "2019-05-23_12-44-24", "time_this_iter_s": 32.10595941543579, "num_metric_batches_dropped": 0, "episode_reward_min": -843.5881902385681}
{"iterations_since_restore": 176, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.845726923757358, "timesteps_this_iter": 46445, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.00208304063318, "cost1_mean": 173.14304069643302, "system_level_velocity_mean": 14.827414806508932, "cost2_mean": -120.71915126260625, "cost2_max": -20.551008512246856, "outflow_rate_max": 1439.2728893442616, "cost1_min": 17.68213140119028, "system_level_velocity_min": 11.479971027560758, "system_level_velocity_max": 18.40600367104655, "outflow_rate_min": 442.8785900830537, "cost2_min": -140.52233337220068, "outflow_rate_mean": 1199.125736770013}, "episode_len_mean": 317.17, "info": {"default": {"kl": 0.014761887490749359, "total_loss": 12.433307647705078, "vf_explained_var": 0.9423922300338745, "cur_lr": 0.0005000000237487257, "entropy": 0.6931353807449341, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.436952590942383, "policy_loss": -0.007382796611636877}, "num_steps_trained": 7925535, "update_time_ms": 8.716, "sample_time_ms": 19690.954, "load_time_ms": 19.254, "num_steps_sampled": 7925535, "grad_time_ms": 11745.856}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5910.073824644089, "timestamp": 1558615495, "time_since_restore": 5910.073824644089, "policy_reward_mean": {}, "training_iteration": 176, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84680780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468d518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8467ab70>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7925535, "episodes_total": 8214, "timesteps_total": 7925535, "episode_reward_mean": -565.557895096697, "episodes_this_iter": 46, "date": "2019-05-23_12-44-55", "time_this_iter_s": 31.496497631072998, "num_metric_batches_dropped": 0, "episode_reward_min": -831.9496023805547}
{"iterations_since_restore": 177, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -109.36294631738225, "timesteps_this_iter": 45153, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 216.58041562430486, "cost1_mean": 176.26409033062504, "system_level_velocity_mean": 14.782508525270403, "cost2_mean": -122.54498946059749, "cost2_max": -57.94140163852368, "outflow_rate_max": 1439.2728893442616, "cost1_min": 83.88958932883324, "system_level_velocity_min": 11.621933925159096, "system_level_velocity_max": 18.388163655038298, "outflow_rate_min": 802.5374380322418, "cost2_min": -141.5560348739528, "outflow_rate_mean": 1211.5301463227827}, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016541969031095505, "total_loss": 10.834095001220703, "vf_explained_var": 0.9479275345802307, "cur_lr": 0.0005000000237487257, "entropy": 0.6708142757415771, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 10.835676193237305, "policy_loss": -0.0057678790763020515}, "num_steps_trained": 7970688, "update_time_ms": 8.581, "sample_time_ms": 19940.806, "load_time_ms": 19.353, "num_steps_sampled": 7970688, "grad_time_ms": 11693.872}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5941.366844892502, "timestamp": 1558615527, "time_since_restore": 5941.366844892502, "policy_reward_mean": {}, "training_iteration": 177, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514d30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845144e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514c18>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7970688, "episodes_total": 8263, "timesteps_total": 7970688, "episode_reward_mean": -575.7335007888987, "episodes_this_iter": 49, "date": "2019-05-23_12-45-27", "time_this_iter_s": 31.293020248413086, "num_metric_batches_dropped": 0, "episode_reward_min": -768.6847500412879}
{"iterations_since_restore": 178, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -108.47493187638145, "timesteps_this_iter": 44882, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.1846278138754, "cost1_mean": 178.4542804682014, "system_level_velocity_mean": 15.073811463586383, "cost2_mean": -120.83264731792926, "cost2_max": -57.94140163852368, "outflow_rate_max": 1439.2728893442616, "cost1_min": 83.8146726683924, "system_level_velocity_min": 12.028534804117974, "system_level_velocity_max": 18.39587456722632, "outflow_rate_min": 802.5374380322418, "cost2_min": -141.5560348739528, "outflow_rate_mean": 1222.2494271608707}, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.0156512800604105, "total_loss": 16.65049171447754, "vf_explained_var": 0.9234386086463928, "cur_lr": 0.0005000000237487257, "entropy": 0.664533257484436, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.653104782104492, "policy_loss": -0.006576021667569876}, "num_steps_trained": 8015570, "update_time_ms": 8.822, "sample_time_ms": 19998.184, "load_time_ms": 18.454, "num_steps_sampled": 8015570, "grad_time_ms": 11550.775}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 5973.620096683502, "timestamp": 1558615559, "time_since_restore": 5973.620096683502, "policy_reward_mean": {}, "training_iteration": 178, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468dc50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846df588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468d908>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8015570, "episodes_total": 8308, "timesteps_total": 8015570, "episode_reward_mean": -551.7696465101977, "episodes_this_iter": 45, "date": "2019-05-23_12-45-59", "time_this_iter_s": 32.253251791000366, "num_metric_batches_dropped": 0, "episode_reward_min": -752.6243748064105}
{"iterations_since_restore": 179, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.16822915825193, "timesteps_this_iter": 46441, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.1846278138754, "cost1_mean": 178.46425214363433, "system_level_velocity_mean": 15.126524698886572, "cost2_mean": -120.54580776742378, "cost2_max": -22.95796329326392, "outflow_rate_max": 1438.47143700002, "cost1_min": 22.57447635098125, "system_level_velocity_min": 12.028534804117974, "system_level_velocity_max": 18.39587456722632, "outflow_rate_min": 509.9464896273245, "cost2_min": -140.90204736606591, "outflow_rate_mean": 1219.0298645389175}, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.016647016629576683, "total_loss": 10.761007308959961, "vf_explained_var": 0.9492104053497314, "cur_lr": 0.0005000000237487257, "entropy": 0.6546972393989563, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 10.762659072875977, "policy_loss": -0.005865517072379589}, "num_steps_trained": 8062011, "update_time_ms": 8.96, "sample_time_ms": 20103.317, "load_time_ms": 18.292, "num_steps_sampled": 8062011, "grad_time_ms": 11840.287}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6007.318046331406, "timestamp": 1558615593, "time_since_restore": 6007.318046331406, "policy_reward_mean": {}, "training_iteration": 179, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa7f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514828>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8062011, "episodes_total": 8354, "timesteps_total": 8062011, "episode_reward_mean": -549.2212656141058, "episodes_this_iter": 46, "date": "2019-05-23_12-46-33", "time_this_iter_s": 33.69794964790344, "num_metric_batches_dropped": 0, "episode_reward_min": -791.8041302030672}
{"iterations_since_restore": 180, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.16822915825193, "timesteps_this_iter": 46301, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.1846278138754, "cost1_mean": 176.7589886685872, "system_level_velocity_mean": 14.865785499738658, "cost2_mean": -123.23350352575808, "cost2_max": -22.95796329326392, "outflow_rate_max": 1440.5645891087813, "cost1_min": 22.57447635098125, "system_level_velocity_min": 12.148851329997283, "system_level_velocity_max": 18.184183240277417, "outflow_rate_min": 509.9464896273245, "cost2_min": -141.66561570854594, "outflow_rate_mean": 1209.2177139634255}, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.01724912039935589, "total_loss": 11.12095832824707, "vf_explained_var": 0.9479928016662598, "cur_lr": 0.0005000000237487257, "entropy": 0.6772067546844482, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 11.124290466308594, "policy_loss": -0.00769870774820447}, "num_steps_trained": 8108312, "update_time_ms": 8.96, "sample_time_ms": 19964.495, "load_time_ms": 17.765, "num_steps_sampled": 8108312, "grad_time_ms": 11927.863}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6037.751786708832, "timestamp": 1558615623, "time_since_restore": 6037.751786708832, "policy_reward_mean": {}, "training_iteration": 180, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468da20>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8108312, "episodes_total": 8400, "timesteps_total": 8108312, "episode_reward_mean": -572.8257954444365, "episodes_this_iter": 46, "date": "2019-05-23_12-47-03", "time_this_iter_s": 30.433740377426147, "num_metric_batches_dropped": 0, "episode_reward_min": -791.8041302030672}
{"iterations_since_restore": 181, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.594729616217, "timesteps_this_iter": 45208, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.7311796165663, "cost1_mean": 174.8228526540801, "system_level_velocity_mean": 14.846428646286752, "cost2_mean": -121.84908170053909, "cost2_max": -19.651410268985224, "outflow_rate_max": 1444.269659863945, "cost1_min": 17.72991645022951, "system_level_velocity_min": 11.930263384895213, "system_level_velocity_max": 18.184183240277417, "outflow_rate_min": 448.5093812448499, "cost2_min": -142.12229830711505, "outflow_rate_mean": 1203.6029699823782}, "episode_len_mean": 319.12, "info": {"default": {"kl": 0.015308934263885021, "total_loss": 13.457335472106934, "vf_explained_var": 0.9358550906181335, "cur_lr": 0.0005000000237487257, "entropy": 0.653344988822937, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.460209846496582, "policy_loss": -0.006748793181031942}, "num_steps_trained": 8153520, "update_time_ms": 8.945, "sample_time_ms": 19870.46, "load_time_ms": 18.093, "num_steps_sampled": 8153520, "grad_time_ms": 11943.082}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6068.925123929977, "timestamp": 1558615654, "time_since_restore": 6068.925123929977, "policy_reward_mean": {}, "training_iteration": 181, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845239e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84523d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845232e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8153520, "episodes_total": 8450, "timesteps_total": 8153520, "episode_reward_mean": -567.8118351854137, "episodes_this_iter": 50, "date": "2019-05-23_12-47-34", "time_this_iter_s": 31.17333722114563, "num_metric_batches_dropped": 0, "episode_reward_min": -773.5075811751469}
{"iterations_since_restore": 182, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.594729616217, "timesteps_this_iter": 45843, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.75626263829668, "cost1_mean": 176.7554262500745, "system_level_velocity_mean": 14.94636595799782, "cost2_mean": -121.55663244293821, "cost2_max": -19.651410268985224, "outflow_rate_max": 1444.269659863945, "cost1_min": 17.72991645022951, "system_level_velocity_min": 11.930263384895213, "system_level_velocity_max": 18.239308831192773, "outflow_rate_min": 448.5093812448499, "cost2_min": -142.12229830711505, "outflow_rate_mean": 1214.2145162649458}, "episode_len_mean": 319.94, "info": {"default": {"kl": 0.016467474400997162, "total_loss": 13.34941291809082, "vf_explained_var": 0.9371679425239563, "cur_lr": 0.0005000000237487257, "entropy": 0.6622845530509949, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 13.352958679199219, "policy_loss": -0.00771561823785305}, "num_steps_trained": 8199363, "update_time_ms": 8.731, "sample_time_ms": 19840.82, "load_time_ms": 18.282, "num_steps_sampled": 8199363, "grad_time_ms": 11865.787}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6100.138755321503, "timestamp": 1558615686, "time_since_restore": 6100.138755321503, "policy_reward_mean": {}, "training_iteration": 182, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845084e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845087f0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8199363, "episodes_total": 8494, "timesteps_total": 8199363, "episode_reward_mean": -559.6883569812794, "episodes_this_iter": 44, "date": "2019-05-23_12-48-06", "time_this_iter_s": 31.21363139152527, "num_metric_batches_dropped": 0, "episode_reward_min": -800.4580169445414}
{"iterations_since_restore": 183, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.00048064921798, "timesteps_this_iter": 45188, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.98996845348498, "cost1_mean": 180.47962234924046, "system_level_velocity_mean": 15.123412784724197, "cost2_mean": -121.18128715258598, "cost2_max": -55.800602830084785, "outflow_rate_max": 1441.3486002777174, "cost1_min": 78.86839931748615, "system_level_velocity_min": 11.635240082415825, "system_level_velocity_max": 18.239308831192773, "outflow_rate_min": 759.0625152086584, "cost2_min": -136.63517840416418, "outflow_rate_mean": 1231.415993391443}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.016219032928347588, "total_loss": 12.94015884399414, "vf_explained_var": 0.938064694404602, "cur_lr": 0.0005000000237487257, "entropy": 0.6623110771179199, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.944539070129395, "policy_loss": -0.008484927006065845}, "num_steps_trained": 8244551, "update_time_ms": 8.737, "sample_time_ms": 19819.649, "load_time_ms": 18.338, "num_steps_sampled": 8244551, "grad_time_ms": 11629.287}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6130.99097776413, "timestamp": 1558615717, "time_since_restore": 6130.99097776413, "policy_reward_mean": {}, "training_iteration": 183, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fef98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe2e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8244551, "episodes_total": 8541, "timesteps_total": 8244551, "episode_reward_mean": -550.5729875961242, "episodes_this_iter": 47, "date": "2019-05-23_12-48-37", "time_this_iter_s": 30.852222442626953, "num_metric_batches_dropped": 0, "episode_reward_min": -824.4401386880867}
{"iterations_since_restore": 184, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -293.6826997107422, "timesteps_this_iter": 45656, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.98996845348498, "cost1_mean": 180.17169866927074, "system_level_velocity_mean": 14.988607431241357, "cost2_mean": -121.50465404067711, "cost2_max": -108.43444193081388, "outflow_rate_max": 1441.3486002777174, "cost1_min": 137.38229243923243, "system_level_velocity_min": 11.600810131617788, "system_level_velocity_max": 18.195303145079873, "outflow_rate_min": 1039.8426310806913, "cost2_min": -140.5172028575937, "outflow_rate_mean": 1228.9480243829692}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015295900404453278, "total_loss": 12.29731273651123, "vf_explained_var": 0.94145667552948, "cur_lr": 0.0005000000237487257, "entropy": 0.6667461395263672, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 12.30046272277832, "policy_loss": -0.007022259756922722}, "num_steps_trained": 8290207, "update_time_ms": 8.535, "sample_time_ms": 19878.356, "load_time_ms": 17.965, "num_steps_sampled": 8290207, "grad_time_ms": 11609.358}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6162.548674106598, "timestamp": 1558615748, "time_since_restore": 6162.548674106598, "policy_reward_mean": {}, "training_iteration": 184, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845146a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fa5c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514828>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8290207, "episodes_total": 8588, "timesteps_total": 8290207, "episode_reward_mean": -563.9143868194352, "episodes_this_iter": 47, "date": "2019-05-23_12-49-08", "time_this_iter_s": 31.55769634246826, "num_metric_batches_dropped": 0, "episode_reward_min": -825.4851176275804}
{"iterations_since_restore": 185, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -96.54957955033943, "timesteps_this_iter": 46378, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.98996845348498, "cost1_mean": 175.45979897025526, "system_level_velocity_mean": 14.924129938533854, "cost2_mean": -121.30730130434033, "cost2_max": -53.59860155974732, "outflow_rate_max": 1444.044244954965, "cost1_min": 78.60778654566612, "system_level_velocity_min": 11.600810131617788, "system_level_velocity_max": 18.574616931194303, "outflow_rate_min": 757.2066179922376, "cost2_min": -141.12455188775073, "outflow_rate_mean": 1205.7890620924754}, "episode_len_mean": 318.77, "info": {"default": {"kl": 0.017719337716698647, "total_loss": 17.791309356689453, "vf_explained_var": 0.915744423866272, "cur_lr": 0.0005000000237487257, "entropy": 0.6581766605377197, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 17.79448699951172, "policy_loss": -0.0076629300601780415}, "num_steps_trained": 8336585, "update_time_ms": 8.514, "sample_time_ms": 19926.315, "load_time_ms": 18.217, "num_steps_sampled": 8336585, "grad_time_ms": 11692.113}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6195.966371059418, "timestamp": 1558615782, "time_since_restore": 6195.966371059418, "policy_reward_mean": {}, "training_iteration": 185, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feeb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84501160>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8336585, "episodes_total": 8636, "timesteps_total": 8336585, "episode_reward_mean": -561.6447356671222, "episodes_this_iter": 48, "date": "2019-05-23_12-49-42", "time_this_iter_s": 33.417696952819824, "num_metric_batches_dropped": 0, "episode_reward_min": -825.4851176275804}
{"iterations_since_restore": 186, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -96.54957955033943, "timesteps_this_iter": 45435, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.09803821556358, "cost1_mean": 174.85025013679893, "system_level_velocity_mean": 14.881601082495505, "cost2_mean": -121.97754155557595, "cost2_max": -53.59860155974732, "outflow_rate_max": 1444.044244954965, "cost1_min": 78.60778654566612, "system_level_velocity_min": 11.29302867770823, "system_level_velocity_max": 18.574616931194303, "outflow_rate_min": 757.2066179922376, "cost2_min": -141.12455188775073, "outflow_rate_mean": 1202.7180120996366}, "episode_len_mean": 318.77, "info": {"default": {"kl": 0.017453687265515327, "total_loss": 12.665451049804688, "vf_explained_var": 0.9363961219787598, "cur_lr": 0.0005000000237487257, "entropy": 0.6711002588272095, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.668590545654297, "policy_loss": -0.007556271273642778}, "num_steps_trained": 8382020, "update_time_ms": 8.437, "sample_time_ms": 19940.374, "load_time_ms": 18.072, "num_steps_sampled": 8382020, "grad_time_ms": 11758.081}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6228.26078248024, "timestamp": 1558615814, "time_since_restore": 6228.26078248024, "policy_reward_mean": {}, "training_iteration": 186, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845084e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508710>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8382020, "episodes_total": 8682, "timesteps_total": 8382020, "episode_reward_mean": -565.5553135288542, "episodes_this_iter": 46, "date": "2019-05-23_12-50-14", "time_this_iter_s": 32.294411420822144, "num_metric_batches_dropped": 0, "episode_reward_min": -838.2652605878598}
{"iterations_since_restore": 187, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.277438245129407, "timesteps_this_iter": 45432, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.09803821556358, "cost1_mean": 175.85965457984486, "system_level_velocity_mean": 14.99964951330257, "cost2_mean": -120.93679530735113, "cost2_max": -21.50156915042701, "outflow_rate_max": 1449.629813186174, "cost1_min": 22.87103933155749, "system_level_velocity_min": 11.29302867770823, "system_level_velocity_max": 18.534767546882556, "outflow_rate_min": 506.069524914099, "cost2_min": -142.00032534631782, "outflow_rate_mean": 1211.8083769549712}, "episode_len_mean": 317.94, "info": {"default": {"kl": 0.017488501965999603, "total_loss": 15.517681121826172, "vf_explained_var": 0.9277538657188416, "cur_lr": 0.0005000000237487257, "entropy": 0.6787051558494568, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.521376609802246, "policy_loss": -0.00812096893787384}, "num_steps_trained": 8427452, "update_time_ms": 8.796, "sample_time_ms": 19870.392, "load_time_ms": 17.395, "num_steps_sampled": 8427452, "grad_time_ms": 12018.063}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6261.430804014206, "timestamp": 1558615847, "time_since_restore": 6261.430804014206, "policy_reward_mean": {}, "training_iteration": 187, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845140f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906d68>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8427452, "episodes_total": 8729, "timesteps_total": 8427452, "episode_reward_mean": -552.1717214192155, "episodes_this_iter": 47, "date": "2019-05-23_12-50-47", "time_this_iter_s": 33.170021533966064, "num_metric_batches_dropped": 0, "episode_reward_min": -838.2652605878598}
{"iterations_since_restore": 188, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.277438245129407, "timesteps_this_iter": 45032, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.9466771768842, "cost1_mean": 175.837096482415, "system_level_velocity_mean": 14.990284814337183, "cost2_mean": -120.96263252220002, "cost2_max": -21.50156915042701, "outflow_rate_max": 1449.629813186174, "cost1_min": 22.87103933155749, "system_level_velocity_min": 11.29302867770823, "system_level_velocity_max": 18.534767546882556, "outflow_rate_min": 506.069524914099, "cost2_min": -142.00032534631782, "outflow_rate_mean": 1215.7496435539686}, "episode_len_mean": 317.94, "info": {"default": {"kl": 0.01776045560836792, "total_loss": 13.169501304626465, "vf_explained_var": 0.9383522272109985, "cur_lr": 0.0005000000237487257, "entropy": 0.6760824918746948, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 13.173279762268066, "policy_loss": -0.00827502179890871}, "num_steps_trained": 8472484, "update_time_ms": 9.144, "sample_time_ms": 19744.872, "load_time_ms": 18.332, "num_steps_sampled": 8472484, "grad_time_ms": 12049.68}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6292.757228136063, "timestamp": 1558615878, "time_since_restore": 6292.757228136063, "policy_reward_mean": {}, "training_iteration": 188, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84514e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845145c0>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8472484, "episodes_total": 8777, "timesteps_total": 8472484, "episode_reward_mean": -551.650840912155, "episodes_this_iter": 48, "date": "2019-05-23_12-51-18", "time_this_iter_s": 31.32642412185669, "num_metric_batches_dropped": 0, "episode_reward_min": -838.2652605878598}
{"iterations_since_restore": 189, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -97.37612379205457, "timesteps_this_iter": 46180, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 218.9466771768842, "cost1_mean": 178.4088003854011, "system_level_velocity_mean": 15.049103506236431, "cost2_mean": -122.66867880404352, "cost2_max": -54.82925761381487, "outflow_rate_max": 1444.701330452409, "cost1_min": 78.13430472691901, "system_level_velocity_min": 12.072887516815264, "system_level_velocity_max": 18.534767546882556, "outflow_rate_min": 755.1229528272617, "cost2_min": -142.00032534631782, "outflow_rate_mean": 1219.7440717056757}, "episode_len_mean": 320.84, "info": {"default": {"kl": 0.015086154453456402, "total_loss": 12.393301963806152, "vf_explained_var": 0.9418470859527588, "cur_lr": 0.0005000000237487257, "entropy": 0.7025317549705505, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.395533561706543, "policy_loss": -0.006048852112144232}, "num_steps_trained": 8518664, "update_time_ms": 8.881, "sample_time_ms": 19627.13, "load_time_ms": 18.321, "num_steps_sampled": 8518664, "grad_time_ms": 11908.367}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6323.852813959122, "timestamp": 1558615910, "time_since_restore": 6323.852813959122, "policy_reward_mean": {}, "training_iteration": 189, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845087f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84508780>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8518664, "episodes_total": 8823, "timesteps_total": 8518664, "episode_reward_mean": -554.5416729810062, "episodes_this_iter": 46, "date": "2019-05-23_12-51-50", "time_this_iter_s": 31.095585823059082, "num_metric_batches_dropped": 0, "episode_reward_min": -809.9856035342239}
{"iterations_since_restore": 190, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.76638838191553, "timesteps_this_iter": 45862, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.95318501097842, "cost1_mean": 178.1702897396719, "system_level_velocity_mean": 14.924211412733053, "cost2_mean": -123.06282995792807, "cost2_max": -56.53367342216534, "outflow_rate_max": 1439.5539455782307, "cost1_min": 78.13430472691901, "system_level_velocity_min": 12.072887516815264, "system_level_velocity_max": 18.09357987452776, "outflow_rate_min": 755.1229528272617, "cost2_min": -136.18752747979508, "outflow_rate_mean": 1218.4757328531311}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.016991272568702698, "total_loss": 11.806549072265625, "vf_explained_var": 0.9452910423278809, "cur_lr": 0.0005000000237487257, "entropy": 0.6765992641448975, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 11.809772491455078, "policy_loss": -0.007525284308940172}, "num_steps_trained": 8564526, "update_time_ms": 8.828, "sample_time_ms": 19619.215, "load_time_ms": 17.698, "num_steps_sampled": 8564526, "grad_time_ms": 11772.62}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6352.839543581009, "timestamp": 1558615939, "time_since_restore": 6352.839543581009, "policy_reward_mean": {}, "training_iteration": 190, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557978>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8564526, "episodes_total": 8869, "timesteps_total": 8564526, "episode_reward_mean": -566.7504738688972, "episodes_this_iter": 46, "date": "2019-05-23_12-52-19", "time_this_iter_s": 28.986729621887207, "num_metric_batches_dropped": 0, "episode_reward_min": -793.9573872774789}
{"iterations_since_restore": 191, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -295.710866671599, "timesteps_this_iter": 46173, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.46620274014782, "cost1_mean": 177.52065582074474, "system_level_velocity_mean": 14.752204388891435, "cost2_mean": -123.86564603041423, "cost2_max": -109.79641063369138, "outflow_rate_max": 1439.5539455782307, "cost1_min": 141.40045670722975, "system_level_velocity_min": 12.0234085883896, "system_level_velocity_max": 18.05977305256974, "outflow_rate_min": 1049.6202103274832, "cost2_min": -136.18752747979508, "outflow_rate_mean": 1221.7113036650107}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016814004629850388, "total_loss": 12.765213012695312, "vf_explained_var": 0.9403349161148071, "cur_lr": 0.0005000000237487257, "entropy": 0.6958863735198975, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 12.767659187316895, "policy_loss": -0.006701603066176176}, "num_steps_trained": 8610699, "update_time_ms": 8.964, "sample_time_ms": 19531.504, "load_time_ms": 17.719, "num_steps_sampled": 8610699, "grad_time_ms": 11849.539}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6383.897962331772, "timestamp": 1558615970, "time_since_restore": 6383.897962331772, "policy_reward_mean": {}, "training_iteration": 191, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a278>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8610699, "episodes_total": 8915, "timesteps_total": 8610699, "episode_reward_mean": -579.7713573022886, "episodes_this_iter": 46, "date": "2019-05-23_12-52-50", "time_this_iter_s": 31.05841875076294, "num_metric_batches_dropped": 0, "episode_reward_min": -800.0878919237009}
{"iterations_since_restore": 192, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.09069726554212, "timesteps_this_iter": 45937, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.37547225021484, "cost1_mean": 174.82904507444445, "system_level_velocity_mean": 14.675218859786405, "cost2_mean": -122.69677622660863, "cost2_max": -57.21555453135856, "outflow_rate_max": 1443.6563001621805, "cost1_min": 78.8018048379005, "system_level_velocity_min": 11.467501243315105, "system_level_velocity_max": 18.082141996054713, "outflow_rate_min": 737.002692010632, "cost2_min": -136.18633901241526, "outflow_rate_mean": 1206.1741012175394}, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01553827803581953, "total_loss": 12.058501243591309, "vf_explained_var": 0.9436821937561035, "cur_lr": 0.0005000000237487257, "entropy": 0.6980220079421997, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 12.061441421508789, "policy_loss": -0.0068736900575459}, "num_steps_trained": 8656636, "update_time_ms": 9.017, "sample_time_ms": 19494.337, "load_time_ms": 16.788, "num_steps_sampled": 8656636, "grad_time_ms": 11908.326}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6415.309211015701, "timestamp": 1558616001, "time_since_restore": 6415.309211015701, "policy_reward_mean": {}, "training_iteration": 192, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849612e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961ac8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8656636, "episodes_total": 8961, "timesteps_total": 8656636, "episode_reward_mean": -586.5559447088934, "episodes_this_iter": 46, "date": "2019-05-23_12-53-21", "time_this_iter_s": 31.411248683929443, "num_metric_batches_dropped": 0, "episode_reward_min": -850.8028735291142}
{"iterations_since_restore": 193, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.692588509581135, "timesteps_this_iter": 46198, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.0554820485745, "cost1_mean": 172.89975381502907, "system_level_velocity_mean": 14.78155573854741, "cost2_mean": -120.09396014153216, "cost2_max": -21.022613454581002, "outflow_rate_max": 1447.8630780368285, "cost1_min": 17.76595843243609, "system_level_velocity_min": 11.467501243315105, "system_level_velocity_max": 18.082141996054713, "outflow_rate_min": 431.75782487237836, "cost2_min": -136.50967794781826, "outflow_rate_mean": 1195.201444896757}, "episode_len_mean": 317.86, "info": {"default": {"kl": 0.018442396074533463, "total_loss": 17.726757049560547, "vf_explained_var": 0.9169998168945312, "cur_lr": 0.0005000000237487257, "entropy": 0.7014213800430298, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 17.72987937927246, "policy_loss": -0.007790821138769388}, "num_steps_trained": 8702834, "update_time_ms": 9.107, "sample_time_ms": 19595.879, "load_time_ms": 16.12, "num_steps_sampled": 8702834, "grad_time_ms": 12030.057}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6448.392712593079, "timestamp": 1558616034, "time_since_restore": 6448.392712593079, "policy_reward_mean": {}, "training_iteration": 193, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844febe0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe908>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8702834, "episodes_total": 9009, "timesteps_total": 8702834, "episode_reward_mean": -571.7694794221253, "episodes_this_iter": 48, "date": "2019-05-23_12-53-54", "time_this_iter_s": 33.08350157737732, "num_metric_batches_dropped": 0, "episode_reward_min": -850.8028735291142}
{"iterations_since_restore": 194, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.692588509581135, "timesteps_this_iter": 44747, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.6951113820951, "cost1_mean": 175.5040696722515, "system_level_velocity_mean": 14.870737969675094, "cost2_mean": -120.39732806403563, "cost2_max": -21.022613454581002, "outflow_rate_max": 1447.8630780368285, "cost1_min": 17.76595843243609, "system_level_velocity_min": 11.563714827378844, "system_level_velocity_max": 18.13533945855596, "outflow_rate_min": 431.75782487237836, "cost2_min": -140.41598242142197, "outflow_rate_mean": 1204.5773535822998}, "episode_len_mean": 319.94, "info": {"default": {"kl": 0.016880327835679054, "total_loss": 17.171234130859375, "vf_explained_var": 0.9187174439430237, "cur_lr": 0.0005000000237487257, "entropy": 0.6733051538467407, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 17.173490524291992, "policy_loss": -0.006529462523758411}, "num_steps_trained": 8747581, "update_time_ms": 9.043, "sample_time_ms": 19477.424, "load_time_ms": 16.441, "num_steps_sampled": 8747581, "grad_time_ms": 12066.306}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6479.131169080734, "timestamp": 1558616065, "time_since_restore": 6479.131169080734, "policy_reward_mean": {}, "training_iteration": 194, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557438>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8747581, "episodes_total": 9057, "timesteps_total": 8747581, "episode_reward_mean": -565.5998509426826, "episodes_this_iter": 48, "date": "2019-05-23_12-54-25", "time_this_iter_s": 30.73845648765564, "num_metric_batches_dropped": 0, "episode_reward_min": -832.0492577168236}
{"iterations_since_restore": 195, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -296.9328289200622, "timesteps_this_iter": 46145, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.6951113820951, "cost1_mean": 179.00320964370255, "system_level_velocity_mean": 14.891509829350436, "cost2_mean": -122.17515022175517, "cost2_max": -109.02427497546716, "outflow_rate_max": 1440.924540878358, "cost1_min": 135.0136004322593, "system_level_velocity_min": 11.45362550782925, "system_level_velocity_max": 18.13533945855596, "outflow_rate_min": 985.4092222313236, "cost2_min": -143.98321871153598, "outflow_rate_mean": 1223.1549326304191}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017845267429947853, "total_loss": 15.214181900024414, "vf_explained_var": 0.9254205226898193, "cur_lr": 0.0005000000237487257, "entropy": 0.69455885887146, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.218875885009766, "policy_loss": -0.009210938587784767}, "num_steps_trained": 8793726, "update_time_ms": 8.965, "sample_time_ms": 19265.568, "load_time_ms": 16.504, "num_steps_sampled": 8793726, "grad_time_ms": 12039.808}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6510.160491704941, "timestamp": 1558616096, "time_since_restore": 6510.160491704941, "policy_reward_mean": {}, "training_iteration": 195, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456afd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a8d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab38>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8793726, "episodes_total": 9101, "timesteps_total": 8793726, "episode_reward_mean": -568.8157643778582, "episodes_this_iter": 44, "date": "2019-05-23_12-54-56", "time_this_iter_s": 31.029322624206543, "num_metric_batches_dropped": 0, "episode_reward_min": -850.9015788348976}
{"iterations_since_restore": 196, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -296.9328289200622, "timesteps_this_iter": 45930, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.6951113820951, "cost1_mean": 178.8166829629582, "system_level_velocity_mean": 14.859944219461955, "cost2_mean": -122.8006138176764, "cost2_max": -109.02427497546716, "outflow_rate_max": 1440.7150547253605, "cost1_min": 128.30390061054555, "system_level_velocity_min": 10.761225551424733, "system_level_velocity_max": 18.13533945855596, "outflow_rate_min": 985.4092222313236, "cost2_min": -143.98321871153598, "outflow_rate_mean": 1225.8244037921033}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.018092192709445953, "total_loss": 16.381317138671875, "vf_explained_var": 0.9172576665878296, "cur_lr": 0.0005000000237487257, "entropy": 0.6779723167419434, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.383628845214844, "policy_loss": -0.006890241522341967}, "num_steps_trained": 8839656, "update_time_ms": 8.976, "sample_time_ms": 19125.562, "load_time_ms": 15.939, "num_steps_sampled": 8839656, "grad_time_ms": 12055.184}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6541.201858520508, "timestamp": 1558616127, "time_since_restore": 6541.201858520508, "policy_reward_mean": {}, "training_iteration": 196, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849610b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849613c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961e10>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8839656, "episodes_total": 9147, "timesteps_total": 8839656, "episode_reward_mean": -568.587586263947, "episodes_this_iter": 46, "date": "2019-05-23_12-55-27", "time_this_iter_s": 31.041366815567017, "num_metric_batches_dropped": 0, "episode_reward_min": -850.9015788348976}
{"iterations_since_restore": 197, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -306.3455497875078, "timesteps_this_iter": 45270, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 216.52960047005365, "cost1_mean": 178.2706640859322, "system_level_velocity_mean": 14.799080234625535, "cost2_mean": -123.51613293839901, "cost2_max": -109.53838615912974, "outflow_rate_max": 1439.8858491909155, "cost1_min": 128.30390061054555, "system_level_velocity_min": 10.761225551424733, "system_level_velocity_max": 18.043009747023884, "outflow_rate_min": 1051.466036883004, "cost2_min": -139.78078162964286, "outflow_rate_mean": 1219.400143504446}, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016186751425266266, "total_loss": 15.096219062805176, "vf_explained_var": 0.9247772693634033, "cur_lr": 0.0005000000237487257, "entropy": 0.6619793772697449, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 15.097437858581543, "policy_loss": -0.005315199960023165}, "num_steps_trained": 8884926, "update_time_ms": 8.721, "sample_time_ms": 19056.164, "load_time_ms": 16.854, "num_steps_sampled": 8884926, "grad_time_ms": 11939.613}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6572.528518676758, "timestamp": 1558616159, "time_since_restore": 6572.528518676758, "policy_reward_mean": {}, "training_iteration": 197, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844feba8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8884926, "episodes_total": 9195, "timesteps_total": 8884926, "episode_reward_mean": -573.2320119786025, "episodes_this_iter": 48, "date": "2019-05-23_12-55-59", "time_this_iter_s": 31.32666015625, "num_metric_batches_dropped": 0, "episode_reward_min": -825.0001461562275}
{"iterations_since_restore": 198, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.38652170572172, "timesteps_this_iter": 45766, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.7725626263861, "cost1_mean": 171.9875628401394, "system_level_velocity_mean": 14.847226616064297, "cost2_mean": -118.66429228739473, "cost2_max": -21.957904198408315, "outflow_rate_max": 1439.8858491909155, "cost1_min": 22.867243903884493, "system_level_velocity_min": 10.591813125929853, "system_level_velocity_max": 18.538160332077815, "outflow_rate_min": 482.9339227256608, "cost2_min": -139.78078162964286, "outflow_rate_mean": 1189.1228329526969}, "episode_len_mean": 315.31, "info": {"default": {"kl": 0.017230043187737465, "total_loss": 13.356423377990723, "vf_explained_var": 0.937821090221405, "cur_lr": 0.0005000000237487257, "entropy": 0.7027032375335693, "cur_kl_coeff": 0.25312498211860657, "vf_loss": 13.359930038452148, "policy_loss": -0.007868538610637188}, "num_steps_trained": 8930692, "update_time_ms": 8.187, "sample_time_ms": 19101.905, "load_time_ms": 16.02, "num_steps_sampled": 8930692, "grad_time_ms": 11988.508}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6604.7977204322815, "timestamp": 1558616191, "time_since_restore": 6604.7977204322815, "policy_reward_mean": {}, "training_iteration": 198, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845570f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557908>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8930692, "episodes_total": 9243, "timesteps_total": 8930692, "episode_reward_mean": -560.6615412482669, "episodes_this_iter": 48, "date": "2019-05-23_12-56-31", "time_this_iter_s": 32.26920175552368, "num_metric_batches_dropped": 0, "episode_reward_min": -821.586528006567}
{"iterations_since_restore": 199, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.38652170572172, "timesteps_this_iter": 44615, "pid": 20597, "done": false, "custom_metrics": {"cost1_max": 217.7725626263861, "cost1_mean": 172.9950842872227, "system_level_velocity_mean": 14.926317445449893, "cost2_mean": -117.88311645569257, "cost2_max": -21.957904198408315, "outflow_rate_max": 1444.5757243225153, "cost1_min": 22.867243903884493, "system_level_velocity_min": 10.591813125929853, "system_level_velocity_max": 18.538160332077815, "outflow_rate_min": 482.9339227256608, "cost2_min": -134.64061806202923, "outflow_rate_mean": 1199.4619652377835}, "episode_len_mean": 315.31, "info": {"default": {"kl": 0.017215410247445107, "total_loss": 17.27028465270996, "vf_explained_var": 0.9160759449005127, "cur_lr": 0.0005000000237487257, "entropy": 0.651528000831604, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 17.27288246154785, "policy_loss": -0.006956187542527914}, "num_steps_trained": 8975307, "update_time_ms": 8.377, "sample_time_ms": 18979.476, "load_time_ms": 15.951, "num_steps_sampled": 8975307, "grad_time_ms": 11982.344}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6634.6118903160095, "timestamp": 1558616221, "time_since_restore": 6634.6118903160095, "policy_reward_mean": {}, "training_iteration": 199, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844fe9e8>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8975307, "episodes_total": 9289, "timesteps_total": 8975307, "episode_reward_mean": -551.8752311338759, "episodes_this_iter": 46, "date": "2019-05-23_12-57-01", "time_this_iter_s": 29.814169883728027, "num_metric_batches_dropped": 0, "episode_reward_min": -821.586528006567}
{"iterations_since_restore": 200, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.38652170572172, "timesteps_this_iter": 44953, "pid": 20597, "done": true, "custom_metrics": {"cost1_max": 219.58345243032392, "cost1_mean": 179.57519001657755, "system_level_velocity_mean": 15.24852373413365, "cost2_mean": -118.97045227626032, "cost2_max": -21.957904198408315, "outflow_rate_max": 1444.5757243225153, "cost1_min": 22.867243903884493, "system_level_velocity_min": 11.498941628134146, "system_level_velocity_max": 18.48226545430355, "outflow_rate_min": 503.0068759917715, "cost2_min": -135.78693676401204, "outflow_rate_mean": 1230.9540376930777}, "episode_len_mean": 319.24, "info": {"default": {"kl": 0.017274588346481323, "total_loss": 16.984861373901367, "vf_explained_var": 0.922109067440033, "cur_lr": 0.0005000000237487257, "entropy": 0.665115237236023, "cur_kl_coeff": 0.2531249523162842, "vf_loss": 16.988252639770508, "policy_loss": -0.007763044908642769}, "num_steps_trained": 9020260, "update_time_ms": 8.339, "sample_time_ms": 18943.681, "load_time_ms": 16.872, "num_steps_sampled": 9020260, "grad_time_ms": 12144.435}, "experiment_id": "84342d8edf2d4974bcf0da0cbf883a6b", "time_total_s": 6664.866739749908, "timestamp": 1558616251, "time_since_restore": 6664.866739749908, "policy_reward_mean": {}, "training_iteration": 200, "config": {"clip_param": 0.3, "preprocessor_pref": "deepmind", "observation_filter": "NoFilter", "output": null, "sample_async": false, "horizon": 750, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e849610f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961a20>", "on_train_result": null, "on_sample_end": null}, "log_level": "INFO", "optimizer": {}, "simple_optimizer": false, "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:10.0_buf_len: 3", "input_evaluation": null, "sgd_minibatch_size": 128, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "conv_activation": "relu", "framestack": true, "custom_preprocessor": null, "use_lstm": false, "dim": 84, "fcnet_hiddens": [128, 64, 32], "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "zero_mean": true, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "lr_schedule": null, "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 9020260, "episodes_total": 9336, "timesteps_total": 9020260, "episode_reward_mean": -530.4861045835121, "episodes_this_iter": 47, "date": "2019-05-23_12-57-31", "time_this_iter_s": 30.254849433898926, "num_metric_batches_dropped": 0, "episode_reward_min": -821.586528006567}
