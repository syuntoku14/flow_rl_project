{"iterations_since_restore": 1, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -527.7953194366193, "timesteps_this_iter": 41741, "custom_metrics": {"cost1_max": 142.58441097102536, "cost1_min": 105.02233685465413, "system_level_velocity_mean": 10.099230173795098, "cost2_mean": -26.536900038738757, "cost2_max": -13.06025174437394, "outflow_rate_max": 938.2103683202043, "cost1_mean": 121.40781625166169, "system_level_velocity_min": 8.373713640975366, "system_level_velocity_max": 11.643049255923296, "outflow_rate_min": 377.29025761124126, "outflow_rate_mean": 752.0198906793269, "cost2_min": -42.67854883064602}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.002879034262150526, "total_loss": 36.71786117553711, "vf_loss": 36.718467712402344, "vf_explained_var": -1.798378207240603e-06, "cur_lr": 0.0005000000237487257, "entropy": 1.4180964231491089, "cur_kl_coeff": 0.20000003278255463, "policy_loss": -0.0011816136538982391}, "num_steps_trained": 41741, "update_time_ms": 860.86, "load_time_ms": 92.407, "sample_time_ms": 18603.335, "num_steps_sampled": 41741, "grad_time_ms": 12558.64}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 32.25915241241455, "timestamp": 1558603232, "time_since_restore": 32.25915241241455, "policy_reward_mean": {}, "training_iteration": 1, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9240>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 41741, "episodes_total": 40, "timesteps_total": 41741, "episode_reward_mean": -703.8202936320511, "episodes_this_iter": 40, "date": "2019-05-23_09-20-32", "time_this_iter_s": 32.25915241241455, "num_metric_batches_dropped": 0, "episode_reward_min": -1078.3519936379278}
{"iterations_since_restore": 2, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -500.6928045737482, "timesteps_this_iter": 41228, "custom_metrics": {"cost1_max": 147.66070530602644, "cost1_min": 105.02233685465413, "system_level_velocity_mean": 10.405920611000152, "cost2_mean": -26.93742656841449, "cost2_max": -13.06025174437394, "outflow_rate_max": 972.9103605313093, "cost1_mean": 125.05147650146486, "system_level_velocity_min": 8.373713640975366, "system_level_velocity_max": 12.201234150789599, "outflow_rate_min": 377.29025761124126, "outflow_rate_mean": 779.1025728792769, "cost2_min": -44.81290646097958}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.004116690251976252, "total_loss": 59.08338928222656, "vf_loss": 59.08478546142578, "vf_explained_var": -2.689613438633387e-07, "cur_lr": 0.0005000000237487257, "entropy": 1.4061967134475708, "cur_kl_coeff": 0.10000001639127731, "policy_loss": -0.001808340079151094}, "num_steps_trained": 82969, "update_time_ms": 434.211, "load_time_ms": 59.026, "sample_time_ms": 18427.345, "num_steps_sampled": 82969, "grad_time_ms": 12260.303}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 62.5969078540802, "timestamp": 1558603263, "time_since_restore": 62.5969078540802, "policy_reward_mean": {}, "training_iteration": 2, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468beb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468bac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84698630>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 82969, "episodes_total": 80, "timesteps_total": 82969, "episode_reward_mean": -675.7340853883408, "episodes_this_iter": 40, "date": "2019-05-23_09-21-03", "time_this_iter_s": 30.33775544166565, "num_metric_batches_dropped": 0, "episode_reward_min": -1078.3519936379278}
{"iterations_since_restore": 3, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.30445286800797, "timesteps_this_iter": 43670, "custom_metrics": {"cost1_max": 162.4265395956989, "cost1_min": 23.0365490340097, "system_level_velocity_mean": 11.091710622119912, "cost2_mean": -28.355761347539723, "cost2_max": -13.06025174437394, "outflow_rate_max": 1058.907251181564, "cost1_mean": 131.63551758913474, "system_level_velocity_min": 7.784789004171705, "system_level_velocity_max": 18.424109083313606, "outflow_rate_min": 451.765573770492, "outflow_rate_mean": 817.4228183584113, "cost2_min": -47.50523788358035}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.005827380809932947, "total_loss": 82.21949768066406, "vf_loss": 82.22103881835938, "vf_explained_var": -5.5409596910749315e-08, "cur_lr": 0.0005000000237487257, "entropy": 1.4061771631240845, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.001842766534537077}, "num_steps_trained": 126639, "update_time_ms": 292.226, "load_time_ms": 49.266, "sample_time_ms": 18604.932, "num_steps_sampled": 126639, "grad_time_ms": 12445.454}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 94.51790237426758, "timestamp": 1558603295, "time_since_restore": 94.51790237426758, "policy_reward_mean": {}, "training_iteration": 3, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a1d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a198>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 126639, "episodes_total": 121, "timesteps_total": 126639, "episode_reward_mean": -645.3830171101296, "episodes_this_iter": 41, "date": "2019-05-23_09-21-35", "time_this_iter_s": 31.920994520187378, "num_metric_batches_dropped": 0, "episode_reward_min": -1111.2343253215145}
{"iterations_since_restore": 4, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.30445286800797, "timesteps_this_iter": 40923, "custom_metrics": {"cost1_max": 184.30916586410902, "cost1_min": 23.0365490340097, "system_level_velocity_mean": 12.547314916900827, "cost2_mean": -32.88782382703261, "cost2_max": -16.596417981340583, "outflow_rate_max": 1157.997708618757, "cost1_mean": 150.20274023643034, "system_level_velocity_min": 7.784789004171705, "system_level_velocity_max": 18.424109083313606, "outflow_rate_min": 451.765573770492, "outflow_rate_mean": 949.0517875446633, "cost2_min": -49.537255218036876}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.005149948410689831, "total_loss": 53.228851318359375, "vf_loss": 53.22996520996094, "vf_explained_var": 0.4881893992424011, "cur_lr": 0.0005000000237487257, "entropy": 1.4031283855438232, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0013707841280847788}, "num_steps_trained": 167562, "update_time_ms": 221.352, "load_time_ms": 43.31, "sample_time_ms": 18963.77, "num_steps_sampled": 167562, "grad_time_ms": 12223.92}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 126.24389147758484, "timestamp": 1558603327, "time_since_restore": 126.24389147758484, "policy_reward_mean": {}, "training_iteration": 4, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846728d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a6d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 167562, "episodes_total": 181, "timesteps_total": 167562, "episode_reward_mean": -581.8301300296736, "episodes_this_iter": 60, "date": "2019-05-23_09-22-07", "time_this_iter_s": 31.72598910331726, "num_metric_batches_dropped": 0, "episode_reward_min": -1111.2343253215145}
{"iterations_since_restore": 5, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.143219734719025, "timesteps_this_iter": 41024, "custom_metrics": {"cost1_max": 185.44127512980714, "cost1_min": 17.889399303110434, "system_level_velocity_mean": 13.426650885106769, "cost2_mean": -35.7381337088872, "cost2_max": -11.75997859268181, "outflow_rate_max": 1187.5061133129168, "cost1_mean": 161.16202917427165, "system_level_velocity_min": 10.052986142994563, "system_level_velocity_max": 17.650788388720734, "outflow_rate_min": 482.07223716978217, "outflow_rate_mean": 1043.4713227585075, "cost2_min": -52.09890485458659}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.013630693778395653, "total_loss": 34.123085021972656, "vf_loss": 34.1262321472168, "vf_explained_var": 0.7483252286911011, "cur_lr": 0.0005000000237487257, "entropy": 1.3851799964904785, "cur_kl_coeff": 0.05000000447034836, "policy_loss": -0.0038298822473734617}, "num_steps_trained": 208586, "update_time_ms": 179.176, "load_time_ms": 37.717, "sample_time_ms": 19047.687, "num_steps_sampled": 208586, "grad_time_ms": 12141.022}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 157.57919192314148, "timestamp": 1558603358, "time_since_restore": 157.57919192314148, "policy_reward_mean": {}, "training_iteration": 5, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530470>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 208586, "episodes_total": 222, "timesteps_total": 208586, "episode_reward_mean": -528.8140188131782, "episodes_this_iter": 41, "date": "2019-05-23_09-22-38", "time_this_iter_s": 31.33530044555664, "num_metric_batches_dropped": 0, "episode_reward_min": -776.3839402652243}
{"iterations_since_restore": 6, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.143219734719025, "timesteps_this_iter": 40564, "custom_metrics": {"cost1_max": 202.07949755753438, "cost1_min": 17.889399303110434, "system_level_velocity_mean": 14.165010661328756, "cost2_mean": -39.73416510785404, "cost2_max": -11.75997859268181, "outflow_rate_max": 1327.632776294792, "cost1_mean": 169.14167951320417, "system_level_velocity_min": 10.052986142994563, "system_level_velocity_max": 17.650788388720734, "outflow_rate_min": 482.07223716978217, "outflow_rate_mean": 1105.063421280082, "cost2_min": -67.62244614208228}, "done": false, "pid": 24639, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.00570913078263402, "total_loss": 31.293561935424805, "vf_loss": 31.295000076293945, "vf_explained_var": 0.7987018823623657, "cur_lr": 0.0005000000237487257, "entropy": 1.387731671333313, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0017257767030969262}, "num_steps_trained": 249150, "update_time_ms": 150.578, "load_time_ms": 33.606, "sample_time_ms": 19222.017, "num_steps_sampled": 249150, "grad_time_ms": 12049.707}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 189.36761283874512, "timestamp": 1558603390, "time_since_restore": 189.36761283874512, "policy_reward_mean": {}, "training_iteration": 6, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530710>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 249150, "episodes_total": 263, "timesteps_total": 249150, "episode_reward_mean": -481.82852058105425, "episodes_this_iter": 41, "date": "2019-05-23_09-23-10", "time_this_iter_s": 31.788420915603638, "num_metric_batches_dropped": 0, "episode_reward_min": -776.3839402652243}
{"iterations_since_restore": 7, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.93554165674983, "timesteps_this_iter": 42460, "custom_metrics": {"cost1_max": 203.33893871000265, "cost1_min": 77.69059518660478, "system_level_velocity_mean": 14.720578584967264, "cost2_mean": -50.361583188496226, "cost2_max": -27.355678212454162, "outflow_rate_max": 1327.632776294792, "cost1_mean": 176.0294641927178, "system_level_velocity_min": 11.399891565715645, "system_level_velocity_max": 17.940983244677504, "outflow_rate_min": 751.4101024511073, "outflow_rate_mean": 1161.3576067991216, "cost2_min": -73.79076151979507}, "done": false, "pid": 24639, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.006637213286012411, "total_loss": 37.2749137878418, "vf_loss": 37.27709197998047, "vf_explained_var": 0.7458454966545105, "cur_lr": 0.0005000000237487257, "entropy": 1.3984904289245605, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0025141185615211725}, "num_steps_trained": 291610, "update_time_ms": 130.241, "load_time_ms": 32.654, "sample_time_ms": 19635.363, "num_steps_sampled": 291610, "grad_time_ms": 12030.765}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 223.51819276809692, "timestamp": 1558603424, "time_since_restore": 223.51819276809692, "policy_reward_mean": {}, "training_iteration": 7, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9898>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 291610, "episodes_total": 322, "timesteps_total": 291610, "episode_reward_mean": -469.0542933976527, "episodes_this_iter": 59, "date": "2019-05-23_09-23-44", "time_this_iter_s": 34.15057992935181, "num_metric_batches_dropped": 0, "episode_reward_min": -762.4580046047279}
{"iterations_since_restore": 8, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.93554165674983, "timesteps_this_iter": 40295, "custom_metrics": {"cost1_max": 209.5216258985902, "cost1_min": 77.69059518660478, "system_level_velocity_mean": 15.049473970727622, "cost2_mean": -54.41444438795681, "cost2_max": -29.087542811096263, "outflow_rate_max": 1349.187029513655, "cost1_mean": 180.38858099250828, "system_level_velocity_min": 11.399891565715645, "system_level_velocity_max": 17.940983244677504, "outflow_rate_min": 751.4101024511073, "outflow_rate_mean": 1182.894503244425, "cost2_min": -73.79076151979507}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.008542947471141815, "total_loss": 24.298477172851562, "vf_loss": 24.30123519897461, "vf_explained_var": 0.8175286650657654, "cur_lr": 0.0005000000237487257, "entropy": 1.3832052946090698, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0031847567297518253}, "num_steps_trained": 331905, "update_time_ms": 115.102, "load_time_ms": 31.841, "sample_time_ms": 19648.05, "num_steps_sampled": 331905, "grad_time_ms": 11893.695}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 254.30503034591675, "timestamp": 1558603455, "time_since_restore": 254.30503034591675, "policy_reward_mean": {}, "training_iteration": 8, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845306a0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 331905, "episodes_total": 363, "timesteps_total": 331905, "episode_reward_mean": -466.54023986938415, "episodes_this_iter": 41, "date": "2019-05-23_09-24-15", "time_this_iter_s": 30.786837577819824, "num_metric_batches_dropped": 0, "episode_reward_min": -762.4580046047279}
{"iterations_since_restore": 9, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.27145303143507, "timesteps_this_iter": 42149, "custom_metrics": {"cost1_max": 216.71946869966249, "cost1_min": 79.20732949903167, "system_level_velocity_mean": 15.466445483991384, "cost2_mean": -57.68126574401686, "cost2_max": -31.323649711862224, "outflow_rate_max": 1401.5915877448074, "cost1_mean": 185.1136301008536, "system_level_velocity_min": 11.399891565715645, "system_level_velocity_max": 18.57336728287787, "outflow_rate_min": 778.9003166878236, "outflow_rate_mean": 1211.4429239912733, "cost2_min": -89.5886717748876}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.009894910268485546, "total_loss": 24.735363006591797, "vf_loss": 24.7379093170166, "vf_explained_var": 0.8134496808052063, "cur_lr": 0.0005000000237487257, "entropy": 1.3854846954345703, "cur_kl_coeff": 0.05000000074505806, "policy_loss": -0.003040891606360674}, "num_steps_trained": 374054, "update_time_ms": 103.193, "load_time_ms": 31.313, "sample_time_ms": 19724.543, "num_steps_sampled": 374054, "grad_time_ms": 11879.415}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 286.5406291484833, "timestamp": 1558603487, "time_since_restore": 286.5406291484833, "policy_reward_mean": {}, "training_iteration": 9, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530f28>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 374054, "episodes_total": 405, "timesteps_total": 374054, "episode_reward_mean": -448.9504811011017, "episodes_this_iter": 42, "date": "2019-05-23_09-24-47", "time_this_iter_s": 32.23559880256653, "num_metric_batches_dropped": 0, "episode_reward_min": -741.1803943768243}
{"iterations_since_restore": 10, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.06186034062704, "timesteps_this_iter": 43301, "custom_metrics": {"cost1_max": 218.89162936384446, "cost1_min": 22.94740358421854, "system_level_velocity_mean": 15.743023462245624, "cost2_mean": -66.63636435676491, "cost2_max": -16.303128113890352, "outflow_rate_max": 1416.3067413687395, "cost1_mean": 184.67923714859938, "system_level_velocity_min": 11.912960737387273, "system_level_velocity_max": 18.66939648360661, "outflow_rate_min": 464.52408151712706, "outflow_rate_mean": 1222.918227558995, "cost2_min": -89.5886717748876}, "done": false, "pid": 24639, "episode_len_mean": 317.12, "info": {"default": {"kl": 0.006206997204571962, "total_loss": 30.93235969543457, "vf_loss": 30.934782028198242, "vf_explained_var": 0.7668175101280212, "cur_lr": 0.0005000000237487257, "entropy": 1.3818095922470093, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.002730407752096653}, "num_steps_trained": 417355, "update_time_ms": 93.857, "load_time_ms": 30.875, "sample_time_ms": 19931.111, "num_steps_sampled": 417355, "grad_time_ms": 11979.195}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 321.34195828437805, "timestamp": 1558603522, "time_since_restore": 321.34195828437805, "policy_reward_mean": {}, "training_iteration": 10, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845305c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530dd8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 417355, "episodes_total": 462, "timesteps_total": 417355, "episode_reward_mean": -449.77191337840634, "episodes_this_iter": 57, "date": "2019-05-23_09-25-22", "time_this_iter_s": 34.801329135894775, "num_metric_batches_dropped": 0, "episode_reward_min": -715.5884897812304}
{"iterations_since_restore": 11, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.06186034062704, "timesteps_this_iter": 44165, "custom_metrics": {"cost1_max": 218.89162936384446, "cost1_min": 22.94740358421854, "system_level_velocity_mean": 15.408493123713322, "cost2_mean": -73.17699823711764, "cost2_max": -16.303128113890352, "outflow_rate_max": 1424.2215200255962, "cost1_mean": 182.02221464983498, "system_level_velocity_min": 11.849581652434363, "system_level_velocity_max": 18.66939648360661, "outflow_rate_min": 464.52408151712706, "outflow_rate_mean": 1212.0591656958982, "cost2_min": -93.42657240207201}, "done": false, "pid": 24639, "episode_len_mean": 319.2, "info": {"default": {"kl": 0.006428688298910856, "total_loss": 22.15989112854004, "vf_loss": 22.163007736206055, "vf_explained_var": 0.8378698229789734, "cur_lr": 0.0005000000237487257, "entropy": 1.3770931959152222, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.003437524661421776}, "num_steps_trained": 461520, "update_time_ms": 8.67, "load_time_ms": 24.145, "sample_time_ms": 20173.307, "num_steps_sampled": 461520, "grad_time_ms": 11906.436}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 354.33488941192627, "timestamp": 1558603555, "time_since_restore": 354.33488941192627, "policy_reward_mean": {}, "training_iteration": 11, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530ef0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 461520, "episodes_total": 505, "timesteps_total": 461520, "episode_reward_mean": -492.384114577322, "episodes_this_iter": 43, "date": "2019-05-23_09-25-55", "time_this_iter_s": 32.99293112754822, "num_metric_batches_dropped": 0, "episode_reward_min": -769.3441273279806}
{"iterations_since_restore": 12, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.22725907298098, "timesteps_this_iter": 45276, "custom_metrics": {"cost1_max": 219.11099782282952, "cost1_min": 83.32376261942483, "system_level_velocity_mean": 15.005102851499478, "cost2_mean": -77.86812521788515, "cost2_max": -34.48382768609921, "outflow_rate_max": 1425.3491731266154, "cost1_mean": 177.96183882952238, "system_level_velocity_min": 11.849581652434363, "system_level_velocity_max": 19.08114030580113, "outflow_rate_min": 812.6884351008277, "outflow_rate_mean": 1196.589786243105, "cost2_min": -104.05932060965881}, "done": false, "pid": 24639, "episode_len_mean": 321.02, "info": {"default": {"kl": 0.008122896775603294, "total_loss": 22.421676635742188, "vf_loss": 22.424192428588867, "vf_explained_var": 0.847897469997406, "cur_lr": 0.0005000000237487257, "entropy": 1.3513453006744385, "cur_kl_coeff": 0.05000000447034836, "policy_loss": -0.0029250006191432476}, "num_steps_trained": 506796, "update_time_ms": 8.774, "load_time_ms": 24.394, "sample_time_ms": 20600.861, "num_steps_sampled": 506796, "grad_time_ms": 11961.279}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 389.52751898765564, "timestamp": 1558603590, "time_since_restore": 389.52751898765564, "policy_reward_mean": {}, "training_iteration": 12, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846deda0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a6d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 506796, "episodes_total": 548, "timesteps_total": 506796, "episode_reward_mean": -532.2449989266156, "episodes_this_iter": 43, "date": "2019-05-23_09-26-30", "time_this_iter_s": 35.19262957572937, "num_metric_batches_dropped": 0, "episode_reward_min": -769.3441273279806}
{"iterations_since_restore": 13, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.22725907298098, "timesteps_this_iter": 45139, "custom_metrics": {"cost1_max": 222.38252152459336, "cost1_min": 83.32376261942483, "system_level_velocity_mean": 15.202826838840103, "cost2_mean": -82.49696805904333, "cost2_max": -34.48382768609921, "outflow_rate_max": 1439.914337367178, "cost1_mean": 179.95955073066705, "system_level_velocity_min": 12.152615426806847, "system_level_velocity_max": 19.08114030580113, "outflow_rate_min": 812.6884351008277, "outflow_rate_mean": 1205.98269261613, "cost2_min": -104.05932060965881}, "done": false, "pid": 24639, "episode_len_mean": 321.02, "info": {"default": {"kl": 0.006445695646107197, "total_loss": 27.83831024169922, "vf_loss": 27.840410232543945, "vf_explained_var": 0.8255128264427185, "cur_lr": 0.0005000000237487257, "entropy": 1.3442656993865967, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.002423102268949151}, "num_steps_trained": 551935, "update_time_ms": 9.046, "load_time_ms": 24.012, "sample_time_ms": 20918.351, "num_steps_sampled": 551935, "grad_time_ms": 12123.67}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 426.25538873672485, "timestamp": 1558603627, "time_since_restore": 426.25538873672485, "policy_reward_mean": {}, "training_iteration": 13, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534da0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 551935, "episodes_total": 602, "timesteps_total": 551935, "episode_reward_mean": -529.5300244141993, "episodes_this_iter": 54, "date": "2019-05-23_09-27-07", "time_this_iter_s": 36.727869749069214, "num_metric_batches_dropped": 0, "episode_reward_min": -788.867652403933}
{"iterations_since_restore": 14, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.395921027853618, "timesteps_this_iter": 42802, "custom_metrics": {"cost1_max": 222.9797130209726, "cost1_min": 23.030484162069435, "system_level_velocity_mean": 15.689478544151502, "cost2_mean": -82.54096722324017, "cost2_max": -16.64837204007974, "outflow_rate_max": 1444.733116883117, "cost1_mean": 182.3039425704797, "system_level_velocity_min": 12.152615426806847, "system_level_velocity_max": 18.675293361410496, "outflow_rate_min": 480.4101308344419, "outflow_rate_mean": 1218.7374834023324, "cost2_min": -98.36593161010941}, "done": false, "pid": 24639, "episode_len_mean": 315.94, "info": {"default": {"kl": 0.00700816186144948, "total_loss": 22.119815826416016, "vf_loss": 22.122251510620117, "vf_explained_var": 0.8631308674812317, "cur_lr": 0.0005000000237487257, "entropy": 1.3337702751159668, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.0027866261079907417}, "num_steps_trained": 594737, "update_time_ms": 9.222, "load_time_ms": 23.874, "sample_time_ms": 21237.683, "num_steps_sampled": 594737, "grad_time_ms": 12179.855}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 461.7484676837921, "timestamp": 1558603662, "time_since_restore": 461.7484676837921, "policy_reward_mean": {}, "training_iteration": 14, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845305f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 594737, "episodes_total": 647, "timesteps_total": 594737, "episode_reward_mean": -490.36674337874314, "episodes_this_iter": 45, "date": "2019-05-23_09-27-42", "time_this_iter_s": 35.49307894706726, "num_metric_batches_dropped": 0, "episode_reward_min": -788.867652403933}
{"iterations_since_restore": 15, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.395921027853618, "timesteps_this_iter": 43273, "custom_metrics": {"cost1_max": 222.9797130209726, "cost1_min": 23.030484162069435, "system_level_velocity_mean": 15.872315459991997, "cost2_mean": -83.02751321415215, "cost2_max": -16.64837204007974, "outflow_rate_max": 1450.9613933208595, "cost1_mean": 184.618674743109, "system_level_velocity_min": 12.152615426806847, "system_level_velocity_max": 18.675293361410496, "outflow_rate_min": 480.4101308344419, "outflow_rate_mean": 1237.0165575212961, "cost2_min": -104.28324274844795}, "done": false, "pid": 24639, "episode_len_mean": 315.94, "info": {"default": {"kl": 0.0061655533500015736, "total_loss": 20.250669479370117, "vf_loss": 20.25237274169922, "vf_explained_var": 0.8749353289604187, "cur_lr": 0.0005000000237487257, "entropy": 1.3270622491836548, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.002009006217122078}, "num_steps_trained": 638010, "update_time_ms": 8.882, "load_time_ms": 24.923, "sample_time_ms": 21387.63, "num_steps_sampled": 638010, "grad_time_ms": 12170.308}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 494.464159488678, "timestamp": 1558603695, "time_since_restore": 494.464159488678, "policy_reward_mean": {}, "training_iteration": 15, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d0668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846dfe10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530be0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 638010, "episodes_total": 691, "timesteps_total": 638010, "episode_reward_mean": -473.1420458626266, "episodes_this_iter": 44, "date": "2019-05-23_09-28-15", "time_this_iter_s": 32.715691804885864, "num_metric_batches_dropped": 0, "episode_reward_min": -788.867652403933}
{"iterations_since_restore": 16, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -91.38698993157676, "timesteps_this_iter": 45027, "custom_metrics": {"cost1_max": 222.65049965412373, "cost1_min": 79.69502747149158, "system_level_velocity_mean": 15.555728020393692, "cost2_mean": -86.12740170216519, "cost2_max": -43.737959345386905, "outflow_rate_max": 1450.9613933208595, "cost1_mean": 184.00843363450664, "system_level_velocity_min": 10.733616961486712, "system_level_velocity_max": 18.571565163884916, "outflow_rate_min": 771.0971026044228, "outflow_rate_mean": 1237.0635368133053, "cost2_min": -104.28324274844795}, "done": false, "pid": 24639, "episode_len_mean": 320.64, "info": {"default": {"kl": 0.006207258440554142, "total_loss": 20.920692443847656, "vf_loss": 20.923542022705078, "vf_explained_var": 0.8692044615745544, "cur_lr": 0.0005000000237487257, "entropy": 1.3229036331176758, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0031610825099051}, "num_steps_trained": 683037, "update_time_ms": 9.023, "load_time_ms": 26.253, "sample_time_ms": 21552.77, "num_steps_sampled": 683037, "grad_time_ms": 12288.419}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 529.1359286308289, "timestamp": 1558603730, "time_since_restore": 529.1359286308289, "policy_reward_mean": {}, "training_iteration": 16, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845345c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845349b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534278>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 683037, "episodes_total": 733, "timesteps_total": 683037, "episode_reward_mean": -502.46365831302586, "episodes_this_iter": 42, "date": "2019-05-23_09-28-50", "time_this_iter_s": 34.67176914215088, "num_metric_batches_dropped": 0, "episode_reward_min": -825.6548173927}
{"iterations_since_restore": 17, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -176.51646492534206, "timesteps_this_iter": 43637, "custom_metrics": {"cost1_max": 223.9427160309881, "cost1_min": 129.067348039127, "system_level_velocity_mean": 15.42923116557678, "cost2_mean": -89.3302261658211, "cost2_max": -73.80428892422296, "outflow_rate_max": 1457.7674343219876, "cost1_mean": 184.17894124924658, "system_level_velocity_min": 10.733616961486712, "system_level_velocity_max": 18.76081518152849, "outflow_rate_min": 993.9515225636237, "outflow_rate_mean": 1240.2505973956738, "cost2_min": -107.32286120391802}, "done": false, "pid": 24639, "episode_len_mean": 323.62, "info": {"default": {"kl": 0.00875210389494896, "total_loss": 26.36348533630371, "vf_loss": 26.36590003967285, "vf_explained_var": 0.8398348689079285, "cur_lr": 0.0005000000237487257, "entropy": 1.3083940744400024, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.00285354140214622}, "num_steps_trained": 726674, "update_time_ms": 9.306, "load_time_ms": 26.077, "sample_time_ms": 21642.093, "num_steps_sampled": 726674, "grad_time_ms": 12272.587}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 564.0431435108185, "timestamp": 1558603765, "time_since_restore": 564.0431435108185, "policy_reward_mean": {}, "training_iteration": 17, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846c17f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84672080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906ba8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 726674, "episodes_total": 788, "timesteps_total": 726674, "episode_reward_mean": -519.4662798367009, "episodes_this_iter": 55, "date": "2019-05-23_09-29-25", "time_this_iter_s": 34.907214879989624, "num_metric_batches_dropped": 0, "episode_reward_min": -825.6548173927}
{"iterations_since_restore": 18, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -176.51646492534206, "timesteps_this_iter": 44984, "custom_metrics": {"cost1_max": 223.9427160309881, "cost1_min": 147.9478813296575, "system_level_velocity_mean": 15.469136595444166, "cost2_mean": -90.52153093566884, "cost2_max": -73.80428892422296, "outflow_rate_max": 1457.7674343219876, "cost1_mean": 183.95314208444995, "system_level_velocity_min": 12.326921384776664, "system_level_velocity_max": 18.79685489336639, "outflow_rate_min": 1076.9195884371732, "outflow_rate_mean": 1236.7059503741007, "cost2_min": -108.09605586439008}, "done": false, "pid": 24639, "episode_len_mean": 322.82, "info": {"default": {"kl": 0.007866313681006432, "total_loss": 20.89182472229004, "vf_loss": 20.894502639770508, "vf_explained_var": 0.8795738816261292, "cur_lr": 0.0005000000237487257, "entropy": 1.3109173774719238, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.003070954931899905}, "num_steps_trained": 771658, "update_time_ms": 9.232, "load_time_ms": 26.34, "sample_time_ms": 21924.058, "num_steps_sampled": 771658, "grad_time_ms": 12398.277}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 598.9291250705719, "timestamp": 1558603800, "time_since_restore": 598.9291250705719, "policy_reward_mean": {}, "training_iteration": 18, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845346d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534828>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 771658, "episodes_total": 831, "timesteps_total": 771658, "episode_reward_mean": -520.5911045770482, "episodes_this_iter": 43, "date": "2019-05-23_09-30-00", "time_this_iter_s": 34.88598155975342, "num_metric_batches_dropped": 0, "episode_reward_min": -777.1419342737182}
{"iterations_since_restore": 19, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -177.31665574889894, "timesteps_this_iter": 45631, "custom_metrics": {"cost1_max": 223.7958586921729, "cost1_min": 144.91759199751326, "system_level_velocity_mean": 15.214588945487481, "cost2_mean": -92.47632192614427, "cost2_max": -73.85101215279576, "outflow_rate_max": 1456.6932142857142, "cost1_mean": 181.84719758260016, "system_level_velocity_min": 12.273535711824485, "system_level_velocity_max": 18.79685489336639, "outflow_rate_min": 1050.1276085654383, "outflow_rate_mean": 1225.6613799020045, "cost2_min": -108.09605586439008}, "done": false, "pid": 24639, "episode_len_mean": 323.92, "info": {"default": {"kl": 0.009647361002862453, "total_loss": 20.023338317871094, "vf_loss": 20.026945114135742, "vf_explained_var": 0.8867391347885132, "cur_lr": 0.0005000000237487257, "entropy": 1.291722297668457, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.004089633002877235}, "num_steps_trained": 817289, "update_time_ms": 9.137, "load_time_ms": 26.544, "sample_time_ms": 22134.307, "num_steps_sampled": 817289, "grad_time_ms": 12462.721}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 633.9210429191589, "timestamp": 1558603835, "time_since_restore": 633.9210429191589, "policy_reward_mean": {}, "training_iteration": 19, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534048>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 817289, "episodes_total": 872, "timesteps_total": 817289, "episode_reward_mean": -540.4354496479887, "episodes_this_iter": 41, "date": "2019-05-23_09-30-35", "time_this_iter_s": 34.991917848587036, "num_metric_batches_dropped": 0, "episode_reward_min": -793.2796586471925}
{"iterations_since_restore": 20, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -256.7124737222393, "timesteps_this_iter": 44509, "custom_metrics": {"cost1_max": 225.35046197387055, "cost1_min": 124.80907387782189, "system_level_velocity_mean": 15.227354015351326, "cost2_mean": -92.148315176106, "cost2_max": -76.02505598025085, "outflow_rate_max": 1459.6557234578736, "cost1_mean": 182.67030273674402, "system_level_velocity_min": 10.411976048682956, "system_level_velocity_max": 18.883420374414396, "outflow_rate_min": 1010.7287519623235, "outflow_rate_mean": 1229.7739665035879, "cost2_min": -107.04473234726382}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.011468271724879742, "total_loss": 28.877704620361328, "vf_loss": 28.88202667236328, "vf_explained_var": 0.8339071869850159, "cur_lr": 0.0005000000237487257, "entropy": 1.2853995561599731, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.004898424260318279}, "num_steps_trained": 861798, "update_time_ms": 9.261, "load_time_ms": 26.307, "sample_time_ms": 22229.561, "num_steps_sampled": 861798, "grad_time_ms": 12463.881}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 669.6796650886536, "timestamp": 1558603870, "time_since_restore": 669.6796650886536, "policy_reward_mean": {}, "training_iteration": 20, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534c50>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 861798, "episodes_total": 927, "timesteps_total": 861798, "episode_reward_mean": -540.2720465102568, "episodes_this_iter": 55, "date": "2019-05-23_09-31-10", "time_this_iter_s": 35.75862216949463, "num_metric_batches_dropped": 0, "episode_reward_min": -831.925593181048}
{"iterations_since_restore": 21, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -178.04155774309888, "timesteps_this_iter": 43719, "custom_metrics": {"cost1_max": 225.35046197387055, "cost1_min": 124.80907387782189, "system_level_velocity_mean": 15.5112217346081, "cost2_mean": -89.95785116933028, "cost2_max": -62.82712253629187, "outflow_rate_max": 1459.6557234578736, "cost1_mean": 185.27581142752592, "system_level_velocity_min": 10.411976048682956, "system_level_velocity_max": 18.883420374414396, "outflow_rate_min": 1010.7287519623235, "outflow_rate_mean": 1243.535871776194, "cost2_min": -106.51509583603755}, "done": false, "pid": 24639, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.008578716777265072, "total_loss": 23.01883316040039, "vf_loss": 23.021869659423828, "vf_explained_var": 0.8650294542312622, "cur_lr": 0.0005000000237487257, "entropy": 1.283091425895691, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0034647476859390736}, "num_steps_trained": 905517, "update_time_ms": 9.318, "load_time_ms": 26.294, "sample_time_ms": 22318.369, "num_steps_sampled": 905517, "grad_time_ms": 12521.799}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 704.1346724033356, "timestamp": 1558603905, "time_since_restore": 704.1346724033356, "policy_reward_mean": {}, "training_iteration": 21, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534b70>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 905517, "episodes_total": 971, "timesteps_total": 905517, "episode_reward_mean": -516.0223968255519, "episodes_this_iter": 44, "date": "2019-05-23_09-31-45", "time_this_iter_s": 34.45500731468201, "num_metric_batches_dropped": 0, "episode_reward_min": -831.925593181048}
{"iterations_since_restore": 22, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.804977086216113, "timesteps_this_iter": 44570, "custom_metrics": {"cost1_max": 225.35046197387055, "cost1_min": 22.863736857377493, "system_level_velocity_mean": 15.620159749255556, "cost2_mean": -89.49463809055067, "cost2_max": -19.804529016937906, "outflow_rate_max": 1459.6557234578736, "cost1_mean": 184.9557643582571, "system_level_velocity_min": 11.839247147563714, "system_level_velocity_max": 18.883420374414396, "outflow_rate_min": 468.0395315843013, "outflow_rate_mean": 1242.3671974906244, "cost2_min": -106.51509583603755}, "done": false, "pid": 24639, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.009901002049446106, "total_loss": 18.611297607421875, "vf_loss": 18.61469268798828, "vf_explained_var": 0.8931645154953003, "cur_lr": 0.0005000000237487257, "entropy": 1.291213870048523, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0038902999367564917}, "num_steps_trained": 950087, "update_time_ms": 9.343, "load_time_ms": 26.563, "sample_time_ms": 22302.751, "num_steps_sampled": 950087, "grad_time_ms": 12495.887}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 738.8915138244629, "timestamp": 1558603940, "time_since_restore": 738.8915138244629, "policy_reward_mean": {}, "training_iteration": 22, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845346a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 950087, "episodes_total": 1014, "timesteps_total": 950087, "episode_reward_mean": -500.3539539838366, "episodes_this_iter": 43, "date": "2019-05-23_09-32-20", "time_this_iter_s": 34.75684142112732, "num_metric_batches_dropped": 0, "episode_reward_min": -831.925593181048}
{"iterations_since_restore": 23, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.804977086216113, "timesteps_this_iter": 46377, "custom_metrics": {"cost1_max": 224.40341422482015, "cost1_min": 22.863736857377493, "system_level_velocity_mean": 15.2308019077189, "cost2_mean": -90.04536225992986, "cost2_max": -19.804529016937906, "outflow_rate_max": 1448.0087007632583, "cost1_mean": 181.15751529844295, "system_level_velocity_min": 11.502116074630841, "system_level_velocity_max": 18.732046141736085, "outflow_rate_min": 468.0395315843013, "outflow_rate_mean": 1220.4338249954512, "cost2_min": -106.97497728632305}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.010000642389059067, "total_loss": 20.47983741760254, "vf_loss": 20.484081268310547, "vf_explained_var": 0.8800843954086304, "cur_lr": 0.0005000000237487257, "entropy": 1.3094196319580078, "cur_kl_coeff": 0.05000000447034836, "policy_loss": -0.004742885008454323}, "num_steps_trained": 996464, "update_time_ms": 9.161, "load_time_ms": 27.216, "sample_time_ms": 22407.061, "num_steps_sampled": 996464, "grad_time_ms": 12271.0}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 774.4143843650818, "timestamp": 1558603975, "time_since_restore": 774.4143843650818, "policy_reward_mean": {}, "training_iteration": 23, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845349b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534400>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 996464, "episodes_total": 1066, "timesteps_total": 996464, "episode_reward_mean": -530.6397237069434, "episodes_this_iter": 52, "date": "2019-05-23_09-32-55", "time_this_iter_s": 35.5228705406189, "num_metric_batches_dropped": 0, "episode_reward_min": -757.0517349885032}
{"iterations_since_restore": 24, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -269.182898199452, "timesteps_this_iter": 44615, "custom_metrics": {"cost1_max": 222.16126050276455, "cost1_min": 140.42599811085816, "system_level_velocity_mean": 15.074487173410864, "cost2_mean": -90.85836502396207, "cost2_max": -70.42746344966716, "outflow_rate_max": 1449.7610723879554, "cost1_mean": 181.26073550139742, "system_level_velocity_min": 11.502116074630841, "system_level_velocity_max": 18.458101280685803, "outflow_rate_min": 1076.7864535537708, "outflow_rate_mean": 1219.3579551559942, "cost2_min": -108.09714657632486}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.011298194527626038, "total_loss": 22.17262077331543, "vf_loss": 22.176982879638672, "vf_explained_var": 0.8713942170143127, "cur_lr": 0.0005000000237487257, "entropy": 1.3041303157806396, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.004926697816699743}, "num_steps_trained": 1041079, "update_time_ms": 9.077, "load_time_ms": 27.218, "sample_time_ms": 22355.043, "num_steps_sampled": 1041079, "grad_time_ms": 12341.114}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 810.080518245697, "timestamp": 1558604011, "time_since_restore": 810.080518245697, "policy_reward_mean": {}, "training_iteration": 24, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d96a0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1041079, "episodes_total": 1112, "timesteps_total": 1041079, "episode_reward_mean": -546.7388561018598, "episodes_this_iter": 46, "date": "2019-05-23_09-33-31", "time_this_iter_s": 35.666133880615234, "num_metric_batches_dropped": 0, "episode_reward_min": -760.5081643042965}
{"iterations_since_restore": 25, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -177.28529853223438, "timesteps_this_iter": 45456, "custom_metrics": {"cost1_max": 222.16126050276455, "cost1_min": 140.42599811085816, "system_level_velocity_mean": 14.943867810853801, "cost2_mean": -91.68422100469095, "cost2_max": -68.39641793789401, "outflow_rate_max": 1449.7610723879554, "cost1_mean": 178.8136817536212, "system_level_velocity_min": 11.502116074630841, "system_level_velocity_max": 18.624893976803907, "outflow_rate_min": 1044.2469152208887, "outflow_rate_mean": 1212.566965694967, "cost2_min": -109.06723751230726}, "done": false, "pid": 24639, "episode_len_mean": 323.9, "info": {"default": {"kl": 0.011475717648863792, "total_loss": 20.617204666137695, "vf_loss": 20.620946884155273, "vf_explained_var": 0.8822423815727234, "cur_lr": 0.0005000000237487257, "entropy": 1.2837852239608765, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.004316436592489481}, "num_steps_trained": 1086535, "update_time_ms": 9.29, "load_time_ms": 26.319, "sample_time_ms": 22518.131, "num_steps_sampled": 1086535, "grad_time_ms": 12497.092}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 845.986344575882, "timestamp": 1558604047, "time_since_restore": 845.986344575882, "policy_reward_mean": {}, "training_iteration": 25, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845340b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534748>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1086535, "episodes_total": 1154, "timesteps_total": 1086535, "episode_reward_mean": -555.8598689288484, "episodes_this_iter": 42, "date": "2019-05-23_09-34-07", "time_this_iter_s": 35.90582633018494, "num_metric_batches_dropped": 0, "episode_reward_min": -818.2103273064724}
{"iterations_since_restore": 26, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -162.26609357650975, "timesteps_this_iter": 45478, "custom_metrics": {"cost1_max": 222.9250922846634, "cost1_min": 140.4341142953707, "system_level_velocity_mean": 15.21742746088268, "cost2_mean": -90.9440944342159, "cost2_max": -64.94715559935462, "outflow_rate_max": 1448.742474679887, "cost1_mean": 180.9158280804702, "system_level_velocity_min": 11.588203717327476, "system_level_velocity_max": 18.8298298140135, "outflow_rate_min": 1044.2469152208887, "outflow_rate_mean": 1222.6405578854713, "cost2_min": -109.06723751230726}, "done": false, "pid": 24639, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.0095760403200984, "total_loss": 22.45624542236328, "vf_loss": 22.4603328704834, "vf_explained_var": 0.8811682462692261, "cur_lr": 0.0005000000237487257, "entropy": 1.2822827100753784, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.004566237796097994}, "num_steps_trained": 1132013, "update_time_ms": 9.23, "load_time_ms": 25.503, "sample_time_ms": 22638.003, "num_steps_sampled": 1132013, "grad_time_ms": 12429.83}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 881.1489026546478, "timestamp": 1558604082, "time_since_restore": 881.1489026546478, "policy_reward_mean": {}, "training_iteration": 26, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469af98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906ba8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1132013, "episodes_total": 1206, "timesteps_total": 1132013, "episode_reward_mean": -538.9706500397308, "episodes_this_iter": 52, "date": "2019-05-23_09-34-42", "time_this_iter_s": 35.16255807876587, "num_metric_batches_dropped": 0, "episode_reward_min": -818.2103273064724}
{"iterations_since_restore": 27, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -91.65171750497818, "timesteps_this_iter": 44296, "custom_metrics": {"cost1_max": 222.9250922846634, "cost1_min": 79.84103816485562, "system_level_velocity_mean": 15.297915907230161, "cost2_mean": -90.32329613791728, "cost2_max": -41.80227884478327, "outflow_rate_max": 1449.3108092341768, "cost1_mean": 181.3101275888244, "system_level_velocity_min": 12.236394185358034, "system_level_velocity_max": 18.8298298140135, "outflow_rate_min": 775.6696822565391, "outflow_rate_mean": 1224.837551366382, "cost2_min": -108.75050817217614}, "done": false, "pid": 24639, "episode_len_mean": 321.74, "info": {"default": {"kl": 0.01149218063801527, "total_loss": 17.1072940826416, "vf_loss": 17.111970901489258, "vf_explained_var": 0.9035845398902893, "cur_lr": 0.0005000000237487257, "entropy": 1.276916742324829, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.00525100901722908}, "num_steps_trained": 1176309, "update_time_ms": 8.966, "load_time_ms": 25.518, "sample_time_ms": 22647.668, "num_steps_sampled": 1176309, "grad_time_ms": 12420.236}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 916.0691089630127, "timestamp": 1558604117, "time_since_restore": 916.0691089630127, "policy_reward_mean": {}, "training_iteration": 27, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469ada0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469add8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a9b0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1176309, "episodes_total": 1251, "timesteps_total": 1176309, "episode_reward_mean": -530.648881466507, "episodes_this_iter": 45, "date": "2019-05-23_09-35-17", "time_this_iter_s": 34.92020630836487, "num_metric_batches_dropped": 0, "episode_reward_min": -795.3717814164012}
{"iterations_since_restore": 28, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.21999549160588, "timesteps_this_iter": 44394, "custom_metrics": {"cost1_max": 224.16632413863866, "cost1_min": 23.21470201384822, "system_level_velocity_mean": 15.301063546579591, "cost2_mean": -88.16805466483922, "cost2_max": -18.631579115873926, "outflow_rate_max": 1457.4941311881519, "cost1_mean": 179.41032944541774, "system_level_velocity_min": 12.28649413584372, "system_level_velocity_max": 18.80808880195326, "outflow_rate_min": 504.34013365866934, "outflow_rate_mean": 1216.1832536027005, "cost2_min": -108.75050817217614}, "done": false, "pid": 24639, "episode_len_mean": 318.04, "info": {"default": {"kl": 0.015864895656704903, "total_loss": 18.040626525878906, "vf_loss": 18.047826766967773, "vf_explained_var": 0.8993925452232361, "cur_lr": 0.0005000000237487257, "entropy": 1.2725830078125, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.007994462735950947}, "num_steps_trained": 1220703, "update_time_ms": 9.364, "load_time_ms": 24.317, "sample_time_ms": 22644.554, "num_steps_sampled": 1220703, "grad_time_ms": 12506.643}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 951.793694972992, "timestamp": 1558604153, "time_since_restore": 951.793694972992, "policy_reward_mean": {}, "training_iteration": 28, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846d0668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374a8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1220703, "episodes_total": 1296, "timesteps_total": 1220703, "episode_reward_mean": -519.9341316152345, "episodes_this_iter": 45, "date": "2019-05-23_09-35-53", "time_this_iter_s": 35.72458600997925, "num_metric_batches_dropped": 0, "episode_reward_min": -782.9579394030462}
{"iterations_since_restore": 29, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.21999549160588, "timesteps_this_iter": 44801, "custom_metrics": {"cost1_max": 224.16632413863866, "cost1_min": 23.21470201384822, "system_level_velocity_mean": 15.462532982635112, "cost2_mean": -88.73510493605518, "cost2_max": -18.631579115873926, "outflow_rate_max": 1457.4941311881519, "cost1_mean": 182.27489363846794, "system_level_velocity_min": 12.139675261871638, "system_level_velocity_max": 18.80808880195326, "outflow_rate_min": 504.34013365866934, "outflow_rate_mean": 1228.4230842323295, "cost2_min": -108.75050817217614}, "done": false, "pid": 24639, "episode_len_mean": 318.84, "info": {"default": {"kl": 0.014141548424959183, "total_loss": 17.2919921875, "vf_loss": 17.298898696899414, "vf_explained_var": 0.8981741666793823, "cur_lr": 0.0005000000237487257, "entropy": 1.2668079137802124, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.007615250069648027}, "num_steps_trained": 1265504, "update_time_ms": 9.7, "load_time_ms": 24.042, "sample_time_ms": 22487.427, "num_steps_sampled": 1265504, "grad_time_ms": 12454.043}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 984.6876766681671, "timestamp": 1558604186, "time_since_restore": 984.6876766681671, "policy_reward_mean": {}, "training_iteration": 29, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469aac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a6d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1265504, "episodes_total": 1339, "timesteps_total": 1265504, "episode_reward_mean": -505.96714601200637, "episodes_this_iter": 43, "date": "2019-05-23_09-36-26", "time_this_iter_s": 32.89398169517517, "num_metric_batches_dropped": 0, "episode_reward_min": -793.8506595587929}
{"iterations_since_restore": 30, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -185.70116983146698, "timesteps_this_iter": 44980, "custom_metrics": {"cost1_max": 222.41012761257463, "cost1_min": 145.0553238182857, "system_level_velocity_mean": 15.31450038154655, "cost2_mean": -90.12473296548083, "cost2_max": -65.11587818128936, "outflow_rate_max": 1446.7771623810884, "cost1_mean": 184.01268541464663, "system_level_velocity_min": 12.139675261871638, "system_level_velocity_max": 18.63661189341641, "outflow_rate_min": 1057.9851589190885, "outflow_rate_mean": 1231.1399737742515, "cost2_min": -105.69281106917714}, "done": false, "pid": 24639, "episode_len_mean": 323.72, "info": {"default": {"kl": 0.013464991934597492, "total_loss": 21.221813201904297, "vf_loss": 21.22692108154297, "vf_explained_var": 0.8723002076148987, "cur_lr": 0.0005000000237487257, "entropy": 1.2648463249206543, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.005780741106718779}, "num_steps_trained": 1310484, "update_time_ms": 9.474, "load_time_ms": 23.26, "sample_time_ms": 22541.555, "num_steps_sampled": 1310484, "grad_time_ms": 12318.252}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1019.6270892620087, "timestamp": 1558604221, "time_since_restore": 1019.6270892620087, "policy_reward_mean": {}, "training_iteration": 30, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845377f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537470>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1310484, "episodes_total": 1392, "timesteps_total": 1310484, "episode_reward_mean": -522.5915781653072, "episodes_this_iter": 53, "date": "2019-05-23_09-37-01", "time_this_iter_s": 34.93941259384155, "num_metric_batches_dropped": 0, "episode_reward_min": -793.8506595587929}
{"iterations_since_restore": 31, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.68621583838888, "timesteps_this_iter": 45335, "custom_metrics": {"cost1_max": 219.8468008111206, "cost1_min": 17.965114912306767, "system_level_velocity_mean": 15.10576060750716, "cost2_mean": -90.25295222703713, "cost2_max": -14.326950841204592, "outflow_rate_max": 1440.3928850920906, "cost1_mean": 180.61560332844041, "system_level_velocity_min": 12.0973610898854, "system_level_velocity_max": 18.251147161736416, "outflow_rate_min": 493.8123238995481, "outflow_rate_mean": 1216.84631296161, "cost2_min": -109.60674520122143}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.016818158328533173, "total_loss": 16.87776756286621, "vf_loss": 16.884937286376953, "vf_explained_var": 0.8951616287231445, "cur_lr": 0.0005000000237487257, "entropy": 1.2724997997283936, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.008010105229914188}, "num_steps_trained": 1355819, "update_time_ms": 9.683, "load_time_ms": 23.667, "sample_time_ms": 22602.05, "num_steps_sampled": 1355819, "grad_time_ms": 12487.006}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1056.388994216919, "timestamp": 1558604258, "time_since_restore": 1056.388994216919, "policy_reward_mean": {}, "training_iteration": 31, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541be0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1355819, "episodes_total": 1436, "timesteps_total": 1355819, "episode_reward_mean": -532.904192442864, "episodes_this_iter": 44, "date": "2019-05-23_09-37-38", "time_this_iter_s": 36.76190495491028, "num_metric_batches_dropped": 0, "episode_reward_min": -790.8966598329026}
{"iterations_since_restore": 32, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.68621583838888, "timesteps_this_iter": 44612, "custom_metrics": {"cost1_max": 222.2249639066705, "cost1_min": 17.965114912306767, "system_level_velocity_mean": 15.183698524861745, "cost2_mean": -90.56102318491362, "cost2_max": -14.326950841204592, "outflow_rate_max": 1440.3928850920906, "cost1_mean": 181.3031203319254, "system_level_velocity_min": 12.0973610898854, "system_level_velocity_max": 18.600012053159528, "outflow_rate_min": 493.8123238995481, "outflow_rate_mean": 1225.0281173111591, "cost2_min": -109.60674520122143}, "done": false, "pid": 24639, "episode_len_mean": 321.74, "info": {"default": {"kl": 0.01448630727827549, "total_loss": 17.290760040283203, "vf_loss": 17.29663848876953, "vf_explained_var": 0.8947865962982178, "cur_lr": 0.0005000000237487257, "entropy": 1.2522950172424316, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.0066033024340868}, "num_steps_trained": 1400431, "update_time_ms": 10.026, "load_time_ms": 22.007, "sample_time_ms": 22575.134, "num_steps_sampled": 1400431, "grad_time_ms": 12386.044}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1089.8563301563263, "timestamp": 1558604291, "time_since_restore": 1089.8563301563263, "policy_reward_mean": {}, "training_iteration": 32, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537cc0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1400431, "episodes_total": 1480, "timesteps_total": 1400431, "episode_reward_mean": -525.4553434790699, "episodes_this_iter": 44, "date": "2019-05-23_09-38-11", "time_this_iter_s": 33.46733593940735, "num_metric_batches_dropped": 0, "episode_reward_min": -790.8966598329026}
{"iterations_since_restore": 33, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -247.1472185243866, "timesteps_this_iter": 44643, "custom_metrics": {"cost1_max": 223.4803508158738, "cost1_min": 144.95150660454817, "system_level_velocity_mean": 15.346750308849485, "cost2_mean": -91.2922726065554, "cost2_max": -73.23359808921559, "outflow_rate_max": 1451.7581727147924, "cost1_mean": 185.29324393930258, "system_level_velocity_min": 12.241905583507398, "system_level_velocity_max": 18.735967081870363, "outflow_rate_min": 1050.8919212339022, "outflow_rate_mean": 1245.9659380747448, "cost2_min": -106.58762558419852}, "done": false, "pid": 24639, "episode_len_mean": 324.72, "info": {"default": {"kl": 0.014868018217384815, "total_loss": 18.584646224975586, "vf_loss": 18.59144401550293, "vf_explained_var": 0.8868290781974792, "cur_lr": 0.0005000000237487257, "entropy": 1.234782099723816, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.007540234364569187}, "num_steps_trained": 1445074, "update_time_ms": 10.127, "load_time_ms": 20.347, "sample_time_ms": 22574.45, "num_steps_sampled": 1445074, "grad_time_ms": 12351.948}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1124.9896500110626, "timestamp": 1558604326, "time_since_restore": 1124.9896500110626, "policy_reward_mean": {}, "training_iteration": 33, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e10>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1445074, "episodes_total": 1531, "timesteps_total": 1445074, "episode_reward_mean": -515.6677288140031, "episodes_this_iter": 51, "date": "2019-05-23_09-38-46", "time_this_iter_s": 35.13331985473633, "num_metric_batches_dropped": 0, "episode_reward_min": -785.3934463060506}
{"iterations_since_restore": 34, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.3338566861103, "timesteps_this_iter": 43573, "custom_metrics": {"cost1_max": 223.62997240822938, "cost1_min": 78.79474378388758, "system_level_velocity_mean": 15.516943276815441, "cost2_mean": -90.0330552274893, "cost2_max": -37.38771839947398, "outflow_rate_max": 1454.691777889392, "cost1_mean": 184.8520349542097, "system_level_velocity_min": 12.263856944650813, "system_level_velocity_max": 18.80255815038954, "outflow_rate_min": 778.6139534823468, "outflow_rate_mean": 1241.765528095844, "cost2_min": -106.58762558419852}, "done": false, "pid": 24639, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.01556435227394104, "total_loss": 17.464332580566406, "vf_loss": 17.470340728759766, "vf_explained_var": 0.8913066387176514, "cur_lr": 0.0005000000237487257, "entropy": 1.2216006517410278, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.006785430014133453}, "num_steps_trained": 1488647, "update_time_ms": 10.374, "load_time_ms": 20.35, "sample_time_ms": 22620.96, "num_steps_sampled": 1488647, "grad_time_ms": 12459.595}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1162.1942501068115, "timestamp": 1558604363, "time_since_restore": 1162.1942501068115, "policy_reward_mean": {}, "training_iteration": 34, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845342e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541198>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1488647, "episodes_total": 1578, "timesteps_total": 1488647, "episode_reward_mean": -499.3915506677081, "episodes_this_iter": 47, "date": "2019-05-23_09-39-23", "time_this_iter_s": 37.2046000957489, "num_metric_batches_dropped": 0, "episode_reward_min": -765.0514778163383}
{"iterations_since_restore": 35, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.3338566861103, "timesteps_this_iter": 44309, "custom_metrics": {"cost1_max": 223.62997240822938, "cost1_min": 78.79474378388758, "system_level_velocity_mean": 15.44485868596983, "cost2_mean": -89.55368367213784, "cost2_max": -37.38771839947398, "outflow_rate_max": 1455.2499082344768, "cost1_mean": 182.76413575163966, "system_level_velocity_min": 11.883764744442173, "system_level_velocity_max": 18.80255815038954, "outflow_rate_min": 778.6139534823468, "outflow_rate_mean": 1232.0973853684595, "cost2_min": -107.75860250412893}, "done": false, "pid": 24639, "episode_len_mean": 318.92, "info": {"default": {"kl": 0.01775670237839222, "total_loss": 18.70755386352539, "vf_loss": 18.714601516723633, "vf_explained_var": 0.8794033527374268, "cur_lr": 0.0005000000237487257, "entropy": 1.2093533277511597, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.007936542853713036}, "num_steps_trained": 1532956, "update_time_ms": 10.516, "load_time_ms": 21.29, "sample_time_ms": 22485.096, "num_steps_sampled": 1532956, "grad_time_ms": 12393.203}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1196.0934817790985, "timestamp": 1558604397, "time_since_restore": 1196.0934817790985, "policy_reward_mean": {}, "training_iteration": 35, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9cf8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1532956, "episodes_total": 1622, "timesteps_total": 1532956, "episode_reward_mean": -502.6044012721818, "episodes_this_iter": 44, "date": "2019-05-23_09-39-57", "time_this_iter_s": 33.89923167228699, "num_metric_batches_dropped": 0, "episode_reward_min": -826.1385362156669}
{"iterations_since_restore": 36, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -104.95339356714884, "timesteps_this_iter": 44280, "custom_metrics": {"cost1_max": 222.50914106704954, "cost1_min": 84.01883161071517, "system_level_velocity_mean": 15.47789022387914, "cost2_mean": -90.61448081948512, "cost2_max": -43.18537582318549, "outflow_rate_max": 1455.2499082344768, "cost1_mean": 186.0146325909653, "system_level_velocity_min": 11.883764744442173, "system_level_velocity_max": 18.57610850093506, "outflow_rate_min": 807.4572809958158, "outflow_rate_mean": 1248.949182159608, "cost2_min": -107.75860250412893}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01615576446056366, "total_loss": 18.5935001373291, "vf_loss": 18.598806381225586, "vf_explained_var": 0.8771071434020996, "cur_lr": 0.0005000000237487257, "entropy": 1.2019617557525635, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.00611348170787096}, "num_steps_trained": 1577236, "update_time_ms": 10.678, "load_time_ms": 22.245, "sample_time_ms": 22377.944, "num_steps_sampled": 1577236, "grad_time_ms": 12395.819}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1230.2215037345886, "timestamp": 1558604432, "time_since_restore": 1230.2215037345886, "policy_reward_mean": {}, "training_iteration": 36, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468bf60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8468b2e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1577236, "episodes_total": 1668, "timesteps_total": 1577236, "episode_reward_mean": -503.8757731334595, "episodes_this_iter": 46, "date": "2019-05-23_09-40-32", "time_this_iter_s": 34.12802195549011, "num_metric_batches_dropped": 0, "episode_reward_min": -826.1385362156669}
{"iterations_since_restore": 37, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.48788399625695, "timesteps_this_iter": 43482, "custom_metrics": {"cost1_max": 222.41030171189504, "cost1_min": 79.94828710022452, "system_level_velocity_mean": 15.60004504749892, "cost2_mean": -90.67043111448497, "cost2_max": -42.46206697910525, "outflow_rate_max": 1446.4795665858803, "cost1_mean": 187.53115490051707, "system_level_velocity_min": 12.067753163185422, "system_level_velocity_max": 18.748845309105608, "outflow_rate_min": 782.9416826253317, "outflow_rate_mean": 1264.4565578745576, "cost2_min": -107.75860250412893}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01737898401916027, "total_loss": 19.346139907836914, "vf_loss": 19.35436248779297, "vf_explained_var": 0.8705529570579529, "cur_lr": 0.0005000000237487257, "entropy": 1.1890065670013428, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.009094038978219032}, "num_steps_trained": 1620718, "update_time_ms": 10.84, "load_time_ms": 22.468, "sample_time_ms": 22323.006, "num_steps_sampled": 1620718, "grad_time_ms": 12390.047}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1264.5501132011414, "timestamp": 1558604466, "time_since_restore": 1264.5501132011414, "policy_reward_mean": {}, "training_iteration": 37, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537f28>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1620718, "episodes_total": 1718, "timesteps_total": 1620718, "episode_reward_mean": -489.0500126283044, "episodes_this_iter": 50, "date": "2019-05-23_09-41-06", "time_this_iter_s": 34.328609466552734, "num_metric_batches_dropped": 0, "episode_reward_min": -797.2732060148502}
{"iterations_since_restore": 38, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.48788399625695, "timesteps_this_iter": 43387, "custom_metrics": {"cost1_max": 223.5294680655926, "cost1_min": 79.94828710022452, "system_level_velocity_mean": 15.723036207477842, "cost2_mean": -90.5538943197491, "cost2_max": -42.46206697910525, "outflow_rate_max": 1455.1772496127273, "cost1_mean": 187.00965942201543, "system_level_velocity_min": 12.067753163185422, "system_level_velocity_max": 18.86489244653382, "outflow_rate_min": 782.9416826253317, "outflow_rate_mean": 1261.2315335808748, "cost2_min": -108.0005463579226}, "done": false, "pid": 24639, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.01891046203672886, "total_loss": 19.73035430908203, "vf_loss": 19.737701416015625, "vf_explained_var": 0.8728939294815063, "cur_lr": 0.0005000000237487257, "entropy": 1.1912155151367188, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.008291568607091904}, "num_steps_trained": 1664105, "update_time_ms": 10.784, "load_time_ms": 23.303, "sample_time_ms": 22317.691, "num_steps_sampled": 1664105, "grad_time_ms": 12423.895}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1300.5423340797424, "timestamp": 1558604502, "time_since_restore": 1300.5423340797424, "policy_reward_mean": {}, "training_iteration": 38, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2400>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1664105, "episodes_total": 1763, "timesteps_total": 1664105, "episode_reward_mean": -483.720974278609, "episodes_this_iter": 45, "date": "2019-05-23_09-41-42", "time_this_iter_s": 35.992220878601074, "num_metric_batches_dropped": 0, "episode_reward_min": -797.2732060148502}
{"iterations_since_restore": 39, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.91131353074447, "timesteps_this_iter": 44719, "custom_metrics": {"cost1_max": 224.44977452596498, "cost1_min": 85.77907541787046, "system_level_velocity_mean": 15.66144608603188, "cost2_mean": -93.06569391379735, "cost2_max": -46.35981236426732, "outflow_rate_max": 1457.3288878526446, "cost1_mean": 186.8131079290107, "system_level_velocity_min": 11.842256435916394, "system_level_velocity_max": 18.86489244653382, "outflow_rate_min": 810.0886706297543, "outflow_rate_mean": 1255.875559839713, "cost2_min": -108.79286383473128}, "done": false, "pid": 24639, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.017501287162303925, "total_loss": 21.03932762145996, "vf_loss": 21.046428680419922, "vf_explained_var": 0.8714790344238281, "cur_lr": 0.0005000000237487257, "entropy": 1.1993927955627441, "cur_kl_coeff": 0.050000011920928955, "policy_loss": -0.007976619526743889}, "num_steps_trained": 1708824, "update_time_ms": 10.587, "load_time_ms": 23.161, "sample_time_ms": 22408.849, "num_steps_sampled": 1708824, "grad_time_ms": 12493.39}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1335.0379412174225, "timestamp": 1558604537, "time_since_restore": 1335.0379412174225, "policy_reward_mean": {}, "training_iteration": 39, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845307b8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1708824, "episodes_total": 1809, "timesteps_total": 1708824, "episode_reward_mean": -500.8822212082149, "episodes_this_iter": 46, "date": "2019-05-23_09-42-17", "time_this_iter_s": 34.495607137680054, "num_metric_batches_dropped": 0, "episode_reward_min": -832.4939954085576}
{"iterations_since_restore": 40, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -243.60141024782072, "timesteps_this_iter": 44432, "custom_metrics": {"cost1_max": 224.44977452596498, "cost1_min": 139.66197319376033, "system_level_velocity_mean": 15.467691314289677, "cost2_mean": -94.9723504805755, "cost2_max": -77.64982750650915, "outflow_rate_max": 1459.3039314934074, "cost1_mean": 185.4391121121905, "system_level_velocity_min": 11.842256435916394, "system_level_velocity_max": 18.80042016331942, "outflow_rate_min": 1030.37373034766, "outflow_rate_mean": 1248.4401556495613, "cost2_min": -109.04914223270026}, "done": false, "pid": 24639, "episode_len_mean": 324.72, "info": {"default": {"kl": 0.016371259465813637, "total_loss": 20.031654357910156, "vf_loss": 20.03904151916504, "vf_explained_var": 0.8815666437149048, "cur_lr": 0.0005000000237487257, "entropy": 1.1976895332336426, "cur_kl_coeff": 0.05000000819563866, "policy_loss": -0.00820607878267765}, "num_steps_trained": 1753256, "update_time_ms": 10.542, "load_time_ms": 24.025, "sample_time_ms": 22301.621, "num_steps_sampled": 1753256, "grad_time_ms": 12647.38}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1370.4615468978882, "timestamp": 1558604572, "time_since_restore": 1370.4615468978882, "policy_reward_mean": {}, "training_iteration": 40, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a94a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9e80>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1753256, "episodes_total": 1855, "timesteps_total": 1753256, "episode_reward_mean": -524.2392572961734, "episodes_this_iter": 46, "date": "2019-05-23_09-42-52", "time_this_iter_s": 35.4236056804657, "num_metric_batches_dropped": 0, "episode_reward_min": -832.4939954085576}
{"iterations_since_restore": 41, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -261.3895609998659, "timesteps_this_iter": 45212, "custom_metrics": {"cost1_max": 225.38849033568238, "cost1_min": 145.59021791709026, "system_level_velocity_mean": 15.437501979448019, "cost2_mean": -96.86004325025863, "cost2_max": -83.36163222132217, "outflow_rate_max": 1464.3040078334122, "cost1_mean": 184.93078998475423, "system_level_velocity_min": 12.201766553736324, "system_level_velocity_max": 18.81394070080766, "outflow_rate_min": 1063.3049483814282, "outflow_rate_mean": 1244.9809889384221, "cost2_min": -112.7188829391931}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.022382143884897232, "total_loss": 19.382925033569336, "vf_loss": 19.39139747619629, "vf_explained_var": 0.8963672518730164, "cur_lr": 0.0005000000237487257, "entropy": 1.193610429763794, "cur_kl_coeff": 0.05000000447034836, "policy_loss": -0.009589597582817078}, "num_steps_trained": 1798468, "update_time_ms": 10.286, "load_time_ms": 23.475, "sample_time_ms": 22278.18, "num_steps_sampled": 1798468, "grad_time_ms": 12546.774}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1405.95986866951, "timestamp": 1558604607, "time_since_restore": 1405.95986866951, "policy_reward_mean": {}, "training_iteration": 41, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9b38>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1798468, "episodes_total": 1901, "timesteps_total": 1798468, "episode_reward_mean": -532.3328462707318, "episodes_this_iter": 46, "date": "2019-05-23_09-43-27", "time_this_iter_s": 35.498321771621704, "num_metric_batches_dropped": 0, "episode_reward_min": -802.1311430411969}
{"iterations_since_restore": 42, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.87551776288433, "timesteps_this_iter": 45761, "custom_metrics": {"cost1_max": 226.61392974432852, "cost1_min": 144.66991864028319, "system_level_velocity_mean": 15.198313209768418, "cost2_mean": -98.75566890210811, "cost2_max": -83.81359495957793, "outflow_rate_max": 1469.1107550588943, "cost1_mean": 181.5982854115125, "system_level_velocity_min": 12.130748132243784, "system_level_velocity_max": 19.011941506481133, "outflow_rate_min": 1054.4521938775513, "outflow_rate_mean": 1230.8140933756167, "cost2_min": -112.7188829391931}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016497226431965828, "total_loss": 20.037174224853516, "vf_loss": 20.04410743713379, "vf_explained_var": 0.8952800631523132, "cur_lr": 0.0005000000237487257, "entropy": 1.206650972366333, "cur_kl_coeff": 0.07499999552965164, "policy_loss": -0.008169072680175304}, "num_steps_trained": 1844229, "update_time_ms": 9.989, "load_time_ms": 24.665, "sample_time_ms": 22142.676, "num_steps_sampled": 1844229, "grad_time_ms": 12932.385}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1441.9639043807983, "timestamp": 1558604644, "time_since_restore": 1441.9639043807983, "policy_reward_mean": {}, "training_iteration": 42, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845414a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541eb8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1844229, "episodes_total": 1944, "timesteps_total": 1844229, "episode_reward_mean": -555.3835392742249, "episodes_this_iter": 43, "date": "2019-05-23_09-44-04", "time_this_iter_s": 36.00403571128845, "num_metric_batches_dropped": 0, "episode_reward_min": -811.5877324151476}
{"iterations_since_restore": 43, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.87551776288433, "timesteps_this_iter": 43724, "custom_metrics": {"cost1_max": 226.61392974432852, "cost1_min": 143.61649032380157, "system_level_velocity_mean": 15.405483310721396, "cost2_mean": -99.19745297157314, "cost2_max": -86.53212151503462, "outflow_rate_max": 1469.1107550588943, "cost1_mean": 184.05367491195997, "system_level_velocity_min": 12.130748132243784, "system_level_velocity_max": 19.011941506481133, "outflow_rate_min": 1054.4521938775513, "outflow_rate_mean": 1239.7366311417466, "cost2_min": -111.8508547031087}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.018073327839374542, "total_loss": 23.137271881103516, "vf_loss": 23.14473533630371, "vf_explained_var": 0.8728444576263428, "cur_lr": 0.0005000000237487257, "entropy": 1.1959006786346436, "cur_kl_coeff": 0.07499998807907104, "policy_loss": -0.008818032220005989}, "num_steps_trained": 1887953, "update_time_ms": 10.016, "load_time_ms": 25.67, "sample_time_ms": 22046.92, "num_steps_sampled": 1887953, "grad_time_ms": 13012.213}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1476.9517421722412, "timestamp": 1558604679, "time_since_restore": 1476.9517421722412, "policy_reward_mean": {}, "training_iteration": 43, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845305c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530048>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1887953, "episodes_total": 1994, "timesteps_total": 1887953, "episode_reward_mean": -542.0739316445993, "episodes_this_iter": 50, "date": "2019-05-23_09-44-39", "time_this_iter_s": 34.98783779144287, "num_metric_batches_dropped": 0, "episode_reward_min": -811.5877324151476}
{"iterations_since_restore": 44, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.591009932149177, "timesteps_this_iter": 45043, "custom_metrics": {"cost1_max": 226.61392974432852, "cost1_min": 23.214587029013497, "system_level_velocity_mean": 15.468109999375624, "cost2_mean": -97.73256315622056, "cost2_max": -16.78094918989033, "outflow_rate_max": 1469.821164313208, "cost1_mean": 182.99799342135302, "system_level_velocity_min": 12.195357588951962, "system_level_velocity_max": 19.010522043168052, "outflow_rate_min": 489.5057776496389, "outflow_rate_mean": 1234.915158965029, "cost2_min": -114.32441962435425}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.017665112391114235, "total_loss": 20.64149284362793, "vf_loss": 20.647924423217773, "vf_explained_var": 0.8937893509864807, "cur_lr": 0.0005000000237487257, "entropy": 1.2137819528579712, "cur_kl_coeff": 0.07499998807907104, "policy_loss": -0.007754919584840536}, "num_steps_trained": 1932996, "update_time_ms": 9.73, "load_time_ms": 26.058, "sample_time_ms": 21862.992, "num_steps_sampled": 1932996, "grad_time_ms": 12865.367}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1510.8534750938416, "timestamp": 1558604712, "time_since_restore": 1510.8534750938416, "policy_reward_mean": {}, "training_iteration": 44, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537be0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1932996, "episodes_total": 2041, "timesteps_total": 1932996, "episode_reward_mean": -530.6915765346047, "episodes_this_iter": 47, "date": "2019-05-23_09-45-12", "time_this_iter_s": 33.90173292160034, "num_metric_batches_dropped": 0, "episode_reward_min": -802.6502915226931}
{"iterations_since_restore": 45, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.591009932149177, "timesteps_this_iter": 44849, "custom_metrics": {"cost1_max": 226.59527895199113, "cost1_min": 23.214587029013497, "system_level_velocity_mean": 15.182965997958677, "cost2_mean": -97.27658442624757, "cost2_max": -16.78094918989033, "outflow_rate_max": 1469.821164313208, "cost1_mean": 179.6083270381275, "system_level_velocity_min": 11.961732240270942, "system_level_velocity_max": 18.99918397919363, "outflow_rate_min": 489.5057776496389, "outflow_rate_mean": 1221.307530070621, "cost2_min": -114.32441962435425}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.020539814606308937, "total_loss": 20.03917121887207, "vf_loss": 20.04697608947754, "vf_explained_var": 0.8937085866928101, "cur_lr": 0.0005000000237487257, "entropy": 1.197527289390564, "cur_kl_coeff": 0.07499998807907104, "policy_loss": -0.009344424121081829}, "num_steps_trained": 1977845, "update_time_ms": 9.449, "load_time_ms": 25.951, "sample_time_ms": 21975.018, "num_steps_sampled": 1977845, "grad_time_ms": 13068.173}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1547.8932316303253, "timestamp": 1558604750, "time_since_restore": 1547.8932316303253, "policy_reward_mean": {}, "training_iteration": 45, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e48>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 1977845, "episodes_total": 2085, "timesteps_total": 1977845, "episode_reward_mean": -550.0347572086229, "episodes_this_iter": 44, "date": "2019-05-23_09-45-50", "time_this_iter_s": 37.039756536483765, "num_metric_batches_dropped": 0, "episode_reward_min": -802.6502915226931}
{"iterations_since_restore": 46, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.25608246732378, "timesteps_this_iter": 44527, "custom_metrics": {"cost1_max": 226.38884427562175, "cost1_min": 141.25812281811614, "system_level_velocity_mean": 15.260977565800276, "cost2_mean": -96.53663338496058, "cost2_max": -72.92519548291509, "outflow_rate_max": 1467.5665840143938, "cost1_mean": 182.52513759244073, "system_level_velocity_min": 11.807536989201196, "system_level_velocity_max": 19.019007234250655, "outflow_rate_min": 1029.6003986710964, "outflow_rate_mean": 1236.0486664334328, "cost2_min": -112.48137229423975}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017882073298096657, "total_loss": 21.835655212402344, "vf_loss": 21.84376335144043, "vf_explained_var": 0.8855670690536499, "cur_lr": 0.0005000000237487257, "entropy": 1.1959762573242188, "cur_kl_coeff": 0.11249999701976776, "policy_loss": -0.010119227692484856}, "num_steps_trained": 2022372, "update_time_ms": 9.629, "load_time_ms": 25.881, "sample_time_ms": 21929.559, "num_steps_sampled": 2022372, "grad_time_ms": 13224.918}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1583.1645345687866, "timestamp": 1558604785, "time_since_restore": 1583.1645345687866, "policy_reward_mean": {}, "training_iteration": 46, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541e80>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2022372, "episodes_total": 2134, "timesteps_total": 2022372, "episode_reward_mean": -545.3127526557927, "episodes_this_iter": 49, "date": "2019-05-23_09-46-25", "time_this_iter_s": 35.271302938461304, "num_metric_batches_dropped": 0, "episode_reward_min": -785.5010900205419}
{"iterations_since_restore": 47, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.082069937545825, "timesteps_this_iter": 44919, "custom_metrics": {"cost1_max": 226.38884427562175, "cost1_min": 24.710933716600007, "system_level_velocity_mean": 15.478009213293344, "cost2_mean": -95.05724071377132, "cost2_max": -19.25407744401902, "outflow_rate_max": 1467.5665840143938, "cost1_mean": 182.60796732916836, "system_level_velocity_min": 11.807536989201196, "system_level_velocity_max": 19.019007234250655, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1237.4396675158134, "cost2_min": -111.99997293189207}, "done": false, "pid": 24639, "episode_len_mean": 321.03, "info": {"default": {"kl": 0.017917750403285027, "total_loss": 20.628610610961914, "vf_loss": 20.63689613342285, "vf_explained_var": 0.8891622424125671, "cur_lr": 0.0005000000237487257, "entropy": 1.2005956172943115, "cur_kl_coeff": 0.11249999701976776, "policy_loss": -0.010301262140274048}, "num_steps_trained": 2067291, "update_time_ms": 9.76, "load_time_ms": 25.784, "sample_time_ms": 21794.401, "num_steps_sampled": 2067291, "grad_time_ms": 13426.797}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1618.1199839115143, "timestamp": 1558604820, "time_since_restore": 1618.1199839115143, "policy_reward_mean": {}, "training_iteration": 47, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537ef0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2067291, "episodes_total": 2180, "timesteps_total": 2067291, "episode_reward_mean": -522.8223608841364, "episodes_this_iter": 46, "date": "2019-05-23_09-47-00", "time_this_iter_s": 34.95544934272766, "num_metric_batches_dropped": 0, "episode_reward_min": -826.9646665253624}
{"iterations_since_restore": 48, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.082069937545825, "timesteps_this_iter": 43848, "custom_metrics": {"cost1_max": 226.38884427562175, "cost1_min": 24.710933716600007, "system_level_velocity_mean": 15.398739872824098, "cost2_mean": -94.81236569067845, "cost2_max": -19.25407744401902, "outflow_rate_max": 1467.5665840143938, "cost1_mean": 182.09162554851147, "system_level_velocity_min": 11.422333730341558, "system_level_velocity_max": 19.019007234250655, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1236.9078748045408, "cost2_min": -107.64304684064498}, "done": false, "pid": 24639, "episode_len_mean": 321.03, "info": {"default": {"kl": 0.018384071066975594, "total_loss": 18.388368606567383, "vf_loss": 18.394975662231445, "vf_explained_var": 0.8920079469680786, "cur_lr": 0.0005000000237487257, "entropy": 1.1994707584381104, "cur_kl_coeff": 0.11249999701976776, "policy_loss": -0.008673089556396008}, "num_steps_trained": 2111139, "update_time_ms": 9.483, "load_time_ms": 26.482, "sample_time_ms": 21591.012, "num_steps_sampled": 2111139, "grad_time_ms": 13360.038}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1651.425481081009, "timestamp": 1558604853, "time_since_restore": 1651.425481081009, "policy_reward_mean": {}, "training_iteration": 48, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845377f0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2111139, "episodes_total": 2227, "timesteps_total": 2111139, "episode_reward_mean": -523.0852746705336, "episodes_this_iter": 47, "date": "2019-05-23_09-47-33", "time_this_iter_s": 33.30549716949463, "num_metric_batches_dropped": 0, "episode_reward_min": -826.9646665253624}
{"iterations_since_restore": 49, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.082069937545825, "timesteps_this_iter": 43036, "custom_metrics": {"cost1_max": 226.3737864519199, "cost1_min": 24.710933716600007, "system_level_velocity_mean": 15.554035351982122, "cost2_mean": -92.76222564711229, "cost2_max": -19.25407744401902, "outflow_rate_max": 1469.7330024083255, "cost1_mean": 184.24360032508488, "system_level_velocity_min": 11.422333730341558, "system_level_velocity_max": 18.969147781189708, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1245.9828907630233, "cost2_min": -108.76774380625426}, "done": false, "pid": 24639, "episode_len_mean": 321.03, "info": {"default": {"kl": 0.016289325430989265, "total_loss": 18.502986907958984, "vf_loss": 18.511072158813477, "vf_explained_var": 0.8914168477058411, "cur_lr": 0.0005000000237487257, "entropy": 1.1879594326019287, "cur_kl_coeff": 0.11249999701976776, "policy_loss": -0.00991721823811531}, "num_steps_trained": 2154175, "update_time_ms": 9.496, "load_time_ms": 25.302, "sample_time_ms": 21420.841, "num_steps_sampled": 2154175, "grad_time_ms": 13347.542}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1684.0915780067444, "timestamp": 1558604886, "time_since_restore": 1684.0915780067444, "policy_reward_mean": {}, "training_iteration": 49, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537358>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2154175, "episodes_total": 2271, "timesteps_total": 2154175, "episode_reward_mean": -504.8084766085151, "episodes_this_iter": 44, "date": "2019-05-23_09-48-06", "time_this_iter_s": 32.666096925735474, "num_metric_batches_dropped": 0, "episode_reward_min": -826.9646665253624}
{"iterations_since_restore": 50, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -255.79947419410172, "timesteps_this_iter": 42860, "custom_metrics": {"cost1_max": 226.3737864519199, "cost1_min": 132.97693619984761, "system_level_velocity_mean": 15.724717004136414, "cost2_mean": -91.12189928972741, "cost2_max": -57.62678155420869, "outflow_rate_max": 1469.7330024083255, "cost1_mean": 189.06822961037753, "system_level_velocity_min": 11.436247860967091, "system_level_velocity_max": 18.969147781189708, "outflow_rate_min": 1005.3956559203683, "outflow_rate_mean": 1267.1455871486826, "cost2_min": -108.76774380625426}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017200270667672157, "total_loss": 18.995019912719727, "vf_loss": 19.00252914428711, "vf_explained_var": 0.8893396258354187, "cur_lr": 0.0005000000237487257, "entropy": 1.1845958232879639, "cur_kl_coeff": 0.11250000447034836, "policy_loss": -0.009442916139960289}, "num_steps_trained": 2197035, "update_time_ms": 9.597, "load_time_ms": 24.3, "sample_time_ms": 21240.433, "num_steps_sampled": 2197035, "grad_time_ms": 13307.961}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1717.29225730896, "timestamp": 1558604919, "time_since_restore": 1717.29225730896, "policy_reward_mean": {}, "training_iteration": 50, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845349b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534470>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2197035, "episodes_total": 2319, "timesteps_total": 2197035, "episode_reward_mean": -488.65979662095975, "episodes_this_iter": 48, "date": "2019-05-23_09-48-39", "time_this_iter_s": 33.200679302215576, "num_metric_batches_dropped": 0, "episode_reward_min": -771.2267647134818}
{"iterations_since_restore": 51, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -258.92730847464026, "timesteps_this_iter": 43421, "custom_metrics": {"cost1_max": 225.11245948765222, "cost1_min": 132.97693619984761, "system_level_velocity_mean": 15.614024698065236, "cost2_mean": -90.10893268214713, "cost2_max": -57.62678155420869, "outflow_rate_max": 1465.0810859918993, "cost1_mean": 188.05083735111964, "system_level_velocity_min": 11.436247860967091, "system_level_velocity_max": 19.013857299257488, "outflow_rate_min": 1008.0103763635051, "outflow_rate_mean": 1265.0659998679914, "cost2_min": -104.53044894947793}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.018060801550745964, "total_loss": 19.48377227783203, "vf_loss": 19.491003036499023, "vf_explained_var": 0.8858117461204529, "cur_lr": 0.0005000000237487257, "entropy": 1.1900140047073364, "cur_kl_coeff": 0.11249998956918716, "policy_loss": -0.009263609535992146}, "num_steps_trained": 2240456, "update_time_ms": 9.686, "load_time_ms": 24.749, "sample_time_ms": 21081.688, "num_steps_sampled": 2240456, "grad_time_ms": 13383.225}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1751.9652528762817, "timestamp": 1558604954, "time_since_restore": 1751.9652528762817, "policy_reward_mean": {}, "training_iteration": 51, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530a20>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530b00>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2240456, "episodes_total": 2366, "timesteps_total": 2240456, "episode_reward_mean": -489.60792909292593, "episodes_this_iter": 47, "date": "2019-05-23_09-49-14", "time_this_iter_s": 34.67299556732178, "num_metric_batches_dropped": 0, "episode_reward_min": -771.2267647134818}
{"iterations_since_restore": 52, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -263.5036584275599, "timesteps_this_iter": 43206, "custom_metrics": {"cost1_max": 225.11245948765222, "cost1_min": 132.97693619984761, "system_level_velocity_mean": 15.491496070632863, "cost2_mean": -89.37716898238308, "cost2_max": -57.62678155420869, "outflow_rate_max": 1463.470385819522, "cost1_mean": 186.62731064578333, "system_level_velocity_min": 11.436247860967091, "system_level_velocity_max": 19.013857299257488, "outflow_rate_min": 1008.0103763635051, "outflow_rate_mean": 1255.5352068379489, "cost2_min": -104.53044894947793}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016844451427459717, "total_loss": 16.038965225219727, "vf_loss": 16.04844856262207, "vf_explained_var": 0.9064673185348511, "cur_lr": 0.0005000000237487257, "entropy": 1.198266625404358, "cur_kl_coeff": 0.11249999701976776, "policy_loss": -0.011378273367881775}, "num_steps_trained": 2283662, "update_time_ms": 10.131, "load_time_ms": 25.06, "sample_time_ms": 21166.568, "num_steps_sampled": 2283662, "grad_time_ms": 13089.904}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1785.8648743629456, "timestamp": 1558604988, "time_since_restore": 1785.8648743629456, "policy_reward_mean": {}, "training_iteration": 52, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534cf8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2283662, "episodes_total": 2411, "timesteps_total": 2283662, "episode_reward_mean": -498.9521782799607, "episodes_this_iter": 45, "date": "2019-05-23_09-49-48", "time_this_iter_s": 33.89962148666382, "num_metric_batches_dropped": 0, "episode_reward_min": -724.0174529312109}
{"iterations_since_restore": 53, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -256.0745087692146, "timesteps_this_iter": 42272, "custom_metrics": {"cost1_max": 225.25224139092285, "cost1_min": 149.43868671944898, "system_level_velocity_mean": 15.661421534638567, "cost2_mean": -88.54696760046394, "cost2_max": -58.597438038961776, "outflow_rate_max": 1467.1792140327204, "cost1_mean": 188.72371803561, "system_level_velocity_min": 12.21453785777887, "system_level_velocity_max": 18.951080263636598, "outflow_rate_min": 1090.4962337662337, "outflow_rate_mean": 1260.2056060790649, "cost2_min": -102.5758759642014}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.020176628604531288, "total_loss": 16.010601043701172, "vf_loss": 16.020362854003906, "vf_explained_var": 0.9050561189651489, "cur_lr": 0.0005000000237487257, "entropy": 1.1968696117401123, "cur_kl_coeff": 0.11249999701976776, "policy_loss": -0.012032982893288136}, "num_steps_trained": 2325934, "update_time_ms": 10.133, "load_time_ms": 23.738, "sample_time_ms": 21071.046, "num_steps_sampled": 2325934, "grad_time_ms": 13048.745}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1819.476578950882, "timestamp": 1558605021, "time_since_restore": 1819.476578950882, "policy_reward_mean": {}, "training_iteration": 53, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549c18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845492e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549908>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2325934, "episodes_total": 2457, "timesteps_total": 2325934, "episode_reward_mean": -485.0925467699685, "episodes_this_iter": 46, "date": "2019-05-23_09-50-21", "time_this_iter_s": 33.6117045879364, "num_metric_batches_dropped": 0, "episode_reward_min": -703.6415513039125}
{"iterations_since_restore": 54, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -256.0745087692146, "timesteps_this_iter": 42822, "custom_metrics": {"cost1_max": 225.25224139092285, "cost1_min": 141.64550428719213, "system_level_velocity_mean": 15.612126662243512, "cost2_mean": -87.46068296778434, "cost2_max": -56.494403652729815, "outflow_rate_max": 1467.1792140327204, "cost1_mean": 188.04514989293742, "system_level_velocity_min": 11.79340096696822, "system_level_velocity_max": 18.951080263636598, "outflow_rate_min": 999.0132110091746, "outflow_rate_mean": 1256.680904246723, "cost2_min": -102.5758759642014}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01572900265455246, "total_loss": 16.944122314453125, "vf_loss": 16.95292854309082, "vf_explained_var": 0.898091197013855, "cur_lr": 0.0005000000237487257, "entropy": 1.209116816520691, "cur_kl_coeff": 0.16875001788139343, "policy_loss": -0.011462382972240448}, "num_steps_trained": 2368756, "update_time_ms": 10.111, "load_time_ms": 23.446, "sample_time_ms": 20960.564, "num_steps_sampled": 2368756, "grad_time_ms": 13183.719}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1853.635026216507, "timestamp": 1558605056, "time_since_restore": 1853.635026216507, "policy_reward_mean": {}, "training_iteration": 54, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469ac18>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2368756, "episodes_total": 2503, "timesteps_total": 2368756, "episode_reward_mean": -482.87994654441695, "episodes_this_iter": 46, "date": "2019-05-23_09-50-56", "time_this_iter_s": 34.158447265625, "num_metric_batches_dropped": 0, "episode_reward_min": -779.2117775635495}
{"iterations_since_restore": 55, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -264.7561061045166, "timesteps_this_iter": 43077, "custom_metrics": {"cost1_max": 224.95133839521625, "cost1_min": 132.1985401559972, "system_level_velocity_mean": 15.22071672336142, "cost2_mean": -86.65406990195243, "cost2_max": -56.494403652729815, "outflow_rate_max": 1456.9253419568392, "cost1_mean": 183.15679969753182, "system_level_velocity_min": 10.994288550192275, "system_level_velocity_max": 18.777218996963995, "outflow_rate_min": 999.0132110091746, "outflow_rate_mean": 1230.2712665303825, "cost2_min": -102.9142309134364}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.019239701330661774, "total_loss": 17.333938598632812, "vf_loss": 17.343168258666992, "vf_explained_var": 0.8988898396492004, "cur_lr": 0.0005000000237487257, "entropy": 1.240014910697937, "cur_kl_coeff": 0.16875001788139343, "policy_loss": -0.012476245872676373}, "num_steps_trained": 2411833, "update_time_ms": 10.379, "load_time_ms": 23.848, "sample_time_ms": 20734.769, "num_steps_sampled": 2411833, "grad_time_ms": 13013.877}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1886.7305233478546, "timestamp": 1558605089, "time_since_restore": 1886.7305233478546, "policy_reward_mean": {}, "training_iteration": 55, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845419e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a0b8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2411833, "episodes_total": 2547, "timesteps_total": 2411833, "episode_reward_mean": -509.8934922326142, "episodes_this_iter": 44, "date": "2019-05-23_09-51-29", "time_this_iter_s": 33.095497131347656, "num_metric_batches_dropped": 0, "episode_reward_min": -788.1329768571214}
{"iterations_since_restore": 56, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.39824946124168, "timesteps_this_iter": 41891, "custom_metrics": {"cost1_max": 225.21553344363738, "cost1_min": 84.92390046026331, "system_level_velocity_mean": 15.32932746556554, "cost2_mean": -84.38369438751386, "cost2_max": -46.679747816925236, "outflow_rate_max": 1461.3483868571575, "cost1_mean": 182.08848117688748, "system_level_velocity_min": 10.994288550192275, "system_level_velocity_max": 18.868109390843447, "outflow_rate_min": 812.6321281183361, "outflow_rate_mean": 1223.5352649285726, "cost2_min": -102.9142309134364}, "done": false, "pid": 24639, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.01938343234360218, "total_loss": 22.796220779418945, "vf_loss": 22.807373046875, "vf_explained_var": 0.8686556220054626, "cur_lr": 0.0005000000237487257, "entropy": 1.2308495044708252, "cur_kl_coeff": 0.16875001788139343, "policy_loss": -0.014423271641135216}, "num_steps_trained": 2453724, "update_time_ms": 10.024, "load_time_ms": 24.483, "sample_time_ms": 20577.043, "num_steps_sampled": 2453724, "grad_time_ms": 12843.644}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1918.7101018428802, "timestamp": 1558605121, "time_since_restore": 1918.7101018428802, "policy_reward_mean": {}, "training_iteration": 56, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e846a9cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845305c0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2453724, "episodes_total": 2597, "timesteps_total": 2453724, "episode_reward_mean": -492.8129470653659, "episodes_this_iter": 50, "date": "2019-05-23_09-52-01", "time_this_iter_s": 31.979578495025635, "num_metric_batches_dropped": 0, "episode_reward_min": -788.1329768571214}
{"iterations_since_restore": 57, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.39824946124168, "timesteps_this_iter": 41451, "custom_metrics": {"cost1_max": 226.17634508183633, "cost1_min": 84.92390046026331, "system_level_velocity_mean": 15.503163461166118, "cost2_mean": -84.5665022574964, "cost2_max": -46.679747816925236, "outflow_rate_max": 1467.2254835309373, "cost1_mean": 183.982656424809, "system_level_velocity_min": 11.314775056459304, "system_level_velocity_max": 18.992172223666792, "outflow_rate_min": 812.6321281183361, "outflow_rate_mean": 1232.1210542355009, "cost2_min": -101.56897198450127}, "done": false, "pid": 24639, "episode_len_mean": 321.82, "info": {"default": {"kl": 0.02152765356004238, "total_loss": 17.996593475341797, "vf_loss": 18.009031295776367, "vf_explained_var": 0.8951202630996704, "cur_lr": 0.0005000000237487257, "entropy": 1.2412371635437012, "cur_kl_coeff": 0.16875001788139343, "policy_loss": -0.016071179881691933}, "num_steps_trained": 2495175, "update_time_ms": 9.757, "load_time_ms": 24.708, "sample_time_ms": 20522.074, "num_steps_sampled": 2495175, "grad_time_ms": 12658.811}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1951.2719049453735, "timestamp": 1558605153, "time_since_restore": 1951.2719049453735, "policy_reward_mean": {}, "training_iteration": 57, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549c18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549470>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2495175, "episodes_total": 2643, "timesteps_total": 2495175, "episode_reward_mean": -475.44456184270183, "episodes_this_iter": 46, "date": "2019-05-23_09-52-33", "time_this_iter_s": 32.561803102493286, "num_metric_batches_dropped": 0, "episode_reward_min": -735.090037905166}
{"iterations_since_restore": 58, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -255.58644508912352, "timesteps_this_iter": 42701, "custom_metrics": {"cost1_max": 226.17634508183633, "cost1_min": 141.46578650454686, "system_level_velocity_mean": 15.204638785953476, "cost2_mean": -86.41654413675352, "cost2_max": -55.36553832143772, "outflow_rate_max": 1467.2254835309373, "cost1_mean": 182.71366056679705, "system_level_velocity_min": 11.893979643035546, "system_level_velocity_max": 18.992172223666792, "outflow_rate_min": 995.6847290282391, "outflow_rate_mean": 1223.9096669876942, "cost2_min": -97.03289001542998}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017263168469071388, "total_loss": 18.687118530273438, "vf_loss": 18.695972442626953, "vf_explained_var": 0.8964783549308777, "cur_lr": 0.0005000000237487257, "entropy": 1.2550945281982422, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.013224934227764606}, "num_steps_trained": 2537876, "update_time_ms": 10.017, "load_time_ms": 24.138, "sample_time_ms": 20616.155, "num_steps_sampled": 2537876, "grad_time_ms": 12581.657}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 1984.7367091178894, "timestamp": 1558605187, "time_since_restore": 1984.7367091178894, "policy_reward_mean": {}, "training_iteration": 58, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845492e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549a58>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2537876, "episodes_total": 2688, "timesteps_total": 2537876, "episode_reward_mean": -501.3512676902499, "episodes_this_iter": 45, "date": "2019-05-23_09-53-07", "time_this_iter_s": 33.46480417251587, "num_metric_batches_dropped": 0, "episode_reward_min": -735.090037905166}
{"iterations_since_restore": 59, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.38961613544714, "timesteps_this_iter": 40901, "custom_metrics": {"cost1_max": 227.54659605439136, "cost1_min": 80.07427616102034, "system_level_velocity_mean": 15.317151668852084, "cost2_mean": -85.62491719455771, "cost2_max": -46.95021397249401, "outflow_rate_max": 1466.3698068817623, "cost1_mean": 182.31058638402894, "system_level_velocity_min": 12.121083566100605, "system_level_velocity_max": 19.131052606712863, "outflow_rate_min": 742.7307056391119, "outflow_rate_mean": 1218.267700969146, "cost2_min": -100.56222431104806}, "done": false, "pid": 24639, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.01584761030972004, "total_loss": 19.659421920776367, "vf_loss": 19.668109893798828, "vf_explained_var": 0.8918879628181458, "cur_lr": 0.0005000000237487257, "entropy": 1.2686431407928467, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012700214982032776}, "num_steps_trained": 2578777, "update_time_ms": 10.198, "load_time_ms": 25.098, "sample_time_ms": 20713.176, "num_steps_sampled": 2578777, "grad_time_ms": 12597.611}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2018.5378725528717, "timestamp": 1558605221, "time_since_restore": 2018.5378725528717, "policy_reward_mean": {}, "training_iteration": 59, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a780>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2578777, "episodes_total": 2737, "timesteps_total": 2578777, "episode_reward_mean": -490.95489575681165, "episodes_this_iter": 49, "date": "2019-05-23_09-53-41", "time_this_iter_s": 33.8011634349823, "num_metric_batches_dropped": 0, "episode_reward_min": -720.8496049337641}
{"iterations_since_restore": 60, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -94.38961613544714, "timesteps_this_iter": 41428, "custom_metrics": {"cost1_max": 227.54659605439136, "cost1_min": 80.07427616102034, "system_level_velocity_mean": 15.374088238194435, "cost2_mean": -83.77635704436604, "cost2_max": -46.95021397249401, "outflow_rate_max": 1466.3698068817623, "cost1_mean": 183.03635107396386, "system_level_velocity_min": 12.04811531970803, "system_level_velocity_max": 19.131052606712863, "outflow_rate_min": 742.7307056391119, "outflow_rate_mean": 1217.6076612291959, "cost2_min": -100.56222431104806}, "done": false, "pid": 24639, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.01645723544061184, "total_loss": 16.18268394470215, "vf_loss": 16.192033767700195, "vf_explained_var": 0.9139907956123352, "cur_lr": 0.0005000000237487257, "entropy": 1.2814284563064575, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.013515767641365528}, "num_steps_trained": 2620205, "update_time_ms": 10.395, "load_time_ms": 24.849, "sample_time_ms": 20576.933, "num_steps_sampled": 2620205, "grad_time_ms": 12660.295}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2051.002249956131, "timestamp": 1558605253, "time_since_restore": 2051.002249956131, "policy_reward_mean": {}, "training_iteration": 60, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845497f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549908>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2620205, "episodes_total": 2782, "timesteps_total": 2620205, "episode_reward_mean": -474.75528309247835, "episodes_this_iter": 45, "date": "2019-05-23_09-54-13", "time_this_iter_s": 32.46437740325928, "num_metric_batches_dropped": 0, "episode_reward_min": -705.8914204296475}
{"iterations_since_restore": 61, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.8807088264411, "timesteps_this_iter": 41109, "custom_metrics": {"cost1_max": 226.0449254327417, "cost1_min": 139.86047060884394, "system_level_velocity_mean": 15.22602480027761, "cost2_mean": -83.41951841774002, "cost2_max": -50.2233493407757, "outflow_rate_max": 1461.4561481700114, "cost1_mean": 182.7944685976864, "system_level_velocity_min": 11.760377701636362, "system_level_velocity_max": 19.012021426383953, "outflow_rate_min": 966.2790632318498, "outflow_rate_mean": 1214.4851073504901, "cost2_min": -100.56222431104806}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01342709455639124, "total_loss": 19.299747467041016, "vf_loss": 19.30784797668457, "vf_explained_var": 0.8974339365959167, "cur_lr": 0.0005000000237487257, "entropy": 1.2587367296218872, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.011500525288283825}, "num_steps_trained": 2661314, "update_time_ms": 10.554, "load_time_ms": 24.425, "sample_time_ms": 20557.339, "num_steps_sampled": 2661314, "grad_time_ms": 12444.132}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2083.341219186783, "timestamp": 1558605286, "time_since_restore": 2083.341219186783, "policy_reward_mean": {}, "training_iteration": 61, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549cc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549940>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2661314, "episodes_total": 2828, "timesteps_total": 2661314, "episode_reward_mean": -486.46427936807356, "episodes_this_iter": 46, "date": "2019-05-23_09-54-46", "time_this_iter_s": 32.338969230651855, "num_metric_batches_dropped": 0, "episode_reward_min": -762.7762349269333}
{"iterations_since_restore": 62, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.8807088264411, "timesteps_this_iter": 42429, "custom_metrics": {"cost1_max": 226.0449254327417, "cost1_min": 139.86047060884394, "system_level_velocity_mean": 15.363617959618441, "cost2_mean": -85.70409462286743, "cost2_max": -51.21109034098171, "outflow_rate_max": 1462.3973167299703, "cost1_mean": 184.36458931896726, "system_level_velocity_min": 11.760377701636362, "system_level_velocity_max": 19.012021426383953, "outflow_rate_min": 966.2790632318498, "outflow_rate_mean": 1229.3903832170624, "cost2_min": -97.48709668132943}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014845674857497215, "total_loss": 18.06093978881836, "vf_loss": 18.069643020629883, "vf_explained_var": 0.9067361354827881, "cur_lr": 0.0005000000237487257, "entropy": 1.2954990863800049, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01246029045432806}, "num_steps_trained": 2703743, "update_time_ms": 10.028, "load_time_ms": 23.806, "sample_time_ms": 20532.261, "num_steps_sampled": 2703743, "grad_time_ms": 12414.224}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2116.6779663562775, "timestamp": 1558605319, "time_since_restore": 2116.6779663562775, "policy_reward_mean": {}, "training_iteration": 62, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845496a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845495f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2703743, "episodes_total": 2873, "timesteps_total": 2703743, "episode_reward_mean": -493.7751293761397, "episodes_this_iter": 45, "date": "2019-05-23_09-55-19", "time_this_iter_s": 33.33674716949463, "num_metric_batches_dropped": 0, "episode_reward_min": -762.7762349269333}
{"iterations_since_restore": 63, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -261.1629131962194, "timesteps_this_iter": 43009, "custom_metrics": {"cost1_max": 225.2064351776528, "cost1_min": 128.1491254826576, "system_level_velocity_mean": 15.163243675009213, "cost2_mean": -84.83382618350737, "cost2_max": -54.09455383054111, "outflow_rate_max": 1462.3973167299703, "cost1_mean": 181.77565937912587, "system_level_velocity_min": 10.729591603069844, "system_level_velocity_max": 18.79547319924839, "outflow_rate_min": 876.7418507462685, "outflow_rate_mean": 1217.5770728205814, "cost2_min": -97.48709668132943}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015353469178080559, "total_loss": 19.213218688964844, "vf_loss": 19.221858978271484, "vf_explained_var": 0.9012959599494934, "cur_lr": 0.0005000000237487257, "entropy": 1.326528787612915, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01252649538218975}, "num_steps_trained": 2746752, "update_time_ms": 9.901, "load_time_ms": 25.074, "sample_time_ms": 20608.927, "num_steps_sampled": 2746752, "grad_time_ms": 12385.528}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2150.78005361557, "timestamp": 1558605353, "time_since_restore": 2150.78005361557, "policy_reward_mean": {}, "training_iteration": 63, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845492b0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2746752, "episodes_total": 2921, "timesteps_total": 2746752, "episode_reward_mean": -508.6531729115736, "episodes_this_iter": 48, "date": "2019-05-23_09-55-53", "time_this_iter_s": 34.1020872592926, "num_metric_batches_dropped": 0, "episode_reward_min": -735.0723883925491}
{"iterations_since_restore": 64, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -261.1629131962194, "timesteps_this_iter": 42189, "custom_metrics": {"cost1_max": 224.8409823878425, "cost1_min": 128.1491254826576, "system_level_velocity_mean": 14.909235490719643, "cost2_mean": -83.1592042634678, "cost2_max": -54.09455383054111, "outflow_rate_max": 1460.683907624633, "cost1_mean": 178.54278588221482, "system_level_velocity_min": 10.729591603069844, "system_level_velocity_max": 18.858301941821768, "outflow_rate_min": 876.7418507462685, "outflow_rate_mean": 1201.870044275699, "cost2_min": -99.19163943265279}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014853616245090961, "total_loss": 19.442121505737305, "vf_loss": 19.45067596435547, "vf_explained_var": 0.9012632966041565, "cur_lr": 0.0005000000237487257, "entropy": 1.313990831375122, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.012315035797655582}, "num_steps_trained": 2788941, "update_time_ms": 10.116, "load_time_ms": 24.915, "sample_time_ms": 20695.065, "num_steps_sampled": 2788941, "grad_time_ms": 12283.191}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2184.7697093486786, "timestamp": 1558605387, "time_since_restore": 2184.7697093486786, "policy_reward_mean": {}, "training_iteration": 64, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845499e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549080>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2788941, "episodes_total": 2967, "timesteps_total": 2788941, "episode_reward_mean": -522.3644459932788, "episodes_this_iter": 46, "date": "2019-05-23_09-56-27", "time_this_iter_s": 33.98965573310852, "num_metric_batches_dropped": 0, "episode_reward_min": -747.8339561091831}
{"iterations_since_restore": 65, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.08082812239606, "timesteps_this_iter": 42827, "custom_metrics": {"cost1_max": 224.8409823878425, "cost1_min": 24.718659319805028, "system_level_velocity_mean": 14.99365357224025, "cost2_mean": -82.9230362544246, "cost2_max": -19.405583253337408, "outflow_rate_max": 1458.1212023918495, "cost1_mean": 177.80664810017498, "system_level_velocity_min": 11.523106996681674, "system_level_velocity_max": 18.858301941821768, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1201.4254676222479, "cost2_min": -99.19163943265279}, "done": false, "pid": 24639, "episode_len_mean": 322.13, "info": {"default": {"kl": 0.016978085041046143, "total_loss": 18.778173446655273, "vf_loss": 18.784404754638672, "vf_explained_var": 0.9072452783584595, "cur_lr": 0.0005000000237487257, "entropy": 1.3337959051132202, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.010529328137636185}, "num_steps_trained": 2831768, "update_time_ms": 9.995, "load_time_ms": 24.341, "sample_time_ms": 20803.413, "num_steps_sampled": 2831768, "grad_time_ms": 12327.67}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2219.3772597312927, "timestamp": 1558605422, "time_since_restore": 2219.3772597312927, "policy_reward_mean": {}, "training_iteration": 65, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845372e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2831768, "episodes_total": 3012, "timesteps_total": 2831768, "episode_reward_mean": -519.0016493859825, "episodes_this_iter": 45, "date": "2019-05-23_09-57-02", "time_this_iter_s": 34.607550382614136, "num_metric_batches_dropped": 0, "episode_reward_min": -747.8339561091831}
{"iterations_since_restore": 66, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.08082812239606, "timesteps_this_iter": 42455, "custom_metrics": {"cost1_max": 225.67726533539508, "cost1_min": 24.718659319805028, "system_level_velocity_mean": 15.140935696197516, "cost2_mean": -82.57004128240463, "cost2_max": -19.405583253337408, "outflow_rate_max": 1456.563297800465, "cost1_mean": 179.7651678656421, "system_level_velocity_min": 12.079950805375056, "system_level_velocity_max": 18.87098288918636, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1209.8084989916458, "cost2_min": -97.86585338070245}, "done": false, "pid": 24639, "episode_len_mean": 322.13, "info": {"default": {"kl": 0.015076867304742336, "total_loss": 19.05475616455078, "vf_loss": 19.064409255981445, "vf_explained_var": 0.903678297996521, "cur_lr": 0.0005000000237487257, "entropy": 1.3194341659545898, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.013469373807311058}, "num_steps_trained": 2874223, "update_time_ms": 10.034, "load_time_ms": 23.561, "sample_time_ms": 20881.162, "num_steps_sampled": 2874223, "grad_time_ms": 12349.486}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2252.3537213802338, "timestamp": 1558605455, "time_since_restore": 2252.3537213802338, "policy_reward_mean": {}, "training_iteration": 66, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84906780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549f60>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2874223, "episodes_total": 3061, "timesteps_total": 2874223, "episode_reward_mean": -505.2718356585061, "episodes_this_iter": 49, "date": "2019-05-23_09-57-35", "time_this_iter_s": 32.97646164894104, "num_metric_batches_dropped": 0, "episode_reward_min": -774.0452106092218}
{"iterations_since_restore": 67, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.216554018145782, "timesteps_this_iter": 42789, "custom_metrics": {"cost1_max": 225.67726533539508, "cost1_min": 18.74968622284931, "system_level_velocity_mean": 15.084029657064185, "cost2_mean": -81.43114716377154, "cost2_max": -15.209766428261569, "outflow_rate_max": 1458.1480873200937, "cost1_mean": 178.9412849564021, "system_level_velocity_min": 12.079950805375056, "system_level_velocity_max": 18.87098288918636, "outflow_rate_min": 497.50056700217027, "outflow_rate_mean": 1208.7464720452558, "cost2_min": -97.86585338070245}, "done": false, "pid": 24639, "episode_len_mean": 322.03, "info": {"default": {"kl": 0.01755055971443653, "total_loss": 16.592117309570312, "vf_loss": 16.60344696044922, "vf_explained_var": 0.914639949798584, "cur_lr": 0.0005000000237487257, "entropy": 1.3334344625473022, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.015772322192788124}, "num_steps_trained": 2917012, "update_time_ms": 10.162, "load_time_ms": 23.123, "sample_time_ms": 20966.26, "num_steps_sampled": 2917012, "grad_time_ms": 12328.479}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2285.5503640174866, "timestamp": 1558605488, "time_since_restore": 2285.5503640174866, "policy_reward_mean": {}, "training_iteration": 67, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549400>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2917012, "episodes_total": 3106, "timesteps_total": 2917012, "episode_reward_mean": -507.0142390277025, "episodes_this_iter": 45, "date": "2019-05-23_09-58-08", "time_this_iter_s": 33.19664263725281, "num_metric_batches_dropped": 0, "episode_reward_min": -774.0452106092218}
{"iterations_since_restore": 68, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.216554018145782, "timesteps_this_iter": 43775, "custom_metrics": {"cost1_max": 223.97877317524677, "cost1_min": 18.74968622284931, "system_level_velocity_mean": 14.879094961982616, "cost2_mean": -81.37276270214417, "cost2_max": -15.209766428261569, "outflow_rate_max": 1458.1480873200937, "cost1_mean": 175.1384708018745, "system_level_velocity_min": 11.372352278084612, "system_level_velocity_max": 19.00284055954481, "outflow_rate_min": 497.50056700217027, "outflow_rate_mean": 1191.1818872560573, "cost2_min": -96.7963580064309}, "done": false, "pid": 24639, "episode_len_mean": 320.03, "info": {"default": {"kl": 0.015047235414385796, "total_loss": 17.738706588745117, "vf_loss": 17.747013092041016, "vf_explained_var": 0.9162024855613708, "cur_lr": 0.0005000000237487257, "entropy": 1.3406165838241577, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012113604694604874}, "num_steps_trained": 2960787, "update_time_ms": 9.993, "load_time_ms": 23.026, "sample_time_ms": 20994.566, "num_steps_sampled": 2960787, "grad_time_ms": 12251.564}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2318.5510778427124, "timestamp": 1558605521, "time_since_restore": 2318.5510778427124, "policy_reward_mean": {}, "training_iteration": 68, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530908>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 2960787, "episodes_total": 3151, "timesteps_total": 2960787, "episode_reward_mean": -525.5870257140793, "episodes_this_iter": 45, "date": "2019-05-23_09-58-41", "time_this_iter_s": 33.00071382522583, "num_metric_batches_dropped": 0, "episode_reward_min": -748.9851952942454}
{"iterations_since_restore": 69, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.95850267643702, "timesteps_this_iter": 41848, "custom_metrics": {"cost1_max": 223.97877317524677, "cost1_min": 85.98205498209043, "system_level_velocity_mean": 15.041260635052979, "cost2_mean": -80.61085367938577, "cost2_max": -45.52272738747875, "outflow_rate_max": 1443.9848485572659, "cost1_mean": 179.34824463593446, "system_level_velocity_min": 11.372352278084612, "system_level_velocity_max": 19.00284055954481, "outflow_rate_min": 814.4824112697466, "outflow_rate_mean": 1209.5662353460525, "cost2_min": -96.29621930222771}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01716029644012451, "total_loss": 17.703916549682617, "vf_loss": 17.71400260925293, "vf_explained_var": 0.9090853333473206, "cur_lr": 0.0005000000237487257, "entropy": 1.3326501846313477, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.014430258423089981}, "num_steps_trained": 3002635, "update_time_ms": 10.203, "load_time_ms": 23.014, "sample_time_ms": 21048.038, "num_steps_sampled": 3002635, "grad_time_ms": 12230.503}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2352.684279680252, "timestamp": 1558605555, "time_since_restore": 2352.684279680252, "policy_reward_mean": {}, "training_iteration": 69, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534be0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3002635, "episodes_total": 3201, "timesteps_total": 3002635, "episode_reward_mean": -513.2757333518169, "episodes_this_iter": 50, "date": "2019-05-23_09-59-15", "time_this_iter_s": 34.13320183753967, "num_metric_batches_dropped": 0, "episode_reward_min": -748.9851952942454}
{"iterations_since_restore": 70, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -260.64688449718636, "timesteps_this_iter": 42903, "custom_metrics": {"cost1_max": 224.8936785400181, "cost1_min": 140.38509333715916, "system_level_velocity_mean": 15.074284171301613, "cost2_mean": -79.57615182510835, "cost2_max": -51.11347596421786, "outflow_rate_max": 1453.3456243587818, "cost1_mean": 181.16854483308194, "system_level_velocity_min": 11.939756741617696, "system_level_velocity_max": 18.83957106560991, "outflow_rate_min": 946.9035195019227, "outflow_rate_mean": 1218.7234892553188, "cost2_min": -93.26382105133041}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015493093058466911, "total_loss": 17.043193817138672, "vf_loss": 17.05177879333496, "vf_explained_var": 0.912841260433197, "cur_lr": 0.0005000000237487257, "entropy": 1.3329002857208252, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012506646104156971}, "num_steps_trained": 3045538, "update_time_ms": 10.207, "load_time_ms": 24.23, "sample_time_ms": 21269.754, "num_steps_sampled": 3045538, "grad_time_ms": 12277.822}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2387.8530604839325, "timestamp": 1558605590, "time_since_restore": 2387.8530604839325, "policy_reward_mean": {}, "training_iteration": 70, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537668>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3045538, "episodes_total": 3246, "timesteps_total": 3045538, "episode_reward_mean": -502.5405752909007, "episodes_this_iter": 45, "date": "2019-05-23_09-59-50", "time_this_iter_s": 35.16878080368042, "num_metric_batches_dropped": 0, "episode_reward_min": -742.6160944174723}
{"iterations_since_restore": 71, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -260.64688449718636, "timesteps_this_iter": 43545, "custom_metrics": {"cost1_max": 224.8936785400181, "cost1_min": 140.38509333715916, "system_level_velocity_mean": 14.981714334946389, "cost2_mean": -80.83785865657646, "cost2_max": -51.11347596421786, "outflow_rate_max": 1453.3456243587818, "cost1_mean": 179.79264942225748, "system_level_velocity_min": 11.939756741617696, "system_level_velocity_max": 18.83957106560991, "outflow_rate_min": 946.9035195019227, "outflow_rate_mean": 1209.4487870740734, "cost2_min": -94.88198396605867}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015054128132760525, "total_loss": 16.9819393157959, "vf_loss": 16.990325927734375, "vf_explained_var": 0.9138439297676086, "cur_lr": 0.0005000000237487257, "entropy": 1.3554410934448242, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01219888124614954}, "num_steps_trained": 3089083, "update_time_ms": 9.955, "load_time_ms": 24.401, "sample_time_ms": 21342.783, "num_steps_sampled": 3089083, "grad_time_ms": 12243.316}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2420.549989461899, "timestamp": 1558605623, "time_since_restore": 2420.549989461899, "policy_reward_mean": {}, "training_iteration": 71, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845499b0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3089083, "episodes_total": 3290, "timesteps_total": 3089083, "episode_reward_mean": -518.9083206506668, "episodes_this_iter": 44, "date": "2019-05-23_10-00-23", "time_this_iter_s": 32.69692897796631, "num_metric_batches_dropped": 0, "episode_reward_min": -770.7571501023808}
{"iterations_since_restore": 72, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -102.63134995118666, "timesteps_this_iter": 42436, "custom_metrics": {"cost1_max": 225.91268346893267, "cost1_min": 84.76350919648611, "system_level_velocity_mean": 15.091207769455671, "cost2_mean": -82.11914336400143, "cost2_max": -42.61263835260291, "outflow_rate_max": 1460.2637135752404, "cost1_mean": 179.81398311545254, "system_level_velocity_min": 12.03839525170264, "system_level_velocity_max": 18.843717715057505, "outflow_rate_min": 806.8729725077981, "outflow_rate_mean": 1211.2975993591667, "cost2_min": -95.60729657264382}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.016543030738830566, "total_loss": 17.794479370117188, "vf_loss": 17.802244186401367, "vf_explained_var": 0.9086428284645081, "cur_lr": 0.0005000000237487257, "entropy": 1.3377463817596436, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.011953290551900864}, "num_steps_trained": 3131519, "update_time_ms": 10.013, "load_time_ms": 23.339, "sample_time_ms": 21469.359, "num_steps_sampled": 3131519, "grad_time_ms": 12071.488}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2453.435569047928, "timestamp": 1558605656, "time_since_restore": 2453.435569047928, "policy_reward_mean": {}, "training_iteration": 72, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845416d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3131519, "episodes_total": 3340, "timesteps_total": 3131519, "episode_reward_mean": -513.7095080210624, "episodes_this_iter": 50, "date": "2019-05-23_10-00-56", "time_this_iter_s": 32.88557958602905, "num_metric_batches_dropped": 0, "episode_reward_min": -770.7571501023808}
{"iterations_since_restore": 73, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.970074260165983, "timesteps_this_iter": 43195, "custom_metrics": {"cost1_max": 225.91268346893267, "cost1_min": 17.861484226858465, "system_level_velocity_mean": 15.36644628527241, "cost2_mean": -82.5602989567774, "cost2_max": -17.18999390542754, "outflow_rate_max": 1460.2637135752404, "cost1_mean": 179.93926599009748, "system_level_velocity_min": 11.977192066529684, "system_level_velocity_max": 18.843717715057505, "outflow_rate_min": 431.75782487237836, "outflow_rate_mean": 1215.2576843928996, "cost2_min": -95.60729657264382}, "done": false, "pid": 24639, "episode_len_mean": 318.05, "info": {"default": {"kl": 0.015949107706546783, "total_loss": 19.121809005737305, "vf_loss": 19.13030433654785, "vf_explained_var": 0.9034271836280823, "cur_lr": 0.0005000000237487257, "entropy": 1.3441336154937744, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.01253172941505909}, "num_steps_trained": 3174714, "update_time_ms": 10.088, "load_time_ms": 23.764, "sample_time_ms": 21472.593, "num_steps_sampled": 3174714, "grad_time_ms": 12072.83}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2487.5905842781067, "timestamp": 1558605690, "time_since_restore": 2487.5905842781067, "policy_reward_mean": {}, "training_iteration": 73, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845419e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3174714, "episodes_total": 3386, "timesteps_total": 3174714, "episode_reward_mean": -495.1904566818346, "episodes_this_iter": 46, "date": "2019-05-23_10-01-30", "time_this_iter_s": 34.15501523017883, "num_metric_batches_dropped": 0, "episode_reward_min": -714.4075606442158}
{"iterations_since_restore": 74, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.970074260165983, "timesteps_this_iter": 44022, "custom_metrics": {"cost1_max": 222.61126575607244, "cost1_min": 17.861484226858465, "system_level_velocity_mean": 15.10540294988202, "cost2_mean": -81.28139723697808, "cost2_max": -17.18999390542754, "outflow_rate_max": 1449.5476775172879, "cost1_mean": 175.87194060786177, "system_level_velocity_min": 11.977192066529684, "system_level_velocity_max": 18.724954856779966, "outflow_rate_min": 431.75782487237836, "outflow_rate_mean": 1193.7621789758186, "cost2_min": -98.53788961556563}, "done": false, "pid": 24639, "episode_len_mean": 316.95, "info": {"default": {"kl": 0.01579538732767105, "total_loss": 17.359703063964844, "vf_loss": 17.368486404418945, "vf_explained_var": 0.9103273153305054, "cur_lr": 0.0005000000237487257, "entropy": 1.375829815864563, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012779473327100277}, "num_steps_trained": 3218736, "update_time_ms": 9.914, "load_time_ms": 24.498, "sample_time_ms": 21502.184, "num_steps_sampled": 3218736, "grad_time_ms": 12002.869}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2521.1698524951935, "timestamp": 1558605724, "time_since_restore": 2521.1698524951935, "policy_reward_mean": {}, "training_iteration": 74, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bda0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b780>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3218736, "episodes_total": 3434, "timesteps_total": 3218736, "episode_reward_mean": -518.0500508475874, "episodes_this_iter": 48, "date": "2019-05-23_10-02-04", "time_this_iter_s": 33.57926821708679, "num_metric_batches_dropped": 0, "episode_reward_min": -756.2745654697636}
{"iterations_since_restore": 75, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.520336471511545, "timesteps_this_iter": 43047, "custom_metrics": {"cost1_max": 222.61126575607244, "cost1_min": 23.024520364615945, "system_level_velocity_mean": 15.148001123812783, "cost2_mean": -80.37160449046131, "cost2_max": -17.390430735931243, "outflow_rate_max": 1449.5476775172879, "cost1_mean": 178.6068822016885, "system_level_velocity_min": 12.241155013791229, "system_level_velocity_max": 18.724954856779966, "outflow_rate_min": 510.482880093598, "outflow_rate_mean": 1205.8929829739554, "cost2_min": -98.53788961556563}, "done": false, "pid": 24639, "episode_len_mean": 319.82, "info": {"default": {"kl": 0.016707856208086014, "total_loss": 17.696870803833008, "vf_loss": 17.70540428161621, "vf_explained_var": 0.9061917662620544, "cur_lr": 0.0005000000237487257, "entropy": 1.3547611236572266, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012763944454491138}, "num_steps_trained": 3261783, "update_time_ms": 9.915, "load_time_ms": 24.869, "sample_time_ms": 21575.252, "num_steps_sampled": 3261783, "grad_time_ms": 11805.944}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2554.5427083969116, "timestamp": 1558605757, "time_since_restore": 2554.5427083969116, "policy_reward_mean": {}, "training_iteration": 75, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b6a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bc18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b048>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3261783, "episodes_total": 3481, "timesteps_total": 3261783, "episode_reward_mean": -509.1788132439025, "episodes_this_iter": 47, "date": "2019-05-23_10-02-37", "time_this_iter_s": 33.37285590171814, "num_metric_batches_dropped": 0, "episode_reward_min": -756.2745654697636}
{"iterations_since_restore": 76, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -95.60273192209846, "timesteps_this_iter": 43555, "custom_metrics": {"cost1_max": 221.52906489220175, "cost1_min": 78.89549632781387, "system_level_velocity_mean": 14.978256999754235, "cost2_mean": -81.14774850444923, "cost2_max": -38.83280889715097, "outflow_rate_max": 1449.4655050505055, "cost1_mean": 179.0998866079707, "system_level_velocity_min": 11.74183372274362, "system_level_velocity_max": 18.394832711355676, "outflow_rate_min": 757.0100702139712, "outflow_rate_mean": 1209.390330094651, "cost2_min": -97.9545562509085}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01753908582031727, "total_loss": 15.14647388458252, "vf_loss": 15.156689643859863, "vf_explained_var": 0.9171726107597351, "cur_lr": 0.0005000000237487257, "entropy": 1.3685816526412964, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01465507224202156}, "num_steps_trained": 3305338, "update_time_ms": 9.777, "load_time_ms": 24.999, "sample_time_ms": 21723.903, "num_steps_sampled": 3305338, "grad_time_ms": 11843.477}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2589.3613228797913, "timestamp": 1558605792, "time_since_restore": 2589.3613228797913, "policy_reward_mean": {}, "training_iteration": 76, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845343c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534d30>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3305338, "episodes_total": 3527, "timesteps_total": 3305338, "episode_reward_mean": -520.0038891752017, "episodes_this_iter": 46, "date": "2019-05-23_10-03-12", "time_this_iter_s": 34.81861448287964, "num_metric_batches_dropped": 0, "episode_reward_min": -771.1684528872706}
{"iterations_since_restore": 77, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -265.42776171532006, "timesteps_this_iter": 42666, "custom_metrics": {"cost1_max": 221.52906489220175, "cost1_min": 139.4987314483573, "system_level_velocity_mean": 14.73870515606353, "cost2_mean": -79.18151017104817, "cost2_max": -50.24333898789649, "outflow_rate_max": 1449.4655050505055, "cost1_mean": 177.56246065363078, "system_level_velocity_min": 11.74183372274362, "system_level_velocity_max": 18.471856981190967, "outflow_rate_min": 1009.9382548529695, "outflow_rate_mean": 1200.6244002414826, "cost2_min": -96.41102236060462}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017971618101000786, "total_loss": 17.78209114074707, "vf_loss": 17.792362213134766, "vf_explained_var": 0.9037132859230042, "cur_lr": 0.0005000000237487257, "entropy": 1.3958863019943237, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.01482021901756525}, "num_steps_trained": 3348004, "update_time_ms": 9.873, "load_time_ms": 25.22, "sample_time_ms": 21700.395, "num_steps_sampled": 3348004, "grad_time_ms": 11923.653}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2623.143416404724, "timestamp": 1558605826, "time_since_restore": 2623.143416404724, "policy_reward_mean": {}, "training_iteration": 77, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bd68>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3348004, "episodes_total": 3572, "timesteps_total": 3348004, "episode_reward_mean": -530.1613656981531, "episodes_this_iter": 45, "date": "2019-05-23_10-03-46", "time_this_iter_s": 33.78209352493286, "num_metric_batches_dropped": 0, "episode_reward_min": -771.1684528872706}
{"iterations_since_restore": 78, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -275.43080873514003, "timesteps_this_iter": 43016, "custom_metrics": {"cost1_max": 221.13287447129716, "cost1_min": 145.12128676056508, "system_level_velocity_mean": 14.883937933058291, "cost2_mean": -77.87556880543332, "cost2_max": -50.24333898789649, "outflow_rate_max": 1449.4572201885242, "cost1_mean": 179.22651573437827, "system_level_velocity_min": 11.991917259808261, "system_level_velocity_max": 18.471856981190967, "outflow_rate_min": 1009.9382548529695, "outflow_rate_mean": 1207.9971110260258, "cost2_min": -97.240299613031}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01658087596297264, "total_loss": 21.014938354492188, "vf_loss": 21.024673461914062, "vf_explained_var": 0.8935850858688354, "cur_lr": 0.0005000000237487257, "entropy": 1.3814605474472046, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.0139304855838418}, "num_steps_trained": 3391020, "update_time_ms": 9.827, "load_time_ms": 25.661, "sample_time_ms": 21623.741, "num_steps_sampled": 3391020, "grad_time_ms": 11984.906}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2655.967465162277, "timestamp": 1558605859, "time_since_restore": 2655.967465162277, "policy_reward_mean": {}, "training_iteration": 78, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845378d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537390>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3391020, "episodes_total": 3618, "timesteps_total": 3391020, "episode_reward_mean": -518.06321794216, "episodes_this_iter": 46, "date": "2019-05-23_10-04-19", "time_this_iter_s": 32.8240487575531, "num_metric_batches_dropped": 0, "episode_reward_min": -709.0121142399379}
{"iterations_since_restore": 79, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -279.44502678504756, "timesteps_this_iter": 42001, "custom_metrics": {"cost1_max": 220.63887910898586, "cost1_min": 145.12128676056508, "system_level_velocity_mean": 15.013636435756437, "cost2_mean": -78.10304339281883, "cost2_max": -54.193810174869796, "outflow_rate_max": 1442.8402020202025, "cost1_mean": 180.79062523019064, "system_level_velocity_min": 11.991917259808261, "system_level_velocity_max": 18.223533490621612, "outflow_rate_min": 1024.8006504065038, "outflow_rate_mean": 1216.0094390490194, "cost2_min": -97.240299613031}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01652657613158226, "total_loss": 15.469429016113281, "vf_loss": 15.478133201599121, "vf_explained_var": 0.9206107258796692, "cur_lr": 0.0005000000237487257, "entropy": 1.3714255094528198, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.012887272983789444}, "num_steps_trained": 3433021, "update_time_ms": 9.488, "load_time_ms": 25.981, "sample_time_ms": 21561.882, "num_steps_sampled": 3433021, "grad_time_ms": 11925.958}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2688.865517139435, "timestamp": 1558605892, "time_since_restore": 2688.865517139435, "policy_reward_mean": {}, "training_iteration": 79, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845306d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530fd0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3433021, "episodes_total": 3667, "timesteps_total": 3433021, "episode_reward_mean": -510.49503293698416, "episodes_this_iter": 49, "date": "2019-05-23_10-04-52", "time_this_iter_s": 32.89805197715759, "num_metric_batches_dropped": 0, "episode_reward_min": -709.0121142399379}
{"iterations_since_restore": 80, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.063501310390876, "timesteps_this_iter": 42666, "custom_metrics": {"cost1_max": 222.5917276726118, "cost1_min": 24.68862053125371, "system_level_velocity_mean": 15.11992441105478, "cost2_mean": -77.49560658723715, "cost2_max": -18.408007283365524, "outflow_rate_max": 1444.0688720998378, "cost1_mean": 178.5614863067998, "system_level_velocity_min": 12.105012389506795, "system_level_velocity_max": 18.595723621152622, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1204.7733655625111, "cost2_min": -94.37212709863624}, "done": false, "pid": 24639, "episode_len_mean": 320.13, "info": {"default": {"kl": 0.016591694205999374, "total_loss": 16.374895095825195, "vf_loss": 16.383514404296875, "vf_explained_var": 0.9203508496284485, "cur_lr": 0.0005000000237487257, "entropy": 1.3775177001953125, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.01282170694321394}, "num_steps_trained": 3475687, "update_time_ms": 9.222, "load_time_ms": 25.916, "sample_time_ms": 21703.996, "num_steps_sampled": 3475687, "grad_time_ms": 11643.142}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2722.644162416458, "timestamp": 1558605926, "time_since_restore": 2722.644162416458, "policy_reward_mean": {}, "training_iteration": 80, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3475687, "episodes_total": 3712, "timesteps_total": 3475687, "episode_reward_mean": -500.4554980857105, "episodes_this_iter": 45, "date": "2019-05-23_10-05-26", "time_this_iter_s": 33.778645277023315, "num_metric_batches_dropped": 0, "episode_reward_min": -719.3468450615543}
{"iterations_since_restore": 81, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -30.063501310390876, "timesteps_this_iter": 42351, "custom_metrics": {"cost1_max": 222.5917276726118, "cost1_min": 24.68862053125371, "system_level_velocity_mean": 14.99271817698709, "cost2_mean": -78.40284184560505, "cost2_max": -18.408007283365524, "outflow_rate_max": 1453.9998183769992, "cost1_mean": 176.87375818045052, "system_level_velocity_min": 11.745671266594684, "system_level_velocity_max": 18.595723621152622, "outflow_rate_min": 506.4167257881143, "outflow_rate_mean": 1200.7329737359667, "cost2_min": -96.38877814347819}, "done": false, "pid": 24639, "episode_len_mean": 320.13, "info": {"default": {"kl": 0.017123930156230927, "total_loss": 18.660442352294922, "vf_loss": 18.67006492614746, "vf_explained_var": 0.909360408782959, "cur_lr": 0.0005000000237487257, "entropy": 1.370758295059204, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01395741943269968}, "num_steps_trained": 3518038, "update_time_ms": 9.439, "load_time_ms": 25.734, "sample_time_ms": 21700.23, "num_steps_sampled": 3518038, "grad_time_ms": 11719.965}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2756.0844502449036, "timestamp": 1558605959, "time_since_restore": 2756.0844502449036, "policy_reward_mean": {}, "training_iteration": 81, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bb70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2b0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3518038, "episodes_total": 3756, "timesteps_total": 3518038, "episode_reward_mean": -508.4449323744894, "episodes_this_iter": 44, "date": "2019-05-23_10-05-59", "time_this_iter_s": 33.440287828445435, "num_metric_batches_dropped": 0, "episode_reward_min": -736.8428550352394}
{"iterations_since_restore": 82, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -270.1964096341989, "timesteps_this_iter": 42612, "custom_metrics": {"cost1_max": 221.66351746209307, "cost1_min": 139.6491960597456, "system_level_velocity_mean": 15.101982172052027, "cost2_mean": -79.75217180385584, "cost2_max": -50.99111869640152, "outflow_rate_max": 1453.9998183769992, "cost1_mean": 181.27201681470433, "system_level_velocity_min": 11.745671266594684, "system_level_velocity_max": 18.586728422176833, "outflow_rate_min": 981.9932697460076, "outflow_rate_mean": 1221.2967618267096, "cost2_min": -98.64547326230768}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015874210745096207, "total_loss": 20.58843994140625, "vf_loss": 20.596927642822266, "vf_explained_var": 0.8987526893615723, "cur_lr": 0.0005000000237487257, "entropy": 1.3746873140335083, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.012504818849265575}, "num_steps_trained": 3560650, "update_time_ms": 9.594, "load_time_ms": 25.848, "sample_time_ms": 21531.191, "num_steps_sampled": 3560650, "grad_time_ms": 11944.232}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2789.5039076805115, "timestamp": 1558605992, "time_since_restore": 2789.5039076805115, "policy_reward_mean": {}, "training_iteration": 82, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530c50>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3560650, "episodes_total": 3806, "timesteps_total": 3560650, "episode_reward_mean": -505.869085056444, "episodes_this_iter": 50, "date": "2019-05-23_10-06-32", "time_this_iter_s": 33.41945743560791, "num_metric_batches_dropped": 0, "episode_reward_min": -736.8428550352394}
{"iterations_since_restore": 83, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.87170269824887, "timesteps_this_iter": 42169, "custom_metrics": {"cost1_max": 221.08331626988243, "cost1_min": 85.06963234972713, "system_level_velocity_mean": 15.16522466573104, "cost2_mean": -80.45895439958721, "cost2_max": -45.41051431516671, "outflow_rate_max": 1448.7759521066491, "cost1_mean": 180.65151589035497, "system_level_velocity_min": 11.654753610353232, "system_level_velocity_max": 18.77719152839265, "outflow_rate_min": 813.1920207542333, "outflow_rate_mean": 1212.2242489504758, "cost2_min": -98.64547326230768}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.01630040444433689, "total_loss": 17.0421142578125, "vf_loss": 17.051694869995117, "vf_explained_var": 0.9186691045761108, "cur_lr": 0.0005000000237487257, "entropy": 1.354169487953186, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.01370653510093689}, "num_steps_trained": 3602819, "update_time_ms": 9.505, "load_time_ms": 25.544, "sample_time_ms": 21405.897, "num_steps_sampled": 3602819, "grad_time_ms": 11892.234}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2821.8744807243347, "timestamp": 1558606025, "time_since_restore": 2821.8744807243347, "policy_reward_mean": {}, "training_iteration": 83, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bcf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b710>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3602819, "episodes_total": 3852, "timesteps_total": 3602819, "episode_reward_mean": -500.38682036213953, "episodes_this_iter": 46, "date": "2019-05-23_10-07-05", "time_this_iter_s": 32.37057304382324, "num_metric_batches_dropped": 0, "episode_reward_min": -734.4524399009832}
{"iterations_since_restore": 84, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.08083510335908, "timesteps_this_iter": 42412, "custom_metrics": {"cost1_max": 223.02574707615761, "cost1_min": 85.06963234972713, "system_level_velocity_mean": 15.098257464461733, "cost2_mean": -81.56744063468221, "cost2_max": -45.41051431516671, "outflow_rate_max": 1453.9704984519296, "cost1_mean": 178.4572227498042, "system_level_velocity_min": 11.654753610353232, "system_level_velocity_max": 18.92456264887753, "outflow_rate_min": 813.1920207542333, "outflow_rate_mean": 1198.843570450976, "cost2_min": -98.37852080629263}, "done": false, "pid": 24639, "episode_len_mean": 321.0, "info": {"default": {"kl": 0.016633085906505585, "total_loss": 18.653461456298828, "vf_loss": 18.661800384521484, "vf_explained_var": 0.9080492258071899, "cur_lr": 0.0005000000237487257, "entropy": 1.3346469402313232, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012546908110380173}, "num_steps_trained": 3645231, "update_time_ms": 9.424, "load_time_ms": 24.88, "sample_time_ms": 21357.753, "num_steps_sampled": 3645231, "grad_time_ms": 11891.465}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2854.9664940834045, "timestamp": 1558606058, "time_since_restore": 2854.9664940834045, "policy_reward_mean": {}, "training_iteration": 84, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530e80>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3645231, "episodes_total": 3898, "timesteps_total": 3645231, "episode_reward_mean": -506.2501344014031, "episodes_this_iter": 46, "date": "2019-05-23_10-07-38", "time_this_iter_s": 33.092013359069824, "num_metric_batches_dropped": 0, "episode_reward_min": -734.4524399009832}
{"iterations_since_restore": 85, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -100.08083510335908, "timesteps_this_iter": 42810, "custom_metrics": {"cost1_max": 223.02574707615761, "cost1_min": 84.54751101056392, "system_level_velocity_mean": 15.183213495517885, "cost2_mean": -81.4636953006552, "cost2_max": -45.03660073106406, "outflow_rate_max": 1453.9704984519296, "cost1_mean": 177.9986918787304, "system_level_velocity_min": 11.742794836175653, "system_level_velocity_max": 18.98723203494227, "outflow_rate_min": 763.6585581165144, "outflow_rate_mean": 1199.807295296808, "cost2_min": -98.37852080629263}, "done": false, "pid": 24639, "episode_len_mean": 319.04, "info": {"default": {"kl": 0.018918951973319054, "total_loss": 17.54973793029785, "vf_loss": 17.55902099609375, "vf_explained_var": 0.914202868938446, "cur_lr": 0.0005000000237487257, "entropy": 1.3715041875839233, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01407193299382925}, "num_steps_trained": 3688041, "update_time_ms": 9.423, "load_time_ms": 24.945, "sample_time_ms": 21276.024, "num_steps_sampled": 3688041, "grad_time_ms": 11975.939}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2888.3669118881226, "timestamp": 1558606091, "time_since_restore": 2888.3669118881226, "policy_reward_mean": {}, "training_iteration": 85, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b9e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b630>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3688041, "episodes_total": 3946, "timesteps_total": 3688041, "episode_reward_mean": -503.1929580474187, "episodes_this_iter": 48, "date": "2019-05-23_10-08-11", "time_this_iter_s": 33.40041780471802, "num_metric_batches_dropped": 0, "episode_reward_min": -780.0072988585961}
{"iterations_since_restore": 86, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.66160641092188, "timesteps_this_iter": 40914, "custom_metrics": {"cost1_max": 222.47138437855182, "cost1_min": 84.54751101056392, "system_level_velocity_mean": 15.190439400988575, "cost2_mean": -80.07501427088954, "cost2_max": -45.03660073106406, "outflow_rate_max": 1451.528921153139, "cost1_mean": 179.53763520526812, "system_level_velocity_min": 11.544834924301597, "system_level_velocity_max": 18.98723203494227, "outflow_rate_min": 763.6585581165144, "outflow_rate_mean": 1207.9210388735767, "cost2_min": -94.2197316181366}, "done": false, "pid": 24639, "episode_len_mean": 321.04, "info": {"default": {"kl": 0.017287641763687134, "total_loss": 16.13863754272461, "vf_loss": 16.14794158935547, "vf_explained_var": 0.9173880815505981, "cur_lr": 0.0005000000237487257, "entropy": 1.3540483713150024, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01367965992540121}, "num_steps_trained": 3728955, "update_time_ms": 9.516, "load_time_ms": 24.97, "sample_time_ms": 21036.031, "num_steps_sampled": 3728955, "grad_time_ms": 11904.262}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2920.0740752220154, "timestamp": 1558606123, "time_since_restore": 2920.0740752220154, "policy_reward_mean": {}, "training_iteration": 86, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537550>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3728955, "episodes_total": 3993, "timesteps_total": 3728955, "episode_reward_mean": -497.77468926966316, "episodes_this_iter": 47, "date": "2019-05-23_10-08-43", "time_this_iter_s": 31.707163333892822, "num_metric_batches_dropped": 0, "episode_reward_min": -780.0072988585961}
{"iterations_since_restore": 87, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.409339331428253, "timesteps_this_iter": 40839, "custom_metrics": {"cost1_max": 223.3284018462848, "cost1_min": 18.618533708509094, "system_level_velocity_mean": 15.62495693822143, "cost2_mean": -77.93672146666793, "cost2_max": -14.288458444795852, "outflow_rate_max": 1452.8809920767612, "cost1_mean": 179.1775543670939, "system_level_velocity_min": 11.544834924301597, "system_level_velocity_max": 19.4229252347569, "outflow_rate_min": 497.4095731481614, "outflow_rate_mean": 1206.8365163598785, "cost2_min": -94.41254837311453}, "done": false, "pid": 24639, "episode_len_mean": 313.11, "info": {"default": {"kl": 0.01677556149661541, "total_loss": 15.90672492980957, "vf_loss": 15.916536331176758, "vf_explained_var": 0.919906735420227, "cur_lr": 0.0005000000237487257, "entropy": 1.3412400484085083, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.014056163839995861}, "num_steps_trained": 3769794, "update_time_ms": 9.273, "load_time_ms": 24.017, "sample_time_ms": 20862.651, "num_steps_sampled": 3769794, "grad_time_ms": 11866.461}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2951.719921350479, "timestamp": 1558606155, "time_since_restore": 2951.719921350479, "policy_reward_mean": {}, "training_iteration": 87, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845416d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3769794, "episodes_total": 4040, "timesteps_total": 3769794, "episode_reward_mean": -459.2343697826655, "episodes_this_iter": 47, "date": "2019-05-23_10-09-15", "time_this_iter_s": 31.645846128463745, "num_metric_batches_dropped": 0, "episode_reward_min": -711.0924682922234}
{"iterations_since_restore": 88, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.409339331428253, "timesteps_this_iter": 41842, "custom_metrics": {"cost1_max": 223.3284018462848, "cost1_min": 18.618533708509094, "system_level_velocity_mean": 15.755792234314889, "cost2_mean": -80.63188410770857, "cost2_max": -14.288458444795852, "outflow_rate_max": 1455.0610049561626, "cost1_mean": 183.21390900984107, "system_level_velocity_min": 11.587783875841888, "system_level_velocity_max": 19.4229252347569, "outflow_rate_min": 497.4095731481614, "outflow_rate_mean": 1226.2912205115356, "cost2_min": -95.7401646299205}, "done": false, "pid": 24639, "episode_len_mean": 317.07, "info": {"default": {"kl": 0.017968671396374702, "total_loss": 17.1221866607666, "vf_loss": 17.13190269470215, "vf_explained_var": 0.9165465831756592, "cur_lr": 0.0005000000237487257, "entropy": 1.3744059801101685, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.014263809658586979}, "num_steps_trained": 3811636, "update_time_ms": 9.086, "load_time_ms": 23.591, "sample_time_ms": 20817.483, "num_steps_sampled": 3811636, "grad_time_ms": 11881.016}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 2984.234859228134, "timestamp": 1558606187, "time_since_restore": 2984.234859228134, "policy_reward_mean": {}, "training_iteration": 88, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537208>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3811636, "episodes_total": 4087, "timesteps_total": 3811636, "episode_reward_mean": -462.18077166570635, "episodes_this_iter": 47, "date": "2019-05-23_10-09-47", "time_this_iter_s": 32.51493787765503, "num_metric_batches_dropped": 0, "episode_reward_min": -711.0924682922234}
{"iterations_since_restore": 89, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -264.7322557989853, "timesteps_this_iter": 42512, "custom_metrics": {"cost1_max": 223.5863525029643, "cost1_min": 137.67130822069976, "system_level_velocity_mean": 15.21362428725893, "cost2_mean": -83.1496625505934, "cost2_max": -63.439065050344595, "outflow_rate_max": 1455.0610049561626, "cost1_mean": 182.14308885987913, "system_level_velocity_min": 11.587783875841888, "system_level_velocity_max": 18.718231414911003, "outflow_rate_min": 1028.4916878165677, "outflow_rate_mean": 1218.744326102242, "cost2_min": -95.7401646299205}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01653975620865822, "total_loss": 16.146581649780273, "vf_loss": 16.15519905090332, "vf_explained_var": 0.9213412404060364, "cur_lr": 0.0005000000237487257, "entropy": 1.4009265899658203, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.012804568745195866}, "num_steps_trained": 3854148, "update_time_ms": 9.257, "load_time_ms": 22.519, "sample_time_ms": 20820.891, "num_steps_sampled": 3854148, "grad_time_ms": 11953.987}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3017.912173271179, "timestamp": 1558606221, "time_since_restore": 3017.912173271179, "policy_reward_mean": {}, "training_iteration": 89, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530c50>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3854148, "episodes_total": 4135, "timesteps_total": 3854148, "episode_reward_mean": -508.84931869596534, "episodes_this_iter": 48, "date": "2019-05-23_10-10-21", "time_this_iter_s": 33.677314043045044, "num_metric_batches_dropped": 0, "episode_reward_min": -715.3220797975082}
{"iterations_since_restore": 90, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.24906264470637, "timesteps_this_iter": 42376, "custom_metrics": {"cost1_max": 224.42530923888955, "cost1_min": 79.86934749664351, "system_level_velocity_mean": 15.206200933591779, "cost2_mean": -81.78292667836159, "cost2_max": -47.00235135975829, "outflow_rate_max": 1455.0610049561626, "cost1_mean": 180.8271431816391, "system_level_velocity_min": 11.662114295446045, "system_level_velocity_max": 18.764931018070136, "outflow_rate_min": 765.2765297622682, "outflow_rate_mean": 1214.448466108463, "cost2_min": -95.86512231249134}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01723969541490078, "total_loss": 16.380168914794922, "vf_loss": 16.38810920715332, "vf_explained_var": 0.9201241731643677, "cur_lr": 0.0005000000237487257, "entropy": 1.3949745893478394, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012301378883421421}, "num_steps_trained": 3896524, "update_time_ms": 10.011, "load_time_ms": 22.563, "sample_time_ms": 20442.044, "num_steps_sampled": 3896524, "grad_time_ms": 12098.954}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3049.329267978668, "timestamp": 1558606253, "time_since_restore": 3049.329267978668, "policy_reward_mean": {}, "training_iteration": 90, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845375c0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3896524, "episodes_total": 4178, "timesteps_total": 3896524, "episode_reward_mean": -506.51168522949973, "episodes_this_iter": 43, "date": "2019-05-23_10-10-53", "time_this_iter_s": 31.417094707489014, "num_metric_batches_dropped": 0, "episode_reward_min": -715.3220797975082}
{"iterations_since_restore": 91, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.24906264470637, "timesteps_this_iter": 43205, "custom_metrics": {"cost1_max": 224.42530923888955, "cost1_min": 79.86934749664351, "system_level_velocity_mean": 14.8954415348772, "cost2_mean": -79.78793091073267, "cost2_max": -47.00235135975829, "outflow_rate_max": 1454.7937197017534, "cost1_mean": 177.31089937656247, "system_level_velocity_min": 11.662114295446045, "system_level_velocity_max": 18.764931018070136, "outflow_rate_min": 765.2765297622682, "outflow_rate_mean": 1197.2860471472045, "cost2_min": -95.86512231249134}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.019333485513925552, "total_loss": 13.159411430358887, "vf_loss": 13.169441223144531, "vf_explained_var": 0.9390234351158142, "cur_lr": 0.0005000000237487257, "entropy": 1.4424006938934326, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.014924224466085434}, "num_steps_trained": 3939729, "update_time_ms": 9.619, "load_time_ms": 22.8, "sample_time_ms": 20328.237, "num_steps_sampled": 3939729, "grad_time_ms": 12169.73}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3082.321325302124, "timestamp": 1558606286, "time_since_restore": 3082.321325302124, "policy_reward_mean": {}, "training_iteration": 91, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84961438>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3939729, "episodes_total": 4224, "timesteps_total": 3939729, "episode_reward_mean": -523.6361129967966, "episodes_this_iter": 46, "date": "2019-05-23_10-11-26", "time_this_iter_s": 32.99205732345581, "num_metric_batches_dropped": 0, "episode_reward_min": -727.4103052945753}
{"iterations_since_restore": 92, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -92.24906264470637, "timesteps_this_iter": 42179, "custom_metrics": {"cost1_max": 223.71756832487682, "cost1_min": 79.86934749664351, "system_level_velocity_mean": 14.667209238906816, "cost2_mean": -78.67434478776326, "cost2_max": -47.00235135975829, "outflow_rate_max": 1448.4938282392925, "cost1_mean": 174.37554048174064, "system_level_velocity_min": 11.073068476645044, "system_level_velocity_max": 18.763506597819635, "outflow_rate_min": 765.2765297622682, "outflow_rate_mean": 1184.802725273524, "cost2_min": -97.37835920387485}, "done": false, "pid": 24639, "episode_len_mean": 322.64, "info": {"default": {"kl": 0.01862414926290512, "total_loss": 14.901917457580566, "vf_loss": 14.910807609558105, "vf_explained_var": 0.9318328499794006, "cur_lr": 0.0005000000237487257, "entropy": 1.431439995765686, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.013604260049760342}, "num_steps_trained": 3981908, "update_time_ms": 9.561, "load_time_ms": 23.961, "sample_time_ms": 20308.18, "num_steps_sampled": 3981908, "grad_time_ms": 12150.848}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3115.3879628181458, "timestamp": 1558606319, "time_since_restore": 3115.3879628181458, "policy_reward_mean": {}, "training_iteration": 92, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bf60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bda0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 3981908, "episodes_total": 4275, "timesteps_total": 3981908, "episode_reward_mean": -529.4717678256121, "episodes_this_iter": 51, "date": "2019-05-23_10-11-59", "time_this_iter_s": 33.06663751602173, "num_metric_batches_dropped": 0, "episode_reward_min": -740.4830676801741}
{"iterations_since_restore": 93, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -240.49048319827094, "timesteps_this_iter": 42568, "custom_metrics": {"cost1_max": 223.71756832487682, "cost1_min": 134.2906679520753, "system_level_velocity_mean": 14.689766939473163, "cost2_mean": -80.06324390267754, "cost2_max": -51.95115729724326, "outflow_rate_max": 1448.4938282392925, "cost1_mean": 176.05376336880548, "system_level_velocity_min": 11.073068476645044, "system_level_velocity_max": 18.763506597819635, "outflow_rate_min": 992.4492584781987, "outflow_rate_mean": 1189.0157932986374, "cost2_min": -97.37835920387485}, "done": false, "pid": 24639, "episode_len_mean": 324.72, "info": {"default": {"kl": 0.017218153923749924, "total_loss": 14.431440353393555, "vf_loss": 14.44056224822998, "vf_explained_var": 0.9331715703010559, "cur_lr": 0.0005000000237487257, "entropy": 1.419935703277588, "cur_kl_coeff": 0.25312498211860657, "policy_loss": -0.013480186462402344}, "num_steps_trained": 4024476, "update_time_ms": 9.689, "load_time_ms": 22.681, "sample_time_ms": 20212.545, "num_steps_sampled": 4024476, "grad_time_ms": 12268.869}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3147.9701306819916, "timestamp": 1558606351, "time_since_restore": 3147.9701306819916, "policy_reward_mean": {}, "training_iteration": 93, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534438>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4024476, "episodes_total": 4318, "timesteps_total": 4024476, "episode_reward_mean": -526.1389280156367, "episodes_this_iter": 43, "date": "2019-05-23_10-12-31", "time_this_iter_s": 32.582167863845825, "num_metric_batches_dropped": 0, "episode_reward_min": -740.4830676801741}
{"iterations_since_restore": 94, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -261.48137092954414, "timesteps_this_iter": 41743, "custom_metrics": {"cost1_max": 224.6793596038843, "cost1_min": 141.63004449832616, "system_level_velocity_mean": 14.840651747095842, "cost2_mean": -80.00152413067484, "cost2_max": -51.95115729724326, "outflow_rate_max": 1458.079601286221, "cost1_mean": 178.0852348332739, "system_level_velocity_min": 11.843174230578443, "system_level_velocity_max": 18.76453852484498, "outflow_rate_min": 1034.8898006806028, "outflow_rate_mean": 1195.4823531529564, "cost2_min": -91.9796709723908}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.017726056277751923, "total_loss": 17.062320709228516, "vf_loss": 17.071550369262695, "vf_explained_var": 0.9205944538116455, "cur_lr": 0.0005000000237487257, "entropy": 1.3816438913345337, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.013717493042349815}, "num_steps_trained": 4066219, "update_time_ms": 9.667, "load_time_ms": 22.851, "sample_time_ms": 20070.859, "num_steps_sampled": 4066219, "grad_time_ms": 12244.293}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3179.394007921219, "timestamp": 1558606383, "time_since_restore": 3179.394007921219, "policy_reward_mean": {}, "training_iteration": 94, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b978>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4066219, "episodes_total": 4362, "timesteps_total": 4066219, "episode_reward_mean": -520.4802292618357, "episodes_this_iter": 44, "date": "2019-05-23_10-13-03", "time_this_iter_s": 31.423877239227295, "num_metric_batches_dropped": 0, "episode_reward_min": -772.4897141434305}
{"iterations_since_restore": 95, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.963120244426342, "timesteps_this_iter": 43111, "custom_metrics": {"cost1_max": 224.6793596038843, "cost1_min": 18.072960491336, "system_level_velocity_mean": 14.86456922693992, "cost2_mean": -80.4218080447626, "cost2_max": -16.695365159756943, "outflow_rate_max": 1458.079601286221, "cost1_mean": 176.27869164477167, "system_level_velocity_min": 11.843174230578443, "system_level_velocity_max": 18.769904521562776, "outflow_rate_min": 452.1702014201058, "outflow_rate_mean": 1189.6251849063776, "cost2_min": -92.96328264727455}, "done": false, "pid": 24639, "episode_len_mean": 321.84, "info": {"default": {"kl": 0.017667852342128754, "total_loss": 15.049080848693848, "vf_loss": 15.056861877441406, "vf_explained_var": 0.933923602104187, "cur_lr": 0.0005000000237487257, "entropy": 1.4045884609222412, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.012251626700162888}, "num_steps_trained": 4109330, "update_time_ms": 9.739, "load_time_ms": 23.089, "sample_time_ms": 20104.908, "num_steps_sampled": 4109330, "grad_time_ms": 12289.337}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3213.599264860153, "timestamp": 1558606417, "time_since_restore": 3213.599264860153, "policy_reward_mean": {}, "training_iteration": 95, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530da0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4109330, "episodes_total": 4413, "timesteps_total": 4109330, "episode_reward_mean": -517.3844616761708, "episodes_this_iter": 51, "date": "2019-05-23_10-13-37", "time_this_iter_s": 34.205256938934326, "num_metric_batches_dropped": 0, "episode_reward_min": -772.4897141434305}
{"iterations_since_restore": 96, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.963120244426342, "timesteps_this_iter": 41161, "custom_metrics": {"cost1_max": 225.64883021763586, "cost1_min": 18.072960491336, "system_level_velocity_mean": 15.104778647164856, "cost2_mean": -79.81889842436514, "cost2_max": -16.695365159756943, "outflow_rate_max": 1457.9342448128916, "cost1_mean": 177.56455428671453, "system_level_velocity_min": 12.233692072233582, "system_level_velocity_max": 18.84489761426886, "outflow_rate_min": 452.1702014201058, "outflow_rate_mean": 1198.6267293455232, "cost2_min": -92.96328264727455}, "done": false, "pid": 24639, "episode_len_mean": 319.76, "info": {"default": {"kl": 0.019067710265517235, "total_loss": 15.964010238647461, "vf_loss": 15.97272777557373, "vf_explained_var": 0.9276823997497559, "cur_lr": 0.0005000000237487257, "entropy": 1.3452564477920532, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.013544687069952488}, "num_steps_trained": 4150491, "update_time_ms": 9.993, "load_time_ms": 23.049, "sample_time_ms": 20021.896, "num_steps_sampled": 4150491, "grad_time_ms": 12350.607}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3245.1175270080566, "timestamp": 1558606449, "time_since_restore": 3245.1175270080566, "policy_reward_mean": {}, "training_iteration": 96, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845374e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537208>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4150491, "episodes_total": 4458, "timesteps_total": 4150491, "episode_reward_mean": -501.76644309871915, "episodes_this_iter": 45, "date": "2019-05-23_10-14-09", "time_this_iter_s": 31.518262147903442, "num_metric_batches_dropped": 0, "episode_reward_min": -701.3335955870064}
{"iterations_since_restore": 97, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.91226828531394, "timesteps_this_iter": 42441, "custom_metrics": {"cost1_max": 225.64883021763586, "cost1_min": 80.77427522253964, "system_level_velocity_mean": 15.06143987390106, "cost2_mean": -79.30571570689752, "cost2_max": -46.50386520135231, "outflow_rate_max": 1457.9342448128916, "cost1_mean": 179.30110898992044, "system_level_velocity_min": 11.864294608399664, "system_level_velocity_max": 18.84489761426886, "outflow_rate_min": 779.7543070814108, "outflow_rate_mean": 1210.3268006039418, "cost2_min": -92.96328264727455}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01785377226769924, "total_loss": 16.202856063842773, "vf_loss": 16.213035583496094, "vf_explained_var": 0.9249354004859924, "cur_lr": 0.0005000000237487257, "entropy": 1.3829978704452515, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.01469836849719286}, "num_steps_trained": 4192932, "update_time_ms": 10.261, "load_time_ms": 24.126, "sample_time_ms": 20056.828, "num_steps_sampled": 4192932, "grad_time_ms": 12335.579}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3276.9863266944885, "timestamp": 1558606480, "time_since_restore": 3276.9863266944885, "policy_reward_mean": {}, "training_iteration": 97, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845579e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4192932, "episodes_total": 4504, "timesteps_total": 4192932, "episode_reward_mean": -508.34988459506684, "episodes_this_iter": 46, "date": "2019-05-23_10-14-40", "time_this_iter_s": 31.868799686431885, "num_metric_batches_dropped": 0, "episode_reward_min": -701.3335955870064}
{"iterations_since_restore": 98, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.91226828531394, "timesteps_this_iter": 41829, "custom_metrics": {"cost1_max": 225.64883021763586, "cost1_min": 80.77427522253964, "system_level_velocity_mean": 15.085084359696532, "cost2_mean": -79.18515730141094, "cost2_max": -46.50386520135231, "outflow_rate_max": 1458.8841247232037, "cost1_mean": 179.6651329238022, "system_level_velocity_min": 11.864294608399664, "system_level_velocity_max": 18.84489761426886, "outflow_rate_min": 779.7543070814108, "outflow_rate_mean": 1210.4595914647637, "cost2_min": -90.6651810424104}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.020066404715180397, "total_loss": 15.268274307250977, "vf_loss": 15.279688835144043, "vf_explained_var": 0.9307949542999268, "cur_lr": 0.0005000000237487257, "entropy": 1.3470103740692139, "cur_kl_coeff": 0.2531249523162842, "policy_loss": -0.016493981704115868}, "num_steps_trained": 4234761, "update_time_ms": 10.469, "load_time_ms": 24.371, "sample_time_ms": 20063.293, "num_steps_sampled": 4234761, "grad_time_ms": 12539.123}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3311.658346414566, "timestamp": 1558606515, "time_since_restore": 3311.658346414566, "policy_reward_mean": {}, "training_iteration": 98, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b38>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4234761, "episodes_total": 4550, "timesteps_total": 4234761, "episode_reward_mean": -505.04346829253365, "episodes_this_iter": 46, "date": "2019-05-23_10-15-15", "time_this_iter_s": 34.672019720077515, "num_metric_batches_dropped": 0, "episode_reward_min": -711.4581582639515}
{"iterations_since_restore": 99, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -258.65624120495784, "timesteps_this_iter": 41226, "custom_metrics": {"cost1_max": 225.66608239657648, "cost1_min": 136.42342828993614, "system_level_velocity_mean": 14.977758160719656, "cost2_mean": -80.68920645091356, "cost2_max": -62.49464630151755, "outflow_rate_max": 1462.0965142767975, "cost1_mean": 179.66773169317085, "system_level_velocity_min": 11.572038285994138, "system_level_velocity_max": 18.88654785815632, "outflow_rate_min": 993.6384905660375, "outflow_rate_mean": 1205.2025893841997, "cost2_min": -93.13682192415112}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014108263887465, "total_loss": 18.510576248168945, "vf_loss": 18.516874313354492, "vf_explained_var": 0.9162424206733704, "cur_lr": 0.0005000000237487257, "entropy": 1.3400795459747314, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.011652749963104725}, "num_steps_trained": 4275987, "update_time_ms": 11.149, "load_time_ms": 25.142, "sample_time_ms": 19974.325, "num_steps_sampled": 4275987, "grad_time_ms": 12571.718}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3344.76340508461, "timestamp": 1558606548, "time_since_restore": 3344.76340508461, "policy_reward_mean": {}, "training_iteration": 99, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557cf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845571d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4275987, "episodes_total": 4597, "timesteps_total": 4275987, "episode_reward_mean": -510.1568287493122, "episodes_this_iter": 47, "date": "2019-05-23_10-15-48", "time_this_iter_s": 33.105058670043945, "num_metric_batches_dropped": 0, "episode_reward_min": -711.4581582639515}
{"iterations_since_restore": 100, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.4262133194945, "timesteps_this_iter": 41971, "custom_metrics": {"cost1_max": 226.10142619979968, "cost1_min": 17.819035335016736, "system_level_velocity_mean": 15.34078537232126, "cost2_mean": -80.47172050414818, "cost2_max": -11.732799133603159, "outflow_rate_max": 1462.0965142767975, "cost1_mean": 179.2733864568325, "system_level_velocity_min": 11.572038285994138, "system_level_velocity_max": 18.9278618890537, "outflow_rate_min": 474.3699846082663, "outflow_rate_mean": 1203.2112299201794, "cost2_min": -93.13682192415112}, "done": false, "pid": 24639, "episode_len_mean": 318.06, "info": {"default": {"kl": 0.013359340839087963, "total_loss": 18.808143615722656, "vf_loss": 18.813886642456055, "vf_explained_var": 0.9157938957214355, "cur_lr": 0.0005000000237487257, "entropy": 1.3468824625015259, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.010818666778504848}, "num_steps_trained": 4317958, "update_time_ms": 10.558, "load_time_ms": 25.109, "sample_time_ms": 20007.309, "num_steps_sampled": 4317958, "grad_time_ms": 12544.994}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3376.2510104179382, "timestamp": 1558606580, "time_since_restore": 3376.2510104179382, "policy_reward_mean": {}, "training_iteration": 100, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bf98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b898>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4317958, "episodes_total": 4645, "timesteps_total": 4317958, "episode_reward_mean": -485.31013586861764, "episodes_this_iter": 48, "date": "2019-05-23_10-16-20", "time_this_iter_s": 31.487605333328247, "num_metric_batches_dropped": 0, "episode_reward_min": -696.9627999719485}
{"iterations_since_restore": 101, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.4262133194945, "timesteps_this_iter": 41463, "custom_metrics": {"cost1_max": 226.10142619979968, "cost1_min": 17.819035335016736, "system_level_velocity_mean": 15.340950633240947, "cost2_mean": -78.08151573622135, "cost2_max": -11.732799133603159, "outflow_rate_max": 1462.0684182956995, "cost1_mean": 178.46789031288677, "system_level_velocity_min": 11.875159709976138, "system_level_velocity_max": 18.9278618890537, "outflow_rate_min": 474.3699846082663, "outflow_rate_mean": 1198.8109894464824, "cost2_min": -92.82539107218555}, "done": false, "pid": 24639, "episode_len_mean": 316.88, "info": {"default": {"kl": 0.015023048035800457, "total_loss": 16.04485511779785, "vf_loss": 16.053192138671875, "vf_explained_var": 0.9247317314147949, "cur_lr": 0.0005000000237487257, "entropy": 1.365321159362793, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014041292481124401}, "num_steps_trained": 4359421, "update_time_ms": 11.005, "load_time_ms": 24.844, "sample_time_ms": 20016.207, "num_steps_sampled": 4359421, "grad_time_ms": 12377.781}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3407.668020963669, "timestamp": 1558606611, "time_since_restore": 3407.668020963669, "policy_reward_mean": {}, "training_iteration": 101, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549940>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4359421, "episodes_total": 4691, "timesteps_total": 4359421, "episode_reward_mean": -483.1309015550189, "episodes_this_iter": 46, "date": "2019-05-23_10-16-51", "time_this_iter_s": 31.41701054573059, "num_metric_batches_dropped": 0, "episode_reward_min": -704.4083125027673}
{"iterations_since_restore": 102, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -161.9987272137516, "timesteps_this_iter": 39476, "custom_metrics": {"cost1_max": 225.4690709623979, "cost1_min": 141.3272927950389, "system_level_velocity_mean": 15.422295111510142, "cost2_mean": -79.22609763187862, "cost2_max": -55.53975076150895, "outflow_rate_max": 1463.1987188522862, "cost1_mean": 184.02287218905371, "system_level_velocity_min": 11.875159709976138, "system_level_velocity_max": 18.890193062010646, "outflow_rate_min": 992.2840643365298, "outflow_rate_mean": 1221.0009946534958, "cost2_min": -91.72810026318928}, "done": false, "pid": 24639, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.014699997380375862, "total_loss": 17.424848556518555, "vf_loss": 17.43216323852539, "vf_explained_var": 0.9135260581970215, "cur_lr": 0.0005000000237487257, "entropy": 1.2960585355758667, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.012898247689008713}, "num_steps_trained": 4398897, "update_time_ms": 11.021, "load_time_ms": 23.541, "sample_time_ms": 19956.226, "num_steps_sampled": 4398897, "grad_time_ms": 12247.399}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3438.805116415024, "timestamp": 1558606643, "time_since_restore": 3438.805116415024, "policy_reward_mean": {}, "training_iteration": 102, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541b70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845410f0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4398897, "episodes_total": 4739, "timesteps_total": 4398897, "episode_reward_mean": -472.25047060830343, "episodes_this_iter": 48, "date": "2019-05-23_10-17-23", "time_this_iter_s": 31.13709545135498, "num_metric_batches_dropped": 0, "episode_reward_min": -704.4083125027673}
{"iterations_since_restore": 103, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -260.71161017872276, "timesteps_this_iter": 40510, "custom_metrics": {"cost1_max": 225.4690709623979, "cost1_min": 141.08839833292367, "system_level_velocity_mean": 15.175060934927284, "cost2_mean": -79.09134167068987, "cost2_max": -55.53975076150895, "outflow_rate_max": 1463.1987188522862, "cost1_mean": 181.87243982715987, "system_level_velocity_min": 11.69665550099152, "system_level_velocity_max": 18.86445023238796, "outflow_rate_min": 942.8933720930233, "outflow_rate_mean": 1207.450085876745, "cost2_min": -93.54686692505986}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01623745821416378, "total_loss": 17.65638542175293, "vf_loss": 17.666109085083008, "vf_explained_var": 0.9172372817993164, "cur_lr": 0.0005000000237487257, "entropy": 1.3209322690963745, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.015889601781964302}, "num_steps_trained": 4439407, "update_time_ms": 11.073, "load_time_ms": 24.792, "sample_time_ms": 19994.606, "num_steps_sampled": 4439407, "grad_time_ms": 12217.071}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3471.5051448345184, "timestamp": 1558606675, "time_since_restore": 3471.5051448345184, "policy_reward_mean": {}, "training_iteration": 103, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557080>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4439407, "episodes_total": 4784, "timesteps_total": 4439407, "episode_reward_mean": -479.11992216790514, "episodes_this_iter": 45, "date": "2019-05-23_10-17-55", "time_this_iter_s": 32.70002841949463, "num_metric_batches_dropped": 0, "episode_reward_min": -685.9367416471347}
{"iterations_since_restore": 104, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.93261559362517, "timesteps_this_iter": 40842, "custom_metrics": {"cost1_max": 226.77142466991478, "cost1_min": 139.61898318975352, "system_level_velocity_mean": 15.119890238778025, "cost2_mean": -79.68945893929002, "cost2_max": -59.37240518754264, "outflow_rate_max": 1466.3751007884346, "cost1_mean": 181.1581395675382, "system_level_velocity_min": 11.509506860088173, "system_level_velocity_max": 19.074089328451798, "outflow_rate_min": 942.8933720930233, "outflow_rate_mean": 1204.686420816735, "cost2_min": -95.46567861560882}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015262971632182598, "total_loss": 16.41088104248047, "vf_loss": 16.421247482299805, "vf_explained_var": 0.9251624941825867, "cur_lr": 0.0005000000237487257, "entropy": 1.3311314582824707, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.01616247557103634}, "num_steps_trained": 4480249, "update_time_ms": 11.375, "load_time_ms": 24.556, "sample_time_ms": 20067.176, "num_steps_sampled": 4480249, "grad_time_ms": 12175.356}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3503.2535133361816, "timestamp": 1558606707, "time_since_restore": 3503.2535133361816, "policy_reward_mean": {}, "training_iteration": 104, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557710>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4480249, "episodes_total": 4829, "timesteps_total": 4480249, "episode_reward_mean": -484.8082516659441, "episodes_this_iter": 45, "date": "2019-05-23_10-18-27", "time_this_iter_s": 31.748368501663208, "num_metric_batches_dropped": 0, "episode_reward_min": -694.3286409275768}
{"iterations_since_restore": 105, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.130233930892103, "timesteps_this_iter": 41428, "custom_metrics": {"cost1_max": 226.77142466991478, "cost1_min": 23.2240489725183, "system_level_velocity_mean": 15.401429194614842, "cost2_mean": -80.17686795067598, "cost2_max": -18.20660340540259, "outflow_rate_max": 1466.3751007884346, "cost1_mean": 180.32343911369705, "system_level_velocity_min": 11.509506860088173, "system_level_velocity_max": 19.074089328451798, "outflow_rate_min": 506.5568824271422, "outflow_rate_mean": 1207.27123125582, "cost2_min": -96.10216321712872}, "done": false, "pid": 24639, "episode_len_mean": 318.92, "info": {"default": {"kl": 0.013172129169106483, "total_loss": 16.309253692626953, "vf_loss": 16.315690994262695, "vf_explained_var": 0.927047848701477, "cur_lr": 0.0005000000237487257, "entropy": 1.3421046733856201, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.011440022848546505}, "num_steps_trained": 4521677, "update_time_ms": 11.495, "load_time_ms": 22.821, "sample_time_ms": 20003.701, "num_steps_sampled": 4521677, "grad_time_ms": 12020.459}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3535.2617104053497, "timestamp": 1558606739, "time_since_restore": 3535.2617104053497, "policy_reward_mean": {}, "training_iteration": 105, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845576d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4521677, "episodes_total": 4878, "timesteps_total": 4521677, "episode_reward_mean": -478.3278630460868, "episodes_this_iter": 49, "date": "2019-05-23_10-18-59", "time_this_iter_s": 32.00819706916809, "num_metric_batches_dropped": 0, "episode_reward_min": -694.3286409275768}
{"iterations_since_restore": 106, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.130233930892103, "timesteps_this_iter": 42082, "custom_metrics": {"cost1_max": 226.72342912197792, "cost1_min": 23.2240489725183, "system_level_velocity_mean": 15.095778363033057, "cost2_mean": -80.19885205133319, "cost2_max": -18.20660340540259, "outflow_rate_max": 1465.8556011620115, "cost1_mean": 176.57055755629383, "system_level_velocity_min": 11.828918323788566, "system_level_velocity_max": 19.023262653930153, "outflow_rate_min": 506.5568824271422, "outflow_rate_mean": 1192.046470991489, "cost2_min": -96.10216321712872}, "done": false, "pid": 24639, "episode_len_mean": 318.92, "info": {"default": {"kl": 0.01466795988380909, "total_loss": 15.811897277832031, "vf_loss": 15.819473266601562, "vf_explained_var": 0.9293419718742371, "cur_lr": 0.0005000000237487257, "entropy": 1.3823354244232178, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013146812096238136}, "num_steps_trained": 4563759, "update_time_ms": 11.452, "load_time_ms": 22.867, "sample_time_ms": 20243.208, "num_steps_sampled": 4563759, "grad_time_ms": 11825.688}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3567.201830625534, "timestamp": 1558606771, "time_since_restore": 3567.201830625534, "policy_reward_mean": {}, "training_iteration": 106, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845575f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4563759, "episodes_total": 4925, "timesteps_total": 4563759, "episode_reward_mean": -498.12820096498564, "episodes_this_iter": 47, "date": "2019-05-23_10-19-31", "time_this_iter_s": 31.940120220184326, "num_metric_batches_dropped": 0, "episode_reward_min": -713.2885285075497}
{"iterations_since_restore": 107, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.3708949276785, "timesteps_this_iter": 40385, "custom_metrics": {"cost1_max": 226.72342912197792, "cost1_min": 141.12797647499715, "system_level_velocity_mean": 15.19306955481448, "cost2_mean": -82.99800412870769, "cost2_max": -66.93268679087933, "outflow_rate_max": 1465.8556011620115, "cost1_mean": 181.82369543267998, "system_level_velocity_min": 11.828918323788566, "system_level_velocity_max": 19.023262653930153, "outflow_rate_min": 1029.8820914627054, "outflow_rate_mean": 1216.178022649882, "cost2_min": -95.68396351788998}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013937381096184254, "total_loss": 17.2611083984375, "vf_loss": 17.269155502319336, "vf_explained_var": 0.922093391418457, "cur_lr": 0.0005000000237487257, "entropy": 1.3257873058319092, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013338062912225723}, "num_steps_trained": 4604144, "update_time_ms": 11.487, "load_time_ms": 22.649, "sample_time_ms": 20272.82, "num_steps_sampled": 4604144, "grad_time_ms": 11781.252}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3598.9024188518524, "timestamp": 1558606803, "time_since_restore": 3598.9024188518524, "policy_reward_mean": {}, "training_iteration": 107, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845572e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557dd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557080>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4604144, "episodes_total": 4969, "timesteps_total": 4604144, "episode_reward_mean": -498.3164201312021, "episodes_this_iter": 44, "date": "2019-05-23_10-20-03", "time_this_iter_s": 31.70058822631836, "num_metric_batches_dropped": 0, "episode_reward_min": -713.2885285075497}
{"iterations_since_restore": 108, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -255.0759070770798, "timesteps_this_iter": 40440, "custom_metrics": {"cost1_max": 225.89363982771994, "cost1_min": 147.5069427942814, "system_level_velocity_mean": 15.481333822601034, "cost2_mean": -83.5295837024813, "cost2_max": -66.93268679087933, "outflow_rate_max": 1465.149030135271, "cost1_mean": 185.3205517065582, "system_level_velocity_min": 12.28079496654213, "system_level_velocity_max": 18.93312440320672, "outflow_rate_min": 1051.983636363636, "outflow_rate_mean": 1232.0141043033163, "cost2_min": -94.60702688926558}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015349777415394783, "total_loss": 14.304256439208984, "vf_loss": 14.311731338500977, "vf_explained_var": 0.9360885620117188, "cur_lr": 0.0005000000237487257, "entropy": 1.333893060684204, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01330241747200489}, "num_steps_trained": 4644584, "update_time_ms": 11.574, "load_time_ms": 21.644, "sample_time_ms": 20340.509, "num_steps_sampled": 4644584, "grad_time_ms": 11627.585}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3632.6494438648224, "timestamp": 1558606837, "time_since_restore": 3632.6494438648224, "policy_reward_mean": {}, "training_iteration": 108, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845573c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845575c0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4644584, "episodes_total": 5017, "timesteps_total": 4644584, "episode_reward_mean": -473.74995076866037, "episodes_this_iter": 48, "date": "2019-05-23_10-20-37", "time_this_iter_s": 33.74702501296997, "num_metric_batches_dropped": 0, "episode_reward_min": -685.0725309507942}
{"iterations_since_restore": 109, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -255.0759070770798, "timesteps_this_iter": 41253, "custom_metrics": {"cost1_max": 226.10394301867126, "cost1_min": 147.5069427942814, "system_level_velocity_mean": 15.458854192935553, "cost2_mean": -84.04593323611729, "cost2_max": -67.00747794985077, "outflow_rate_max": 1465.3279690984386, "cost1_mean": 185.20072589949277, "system_level_velocity_min": 12.28079496654213, "system_level_velocity_max": 19.044010694276693, "outflow_rate_min": 1051.983636363636, "outflow_rate_mean": 1231.3460493555035, "cost2_min": -94.61488482830774}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014877577312290668, "total_loss": 14.359395027160645, "vf_loss": 14.366416931152344, "vf_explained_var": 0.936665952205658, "cur_lr": 0.0005000000237487257, "entropy": 1.3497450351715088, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.012669442221522331}, "num_steps_trained": 4685837, "update_time_ms": 10.814, "load_time_ms": 22.409, "sample_time_ms": 20452.252, "num_steps_sampled": 4685837, "grad_time_ms": 11395.066}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3664.552421808243, "timestamp": 1558606868, "time_since_restore": 3664.552421808243, "policy_reward_mean": {}, "training_iteration": 109, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845347f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549d68>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4685837, "episodes_total": 5062, "timesteps_total": 4685837, "episode_reward_mean": -478.63572782607656, "episodes_this_iter": 45, "date": "2019-05-23_10-21-08", "time_this_iter_s": 31.90297794342041, "num_metric_batches_dropped": 0, "episode_reward_min": -685.0725309507942}
{"iterations_since_restore": 110, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -255.32602966370487, "timesteps_this_iter": 40604, "custom_metrics": {"cost1_max": 226.36367440932884, "cost1_min": 141.4636954305792, "system_level_velocity_mean": 15.182743336274632, "cost2_mean": -83.05791002519547, "cost2_max": -57.98713758797463, "outflow_rate_max": 1465.7955035491568, "cost1_mean": 181.9299734378588, "system_level_velocity_min": 11.73439760540671, "system_level_velocity_max": 19.044010694276693, "outflow_rate_min": 1024.3096422813996, "outflow_rate_mean": 1212.5315389666082, "cost2_min": -94.82382425426661}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013656241819262505, "total_loss": 16.132625579833984, "vf_loss": 16.140483856201172, "vf_explained_var": 0.9275559186935425, "cur_lr": 0.0005000000237487257, "entropy": 1.3478111028671265, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013042368926107883}, "num_steps_trained": 4726441, "update_time_ms": 10.55, "load_time_ms": 21.343, "sample_time_ms": 20749.416, "num_steps_sampled": 4726441, "grad_time_ms": 11183.742}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3696.887312889099, "timestamp": 1558606901, "time_since_restore": 3696.887312889099, "policy_reward_mean": {}, "training_iteration": 110, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845412e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541d30>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4726441, "episodes_total": 5109, "timesteps_total": 4726441, "episode_reward_mean": -492.8689431279183, "episodes_this_iter": 47, "date": "2019-05-23_10-21-41", "time_this_iter_s": 32.33489108085632, "num_metric_batches_dropped": 0, "episode_reward_min": -671.8890820078442}
{"iterations_since_restore": 111, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.1094649935981, "timesteps_this_iter": 41028, "custom_metrics": {"cost1_max": 227.59850170061264, "cost1_min": 141.4636954305792, "system_level_velocity_mean": 15.311263019092449, "cost2_mean": -82.56647019643907, "cost2_max": -57.98713758797463, "outflow_rate_max": 1469.4953049984479, "cost1_mean": 183.50137752301143, "system_level_velocity_min": 11.73439760540671, "system_level_velocity_max": 19.080537545801448, "outflow_rate_min": 1024.3096422813996, "outflow_rate_mean": 1218.5286362220704, "cost2_min": -95.51961448069085}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015456080436706543, "total_loss": 15.4132661819458, "vf_loss": 15.422967910766602, "vf_explained_var": 0.9294897317886353, "cur_lr": 0.0005000000237487257, "entropy": 1.3623855113983154, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015570473857223988}, "num_steps_trained": 4767469, "update_time_ms": 10.2, "load_time_ms": 21.837, "sample_time_ms": 20890.157, "num_steps_sampled": 4767469, "grad_time_ms": 11133.824}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3729.2093634605408, "timestamp": 1558606933, "time_since_restore": 3729.2093634605408, "policy_reward_mean": {}, "training_iteration": 111, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549d68>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4767469, "episodes_total": 5154, "timesteps_total": 4767469, "episode_reward_mean": -484.26806334981734, "episodes_this_iter": 45, "date": "2019-05-23_10-22-13", "time_this_iter_s": 32.32205057144165, "num_metric_batches_dropped": 0, "episode_reward_min": -694.315004443376}
{"iterations_since_restore": 112, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -253.1094649935981, "timesteps_this_iter": 40868, "custom_metrics": {"cost1_max": 227.59850170061264, "cost1_min": 141.49417012971932, "system_level_velocity_mean": 15.216317671915682, "cost2_mean": -81.47626170511545, "cost2_max": -58.83164520197492, "outflow_rate_max": 1469.4953049984479, "cost1_mean": 182.46357113368708, "system_level_velocity_min": 11.868054149271511, "system_level_velocity_max": 19.080537545801448, "outflow_rate_min": 1018.7371428571432, "outflow_rate_mean": 1213.2616095132887, "cost2_min": -96.26796306542488}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014980426989495754, "total_loss": 14.284225463867188, "vf_loss": 14.29107666015625, "vf_explained_var": 0.9367666244506836, "cur_lr": 0.0005000000237487257, "entropy": 1.3658393621444702, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.01253959909081459}, "num_steps_trained": 4808337, "update_time_ms": 10.268, "load_time_ms": 21.848, "sample_time_ms": 20903.299, "num_steps_sampled": 4808337, "grad_time_ms": 11201.044}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3761.1466386318207, "timestamp": 1558606965, "time_since_restore": 3761.1466386318207, "policy_reward_mean": {}, "training_iteration": 112, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845347f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845349b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845340f0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4808337, "episodes_total": 5201, "timesteps_total": 4808337, "episode_reward_mean": -486.38166328802106, "episodes_this_iter": 47, "date": "2019-05-23_10-22-45", "time_this_iter_s": 31.937275171279907, "num_metric_batches_dropped": 0, "episode_reward_min": -694.315004443376}
{"iterations_since_restore": 113, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -89.84872574684745, "timesteps_this_iter": 39248, "custom_metrics": {"cost1_max": 227.09714703275597, "cost1_min": 81.1557087068916, "system_level_velocity_mean": 15.103111976288433, "cost2_mean": -80.43220145941049, "cost2_max": -47.9094774371858, "outflow_rate_max": 1470.852744019154, "cost1_mean": 179.66993039655318, "system_level_velocity_min": 11.868054149271511, "system_level_velocity_max": 19.034878231441873, "outflow_rate_min": 781.1013246072439, "outflow_rate_mean": 1199.2093089462783, "cost2_min": -96.26796306542488}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01486047450453043, "total_loss": 16.59522819519043, "vf_loss": 16.601985931396484, "vf_explained_var": 0.9245830774307251, "cur_lr": 0.0005000000237487257, "entropy": 1.3350249528884888, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.012399052269756794}, "num_steps_trained": 4847585, "update_time_ms": 10.076, "load_time_ms": 20.471, "sample_time_ms": 20876.842, "num_steps_sampled": 4847585, "grad_time_ms": 11069.313}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3792.220354318619, "timestamp": 1558606996, "time_since_restore": 3792.220354318619, "policy_reward_mean": {}, "training_iteration": 113, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557c50>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4847585, "episodes_total": 5249, "timesteps_total": 4847585, "episode_reward_mean": -480.3784423636657, "episodes_this_iter": 48, "date": "2019-05-23_10-23-16", "time_this_iter_s": 31.073715686798096, "num_metric_batches_dropped": 0, "episode_reward_min": -683.6841976743964}
{"iterations_since_restore": 114, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -88.81291518407474, "timesteps_this_iter": 40525, "custom_metrics": {"cost1_max": 227.09714703275597, "cost1_min": 81.1557087068916, "system_level_velocity_mean": 15.571056314505384, "cost2_mean": -81.29161880660735, "cost2_max": -47.9094774371858, "outflow_rate_max": 1470.852744019154, "cost1_mean": 182.88020308129336, "system_level_velocity_min": 11.729982193106238, "system_level_velocity_max": 19.037432793915666, "outflow_rate_min": 781.1013246072439, "outflow_rate_mean": 1218.4062531606382, "cost2_min": -95.96288836033861}, "done": false, "pid": 24639, "episode_len_mean": 319.76, "info": {"default": {"kl": 0.013622836209833622, "total_loss": 18.302289962768555, "vf_loss": 18.310216903686523, "vf_explained_var": 0.916544497013092, "cur_lr": 0.0005000000237487257, "entropy": 1.3297090530395508, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.013099743984639645}, "num_steps_trained": 4888110, "update_time_ms": 9.709, "load_time_ms": 20.833, "sample_time_ms": 20888.983, "num_steps_sampled": 4888110, "grad_time_ms": 11037.783}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3823.752165555954, "timestamp": 1558607028, "time_since_restore": 3823.752165555954, "policy_reward_mean": {}, "training_iteration": 114, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ccc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c5f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4888110, "episodes_total": 5295, "timesteps_total": 4888110, "episode_reward_mean": -453.54237579766595, "episodes_this_iter": 46, "date": "2019-05-23_10-23-48", "time_this_iter_s": 31.531811237335205, "num_metric_batches_dropped": 0, "episode_reward_min": -733.4254228463927}
{"iterations_since_restore": 115, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -88.81291518407474, "timesteps_this_iter": 40166, "custom_metrics": {"cost1_max": 226.26028147571543, "cost1_min": 81.23325548386299, "system_level_velocity_mean": 15.31857047054939, "cost2_mean": -79.63276692579409, "cost2_max": -49.231314486757405, "outflow_rate_max": 1470.141380502614, "cost1_mean": 181.31754622355618, "system_level_velocity_min": 11.729982193106238, "system_level_velocity_max": 19.037432793915666, "outflow_rate_min": 784.3823560540484, "outflow_rate_mean": 1210.3807041416865, "cost2_min": -95.97171772741285}, "done": false, "pid": 24639, "episode_len_mean": 321.84, "info": {"default": {"kl": 0.017656758427619934, "total_loss": 13.749979972839355, "vf_loss": 13.760578155517578, "vf_explained_var": 0.9373213648796082, "cur_lr": 0.0005000000237487257, "entropy": 1.386958360671997, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01730193756520748}, "num_steps_trained": 4928276, "update_time_ms": 9.345, "load_time_ms": 22.162, "sample_time_ms": 20806.543, "num_steps_sampled": 4928276, "grad_time_ms": 10989.571}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3854.458706855774, "timestamp": 1558607059, "time_since_restore": 3854.458706855774, "policy_reward_mean": {}, "training_iteration": 115, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca20>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cb70>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4928276, "episodes_total": 5342, "timesteps_total": 4928276, "episode_reward_mean": -472.2785114414675, "episodes_this_iter": 47, "date": "2019-05-23_10-24-19", "time_this_iter_s": 30.706541299819946, "num_metric_batches_dropped": 0, "episode_reward_min": -733.4254228463927}
{"iterations_since_restore": 116, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -103.47937273563495, "timesteps_this_iter": 39545, "custom_metrics": {"cost1_max": 226.26028147571543, "cost1_min": 87.58243652684571, "system_level_velocity_mean": 15.252705352886549, "cost2_mean": -77.67022672284435, "cost2_max": -46.19504598098919, "outflow_rate_max": 1466.09630643651, "cost1_mean": 181.4907843152053, "system_level_velocity_min": 11.63433476580055, "system_level_velocity_max": 19.027806465697022, "outflow_rate_min": 814.6467984764894, "outflow_rate_mean": 1207.448633222254, "cost2_min": -95.97171772741285}, "done": false, "pid": 24639, "episode_len_mean": 323.03, "info": {"default": {"kl": 0.013831516727805138, "total_loss": 15.654620170593262, "vf_loss": 15.663315773010254, "vf_explained_var": 0.9290066957473755, "cur_lr": 0.0005000000237487257, "entropy": 1.3723870515823364, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013947254978120327}, "num_steps_trained": 4967821, "update_time_ms": 9.135, "load_time_ms": 22.19, "sample_time_ms": 20632.923, "num_steps_sampled": 4967821, "grad_time_ms": 11048.871}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3885.26455950737, "timestamp": 1558607089, "time_since_restore": 3885.26455950737, "policy_reward_mean": {}, "training_iteration": 116, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cd68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c048>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 4967821, "episodes_total": 5389, "timesteps_total": 4967821, "episode_reward_mean": -468.95596715779664, "episodes_this_iter": 47, "date": "2019-05-23_10-24-49", "time_this_iter_s": 30.80585265159607, "num_metric_batches_dropped": 0, "episode_reward_min": -686.7154722444157}
{"iterations_since_restore": 117, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -103.47937273563495, "timesteps_this_iter": 40847, "custom_metrics": {"cost1_max": 226.2059550300588, "cost1_min": 87.58243652684571, "system_level_velocity_mean": 15.040342645275375, "cost2_mean": -77.4380736526663, "cost2_max": -46.19504598098919, "outflow_rate_max": 1467.0555925549777, "cost1_mean": 178.92191108605485, "system_level_velocity_min": 11.63433476580055, "system_level_velocity_max": 18.9493555140297, "outflow_rate_min": 814.6467984764894, "outflow_rate_mean": 1194.7221837655386, "cost2_min": -97.24088058198117}, "done": false, "pid": 24639, "episode_len_mean": 323.03, "info": {"default": {"kl": 0.015606996603310108, "total_loss": 14.926403999328613, "vf_loss": 14.93710708618164, "vf_explained_var": 0.9337694048881531, "cur_lr": 0.0005000000237487257, "entropy": 1.4190280437469482, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.016628729179501534}, "num_steps_trained": 5008668, "update_time_ms": 9.032, "load_time_ms": 22.407, "sample_time_ms": 20518.907, "num_steps_sampled": 5008668, "grad_time_ms": 11164.374}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3916.9957423210144, "timestamp": 1558607121, "time_since_restore": 3916.9957423210144, "policy_reward_mean": {}, "training_iteration": 117, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c4a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c8d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b0b8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5008668, "episodes_total": 5433, "timesteps_total": 5008668, "episode_reward_mean": -476.01950357199087, "episodes_this_iter": 44, "date": "2019-05-23_10-25-21", "time_this_iter_s": 31.73118281364441, "num_metric_batches_dropped": 0, "episode_reward_min": -717.7764705591349}
{"iterations_since_restore": 118, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -104.82946033684814, "timesteps_this_iter": 40037, "custom_metrics": {"cost1_max": 226.2059550300588, "cost1_min": 87.24415663188731, "system_level_velocity_mean": 15.069861102169485, "cost2_mean": -78.45938208404816, "cost2_max": -53.67347892936816, "outflow_rate_max": 1469.910650662884, "cost1_mean": 178.52005220492538, "system_level_velocity_min": 11.75428709509141, "system_level_velocity_max": 18.95325736729503, "outflow_rate_min": 808.8554848704973, "outflow_rate_mean": 1196.5434380265253, "cost2_min": -97.24088058198117}, "done": false, "pid": 24639, "episode_len_mean": 321.93, "info": {"default": {"kl": 0.014784504659473896, "total_loss": 14.275324821472168, "vf_loss": 14.28446102142334, "vf_explained_var": 0.9384626746177673, "cur_lr": 0.0005000000237487257, "entropy": 1.402868390083313, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014750263653695583}, "num_steps_trained": 5048705, "update_time_ms": 9.121, "load_time_ms": 23.229, "sample_time_ms": 20301.427, "num_steps_sampled": 5048705, "grad_time_ms": 11080.85}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3947.746101617813, "timestamp": 1558607152, "time_since_restore": 3947.746101617813, "policy_reward_mean": {}, "training_iteration": 118, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c0b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c2e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5048705, "episodes_total": 5480, "timesteps_total": 5048705, "episode_reward_mean": -478.454026883183, "episodes_this_iter": 47, "date": "2019-05-23_10-25-52", "time_this_iter_s": 30.750359296798706, "num_metric_batches_dropped": 0, "episode_reward_min": -717.7764705591349}
{"iterations_since_restore": 119, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.420954196010364, "timesteps_this_iter": 39397, "custom_metrics": {"cost1_max": 226.40888287927027, "cost1_min": 22.873023938579223, "system_level_velocity_mean": 15.229507672101802, "cost2_mean": -77.52898295159501, "cost2_max": -16.927106787521648, "outflow_rate_max": 1469.910650662884, "cost1_mean": 177.16685661762557, "system_level_velocity_min": 11.97088354868914, "system_level_velocity_max": 18.994734920069295, "outflow_rate_min": 516.5375004973323, "outflow_rate_mean": 1190.0409499639454, "cost2_min": -95.46328685522379}, "done": false, "pid": 24639, "episode_len_mean": 316.95, "info": {"default": {"kl": 0.014665517024695873, "total_loss": 16.63999366760254, "vf_loss": 16.649667739868164, "vf_explained_var": 0.9289627075195312, "cur_lr": 0.0005000000237487257, "entropy": 1.377310037612915, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015243607573211193}, "num_steps_trained": 5088102, "update_time_ms": 8.929, "load_time_ms": 22.432, "sample_time_ms": 20093.71, "num_steps_sampled": 5088102, "grad_time_ms": 11114.566}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 3977.8930938243866, "timestamp": 1558607182, "time_since_restore": 3977.8930938243866, "policy_reward_mean": {}, "training_iteration": 119, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cef0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5088102, "episodes_total": 5531, "timesteps_total": 5088102, "episode_reward_mean": -463.8690339852468, "episodes_this_iter": 51, "date": "2019-05-23_10-26-22", "time_this_iter_s": 30.146992206573486, "num_metric_batches_dropped": 0, "episode_reward_min": -696.102407415514}
{"iterations_since_restore": 120, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.420954196010364, "timesteps_this_iter": 39048, "custom_metrics": {"cost1_max": 226.94382952502542, "cost1_min": 22.873023938579223, "system_level_velocity_mean": 15.441179136857272, "cost2_mean": -78.13281324954983, "cost2_max": -16.927106787521648, "outflow_rate_max": 1469.406362286133, "cost1_mean": 180.91692761440353, "system_level_velocity_min": 11.97088354868914, "system_level_velocity_max": 18.994734920069295, "outflow_rate_min": 516.5375004973323, "outflow_rate_mean": 1205.7831348709215, "cost2_min": -95.46328685522379}, "done": false, "pid": 24639, "episode_len_mean": 318.72, "info": {"default": {"kl": 0.015193002298474312, "total_loss": 16.53497314453125, "vf_loss": 16.54239273071289, "vf_explained_var": 0.9277371764183044, "cur_lr": 0.0005000000237487257, "entropy": 1.370180368423462, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013185463845729828}, "num_steps_trained": 5127150, "update_time_ms": 9.185, "load_time_ms": 23.223, "sample_time_ms": 19872.117, "num_steps_sampled": 5127150, "grad_time_ms": 11148.913}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4008.3780193328857, "timestamp": 1558607213, "time_since_restore": 4008.3780193328857, "policy_reward_mean": {}, "training_iteration": 120, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c978>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5127150, "episodes_total": 5574, "timesteps_total": 5127150, "episode_reward_mean": -447.54504435697834, "episodes_this_iter": 43, "date": "2019-05-23_10-26-53", "time_this_iter_s": 30.484925508499146, "num_metric_batches_dropped": 0, "episode_reward_min": -696.102407415514}
{"iterations_since_restore": 121, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -242.18932933677556, "timesteps_this_iter": 39924, "custom_metrics": {"cost1_max": 226.94382952502542, "cost1_min": 140.87439507433822, "system_level_velocity_mean": 15.010913516128658, "cost2_mean": -78.12525863785655, "cost2_max": -55.994528763991866, "outflow_rate_max": 1469.406362286133, "cost1_mean": 179.9916186081314, "system_level_velocity_min": 11.919732583844503, "system_level_velocity_max": 18.983125479937062, "outflow_rate_min": 939.3954213836478, "outflow_rate_mean": 1195.2378843977954, "cost2_min": -96.10974056605804}, "done": false, "pid": 24639, "episode_len_mean": 324.8, "info": {"default": {"kl": 0.014200962148606777, "total_loss": 14.627166748046875, "vf_loss": 14.6353759765625, "vf_explained_var": 0.9377635717391968, "cur_lr": 0.0005000000237487257, "entropy": 1.4321746826171875, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.013601018115878105}, "num_steps_trained": 5167074, "update_time_ms": 9.515, "load_time_ms": 22.612, "sample_time_ms": 19825.62, "num_steps_sampled": 5167074, "grad_time_ms": 11356.368}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4042.3379380702972, "timestamp": 1558607247, "time_since_restore": 4042.3379380702972, "policy_reward_mean": {}, "training_iteration": 121, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537dd8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5167074, "episodes_total": 5620, "timesteps_total": 5167074, "episode_reward_mean": -469.7329519722218, "episodes_this_iter": 46, "date": "2019-05-23_10-27-27", "time_this_iter_s": 33.9599187374115, "num_metric_batches_dropped": 0, "episode_reward_min": -680.8866709683613}
{"iterations_since_restore": 122, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.72711854266008, "timesteps_this_iter": 40702, "custom_metrics": {"cost1_max": 226.54470513118142, "cost1_min": 18.114156960363196, "system_level_velocity_mean": 15.152388360157627, "cost2_mean": -79.04628119844871, "cost2_max": -15.656147142589463, "outflow_rate_max": 1469.9820055613218, "cost1_mean": 178.03081184574023, "system_level_velocity_min": 11.919732583844503, "system_level_velocity_max": 19.004582766035167, "outflow_rate_min": 457.848998964932, "outflow_rate_mean": 1187.380109645471, "cost2_min": -97.6390984486913}, "done": false, "pid": 24639, "episode_len_mean": 320.04, "info": {"default": {"kl": 0.014613593928515911, "total_loss": 18.937952041625977, "vf_loss": 18.94733428955078, "vf_explained_var": 0.9206316471099854, "cur_lr": 0.0005000000237487257, "entropy": 1.417994499206543, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014932278543710709}, "num_steps_trained": 5207776, "update_time_ms": 9.512, "load_time_ms": 23.639, "sample_time_ms": 19824.324, "num_steps_sampled": 5207776, "grad_time_ms": 11379.755}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4074.4962010383606, "timestamp": 1558607279, "time_since_restore": 4074.4962010383606, "policy_reward_mean": {}, "training_iteration": 122, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5207776, "episodes_total": 5671, "timesteps_total": 5207776, "episode_reward_mean": -475.15502709373663, "episodes_this_iter": 51, "date": "2019-05-23_10-27-59", "time_this_iter_s": 32.158262968063354, "num_metric_batches_dropped": 0, "episode_reward_min": -680.8866709683613}
{"iterations_since_restore": 123, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.72711854266008, "timesteps_this_iter": 40556, "custom_metrics": {"cost1_max": 227.151000049083, "cost1_min": 18.114156960363196, "system_level_velocity_mean": 15.151517585800534, "cost2_mean": -79.89438956135196, "cost2_max": -15.656147142589463, "outflow_rate_max": 1469.9820055613218, "cost1_mean": 176.69952889804284, "system_level_velocity_min": 11.473601360627223, "system_level_velocity_max": 19.08925328476697, "outflow_rate_min": 457.848998964932, "outflow_rate_mean": 1184.2919991351298, "cost2_min": -97.6390984486913}, "done": false, "pid": 24639, "episode_len_mean": 318.07, "info": {"default": {"kl": 0.014217334799468517, "total_loss": 15.523988723754883, "vf_loss": 15.532569885253906, "vf_explained_var": 0.9333698749542236, "cur_lr": 0.0005000000237487257, "entropy": 1.4270052909851074, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.013978010043501854}, "num_steps_trained": 5248332, "update_time_ms": 9.52, "load_time_ms": 23.681, "sample_time_ms": 19788.035, "num_steps_sampled": 5248332, "grad_time_ms": 11354.68}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4104.964672088623, "timestamp": 1558607309, "time_since_restore": 4104.964672088623, "policy_reward_mean": {}, "training_iteration": 123, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845577f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549fd0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5248332, "episodes_total": 5716, "timesteps_total": 5248332, "episode_reward_mean": -481.0362514643041, "episodes_this_iter": 45, "date": "2019-05-23_10-28-29", "time_this_iter_s": 30.46847105026245, "num_metric_batches_dropped": 0, "episode_reward_min": -689.6335039284377}
{"iterations_since_restore": 124, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -28.639807708392617, "timesteps_this_iter": 39955, "custom_metrics": {"cost1_max": 227.151000049083, "cost1_min": 23.296236043380468, "system_level_velocity_mean": 15.253106956658005, "cost2_mean": -80.37504692405773, "cost2_max": -18.83896312255516, "outflow_rate_max": 1468.938571133216, "cost1_mean": 179.37994320441192, "system_level_velocity_min": 11.473601360627223, "system_level_velocity_max": 19.08925328476697, "outflow_rate_min": 478.4513605325595, "outflow_rate_mean": 1193.8315000704645, "cost2_min": -95.5466726004106}, "done": false, "pid": 24639, "episode_len_mean": 320.13, "info": {"default": {"kl": 0.015144124627113342, "total_loss": 14.433271408081055, "vf_loss": 14.439512252807617, "vf_explained_var": 0.9385850429534912, "cur_lr": 0.0005000000237487257, "entropy": 1.4079006910324097, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.011990999802947044}, "num_steps_trained": 5288287, "update_time_ms": 9.545, "load_time_ms": 23.411, "sample_time_ms": 19901.352, "num_steps_sampled": 5288287, "grad_time_ms": 11312.8}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4137.244894981384, "timestamp": 1558607342, "time_since_restore": 4137.244894981384, "policy_reward_mean": {}, "training_iteration": 124, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557f60>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5288287, "episodes_total": 5761, "timesteps_total": 5288287, "episode_reward_mean": -472.0641438423577, "episodes_this_iter": 45, "date": "2019-05-23_10-29-02", "time_this_iter_s": 32.28022289276123, "num_metric_batches_dropped": 0, "episode_reward_min": -702.4305294709574}
{"iterations_since_restore": 125, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -26.89064671023896, "timesteps_this_iter": 38410, "custom_metrics": {"cost1_max": 227.14606835346194, "cost1_min": 23.214479315161217, "system_level_velocity_mean": 15.23167262996266, "cost2_mean": -78.10432653610589, "cost2_max": -18.729952750212114, "outflow_rate_max": 1468.938571133216, "cost1_mean": 178.29257540299935, "system_level_velocity_min": 11.716184662047217, "system_level_velocity_max": 19.008779145310665, "outflow_rate_min": 478.4513605325595, "outflow_rate_mean": 1184.495687626422, "cost2_min": -96.93118990821253}, "done": false, "pid": 24639, "episode_len_mean": 319.2, "info": {"default": {"kl": 0.015738314017653465, "total_loss": 13.636974334716797, "vf_loss": 13.647785186767578, "vf_explained_var": 0.9397931098937988, "cur_lr": 0.0005000000237487257, "entropy": 1.4382150173187256, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.016785787418484688}, "num_steps_trained": 5326697, "update_time_ms": 9.884, "load_time_ms": 23.08, "sample_time_ms": 19924.638, "num_steps_sampled": 5326697, "grad_time_ms": 11320.144}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4168.252964496613, "timestamp": 1558607373, "time_since_restore": 4168.252964496613, "policy_reward_mean": {}, "training_iteration": 125, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c518>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5326697, "episodes_total": 5811, "timesteps_total": 5326697, "episode_reward_mean": -460.05121580121335, "episodes_this_iter": 50, "date": "2019-05-23_10-29-33", "time_this_iter_s": 31.00806951522827, "num_metric_batches_dropped": 0, "episode_reward_min": -702.4305294709574}
{"iterations_since_restore": 126, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -26.89064671023896, "timesteps_this_iter": 37963, "custom_metrics": {"cost1_max": 226.70035734349045, "cost1_min": 23.214479315161217, "system_level_velocity_mean": 15.01654493792978, "cost2_mean": -75.15658395239568, "cost2_max": -18.729952750212114, "outflow_rate_max": 1463.7455797092598, "cost1_mean": 177.6981663005929, "system_level_velocity_min": 11.60406094399998, "system_level_velocity_max": 19.006045650849956, "outflow_rate_min": 508.5934821910148, "outflow_rate_mean": 1172.0764114706321, "cost2_min": -96.93118990821253}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.015238079242408276, "total_loss": 14.557994842529297, "vf_loss": 14.568743705749512, "vf_explained_var": 0.9329879283905029, "cur_lr": 0.0005000000237487257, "entropy": 1.4477962255477905, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.0165356807410717}, "num_steps_trained": 5364660, "update_time_ms": 10.08, "load_time_ms": 22.437, "sample_time_ms": 19897.342, "num_steps_sampled": 5364660, "grad_time_ms": 11309.751}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4198.647079467773, "timestamp": 1558607403, "time_since_restore": 4198.647079467773, "policy_reward_mean": {}, "training_iteration": 126, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a58>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5364660, "episodes_total": 5856, "timesteps_total": 5364660, "episode_reward_mean": -456.1694175886055, "episodes_this_iter": 45, "date": "2019-05-23_10-30-03", "time_this_iter_s": 30.39411497116089, "num_metric_batches_dropped": 0, "episode_reward_min": -726.935928964845}
{"iterations_since_restore": 127, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -173.0382536732586, "timesteps_this_iter": 38511, "custom_metrics": {"cost1_max": 226.96977412558317, "cost1_min": 139.9325967998717, "system_level_velocity_mean": 15.152657218254438, "cost2_mean": -74.1269267189546, "cost2_max": -48.37436100613718, "outflow_rate_max": 1468.4783287154248, "cost1_mean": 180.48899593599958, "system_level_velocity_min": 11.60406094399998, "system_level_velocity_max": 19.056340042953757, "outflow_rate_min": 919.0507871044422, "outflow_rate_mean": 1183.920355343659, "cost2_min": -96.93118990821253}, "done": false, "pid": 24639, "episode_len_mean": 323.64, "info": {"default": {"kl": 0.016757722944021225, "total_loss": 13.551922798156738, "vf_loss": 13.562058448791504, "vf_explained_var": 0.9410682916641235, "cur_lr": 0.0005000000237487257, "entropy": 1.4617879390716553, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.016499683260917664}, "num_steps_trained": 5403171, "update_time_ms": 10.029, "load_time_ms": 22.122, "sample_time_ms": 19952.692, "num_steps_sampled": 5403171, "grad_time_ms": 11038.782}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4228.198446750641, "timestamp": 1558607433, "time_since_restore": 4228.198446750641, "policy_reward_mean": {}, "training_iteration": 127, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845573c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845579e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5403171, "episodes_total": 5901, "timesteps_total": 5403171, "episode_reward_mean": -445.9037088700987, "episodes_this_iter": 45, "date": "2019-05-23_10-30-33", "time_this_iter_s": 29.55136728286743, "num_metric_batches_dropped": 0, "episode_reward_min": -726.935928964845}
{"iterations_since_restore": 128, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -173.0382536732586, "timesteps_this_iter": 37845, "custom_metrics": {"cost1_max": 226.96977412558317, "cost1_min": 146.2740956044658, "system_level_velocity_mean": 15.193345527717268, "cost2_mean": -73.6855109147802, "cost2_max": -51.8017057763782, "outflow_rate_max": 1468.4783287154248, "cost1_mean": 181.19898868958416, "system_level_velocity_min": 12.185965585099057, "system_level_velocity_max": 19.056340042953757, "outflow_rate_min": 989.3754186413898, "outflow_rate_mean": 1188.7302889460384, "cost2_min": -94.55076362195841}, "done": false, "pid": 24639, "episode_len_mean": 323.64, "info": {"default": {"kl": 0.014480228535830975, "total_loss": 12.35434341430664, "vf_loss": 12.36368465423584, "vf_explained_var": 0.9460163712501526, "cur_lr": 0.0005000000237487257, "entropy": 1.4261876344680786, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.01483860146254301}, "num_steps_trained": 5441016, "update_time_ms": 9.727, "load_time_ms": 22.22, "sample_time_ms": 20054.289, "num_steps_sampled": 5441016, "grad_time_ms": 10879.689}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4258.359393835068, "timestamp": 1558607463, "time_since_restore": 4258.359393835068, "policy_reward_mean": {}, "training_iteration": 128, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c2e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ccf8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5441016, "episodes_total": 5950, "timesteps_total": 5441016, "episode_reward_mean": -444.22327059866285, "episodes_this_iter": 49, "date": "2019-05-23_10-31-03", "time_this_iter_s": 30.16094708442688, "num_metric_batches_dropped": 0, "episode_reward_min": -676.4567979646307}
{"iterations_since_restore": 129, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -256.5535944136912, "timesteps_this_iter": 37570, "custom_metrics": {"cost1_max": 226.57173334792225, "cost1_min": 153.00805738824695, "system_level_velocity_mean": 15.353867533950343, "cost2_mean": -73.92409596417035, "cost2_max": -45.50051030129075, "outflow_rate_max": 1466.9965569304652, "cost1_mean": 184.1040430598319, "system_level_velocity_min": 12.685643719084071, "system_level_velocity_max": 18.940939216280707, "outflow_rate_min": 988.1335547157275, "outflow_rate_mean": 1202.8015635577171, "cost2_min": -94.55076362195841}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01550538744777441, "total_loss": 14.574294090270996, "vf_loss": 14.58414077758789, "vf_explained_var": 0.9337073564529419, "cur_lr": 0.0005000000237487257, "entropy": 1.4379887580871582, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015734858810901642}, "num_steps_trained": 5478586, "update_time_ms": 9.646, "load_time_ms": 22.095, "sample_time_ms": 20109.58, "num_steps_sampled": 5478586, "grad_time_ms": 10840.599}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4288.681916475296, "timestamp": 1558607493, "time_since_restore": 4288.681916475296, "policy_reward_mean": {}, "training_iteration": 129, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b588>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5478586, "episodes_total": 5996, "timesteps_total": 5478586, "episode_reward_mean": -434.18018432847276, "episodes_this_iter": 46, "date": "2019-05-23_10-31-33", "time_this_iter_s": 30.32252264022827, "num_metric_batches_dropped": 0, "episode_reward_min": -623.3012678390388}
{"iterations_since_restore": 130, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -258.1099635724239, "timesteps_this_iter": 38044, "custom_metrics": {"cost1_max": 225.59798815446055, "cost1_min": 142.2251162220377, "system_level_velocity_mean": 15.529604627955855, "cost2_mean": -72.8657607033824, "cost2_max": -45.50051030129075, "outflow_rate_max": 1463.8401296824566, "cost1_mean": 186.05259776415136, "system_level_velocity_min": 11.95898241903711, "system_level_velocity_max": 18.92537061379297, "outflow_rate_min": 988.1335547157275, "outflow_rate_mean": 1215.295451360073, "cost2_min": -92.59918310370426}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015313087031245232, "total_loss": 15.092460632324219, "vf_loss": 15.100372314453125, "vf_explained_var": 0.9290077686309814, "cur_lr": 0.0005000000237487257, "entropy": 1.4273412227630615, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01372599322348833}, "num_steps_trained": 5516630, "update_time_ms": 9.741, "load_time_ms": 22.445, "sample_time_ms": 19998.173, "num_steps_sampled": 5516630, "grad_time_ms": 10875.717}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4318.3810749053955, "timestamp": 1558607523, "time_since_restore": 4318.3810749053955, "policy_reward_mean": {}, "training_iteration": 130, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557d68>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5516630, "episodes_total": 6040, "timesteps_total": 5516630, "episode_reward_mean": -426.245985324724, "episodes_this_iter": 44, "date": "2019-05-23_10-32-03", "time_this_iter_s": 29.699158430099487, "num_metric_batches_dropped": 0, "episode_reward_min": -646.5997424006295}
{"iterations_since_restore": 131, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.54855636547042, "timesteps_this_iter": 38022, "custom_metrics": {"cost1_max": 225.59798815446055, "cost1_min": 24.584946613532566, "system_level_velocity_mean": 15.079460518684495, "cost2_mean": -70.98617584487988, "cost2_max": -19.877425027831325, "outflow_rate_max": 1463.8401296824566, "cost1_mean": 178.8919855488912, "system_level_velocity_min": 11.95898241903711, "system_level_velocity_max": 18.92537061379297, "outflow_rate_min": 494.32376544046673, "outflow_rate_mean": 1177.1097178547936, "cost2_min": -92.59918310370426}, "done": false, "pid": 24639, "episode_len_mean": 322.12, "info": {"default": {"kl": 0.01605520024895668, "total_loss": 12.811243057250977, "vf_loss": 12.82197093963623, "vf_explained_var": 0.9456649422645569, "cur_lr": 0.0005000000237487257, "entropy": 1.4817249774932861, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01682365871965885}, "num_steps_trained": 5554652, "update_time_ms": 9.602, "load_time_ms": 21.927, "sample_time_ms": 19677.295, "num_steps_sampled": 5554652, "grad_time_ms": 10747.196}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4347.814077138901, "timestamp": 1558607553, "time_since_restore": 4347.814077138901, "policy_reward_mean": {}, "training_iteration": 131, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557be0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5554652, "episodes_total": 6086, "timesteps_total": 5554652, "episode_reward_mean": -438.0521229667161, "episodes_this_iter": 46, "date": "2019-05-23_10-32-33", "time_this_iter_s": 29.43300223350525, "num_metric_batches_dropped": 0, "episode_reward_min": -646.5997424006295}
{"iterations_since_restore": 132, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.54855636547042, "timesteps_this_iter": 38149, "custom_metrics": {"cost1_max": 226.19694297278886, "cost1_min": 24.584946613532566, "system_level_velocity_mean": 14.838300764998506, "cost2_mean": -70.95128422600223, "cost2_max": -19.877425027831325, "outflow_rate_max": 1466.3932158870762, "cost1_mean": 176.1019953449813, "system_level_velocity_min": 10.338406791334076, "system_level_velocity_max": 18.94565115983327, "outflow_rate_min": 494.32376544046673, "outflow_rate_mean": 1161.7461225828008, "cost2_min": -92.45847871418117}, "done": false, "pid": 24639, "episode_len_mean": 322.12, "info": {"default": {"kl": 0.016731444746255875, "total_loss": 14.596707344055176, "vf_loss": 14.605072021484375, "vf_explained_var": 0.9345560669898987, "cur_lr": 0.0005000000237487257, "entropy": 1.4654035568237305, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01471712626516819}, "num_steps_trained": 5592801, "update_time_ms": 9.669, "load_time_ms": 22.21, "sample_time_ms": 19569.417, "num_steps_sampled": 5592801, "grad_time_ms": 10767.675}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4379.128869771957, "timestamp": 1558607584, "time_since_restore": 4379.128869771957, "policy_reward_mean": {}, "training_iteration": 132, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c5c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c828>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5592801, "episodes_total": 6135, "timesteps_total": 5592801, "episode_reward_mean": -452.17850869764237, "episodes_this_iter": 49, "date": "2019-05-23_10-33-04", "time_this_iter_s": 31.31479263305664, "num_metric_batches_dropped": 0, "episode_reward_min": -662.3888510386411}
{"iterations_since_restore": 133, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -256.21970556819645, "timesteps_this_iter": 37667, "custom_metrics": {"cost1_max": 226.19694297278886, "cost1_min": 125.82579027309637, "system_level_velocity_mean": 14.78071057037153, "cost2_mean": -70.10657010799135, "cost2_max": -42.388363102573166, "outflow_rate_max": 1466.3932158870762, "cost1_mean": 177.21034881903702, "system_level_velocity_min": 10.338406791334076, "system_level_velocity_max": 18.94565115983327, "outflow_rate_min": 916.6990129870134, "outflow_rate_mean": 1168.6581799142407, "cost2_min": -92.45847871418117}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01631578803062439, "total_loss": 15.488619804382324, "vf_loss": 15.498570442199707, "vf_explained_var": 0.9318143725395203, "cur_lr": 0.0005000000237487257, "entropy": 1.480951189994812, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.01614384353160858}, "num_steps_trained": 5630468, "update_time_ms": 9.681, "load_time_ms": 23.083, "sample_time_ms": 19467.699, "num_steps_sampled": 5630468, "grad_time_ms": 10752.135}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4408.422726631165, "timestamp": 1558607613, "time_since_restore": 4408.422726631165, "policy_reward_mean": {}, "training_iteration": 133, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c4a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cc88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c1d0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5630468, "episodes_total": 6181, "timesteps_total": 5630468, "episode_reward_mean": -452.43891348010516, "episodes_this_iter": 46, "date": "2019-05-23_10-33-33", "time_this_iter_s": 29.293856859207153, "num_metric_batches_dropped": 0, "episode_reward_min": -662.3888510386411}
{"iterations_since_restore": 134, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.96391629486423, "timesteps_this_iter": 38191, "custom_metrics": {"cost1_max": 226.04279305760969, "cost1_min": 80.95049574934573, "system_level_velocity_mean": 14.848026717971646, "cost2_mean": -69.92637375845158, "cost2_max": -42.388363102573166, "outflow_rate_max": 1462.7594006568147, "cost1_mean": 176.40263620935013, "system_level_velocity_min": 10.338406791334076, "system_level_velocity_max": 18.936235864300933, "outflow_rate_min": 773.7533782180653, "outflow_rate_mean": 1170.3329144705197, "cost2_min": -92.7269080810094}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.015659155324101448, "total_loss": 15.374265670776367, "vf_loss": 15.384349822998047, "vf_explained_var": 0.9360021948814392, "cur_lr": 0.0005000000237487257, "entropy": 1.500185489654541, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.016030684113502502}, "num_steps_trained": 5668659, "update_time_ms": 9.651, "load_time_ms": 22.836, "sample_time_ms": 19260.621, "num_steps_sampled": 5668659, "grad_time_ms": 10697.119}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4438.043752193451, "timestamp": 1558607643, "time_since_restore": 4438.043752193451, "policy_reward_mean": {}, "training_iteration": 134, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541080>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5668659, "episodes_total": 6225, "timesteps_total": 5668659, "episode_reward_mean": -447.9495457262516, "episodes_this_iter": 44, "date": "2019-05-23_10-34-03", "time_this_iter_s": 29.621025562286377, "num_metric_batches_dropped": 0, "episode_reward_min": -645.0484195718311}
{"iterations_since_restore": 135, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.96391629486423, "timesteps_this_iter": 37879, "custom_metrics": {"cost1_max": 226.04279305760969, "cost1_min": 80.95049574934573, "system_level_velocity_mean": 15.15537801585506, "cost2_mean": -71.27435649384762, "cost2_max": -43.880680010387195, "outflow_rate_max": 1463.8060990107072, "cost1_mean": 180.02132732386355, "system_level_velocity_min": 11.645653606367597, "system_level_velocity_max": 18.91039432214064, "outflow_rate_min": 773.7533782180653, "outflow_rate_mean": 1191.0554654899636, "cost2_min": -95.64040614381305}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.017244651913642883, "total_loss": 17.784408569335938, "vf_loss": 17.79180145263672, "vf_explained_var": 0.9269677996635437, "cur_lr": 0.0005000000237487257, "entropy": 1.463853120803833, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.0139417489990592}, "num_steps_trained": 5706538, "update_time_ms": 9.535, "load_time_ms": 22.762, "sample_time_ms": 19297.92, "num_steps_sampled": 5706538, "grad_time_ms": 10557.772}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4468.020747661591, "timestamp": 1558607673, "time_since_restore": 4468.020747661591, "policy_reward_mean": {}, "training_iteration": 135, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ce80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ceb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cef0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5706538, "episodes_total": 6274, "timesteps_total": 5706538, "episode_reward_mean": -438.65251199628443, "episodes_this_iter": 49, "date": "2019-05-23_10-34-33", "time_this_iter_s": 29.97699546813965, "num_metric_batches_dropped": 0, "episode_reward_min": -650.013352962115}
{"iterations_since_restore": 136, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.2138857156742, "timesteps_this_iter": 38329, "custom_metrics": {"cost1_max": 226.28020553062345, "cost1_min": 135.24849978435472, "system_level_velocity_mean": 15.127293019362062, "cost2_mean": -71.86152079699202, "cost2_max": -48.83324834176767, "outflow_rate_max": 1468.6170947883284, "cost1_mean": 181.1693441498848, "system_level_velocity_min": 11.645653606367597, "system_level_velocity_max": 18.958886480099878, "outflow_rate_min": 921.4542728438013, "outflow_rate_mean": 1193.5272309180584, "cost2_min": -95.64040614381305}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.016081372275948524, "total_loss": 16.322059631347656, "vf_loss": 16.32952308654785, "vf_explained_var": 0.9333361387252808, "cur_lr": 0.0005000000237487257, "entropy": 1.4654065370559692, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.013569247908890247}, "num_steps_trained": 5744867, "update_time_ms": 9.53, "load_time_ms": 22.742, "sample_time_ms": 19373.353, "num_steps_sampled": 5744867, "grad_time_ms": 10450.102}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4498.099759578705, "timestamp": 1558607703, "time_since_restore": 4498.099759578705, "policy_reward_mean": {}, "training_iteration": 136, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845575f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557860>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5744867, "episodes_total": 6319, "timesteps_total": 5744867, "episode_reward_mean": -444.1354293825174, "episodes_this_iter": 45, "date": "2019-05-23_10-35-03", "time_this_iter_s": 30.079011917114258, "num_metric_batches_dropped": 0, "episode_reward_min": -650.013352962115}
{"iterations_since_restore": 137, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -89.0018937545952, "timesteps_this_iter": 37548, "custom_metrics": {"cost1_max": 226.9646894405081, "cost1_min": 81.5137570890094, "system_level_velocity_mean": 15.171009396959994, "cost2_mean": -70.97219475061509, "cost2_max": -45.13619212467282, "outflow_rate_max": 1468.6170947883284, "cost1_mean": 180.04364747344462, "system_level_velocity_min": 11.868928650267717, "system_level_velocity_max": 19.098830347177522, "outflow_rate_min": 782.0898848678659, "outflow_rate_mean": 1192.2714757726635, "cost2_min": -94.52103241569284}, "done": false, "pid": 24639, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.016244864091277122, "total_loss": 12.806857109069824, "vf_loss": 12.816394805908203, "vf_explained_var": 0.9453229308128357, "cur_lr": 0.0005000000237487257, "entropy": 1.5076795816421509, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015705659985542297}, "num_steps_trained": 5782415, "update_time_ms": 9.441, "load_time_ms": 21.454, "sample_time_ms": 19336.631, "num_steps_sampled": 5782415, "grad_time_ms": 10522.288}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4527.988133907318, "timestamp": 1558607733, "time_since_restore": 4527.988133907318, "policy_reward_mean": {}, "training_iteration": 137, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549400>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5782415, "episodes_total": 6365, "timesteps_total": 5782415, "episode_reward_mean": -440.29276901972224, "episodes_this_iter": 46, "date": "2019-05-23_10-35-33", "time_this_iter_s": 29.88837432861328, "num_metric_batches_dropped": 0, "episode_reward_min": -580.4784067826772}
{"iterations_since_restore": 138, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -89.0018937545952, "timesteps_this_iter": 37115, "custom_metrics": {"cost1_max": 226.9646894405081, "cost1_min": 81.5137570890094, "system_level_velocity_mean": 15.043185149170466, "cost2_mean": -69.2970171268552, "cost2_max": -36.513997367717955, "outflow_rate_max": 1468.6170947883284, "cost1_mean": 178.41781031098824, "system_level_velocity_min": 11.484814276641762, "system_level_velocity_max": 19.098830347177522, "outflow_rate_min": 782.0898848678659, "outflow_rate_mean": 1182.1060345900992, "cost2_min": -95.25924814938368}, "done": false, "pid": 24639, "episode_len_mean": 322.72, "info": {"default": {"kl": 0.015084548853337765, "total_loss": 14.586180686950684, "vf_loss": 14.594157218933105, "vf_explained_var": 0.9387970566749573, "cur_lr": 0.0005000000237487257, "entropy": 1.5188227891921997, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01370526198297739}, "num_steps_trained": 5819530, "update_time_ms": 9.608, "load_time_ms": 21.179, "sample_time_ms": 19249.126, "num_steps_sampled": 5819530, "grad_time_ms": 10771.704}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4559.801279067993, "timestamp": 1558607765, "time_since_restore": 4559.801279067993, "policy_reward_mean": {}, "training_iteration": 138, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c0b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c8d0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5819530, "episodes_total": 6414, "timesteps_total": 5819530, "episode_reward_mean": -433.50858278697444, "episodes_this_iter": 49, "date": "2019-05-23_10-36-05", "time_this_iter_s": 31.81314516067505, "num_metric_batches_dropped": 0, "episode_reward_min": -626.6163894506536}
{"iterations_since_restore": 139, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.44804774561755, "timesteps_this_iter": 37815, "custom_metrics": {"cost1_max": 226.7372251331646, "cost1_min": 23.078353451331083, "system_level_velocity_mean": 15.196262478214205, "cost2_mean": -69.16764808346096, "cost2_max": -18.091531881537072, "outflow_rate_max": 1465.8144794721918, "cost1_mean": 178.25474498770757, "system_level_velocity_min": 11.484814276641762, "system_level_velocity_max": 19.098830347177522, "outflow_rate_min": 514.5009007334598, "outflow_rate_mean": 1183.2269885961036, "cost2_min": -95.25924814938368}, "done": false, "pid": 24639, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.014453762210905552, "total_loss": 18.150970458984375, "vf_loss": 18.15928077697754, "vf_explained_var": 0.9207344651222229, "cur_lr": 0.0005000000237487257, "entropy": 1.4631003141403198, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.013797487132251263}, "num_steps_trained": 5857345, "update_time_ms": 9.873, "load_time_ms": 21.345, "sample_time_ms": 19114.86, "num_steps_sampled": 5857345, "grad_time_ms": 10804.061}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4589.08543586731, "timestamp": 1558607794, "time_since_restore": 4589.08543586731, "policy_reward_mean": {}, "training_iteration": 139, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ceb8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5857345, "episodes_total": 6459, "timesteps_total": 5857345, "episode_reward_mean": -428.537509498854, "episodes_this_iter": 45, "date": "2019-05-23_10-36-34", "time_this_iter_s": 29.284156799316406, "num_metric_batches_dropped": 0, "episode_reward_min": -692.3966791182579}
{"iterations_since_restore": 140, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.44804774561755, "timesteps_this_iter": 36765, "custom_metrics": {"cost1_max": 226.35881880822194, "cost1_min": 23.078353451331083, "system_level_velocity_mean": 15.205169285293385, "cost2_mean": -68.90324151241474, "cost2_max": -18.091531881537072, "outflow_rate_max": 1465.8144794721918, "cost1_mean": 179.15024712798117, "system_level_velocity_min": 10.339447237755977, "system_level_velocity_max": 19.011326928032453, "outflow_rate_min": 514.5009007334598, "outflow_rate_mean": 1182.3209258886789, "cost2_min": -95.14062803798777}, "done": false, "pid": 24639, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.017158908769488335, "total_loss": 12.821407318115234, "vf_loss": 12.829049110412598, "vf_explained_var": 0.9453163146972656, "cur_lr": 0.0005000000237487257, "entropy": 1.491039514541626, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014156188815832138}, "num_steps_trained": 5894110, "update_time_ms": 9.549, "load_time_ms": 21.099, "sample_time_ms": 19089.524, "num_steps_sampled": 5894110, "grad_time_ms": 10743.556}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4617.919600725174, "timestamp": 1558607823, "time_since_restore": 4617.919600725174, "policy_reward_mean": {}, "training_iteration": 140, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845656d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b70>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5894110, "episodes_total": 6506, "timesteps_total": 5894110, "episode_reward_mean": -428.2419308102409, "episodes_this_iter": 47, "date": "2019-05-23_10-37-03", "time_this_iter_s": 28.83416485786438, "num_metric_batches_dropped": 0, "episode_reward_min": -692.3966791182579}
{"iterations_since_restore": 141, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.44804774561755, "timesteps_this_iter": 37535, "custom_metrics": {"cost1_max": 227.01289663488657, "cost1_min": 23.078353451331083, "system_level_velocity_mean": 15.279979169747026, "cost2_mean": -71.06339276745858, "cost2_max": -18.091531881537072, "outflow_rate_max": 1469.2113075060538, "cost1_mean": 180.27974368050988, "system_level_velocity_min": 10.339447237755977, "system_level_velocity_max": 18.9957110378455, "outflow_rate_min": 514.5009007334598, "outflow_rate_mean": 1182.556280728764, "cost2_min": -95.14062803798777}, "done": false, "pid": 24639, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.015048876404762268, "total_loss": 14.899890899658203, "vf_loss": 14.909984588623047, "vf_explained_var": 0.9376282095909119, "cur_lr": 0.0005000000237487257, "entropy": 1.4413832426071167, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015805406495928764}, "num_steps_trained": 5931645, "update_time_ms": 9.459, "load_time_ms": 21.398, "sample_time_ms": 19197.859, "num_steps_sampled": 5931645, "grad_time_ms": 10672.411}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4647.712982416153, "timestamp": 1558607853, "time_since_restore": 4647.712982416153, "policy_reward_mean": {}, "training_iteration": 141, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845419e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5931645, "episodes_total": 6554, "timesteps_total": 5931645, "episode_reward_mean": -421.0115756753771, "episodes_this_iter": 48, "date": "2019-05-23_10-37-33", "time_this_iter_s": 29.793381690979004, "num_metric_batches_dropped": 0, "episode_reward_min": -603.1894580312428}
{"iterations_since_restore": 142, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.1451577216141, "timesteps_this_iter": 37790, "custom_metrics": {"cost1_max": 227.01289663488657, "cost1_min": 18.125521001089265, "system_level_velocity_mean": 15.166265818630002, "cost2_mean": -71.27423910972125, "cost2_max": -16.994487806276457, "outflow_rate_max": 1469.2113075060538, "cost1_mean": 176.93727559306706, "system_level_velocity_min": 11.863645232855648, "system_level_velocity_max": 18.9957110378455, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1170.928827207487, "cost2_min": -95.94803367872713}, "done": false, "pid": 24639, "episode_len_mean": 317.95, "info": {"default": {"kl": 0.01547399815171957, "total_loss": 13.563450813293457, "vf_loss": 13.574151039123535, "vf_explained_var": 0.9428494572639465, "cur_lr": 0.0005000000237487257, "entropy": 1.5237603187561035, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.0165752824395895}, "num_steps_trained": 5969435, "update_time_ms": 9.162, "load_time_ms": 21.005, "sample_time_ms": 19121.81, "num_steps_sampled": 5969435, "grad_time_ms": 10567.838}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4677.2102172374725, "timestamp": 1558607882, "time_since_restore": 4677.2102172374725, "policy_reward_mean": {}, "training_iteration": 142, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e848f2438>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 5969435, "episodes_total": 6601, "timesteps_total": 5969435, "episode_reward_mean": -430.22615306763373, "episodes_this_iter": 47, "date": "2019-05-23_10-38-02", "time_this_iter_s": 29.49723482131958, "num_metric_batches_dropped": 0, "episode_reward_min": -648.9269508216496}
{"iterations_since_restore": 143, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.1451577216141, "timesteps_this_iter": 37185, "custom_metrics": {"cost1_max": 227.03092010522425, "cost1_min": 18.125521001089265, "system_level_velocity_mean": 14.947944772040549, "cost2_mean": -69.24506363951072, "cost2_max": -16.994487806276457, "outflow_rate_max": 1470.841499326778, "cost1_mean": 174.16115071161892, "system_level_velocity_min": 11.060745934769406, "system_level_velocity_max": 19.093532077668783, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1155.1844246638298, "cost2_min": -95.94803367872713}, "done": false, "pid": 24639, "episode_len_mean": 317.95, "info": {"default": {"kl": 0.01569654606282711, "total_loss": 15.102670669555664, "vf_loss": 15.111572265625, "vf_explained_var": 0.9334503412246704, "cur_lr": 0.0005000000237487257, "entropy": 1.496573805809021, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01486180443316698}, "num_steps_trained": 6006620, "update_time_ms": 9.381, "load_time_ms": 20.89, "sample_time_ms": 19128.502, "num_steps_sampled": 6006620, "grad_time_ms": 10626.868}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4707.162224054337, "timestamp": 1558607912, "time_since_restore": 4707.162224054337, "policy_reward_mean": {}, "training_iteration": 143, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565828>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e10>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6006620, "episodes_total": 6646, "timesteps_total": 6006620, "episode_reward_mean": -435.3883214927722, "episodes_this_iter": 45, "date": "2019-05-23_10-38-32", "time_this_iter_s": 29.952006816864014, "num_metric_batches_dropped": 0, "episode_reward_min": -653.4738418921728}
{"iterations_since_restore": 144, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.771693668518672, "timesteps_this_iter": 37119, "custom_metrics": {"cost1_max": 227.03092010522425, "cost1_min": 17.872127496675542, "system_level_velocity_mean": 15.342604282593225, "cost2_mean": -70.54661267550625, "cost2_max": -15.837618791996157, "outflow_rate_max": 1470.841499326778, "cost1_mean": 179.08841008602562, "system_level_velocity_min": 11.060745934769406, "system_level_velocity_max": 19.093532077668783, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1183.6684103334342, "cost2_min": -95.5086210409352}, "done": false, "pid": 24639, "episode_len_mean": 317.66, "info": {"default": {"kl": 0.01525835320353508, "total_loss": 16.102325439453125, "vf_loss": 16.110788345336914, "vf_explained_var": 0.9270538091659546, "cur_lr": 0.0005000000237487257, "entropy": 1.4532032012939453, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014254619367420673}, "num_steps_trained": 6043739, "update_time_ms": 9.752, "load_time_ms": 20.757, "sample_time_ms": 19067.795, "num_steps_sampled": 6043739, "grad_time_ms": 10635.025}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4736.249563932419, "timestamp": 1558607941, "time_since_restore": 4736.249563932419, "policy_reward_mean": {}, "training_iteration": 144, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845659e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565dd8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6043739, "episodes_total": 6692, "timesteps_total": 6043739, "episode_reward_mean": -419.99255756815415, "episodes_this_iter": 46, "date": "2019-05-23_10-39-01", "time_this_iter_s": 29.087339878082275, "num_metric_batches_dropped": 0, "episode_reward_min": -653.4738418921728}
{"iterations_since_restore": 145, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.771693668518672, "timesteps_this_iter": 37337, "custom_metrics": {"cost1_max": 226.7135840571188, "cost1_min": 17.872127496675542, "system_level_velocity_mean": 15.184262748202473, "cost2_mean": -69.93076518158355, "cost2_max": -15.837618791996157, "outflow_rate_max": 1470.725716148605, "cost1_mean": 179.10452331510353, "system_level_velocity_min": 11.76673974260267, "system_level_velocity_max": 19.041188763970275, "outflow_rate_min": 448.5093812448499, "outflow_rate_mean": 1178.3729806950114, "cost2_min": -94.18386923546528}, "done": false, "pid": 24639, "episode_len_mean": 320.64, "info": {"default": {"kl": 0.018523043021559715, "total_loss": 12.501562118530273, "vf_loss": 12.511921882629395, "vf_explained_var": 0.9479842185974121, "cur_lr": 0.0005000000237487257, "entropy": 1.5077100992202759, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.017392219975590706}, "num_steps_trained": 6081076, "update_time_ms": 9.588, "load_time_ms": 21.498, "sample_time_ms": 19056.945, "num_steps_sampled": 6081076, "grad_time_ms": 10719.045}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4766.9597318172455, "timestamp": 1558607972, "time_since_restore": 4766.9597318172455, "policy_reward_mean": {}, "training_iteration": 145, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565550>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6081076, "episodes_total": 6741, "timesteps_total": 6081076, "episode_reward_mean": -425.46657049254577, "episodes_this_iter": 49, "date": "2019-05-23_10-39-32", "time_this_iter_s": 30.71016788482666, "num_metric_batches_dropped": 0, "episode_reward_min": -653.4738418921728}
{"iterations_since_restore": 146, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -256.72810516181136, "timesteps_this_iter": 37972, "custom_metrics": {"cost1_max": 226.61003312574766, "cost1_min": 136.01061011666104, "system_level_velocity_mean": 15.114602303783643, "cost2_mean": -71.2496280629805, "cost2_max": -45.32483760650538, "outflow_rate_max": 1466.7165309709903, "cost1_mean": 180.84683356717866, "system_level_velocity_min": 11.76673974260267, "system_level_velocity_max": 19.061366789084992, "outflow_rate_min": 926.158577644411, "outflow_rate_mean": 1186.9703680739808, "cost2_min": -95.03103057360786}, "done": false, "pid": 24639, "episode_len_mean": 324.8, "info": {"default": {"kl": 0.013937007635831833, "total_loss": 18.275344848632812, "vf_loss": 18.28183937072754, "vf_explained_var": 0.9244870543479919, "cur_lr": 0.0005000000237487257, "entropy": 1.4677883386611938, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.011786449700593948}, "num_steps_trained": 6119048, "update_time_ms": 9.414, "load_time_ms": 20.629, "sample_time_ms": 18985.525, "num_steps_sampled": 6119048, "grad_time_ms": 10652.721}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4795.639493465424, "timestamp": 1558608001, "time_since_restore": 4795.639493465424, "policy_reward_mean": {}, "training_iteration": 146, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a20>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6119048, "episodes_total": 6786, "timesteps_total": 6119048, "episode_reward_mean": -434.78687613909716, "episodes_this_iter": 45, "date": "2019-05-23_10-40-01", "time_this_iter_s": 28.6797616481781, "num_metric_batches_dropped": 0, "episode_reward_min": -651.9309378367705}
{"iterations_since_restore": 147, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.055357622812227, "timesteps_this_iter": 38490, "custom_metrics": {"cost1_max": 226.47534327802967, "cost1_min": 18.001535397228245, "system_level_velocity_mean": 15.286231293024825, "cost2_mean": -72.3711059379079, "cost2_max": -15.426246292673063, "outflow_rate_max": 1464.2587815701017, "cost1_mean": 179.71805703989213, "system_level_velocity_min": 11.795707304094789, "system_level_velocity_max": 19.061366789084992, "outflow_rate_min": 478.1690499040066, "outflow_rate_mean": 1188.8275722208436, "cost2_min": -95.79762739195071}, "done": false, "pid": 24639, "episode_len_mean": 320.05, "info": {"default": {"kl": 0.015664780512452126, "total_loss": 15.157880783081055, "vf_loss": 15.166595458984375, "vf_explained_var": 0.9347366094589233, "cur_lr": 0.0005000000237487257, "entropy": 1.504014492034912, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014660689048469067}, "num_steps_trained": 6157538, "update_time_ms": 9.382, "load_time_ms": 21.728, "sample_time_ms": 18990.152, "num_steps_sampled": 6157538, "grad_time_ms": 10609.828}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4825.163104057312, "timestamp": 1558608030, "time_since_restore": 4825.163104057312, "policy_reward_mean": {}, "training_iteration": 147, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845655f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6157538, "episodes_total": 6832, "timesteps_total": 6157538, "episode_reward_mean": -436.96253017831094, "episodes_this_iter": 46, "date": "2019-05-23_10-40-30", "time_this_iter_s": 29.523610591888428, "num_metric_batches_dropped": 0, "episode_reward_min": -651.9309378367705}
{"iterations_since_restore": 148, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.055357622812227, "timesteps_this_iter": 38424, "custom_metrics": {"cost1_max": 226.47534327802967, "cost1_min": 18.001535397228245, "system_level_velocity_mean": 15.093352795973887, "cost2_mean": -72.30260551257128, "cost2_max": -15.426246292673063, "outflow_rate_max": 1472.696688538458, "cost1_mean": 177.292980527666, "system_level_velocity_min": 11.610190436277186, "system_level_velocity_max": 18.915794085016064, "outflow_rate_min": 478.1690499040066, "outflow_rate_mean": 1178.0071286236068, "cost2_min": -96.84521222427058}, "done": false, "pid": 24639, "episode_len_mean": 320.05, "info": {"default": {"kl": 0.01532463263720274, "total_loss": 17.0165958404541, "vf_loss": 17.024364471435547, "vf_explained_var": 0.9303116798400879, "cur_lr": 0.0005000000237487257, "entropy": 1.5137217044830322, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01358723919838667}, "num_steps_trained": 6195962, "update_time_ms": 9.106, "load_time_ms": 19.76, "sample_time_ms": 18981.488, "num_steps_sampled": 6195962, "grad_time_ms": 10426.95}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4855.006053924561, "timestamp": 1558608060, "time_since_restore": 4855.006053924561, "policy_reward_mean": {}, "training_iteration": 148, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845659e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565f28>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6195962, "episodes_total": 6881, "timesteps_total": 6195962, "episode_reward_mean": -448.9113340638758, "episodes_this_iter": 49, "date": "2019-05-23_10-41-00", "time_this_iter_s": 29.842949867248535, "num_metric_batches_dropped": 0, "episode_reward_min": -655.6656657306524}
{"iterations_since_restore": 149, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.055357622812227, "timesteps_this_iter": 38632, "custom_metrics": {"cost1_max": 226.64726517717813, "cost1_min": 18.001535397228245, "system_level_velocity_mean": 15.14221490051029, "cost2_mean": -73.29603819378009, "cost2_max": -15.426246292673063, "outflow_rate_max": 1472.696688538458, "cost1_mean": 177.77010077075084, "system_level_velocity_min": 11.610190436277186, "system_level_velocity_max": 18.932628710496562, "outflow_rate_min": 478.1690499040066, "outflow_rate_mean": 1185.9881711661299, "cost2_min": -96.84521222427058}, "done": false, "pid": 24639, "episode_len_mean": 320.02, "info": {"default": {"kl": 0.014737755060195923, "total_loss": 17.110448837280273, "vf_loss": 17.11832046508789, "vf_explained_var": 0.9254059195518494, "cur_lr": 0.0005000000237487257, "entropy": 1.4733989238739014, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.0134684257209301}, "num_steps_trained": 6234594, "update_time_ms": 9.194, "load_time_ms": 18.689, "sample_time_ms": 19056.327, "num_steps_sampled": 6234594, "grad_time_ms": 10522.478}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4885.991268634796, "timestamp": 1558608091, "time_since_restore": 4885.991268634796, "policy_reward_mean": {}, "training_iteration": 149, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565be0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6234594, "episodes_total": 6927, "timesteps_total": 6234594, "episode_reward_mean": -448.85936265159876, "episodes_this_iter": 46, "date": "2019-05-23_10-41-31", "time_this_iter_s": 30.985214710235596, "num_metric_batches_dropped": 0, "episode_reward_min": -655.6656657306524}
{"iterations_since_restore": 150, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.95921605103321, "timesteps_this_iter": 39253, "custom_metrics": {"cost1_max": 226.91320230063218, "cost1_min": 85.58466876924354, "system_level_velocity_mean": 15.285298931693386, "cost2_mean": -74.60753043694942, "cost2_max": -50.159651518335735, "outflow_rate_max": 1469.97762638808, "cost1_mean": 181.29883533840191, "system_level_velocity_min": 11.613756263498068, "system_level_velocity_max": 19.057173072625602, "outflow_rate_min": 801.2746642124685, "outflow_rate_mean": 1205.1930195495124, "cost2_min": -96.84521222427058}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.015681453049182892, "total_loss": 15.59581184387207, "vf_loss": 15.602912902832031, "vf_explained_var": 0.9358626008033752, "cur_lr": 0.0005000000237487257, "entropy": 1.4852932691574097, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01305579487234354}, "num_steps_trained": 6273847, "update_time_ms": 9.46, "load_time_ms": 18.87, "sample_time_ms": 19005.084, "num_steps_sampled": 6273847, "grad_time_ms": 10744.199}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4916.555235862732, "timestamp": 1558608122, "time_since_restore": 4916.555235862732, "policy_reward_mean": {}, "training_iteration": 150, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845651d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845655f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565c18>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6273847, "episodes_total": 6973, "timesteps_total": 6273847, "episode_reward_mean": -455.8116320471417, "episodes_this_iter": 46, "date": "2019-05-23_10-42-02", "time_this_iter_s": 30.56396722793579, "num_metric_batches_dropped": 0, "episode_reward_min": -655.6656657306524}
{"iterations_since_restore": 151, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -101.95921605103321, "timesteps_this_iter": 38161, "custom_metrics": {"cost1_max": 227.63605504573238, "cost1_min": 85.58466876924354, "system_level_velocity_mean": 15.547456103874657, "cost2_mean": -77.0802369105806, "cost2_max": -50.159651518335735, "outflow_rate_max": 1469.97762638808, "cost1_mean": 184.71761044740526, "system_level_velocity_min": 11.613756263498068, "system_level_velocity_max": 19.109406103096212, "outflow_rate_min": 801.2746642124685, "outflow_rate_mean": 1221.4690121841863, "cost2_min": -96.59191031257016}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.013946075923740864, "total_loss": 13.841785430908203, "vf_loss": 13.849100112915039, "vf_explained_var": 0.9431455731391907, "cur_lr": 0.0005000000237487257, "entropy": 1.4591162204742432, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01260933093726635}, "num_steps_trained": 6312008, "update_time_ms": 9.425, "load_time_ms": 19.382, "sample_time_ms": 18949.916, "num_steps_sampled": 6312008, "grad_time_ms": 10728.426}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4945.668495416641, "timestamp": 1558608151, "time_since_restore": 4945.668495416641, "policy_reward_mean": {}, "training_iteration": 151, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cf60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c7f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845379b0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6312008, "episodes_total": 7020, "timesteps_total": 6312008, "episode_reward_mean": -443.68823264803564, "episodes_this_iter": 47, "date": "2019-05-23_10-42-31", "time_this_iter_s": 29.1132595539093, "num_metric_batches_dropped": 0, "episode_reward_min": -638.7420475592737}
{"iterations_since_restore": 152, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -251.5861054947124, "timesteps_this_iter": 38512, "custom_metrics": {"cost1_max": 227.63605504573238, "cost1_min": 134.30347400693398, "system_level_velocity_mean": 15.483745288268985, "cost2_mean": -76.90778423113619, "cost2_max": -20.943490644080256, "outflow_rate_max": 1469.7407649912625, "cost1_mean": 185.24580848976711, "system_level_velocity_min": 11.613756263498068, "system_level_velocity_max": 19.109406103096212, "outflow_rate_min": 898.1899540607055, "outflow_rate_mean": 1221.1391142557572, "cost2_min": -97.33264542551478}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015517543070018291, "total_loss": 13.857304573059082, "vf_loss": 13.866780281066895, "vf_explained_var": 0.9392708539962769, "cur_lr": 0.0005000000237487257, "entropy": 1.5012235641479492, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015368448570370674}, "num_steps_trained": 6350520, "update_time_ms": 9.494, "load_time_ms": 18.441, "sample_time_ms": 18977.702, "num_steps_sampled": 6350520, "grad_time_ms": 10682.816}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 4974.982572793961, "timestamp": 1558608180, "time_since_restore": 4974.982572793961, "policy_reward_mean": {}, "training_iteration": 152, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557cc0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6350520, "episodes_total": 7064, "timesteps_total": 6350520, "episode_reward_mean": -439.27091721847484, "episodes_this_iter": 44, "date": "2019-05-23_10-43-00", "time_this_iter_s": 29.314077377319336, "num_metric_batches_dropped": 0, "episode_reward_min": -645.531552515182}
{"iterations_since_restore": 153, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.058237708318458, "timesteps_this_iter": 38276, "custom_metrics": {"cost1_max": 227.77788545855833, "cost1_min": 18.11543422909292, "system_level_velocity_mean": 15.19344031053711, "cost2_mean": -74.21262242620973, "cost2_max": -15.022401375032132, "outflow_rate_max": 1470.1662894213816, "cost1_mean": 179.57657900316363, "system_level_velocity_min": 11.774886526913052, "system_level_velocity_max": 19.11010410813288, "outflow_rate_min": 476.10320957347216, "outflow_rate_mean": 1192.7109941149313, "cost2_min": -97.33264542551478}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.015344073064625263, "total_loss": 11.553711891174316, "vf_loss": 11.562463760375977, "vf_explained_var": 0.9540629982948303, "cur_lr": 0.0005000000237487257, "entropy": 1.5173665285110474, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.014578835107386112}, "num_steps_trained": 6388796, "update_time_ms": 9.38, "load_time_ms": 17.628, "sample_time_ms": 19205.919, "num_steps_sampled": 6388796, "grad_time_ms": 10575.242}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5006.157596349716, "timestamp": 1558608212, "time_since_restore": 5006.157596349716, "policy_reward_mean": {}, "training_iteration": 153, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845378d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c978>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6388796, "episodes_total": 7113, "timesteps_total": 6388796, "episode_reward_mean": -449.62925089875336, "episodes_this_iter": 49, "date": "2019-05-23_10-43-32", "time_this_iter_s": 31.175023555755615, "num_metric_batches_dropped": 0, "episode_reward_min": -648.5580413370054}
{"iterations_since_restore": 154, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.058237708318458, "timesteps_this_iter": 38184, "custom_metrics": {"cost1_max": 227.77788545855833, "cost1_min": 18.11543422909292, "system_level_velocity_mean": 14.860433232678572, "cost2_mean": -72.80154132647228, "cost2_max": -15.022401375032132, "outflow_rate_max": 1470.1662894213816, "cost1_mean": 174.2879045935328, "system_level_velocity_min": 11.784187152318758, "system_level_velocity_max": 19.196260975443522, "outflow_rate_min": 476.10320957347216, "outflow_rate_mean": 1162.0938727794503, "cost2_min": -97.82535589219408}, "done": false, "pid": 24639, "episode_len_mean": 319.74, "info": {"default": {"kl": 0.016507290303707123, "total_loss": 14.466534614562988, "vf_loss": 14.475197792053223, "vf_explained_var": 0.9406359195709229, "cur_lr": 0.0005000000237487257, "entropy": 1.5563958883285522, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014929456636309624}, "num_steps_trained": 6426980, "update_time_ms": 9.269, "load_time_ms": 17.854, "sample_time_ms": 19317.692, "num_steps_sampled": 6426980, "grad_time_ms": 10616.747}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5036.804139614105, "timestamp": 1558608242, "time_since_restore": 5036.804139614105, "policy_reward_mean": {}, "training_iteration": 154, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b9b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b4e0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6426980, "episodes_total": 7161, "timesteps_total": 6426980, "episode_reward_mean": -456.11107166670706, "episodes_this_iter": 48, "date": "2019-05-23_10-44-02", "time_this_iter_s": 30.646543264389038, "num_metric_batches_dropped": 0, "episode_reward_min": -648.5580413370054}
{"iterations_since_restore": 155, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.058237708318458, "timesteps_this_iter": 36660, "custom_metrics": {"cost1_max": 226.9263577686546, "cost1_min": 18.11543422909292, "system_level_velocity_mean": 14.854836419120245, "cost2_mean": -70.86470528806076, "cost2_max": -15.022401375032132, "outflow_rate_max": 1467.8243159703122, "cost1_mean": 173.82596764874387, "system_level_velocity_min": 11.30434091277731, "system_level_velocity_max": 19.196260975443522, "outflow_rate_min": 476.10320957347216, "outflow_rate_mean": 1153.5058607131466, "cost2_min": -99.52915984225629}, "done": false, "pid": 24639, "episode_len_mean": 319.74, "info": {"default": {"kl": 0.015727449208498, "total_loss": 12.680964469909668, "vf_loss": 12.691332817077637, "vf_explained_var": 0.9468556642532349, "cur_lr": 0.0005000000237487257, "entropy": 1.5219694375991821, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.016341309994459152}, "num_steps_trained": 6463640, "update_time_ms": 9.678, "load_time_ms": 17.762, "sample_time_ms": 19188.273, "num_steps_sampled": 6463640, "grad_time_ms": 10456.899}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5064.624003648758, "timestamp": 1558608270, "time_since_restore": 5064.624003648758, "policy_reward_mean": {}, "training_iteration": 155, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530780>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6463640, "episodes_total": 7205, "timesteps_total": 6463640, "episode_reward_mean": -439.8426819237369, "episodes_this_iter": 44, "date": "2019-05-23_10-44-30", "time_this_iter_s": 27.81986403465271, "num_metric_batches_dropped": 0, "episode_reward_min": -647.7473057808529}
{"iterations_since_restore": 156, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.879537419121, "timesteps_this_iter": 37161, "custom_metrics": {"cost1_max": 226.60983007885164, "cost1_min": 133.9451745896501, "system_level_velocity_mean": 14.984207772138037, "cost2_mean": -70.95951934738895, "cost2_max": -48.33732230062931, "outflow_rate_max": 1466.6360232038016, "cost1_mean": 178.88053844790664, "system_level_velocity_min": 11.30434091277731, "system_level_velocity_max": 18.983814140515655, "outflow_rate_min": 922.0071007948649, "outflow_rate_mean": 1172.5909793918704, "cost2_min": -99.52915984225629}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01572611555457115, "total_loss": 15.332159042358398, "vf_loss": 15.338567733764648, "vf_explained_var": 0.9379000663757324, "cur_lr": 0.0005000000237487257, "entropy": 1.5096640586853027, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.012381713837385178}, "num_steps_trained": 6500801, "update_time_ms": 9.638, "load_time_ms": 19.064, "sample_time_ms": 19307.855, "num_steps_sampled": 6500801, "grad_time_ms": 10324.219}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5093.184199810028, "timestamp": 1558608299, "time_since_restore": 5093.184199810028, "policy_reward_mean": {}, "training_iteration": 156, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845571d0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6500801, "episodes_total": 7252, "timesteps_total": 6500801, "episode_reward_mean": -430.7723043875917, "episodes_this_iter": 47, "date": "2019-05-23_10-44-59", "time_this_iter_s": 28.56019616127014, "num_metric_batches_dropped": 0, "episode_reward_min": -647.0613249565366}
{"iterations_since_restore": 157, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.879537419121, "timesteps_this_iter": 38498, "custom_metrics": {"cost1_max": 226.60983007885164, "cost1_min": 137.9389497756105, "system_level_velocity_mean": 14.825054620923616, "cost2_mean": -70.25774017045201, "cost2_max": -51.202816241653245, "outflow_rate_max": 1467.876204934687, "cost1_mean": 177.0208221812801, "system_level_velocity_min": 11.79239187975719, "system_level_velocity_max": 18.983814140515655, "outflow_rate_min": 922.0071007948649, "outflow_rate_mean": 1168.865634551576, "cost2_min": -97.47270843401549}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.015458459965884686, "total_loss": 12.60690975189209, "vf_loss": 12.614717483520508, "vf_explained_var": 0.9514784812927246, "cur_lr": 0.0005000000237487257, "entropy": 1.5977641344070435, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.0136773232370615}, "num_steps_trained": 6539299, "update_time_ms": 9.601, "load_time_ms": 19.092, "sample_time_ms": 19561.4, "num_steps_sampled": 6539299, "grad_time_ms": 10471.245}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5126.740237951279, "timestamp": 1558608332, "time_since_restore": 5126.740237951279, "policy_reward_mean": {}, "training_iteration": 157, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549278>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6539299, "episodes_total": 7296, "timesteps_total": 6539299, "episode_reward_mean": -450.6343108129446, "episodes_this_iter": 44, "date": "2019-05-23_10-45-32", "time_this_iter_s": 33.55603814125061, "num_metric_batches_dropped": 0, "episode_reward_min": -637.7205425758402}
{"iterations_since_restore": 158, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.6100538579673, "timesteps_this_iter": 37363, "custom_metrics": {"cost1_max": 228.2616848595662, "cost1_min": 141.11275495244996, "system_level_velocity_mean": 14.772697106128035, "cost2_mean": -70.77303164632107, "cost2_max": -49.00481708434744, "outflow_rate_max": 1470.1800409187551, "cost1_mean": 176.55082488034037, "system_level_velocity_min": 11.85363954190563, "system_level_velocity_max": 19.029272805786945, "outflow_rate_min": 1002.0384977375562, "outflow_rate_mean": 1167.9132622416662, "cost2_min": -97.95509476169195}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014914275147020817, "total_loss": 13.911886215209961, "vf_loss": 13.91923713684082, "vf_explained_var": 0.9452863931655884, "cur_lr": 0.0005000000237487257, "entropy": 1.5291569232940674, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.013013492338359356}, "num_steps_trained": 6576662, "update_time_ms": 9.908, "load_time_ms": 21.1, "sample_time_ms": 19695.304, "num_steps_sampled": 6576662, "grad_time_ms": 10394.283}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5157.1823387146, "timestamp": 1558608363, "time_since_restore": 5157.1823387146, "policy_reward_mean": {}, "training_iteration": 158, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8469a588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845415f8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6576662, "episodes_total": 7344, "timesteps_total": 6576662, "episode_reward_mean": -456.54695192067896, "episodes_this_iter": 48, "date": "2019-05-23_10-46-03", "time_this_iter_s": 30.442100763320923, "num_metric_batches_dropped": 0, "episode_reward_min": -637.7205425758402}
{"iterations_since_restore": 159, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.79011470985555, "timesteps_this_iter": 38346, "custom_metrics": {"cost1_max": 228.2616848595662, "cost1_min": 17.79382076415469, "system_level_velocity_mean": 15.0083480252613, "cost2_mean": -72.3525363719849, "cost2_max": -14.367947047819257, "outflow_rate_max": 1470.8748868762968, "cost1_mean": 177.64774466188828, "system_level_velocity_min": 11.856041517166, "system_level_velocity_max": 19.066585229013036, "outflow_rate_min": 456.9659565674539, "outflow_rate_mean": 1173.8407835536207, "cost2_min": -99.07851578545863}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.015217635780572891, "total_loss": 16.138397216796875, "vf_loss": 16.146671295166016, "vf_explained_var": 0.9379225373268127, "cur_lr": 0.0005000000237487257, "entropy": 1.5443416833877563, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.014050888828933239}, "num_steps_trained": 6615008, "update_time_ms": 9.738, "load_time_ms": 22.263, "sample_time_ms": 19828.529, "num_steps_sampled": 6615008, "grad_time_ms": 10327.009}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5188.829203128815, "timestamp": 1558608395, "time_since_restore": 5188.829203128815, "policy_reward_mean": {}, "training_iteration": 159, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84541e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845418d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565f28>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6615008, "episodes_total": 7391, "timesteps_total": 6615008, "episode_reward_mean": -447.59208320268675, "episodes_this_iter": 47, "date": "2019-05-23_10-46-35", "time_this_iter_s": 31.646864414215088, "num_metric_batches_dropped": 0, "episode_reward_min": -627.4383827248716}
{"iterations_since_restore": 160, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.79011470985555, "timesteps_this_iter": 37987, "custom_metrics": {"cost1_max": 227.6256163293113, "cost1_min": 17.79382076415469, "system_level_velocity_mean": 14.88650787176935, "cost2_mean": -72.95944170717512, "cost2_max": -14.367947047819257, "outflow_rate_max": 1470.8748868762968, "cost1_mean": 176.2342533009868, "system_level_velocity_min": 10.77789875579646, "system_level_velocity_max": 19.066585229013036, "outflow_rate_min": 456.9659565674539, "outflow_rate_mean": 1169.7751931459827, "cost2_min": -99.97677436728361}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.016209831461310387, "total_loss": 14.535210609436035, "vf_loss": 14.543559074401855, "vf_explained_var": 0.9412701725959778, "cur_lr": 0.0005000000237487257, "entropy": 1.5751845836639404, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014502021484076977}, "num_steps_trained": 6652995, "update_time_ms": 9.664, "load_time_ms": 22.347, "sample_time_ms": 19914.441, "num_steps_sampled": 6652995, "grad_time_ms": 10224.183}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5219.2092299461365, "timestamp": 1558608425, "time_since_restore": 5219.2092299461365, "policy_reward_mean": {}, "training_iteration": 160, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565b70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565438>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6652995, "episodes_total": 7436, "timesteps_total": 6652995, "episode_reward_mean": -456.0575490549225, "episodes_this_iter": 45, "date": "2019-05-23_10-47-05", "time_this_iter_s": 30.380026817321777, "num_metric_batches_dropped": 0, "episode_reward_min": -684.3861959138609}
{"iterations_since_restore": 161, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -254.80183797143576, "timesteps_this_iter": 38050, "custom_metrics": {"cost1_max": 226.93187505478232, "cost1_min": 123.5935273161297, "system_level_velocity_mean": 14.976938833300535, "cost2_mean": -72.0544125457617, "cost2_max": -20.169595129668043, "outflow_rate_max": 1469.4280501092078, "cost1_mean": 178.91505860872945, "system_level_velocity_min": 10.77789875579646, "system_level_velocity_max": 18.961253183919627, "outflow_rate_min": 879.4319776328052, "outflow_rate_mean": 1184.391710971971, "cost2_min": -99.97677436728361}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01523581426590681, "total_loss": 14.139510154724121, "vf_loss": 14.146820068359375, "vf_explained_var": 0.9427112340927124, "cur_lr": 0.0005000000237487257, "entropy": 1.561854362487793, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013095119968056679}, "num_steps_trained": 6691045, "update_time_ms": 9.778, "load_time_ms": 22.753, "sample_time_ms": 19948.044, "num_steps_sampled": 6691045, "grad_time_ms": 10272.435}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5249.133985996246, "timestamp": 1558608455, "time_since_restore": 5249.133985996246, "policy_reward_mean": {}, "training_iteration": 161, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455cc88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c518>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6691045, "episodes_total": 7483, "timesteps_total": 6691045, "episode_reward_mean": -453.283333846017, "episodes_this_iter": 47, "date": "2019-05-23_10-47-35", "time_this_iter_s": 29.924756050109863, "num_metric_batches_dropped": 0, "episode_reward_min": -684.3861959138609}
{"iterations_since_restore": 162, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.10666050492915, "timesteps_this_iter": 37045, "custom_metrics": {"cost1_max": 227.47544783772014, "cost1_min": 81.47464745732618, "system_level_velocity_mean": 15.270524179804925, "cost2_mean": -70.71915099998019, "cost2_max": -20.169595129668043, "outflow_rate_max": 1469.5094153297925, "cost1_mean": 180.08697144542407, "system_level_velocity_min": 11.720979765616956, "system_level_velocity_max": 19.059019762674616, "outflow_rate_min": 772.8338583144041, "outflow_rate_mean": 1184.4117684525067, "cost2_min": -98.73218028091537}, "done": false, "pid": 24639, "episode_len_mean": 321.85, "info": {"default": {"kl": 0.01488253939896822, "total_loss": 13.260749816894531, "vf_loss": 13.268863677978516, "vf_explained_var": 0.9443075060844421, "cur_lr": 0.0005000000237487257, "entropy": 1.4799304008483887, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01376443263143301}, "num_steps_trained": 6728090, "update_time_ms": 9.921, "load_time_ms": 23.778, "sample_time_ms": 19890.205, "num_steps_sampled": 6728090, "grad_time_ms": 10253.581}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5277.683506965637, "timestamp": 1558608483, "time_since_restore": 5277.683506965637, "policy_reward_mean": {}, "training_iteration": 162, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bb38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2e8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6728090, "episodes_total": 7529, "timesteps_total": 6728090, "episode_reward_mean": -430.9752892225147, "episodes_this_iter": 46, "date": "2019-05-23_10-48-03", "time_this_iter_s": 28.54952096939087, "num_metric_batches_dropped": 0, "episode_reward_min": -669.7015813866964}
{"iterations_since_restore": 163, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.10666050492915, "timesteps_this_iter": 37070, "custom_metrics": {"cost1_max": 227.76230249026898, "cost1_min": 81.47464745732618, "system_level_velocity_mean": 15.321363001124956, "cost2_mean": -72.25654096347743, "cost2_max": -43.64655030952216, "outflow_rate_max": 1469.5094153297925, "cost1_mean": 180.92903807748016, "system_level_velocity_min": 11.9678598056106, "system_level_velocity_max": 19.111701893967165, "outflow_rate_min": 772.8338583144041, "outflow_rate_mean": 1189.1617965820894, "cost2_min": -96.79795214354967}, "done": false, "pid": 24639, "episode_len_mean": 321.85, "info": {"default": {"kl": 0.014798786491155624, "total_loss": 11.31032943725586, "vf_loss": 11.319120407104492, "vf_explained_var": 0.9517426490783691, "cur_lr": 0.0005000000237487257, "entropy": 1.5070663690567017, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014409822411835194}, "num_steps_trained": 6765160, "update_time_ms": 10.05, "load_time_ms": 24.043, "sample_time_ms": 19691.952, "num_steps_sampled": 6765160, "grad_time_ms": 10241.246}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5306.737205028534, "timestamp": 1558608513, "time_since_restore": 5306.737205028534, "policy_reward_mean": {}, "training_iteration": 163, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454beb8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6765160, "episodes_total": 7576, "timesteps_total": 6765160, "episode_reward_mean": -427.3139349453924, "episodes_this_iter": 47, "date": "2019-05-23_10-48-33", "time_this_iter_s": 29.05369806289673, "num_metric_batches_dropped": 0, "episode_reward_min": -624.286886556018}
{"iterations_since_restore": 164, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.532555874855348, "timesteps_this_iter": 38042, "custom_metrics": {"cost1_max": 227.76230249026898, "cost1_min": 17.95925103064734, "system_level_velocity_mean": 15.08736412740064, "cost2_mean": -71.92221902324818, "cost2_max": -15.644319321864582, "outflow_rate_max": 1470.1480157609774, "cost1_mean": 178.53556040164932, "system_level_velocity_min": 11.36193848278566, "system_level_velocity_max": 19.111701893967165, "outflow_rate_min": 448.5093812448499, "outflow_rate_mean": 1180.179568598442, "cost2_min": -96.79795214354967}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.01636327989399433, "total_loss": 14.222528457641602, "vf_loss": 14.232145309448242, "vf_explained_var": 0.9394771456718445, "cur_lr": 0.0005000000237487257, "entropy": 1.545649528503418, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.0158318392932415}, "num_steps_trained": 6803202, "update_time_ms": 9.848, "load_time_ms": 24.565, "sample_time_ms": 19636.076, "num_steps_sampled": 6803202, "grad_time_ms": 10188.991}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5336.2863166332245, "timestamp": 1558608542, "time_since_restore": 5336.2863166332245, "policy_reward_mean": {}, "training_iteration": 164, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845379b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557f98>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6803202, "episodes_total": 7625, "timesteps_total": 6803202, "episode_reward_mean": -434.90797670691757, "episodes_this_iter": 49, "date": "2019-05-23_10-49-02", "time_this_iter_s": 29.54911160469055, "num_metric_batches_dropped": 0, "episode_reward_min": -671.208908721244}
{"iterations_since_restore": 165, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.532555874855348, "timesteps_this_iter": 36588, "custom_metrics": {"cost1_max": 227.40789465119974, "cost1_min": 17.95925103064734, "system_level_velocity_mean": 15.269088015499229, "cost2_mean": -72.59434919760615, "cost2_max": -15.644319321864582, "outflow_rate_max": 1470.1480157609774, "cost1_mean": 180.7776634547082, "system_level_velocity_min": 11.36193848278566, "system_level_velocity_max": 19.081716347610982, "outflow_rate_min": 448.5093812448499, "outflow_rate_mean": 1190.0846888470157, "cost2_min": -96.91644674793557}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.016553031280636787, "total_loss": 14.510639190673828, "vf_loss": 14.520307540893555, "vf_explained_var": 0.9367321133613586, "cur_lr": 0.0005000000237487257, "entropy": 1.4955285787582397, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.01595194637775421}, "num_steps_trained": 6839790, "update_time_ms": 9.664, "load_time_ms": 24.035, "sample_time_ms": 19611.953, "num_steps_sampled": 6839790, "grad_time_ms": 10359.122}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5365.555135965347, "timestamp": 1558608571, "time_since_restore": 5365.555135965347, "policy_reward_mean": {}, "training_iteration": 165, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aba8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6839790, "episodes_total": 7669, "timesteps_total": 6839790, "episode_reward_mean": -427.42769978398735, "episodes_this_iter": 44, "date": "2019-05-23_10-49-31", "time_this_iter_s": 29.268819332122803, "num_metric_batches_dropped": 0, "episode_reward_min": -671.208908721244}
{"iterations_since_restore": 166, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.201497720304445, "timesteps_this_iter": 36725, "custom_metrics": {"cost1_max": 227.21445930733248, "cost1_min": 18.12724689019132, "system_level_velocity_mean": 15.43178419631874, "cost2_mean": -72.33568381870026, "cost2_max": -17.42558637773855, "outflow_rate_max": 1468.814174748829, "cost1_mean": 182.61280869393852, "system_level_velocity_min": 11.736328634441275, "system_level_velocity_max": 19.03473379247794, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1193.6902688196262, "cost2_min": -96.97976438601785}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.014461403712630272, "total_loss": 14.101868629455566, "vf_loss": 14.108577728271484, "vf_explained_var": 0.9387236833572388, "cur_lr": 0.0005000000237487257, "entropy": 1.4684250354766846, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.012200023978948593}, "num_steps_trained": 6876515, "update_time_ms": 9.604, "load_time_ms": 23.749, "sample_time_ms": 19433.672, "num_steps_sampled": 6876515, "grad_time_ms": 10578.075}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5394.529812574387, "timestamp": 1558608600, "time_since_restore": 5394.529812574387, "policy_reward_mean": {}, "training_iteration": 166, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454be48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b2b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b860>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6876515, "episodes_total": 7717, "timesteps_total": 6876515, "episode_reward_mean": -415.4343469676239, "episodes_this_iter": 48, "date": "2019-05-23_10-50-00", "time_this_iter_s": 28.974676609039307, "num_metric_batches_dropped": 0, "episode_reward_min": -641.2654006397091}
{"iterations_since_restore": 167, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.201497720304445, "timesteps_this_iter": 37245, "custom_metrics": {"cost1_max": 227.01296008023616, "cost1_min": 18.12724689019132, "system_level_velocity_mean": 15.679942377509251, "cost2_mean": -74.50450727331575, "cost2_max": -17.42558637773855, "outflow_rate_max": 1469.0417491238923, "cost1_mean": 184.21330315902654, "system_level_velocity_min": 11.736328634441275, "system_level_velocity_max": 19.033888140615673, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1204.039207961535, "cost2_min": -96.97976438601785}, "done": false, "pid": 24639, "episode_len_mean": 319.94, "info": {"default": {"kl": 0.013914616778492928, "total_loss": 15.659866333007812, "vf_loss": 15.665338516235352, "vf_explained_var": 0.9321488738059998, "cur_lr": 0.0005000000237487257, "entropy": 1.4405468702316284, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01075574941933155}, "num_steps_trained": 6913760, "update_time_ms": 9.475, "load_time_ms": 23.598, "sample_time_ms": 19190.713, "num_steps_sampled": 6913760, "grad_time_ms": 10437.106}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5424.20890712738, "timestamp": 1558608630, "time_since_restore": 5424.20890712738, "policy_reward_mean": {}, "training_iteration": 167, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa58>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6913760, "episodes_total": 7765, "timesteps_total": 6913760, "episode_reward_mean": -406.4302276342885, "episodes_this_iter": 48, "date": "2019-05-23_10-50-30", "time_this_iter_s": 29.679094552993774, "num_metric_batches_dropped": 0, "episode_reward_min": -557.0510575320543}
{"iterations_since_restore": 168, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.435985775935382, "timesteps_this_iter": 37117, "custom_metrics": {"cost1_max": 227.01296008023616, "cost1_min": 18.051589600407798, "system_level_velocity_mean": 15.760644759138717, "cost2_mean": -75.0066161869101, "cost2_max": -14.804576915794037, "outflow_rate_max": 1469.0417491238923, "cost1_mean": 183.18684997002302, "system_level_velocity_min": 12.000233579517639, "system_level_velocity_max": 19.032728189754913, "outflow_rate_min": 453.06258849431106, "outflow_rate_mean": 1201.3758295858343, "cost2_min": -97.52245163527843}, "done": false, "pid": 24639, "episode_len_mean": 316.96, "info": {"default": {"kl": 0.0142513457685709, "total_loss": 13.06939697265625, "vf_loss": 13.077455520629883, "vf_explained_var": 0.9433808922767639, "cur_lr": 0.0005000000237487257, "entropy": 1.5074467658996582, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013470696285367012}, "num_steps_trained": 6950877, "update_time_ms": 9.153, "load_time_ms": 23.428, "sample_time_ms": 19026.414, "num_steps_sampled": 6950877, "grad_time_ms": 10462.301}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5453.2454652786255, "timestamp": 1558608659, "time_since_restore": 5453.2454652786255, "policy_reward_mean": {}, "training_iteration": 168, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454beb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b208>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6950877, "episodes_total": 7811, "timesteps_total": 6950877, "episode_reward_mean": -408.23636802375785, "episodes_this_iter": 46, "date": "2019-05-23_10-50-59", "time_this_iter_s": 29.036558151245117, "num_metric_batches_dropped": 0, "episode_reward_min": -625.5399902005017}
{"iterations_since_restore": 169, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.435985775935382, "timesteps_this_iter": 36929, "custom_metrics": {"cost1_max": 226.91244820853277, "cost1_min": 18.051589600407798, "system_level_velocity_mean": 15.338215727300131, "cost2_mean": -72.90676562097542, "cost2_max": -14.804576915794037, "outflow_rate_max": 1468.3943976698677, "cost1_mean": 178.1846072470709, "system_level_velocity_min": 12.204304887248165, "system_level_velocity_max": 18.99926671684213, "outflow_rate_min": 453.06258849431106, "outflow_rate_mean": 1169.1192312573924, "cost2_min": -98.46687864783448}, "done": false, "pid": 24639, "episode_len_mean": 316.96, "info": {"default": {"kl": 0.01622377522289753, "total_loss": 13.240388870239258, "vf_loss": 13.247217178344727, "vf_explained_var": 0.9440344572067261, "cur_lr": 0.0005000000237487257, "entropy": 1.5545482635498047, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.01298847422003746}, "num_steps_trained": 6987806, "update_time_ms": 9.171, "load_time_ms": 24.023, "sample_time_ms": 18832.927, "num_steps_sampled": 6987806, "grad_time_ms": 10464.776}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5483.0280430316925, "timestamp": 1558608689, "time_since_restore": 5483.0280430316925, "policy_reward_mean": {}, "training_iteration": 169, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456add8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a1d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae80>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 6987806, "episodes_total": 7859, "timesteps_total": 6987806, "episode_reward_mean": -419.6202872581296, "episodes_this_iter": 48, "date": "2019-05-23_10-51-29", "time_this_iter_s": 29.782577753067017, "num_metric_batches_dropped": 0, "episode_reward_min": -625.5399902005017}
{"iterations_since_restore": 170, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -252.30041008243805, "timesteps_this_iter": 36568, "custom_metrics": {"cost1_max": 226.91244820853277, "cost1_min": 137.0552060806319, "system_level_velocity_mean": 15.38281608105169, "cost2_mean": -74.15886002526878, "cost2_max": -44.11805905211249, "outflow_rate_max": 1468.3417121571435, "cost1_mean": 183.9023817955341, "system_level_velocity_min": 11.836443402976517, "system_level_velocity_max": 18.99926671684213, "outflow_rate_min": 939.7564516362062, "outflow_rate_mean": 1195.8202803580468, "cost2_min": -98.46687864783448}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.01548567321151495, "total_loss": 14.332684516906738, "vf_loss": 14.341375350952148, "vf_explained_var": 0.9366726875305176, "cur_lr": 0.0005000000237487257, "entropy": 1.5039364099502563, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.014571437612175941}, "num_steps_trained": 7024374, "update_time_ms": 9.21, "load_time_ms": 22.745, "sample_time_ms": 18848.411, "num_steps_sampled": 7024374, "grad_time_ms": 10372.915}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5512.621317863464, "timestamp": 1558608719, "time_since_restore": 5512.621317863464, "policy_reward_mean": {}, "training_iteration": 170, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456acc0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7024374, "episodes_total": 7902, "timesteps_total": 7024374, "episode_reward_mean": -421.2527980981301, "episodes_this_iter": 43, "date": "2019-05-23_10-51-59", "time_this_iter_s": 29.59327483177185, "num_metric_batches_dropped": 0, "episode_reward_min": -596.8253055719815}
{"iterations_since_restore": 171, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -165.45993027009547, "timesteps_this_iter": 36876, "custom_metrics": {"cost1_max": 227.2590265388892, "cost1_min": 132.20823135210995, "system_level_velocity_mean": 15.38101695592205, "cost2_mean": -72.13091967651499, "cost2_max": -43.09401754666825, "outflow_rate_max": 1469.8838957843564, "cost1_mean": 182.59158858753537, "system_level_velocity_min": 11.661391866226682, "system_level_velocity_max": 19.041170527090856, "outflow_rate_min": 899.148451636206, "outflow_rate_mean": 1189.322557421902, "cost2_min": -95.66029273448649}, "done": false, "pid": 24639, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.015896925702691078, "total_loss": 16.027599334716797, "vf_loss": 16.03568458557129, "vf_explained_var": 0.9311110377311707, "cur_lr": 0.0005000000237487257, "entropy": 1.616147518157959, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014119903557002544}, "num_steps_trained": 7061250, "update_time_ms": 9.006, "load_time_ms": 22.577, "sample_time_ms": 18853.914, "num_steps_sampled": 7061250, "grad_time_ms": 10315.128}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5542.012752771378, "timestamp": 1558608748, "time_since_restore": 5542.012752771378, "policy_reward_mean": {}, "training_iteration": 171, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a9e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a080>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7061250, "episodes_total": 7951, "timesteps_total": 7061250, "episode_reward_mean": -418.32256815560913, "episodes_this_iter": 49, "date": "2019-05-23_10-52-28", "time_this_iter_s": 29.391434907913208, "num_metric_batches_dropped": 0, "episode_reward_min": -580.1614500450028}
{"iterations_since_restore": 172, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.961868261340555, "timesteps_this_iter": 34820, "custom_metrics": {"cost1_max": 227.2590265388892, "cost1_min": 17.859357109972205, "system_level_velocity_mean": 14.975113558880595, "cost2_mean": -67.22934673427906, "cost2_max": -17.23527133002481, "outflow_rate_max": 1469.8838957843564, "cost1_mean": 174.27583640149155, "system_level_velocity_min": 11.661391866226682, "system_level_velocity_max": 19.041170527090856, "outflow_rate_min": 440.0050268646629, "outflow_rate_mean": 1142.5365835134455, "cost2_min": -94.43034537769637}, "done": false, "pid": 24639, "episode_len_mean": 318.76, "info": {"default": {"kl": 0.01792222261428833, "total_loss": 11.49748420715332, "vf_loss": 11.506514549255371, "vf_explained_var": 0.9497557282447815, "cur_lr": 0.0005000000237487257, "entropy": 1.5449531078338623, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.015835609287023544}, "num_steps_trained": 7096070, "update_time_ms": 8.928, "load_time_ms": 21.713, "sample_time_ms": 18844.932, "num_steps_sampled": 7096070, "grad_time_ms": 10304.031}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5570.349472045898, "timestamp": 1558608776, "time_since_restore": 5570.349472045898, "policy_reward_mean": {}, "training_iteration": 172, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845347f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84534ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454b860>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7096070, "episodes_total": 7999, "timesteps_total": 7096070, "episode_reward_mean": -410.22327694971864, "episodes_this_iter": 48, "date": "2019-05-23_10-52-56", "time_this_iter_s": 28.336719274520874, "num_metric_batches_dropped": 0, "episode_reward_min": -598.1204755711727}
{"iterations_since_restore": 173, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.961868261340555, "timesteps_this_iter": 36193, "custom_metrics": {"cost1_max": 227.2590265388892, "cost1_min": 17.859357109972205, "system_level_velocity_mean": 14.971117677156872, "cost2_mean": -66.49707668126068, "cost2_max": -17.23527133002481, "outflow_rate_max": 1468.2368143142126, "cost1_mean": 173.60733316727143, "system_level_velocity_min": 11.707269029884234, "system_level_velocity_max": 19.041170527090856, "outflow_rate_min": 440.0050268646629, "outflow_rate_mean": 1136.7701964220196, "cost2_min": -94.08634780448466}, "done": false, "pid": 24639, "episode_len_mean": 317.94, "info": {"default": {"kl": 0.015416021458804607, "total_loss": 13.91785717010498, "vf_loss": 13.925509452819824, "vf_explained_var": 0.9430930614471436, "cur_lr": 0.0005000000237487257, "entropy": 1.6595470905303955, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013505452312529087}, "num_steps_trained": 7132263, "update_time_ms": 8.681, "load_time_ms": 22.626, "sample_time_ms": 18802.646, "num_steps_sampled": 7132263, "grad_time_ms": 10301.84}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5598.959684610367, "timestamp": 1558608805, "time_since_restore": 5598.959684610367, "policy_reward_mean": {}, "training_iteration": 173, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ac18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a6d8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7132263, "episodes_total": 8043, "timesteps_total": 7132263, "episode_reward_mean": -405.4441509606191, "episodes_this_iter": 44, "date": "2019-05-23_10-53-25", "time_this_iter_s": 28.610212564468384, "num_metric_batches_dropped": 0, "episode_reward_min": -615.4499088695939}
{"iterations_since_restore": 174, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.93829190900226, "timesteps_this_iter": 36351, "custom_metrics": {"cost1_max": 226.73971727303885, "cost1_min": 23.189916372671725, "system_level_velocity_mean": 15.263172986688677, "cost2_mean": -68.95962550021707, "cost2_max": -16.41236857521567, "outflow_rate_max": 1468.2368143142126, "cost1_mean": 178.3839336374398, "system_level_velocity_min": 11.707269029884234, "system_level_velocity_max": 19.08313504367877, "outflow_rate_min": 502.1133248918595, "outflow_rate_mean": 1167.751010530268, "cost2_min": -94.08634780448466}, "done": false, "pid": 24639, "episode_len_mean": 320.1, "info": {"default": {"kl": 0.014862771145999432, "total_loss": 18.242023468017578, "vf_loss": 18.24967384338379, "vf_explained_var": 0.9248424172401428, "cur_lr": 0.0005000000237487257, "entropy": 1.598587989807129, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.013294145464897156}, "num_steps_trained": 7168614, "update_time_ms": 8.619, "load_time_ms": 21.985, "sample_time_ms": 18771.353, "num_steps_sampled": 7168614, "grad_time_ms": 10298.129}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5628.155797719955, "timestamp": 1558608834, "time_since_restore": 5628.155797719955, "policy_reward_mean": {}, "training_iteration": 174, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456af98>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7168614, "episodes_total": 8093, "timesteps_total": 7168614, "episode_reward_mean": -411.20351012205384, "episodes_this_iter": 50, "date": "2019-05-23_10-53-54", "time_this_iter_s": 29.196113109588623, "num_metric_batches_dropped": 0, "episode_reward_min": -615.4499088695939}
{"iterations_since_restore": 175, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.93829190900226, "timesteps_this_iter": 35811, "custom_metrics": {"cost1_max": 226.73971727303885, "cost1_min": 23.148514004191316, "system_level_velocity_mean": 15.594452073684508, "cost2_mean": -70.17372939268517, "cost2_max": -16.41236857521567, "outflow_rate_max": 1467.6295821475526, "cost1_mean": 180.88753584154452, "system_level_velocity_min": 11.34370035890977, "system_level_velocity_max": 19.08313504367877, "outflow_rate_min": 462.43348918263234, "outflow_rate_mean": 1177.1975430160467, "cost2_min": -93.7829037612911}, "done": false, "pid": 24639, "episode_len_mean": 318.15, "info": {"default": {"kl": 0.014829404652118683, "total_loss": 16.058502197265625, "vf_loss": 16.067333221435547, "vf_explained_var": 0.9320740103721619, "cur_lr": 0.0005000000237487257, "entropy": 1.535825252532959, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.014463318511843681}, "num_steps_trained": 7204425, "update_time_ms": 8.571, "load_time_ms": 21.967, "sample_time_ms": 18693.187, "num_steps_sampled": 7204425, "grad_time_ms": 10252.023}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5656.203057765961, "timestamp": 1558608862, "time_since_restore": 5656.203057765961, "policy_reward_mean": {}, "training_iteration": 175, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565588>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7204425, "episodes_total": 8139, "timesteps_total": 7204425, "episode_reward_mean": -397.1044404487729, "episodes_this_iter": 46, "date": "2019-05-23_10-54-22", "time_this_iter_s": 28.04726004600525, "num_metric_batches_dropped": 0, "episode_reward_min": -601.869233375481}
{"iterations_since_restore": 176, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.93829190900226, "timesteps_this_iter": 36724, "custom_metrics": {"cost1_max": 227.08443898680179, "cost1_min": 23.148514004191316, "system_level_velocity_mean": 15.465076934935965, "cost2_mean": -70.25814030620293, "cost2_max": -16.41236857521567, "outflow_rate_max": 1465.9284905578709, "cost1_mean": 179.47823145218965, "system_level_velocity_min": 11.140547325781656, "system_level_velocity_max": 19.037021226485695, "outflow_rate_min": 462.43348918263234, "outflow_rate_mean": 1170.2338964011149, "cost2_min": -93.86757040723847}, "done": false, "pid": 24639, "episode_len_mean": 318.15, "info": {"default": {"kl": 0.015324685722589493, "total_loss": 14.579265594482422, "vf_loss": 14.5859375, "vf_explained_var": 0.9372643828392029, "cur_lr": 0.0005000000237487257, "entropy": 1.5298243761062622, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.012490724213421345}, "num_steps_trained": 7241149, "update_time_ms": 8.815, "load_time_ms": 22.314, "sample_time_ms": 18664.834, "num_steps_sampled": 7241149, "grad_time_ms": 10231.243}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5684.683802843094, "timestamp": 1558608891, "time_since_restore": 5684.683802843094, "policy_reward_mean": {}, "training_iteration": 176, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455c470>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7241149, "episodes_total": 8185, "timesteps_total": 7241149, "episode_reward_mean": -408.8678261999968, "episodes_this_iter": 46, "date": "2019-05-23_10-54-51", "time_this_iter_s": 28.48074507713318, "num_metric_batches_dropped": 0, "episode_reward_min": -615.4463089105873}
{"iterations_since_restore": 177, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -251.87201087199998, "timesteps_this_iter": 36895, "custom_metrics": {"cost1_max": 228.25281399377025, "cost1_min": 135.43847522624247, "system_level_velocity_mean": 15.621911123386578, "cost2_mean": -73.24006128794449, "cost2_max": -41.3262805039824, "outflow_rate_max": 1466.7012919076399, "cost1_mean": 186.42553257978565, "system_level_velocity_min": 11.140547325781656, "system_level_velocity_max": 19.106038984325828, "outflow_rate_min": 927.3825776444114, "outflow_rate_mean": 1213.2805119376, "cost2_min": -97.97105326013377}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.014902889728546143, "total_loss": 14.619340896606445, "vf_loss": 14.627888679504395, "vf_explained_var": 0.9384744167327881, "cur_lr": 0.0005000000237487257, "entropy": 1.5846495628356934, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.014205715619027615}, "num_steps_trained": 7278044, "update_time_ms": 9.159, "load_time_ms": 22.511, "sample_time_ms": 18553.151, "num_steps_sampled": 7278044, "grad_time_ms": 10201.426}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5712.9625952243805, "timestamp": 1558608919, "time_since_restore": 5712.9625952243805, "policy_reward_mean": {}, "training_iteration": 177, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565da0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7278044, "episodes_total": 8232, "timesteps_total": 7278044, "episode_reward_mean": -413.83194225721587, "episodes_this_iter": 47, "date": "2019-05-23_10-55-19", "time_this_iter_s": 28.27879238128662, "num_metric_batches_dropped": 0, "episode_reward_min": -647.8623399410583}
{"iterations_since_restore": 178, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -241.41176993420763, "timesteps_this_iter": 35511, "custom_metrics": {"cost1_max": 228.25281399377025, "cost1_min": 135.32874546448974, "system_level_velocity_mean": 15.296788764082832, "cost2_mean": -70.70065719645427, "cost2_max": -36.353347491379836, "outflow_rate_max": 1466.7012919076399, "cost1_mean": 182.32903313415608, "system_level_velocity_min": 11.59766150509945, "system_level_velocity_max": 19.106038984325828, "outflow_rate_min": 905.3520000000001, "outflow_rate_mean": 1187.6302060071246, "cost2_min": -97.97105326013377}, "done": false, "pid": 24639, "episode_len_mean": 324.82, "info": {"default": {"kl": 0.01717258244752884, "total_loss": 13.81604290008545, "vf_loss": 13.82613468170166, "vf_explained_var": 0.9406813383102417, "cur_lr": 0.0005000000237487257, "entropy": 1.6356091499328613, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.016612086445093155}, "num_steps_trained": 7313555, "update_time_ms": 9.5, "load_time_ms": 22.643, "sample_time_ms": 18545.463, "num_steps_sampled": 7313555, "grad_time_ms": 10125.287}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5741.163009405136, "timestamp": 1558608947, "time_since_restore": 5741.163009405136, "policy_reward_mean": {}, "training_iteration": 178, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a3c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ae10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456ab00>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7313555, "episodes_total": 8279, "timesteps_total": 7313555, "episode_reward_mean": -413.1034155665318, "episodes_this_iter": 47, "date": "2019-05-23_10-55-47", "time_this_iter_s": 28.200414180755615, "num_metric_batches_dropped": 0, "episode_reward_min": -647.8623399410583}
{"iterations_since_restore": 179, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -241.41176993420763, "timesteps_this_iter": 36371, "custom_metrics": {"cost1_max": 227.1642941029592, "cost1_min": 135.32874546448974, "system_level_velocity_mean": 15.361510463643304, "cost2_mean": -70.99867445005034, "cost2_max": -36.353347491379836, "outflow_rate_max": 1468.4073108868245, "cost1_mean": 183.05557022608215, "system_level_velocity_min": 11.59766150509945, "system_level_velocity_max": 19.075325998770243, "outflow_rate_min": 905.3520000000001, "outflow_rate_mean": 1186.3888420601504, "cost2_min": -94.37525452774844}, "done": false, "pid": 24639, "episode_len_mean": 324.82, "info": {"default": {"kl": 0.015575875528156757, "total_loss": 16.70294189453125, "vf_loss": 16.71305274963379, "vf_explained_var": 0.9311044216156006, "cur_lr": 0.0005000000237487257, "entropy": 1.5795857906341553, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.016023168340325356}, "num_steps_trained": 7349926, "update_time_ms": 9.576, "load_time_ms": 21.809, "sample_time_ms": 18523.41, "num_steps_sampled": 7349926, "grad_time_ms": 9999.19}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5769.424143791199, "timestamp": 1558608976, "time_since_restore": 5769.424143791199, "policy_reward_mean": {}, "training_iteration": 179, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456aa20>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7349926, "episodes_total": 8325, "timesteps_total": 7349926, "episode_reward_mean": -408.6495806615694, "episodes_this_iter": 46, "date": "2019-05-23_10-56-16", "time_this_iter_s": 28.261134386062622, "num_metric_batches_dropped": 0, "episode_reward_min": -627.2290526703688}
{"iterations_since_restore": 180, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -161.11550069393678, "timesteps_this_iter": 36182, "custom_metrics": {"cost1_max": 227.1642941029592, "cost1_min": 128.90635983973704, "system_level_velocity_mean": 15.439814038879215, "cost2_mean": -71.09628911132914, "cost2_max": -36.97172474895797, "outflow_rate_max": 1468.4073108868245, "cost1_mean": 183.15193379920387, "system_level_velocity_min": 11.492510828787196, "system_level_velocity_max": 19.075325998770243, "outflow_rate_min": 911.4855000000002, "outflow_rate_mean": 1190.9016015000975, "cost2_min": -94.37525452774844}, "done": false, "pid": 24639, "episode_len_mean": 323.82, "info": {"default": {"kl": 0.015530569478869438, "total_loss": 13.510544776916504, "vf_loss": 13.52045726776123, "vf_explained_var": 0.9438484311103821, "cur_lr": 0.0005000000237487257, "entropy": 1.633817434310913, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.015808705240488052}, "num_steps_trained": 7386108, "update_time_ms": 9.518, "load_time_ms": 22.684, "sample_time_ms": 18471.432, "num_steps_sampled": 7386108, "grad_time_ms": 10040.664}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5798.918125629425, "timestamp": 1558609005, "time_since_restore": 5798.918125629425, "policy_reward_mean": {}, "training_iteration": 180, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565cc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845657f0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7386108, "episodes_total": 8370, "timesteps_total": 7386108, "episode_reward_mean": -414.5813797998397, "episodes_this_iter": 45, "date": "2019-05-23_10-56-45", "time_this_iter_s": 29.49398183822632, "num_metric_batches_dropped": 0, "episode_reward_min": -627.2290526703688}
{"iterations_since_restore": 181, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -27.137041098821168, "timesteps_this_iter": 36002, "custom_metrics": {"cost1_max": 227.69723108217332, "cost1_min": 23.251641567507317, "system_level_velocity_mean": 15.205556219823968, "cost2_mean": -68.55709074946441, "cost2_max": -18.71845293730514, "outflow_rate_max": 1468.7310745961358, "cost1_mean": 178.0969374537235, "system_level_velocity_min": 11.492510828787196, "system_level_velocity_max": 19.088309641487424, "outflow_rate_min": 504.34013365866934, "outflow_rate_mean": 1159.2845401185502, "cost2_min": -95.82147399397493}, "done": false, "pid": 24639, "episode_len_mean": 320.92, "info": {"default": {"kl": 0.014679847285151482, "total_loss": 14.786327362060547, "vf_loss": 14.795217514038086, "vf_explained_var": 0.9367206692695618, "cur_lr": 0.0005000000237487257, "entropy": 1.5728601217269897, "cur_kl_coeff": 0.3796875476837158, "policy_loss": -0.014463730156421661}, "num_steps_trained": 7422110, "update_time_ms": 9.637, "load_time_ms": 22.692, "sample_time_ms": 18578.346, "num_steps_sampled": 7422110, "grad_time_ms": 10025.12}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5829.226502656937, "timestamp": 1558609036, "time_since_restore": 5829.226502656937, "policy_reward_mean": {}, "training_iteration": 181, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8456a860>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7422110, "episodes_total": 8416, "timesteps_total": 7422110, "episode_reward_mean": -414.19793673490227, "episodes_this_iter": 46, "date": "2019-05-23_10-57-16", "time_this_iter_s": 30.308377027511597, "num_metric_batches_dropped": 0, "episode_reward_min": -618.8722251888989}
{"iterations_since_restore": 182, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.346980589865193, "timesteps_this_iter": 35285, "custom_metrics": {"cost1_max": 227.69723108217332, "cost1_min": 18.037442654074233, "system_level_velocity_mean": 15.684859832491911, "cost2_mean": -70.73544340879317, "cost2_max": -16.000632930320236, "outflow_rate_max": 1468.7310745961358, "cost1_mean": 182.60181706342556, "system_level_velocity_min": 11.781802186494618, "system_level_velocity_max": 19.088309641487424, "outflow_rate_min": 470.30216034021953, "outflow_rate_mean": 1181.1371528577997, "cost2_min": -95.82147399397493}, "done": false, "pid": 24639, "episode_len_mean": 319.12, "info": {"default": {"kl": 0.021142033860087395, "total_loss": 18.076438903808594, "vf_loss": 18.078563690185547, "vf_explained_var": 0.9193220734596252, "cur_lr": 0.0005000000237487257, "entropy": 1.5030782222747803, "cur_kl_coeff": 0.37968751788139343, "policy_loss": -0.010154470801353455}, "num_steps_trained": 7457395, "update_time_ms": 9.479, "load_time_ms": 23.477, "sample_time_ms": 18753.225, "num_steps_sampled": 7457395, "grad_time_ms": 9996.97}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5859.019956588745, "timestamp": 1558609065, "time_since_restore": 5859.019956588745, "policy_reward_mean": {}, "training_iteration": 182, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565940>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7457395, "episodes_total": 8466, "timesteps_total": 7457395, "episode_reward_mean": -390.37633166158486, "episodes_this_iter": 50, "date": "2019-05-23_10-57-45", "time_this_iter_s": 29.79345393180847, "num_metric_batches_dropped": 0, "episode_reward_min": -618.8722251888989}
{"iterations_since_restore": 183, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.346980589865193, "timesteps_this_iter": 35404, "custom_metrics": {"cost1_max": 227.33743469116482, "cost1_min": 18.037442654074233, "system_level_velocity_mean": 15.514150258896416, "cost2_mean": -68.70250811026129, "cost2_max": -16.000632930320236, "outflow_rate_max": 1470.3564304343192, "cost1_mean": 180.40887272540903, "system_level_velocity_min": 11.776810511030526, "system_level_velocity_max": 19.01617671336451, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1161.5583529834423, "cost2_min": -94.0723175768459}, "done": false, "pid": 24639, "episode_len_mean": 319.04, "info": {"default": {"kl": 0.011693502776324749, "total_loss": 11.55445384979248, "vf_loss": 11.564105033874512, "vf_explained_var": 0.9507669806480408, "cur_lr": 0.0005000000237487257, "entropy": 1.6371647119522095, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.01630951650440693}, "num_steps_trained": 7492799, "update_time_ms": 9.372, "load_time_ms": 22.409, "sample_time_ms": 18704.293, "num_steps_sampled": 7492799, "grad_time_ms": 10035.291}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5887.52237701416, "timestamp": 1558609094, "time_since_restore": 5887.52237701416, "policy_reward_mean": {}, "training_iteration": 183, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566ba8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7492799, "episodes_total": 8510, "timesteps_total": 7492799, "episode_reward_mean": -388.246384113955, "episodes_this_iter": 44, "date": "2019-05-23_10-58-14", "time_this_iter_s": 28.50242042541504, "num_metric_batches_dropped": 0, "episode_reward_min": -572.5046135584039}
{"iterations_since_restore": 184, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.346980589865193, "timesteps_this_iter": 35367, "custom_metrics": {"cost1_max": 227.33743469116482, "cost1_min": 18.037442654074233, "system_level_velocity_mean": 15.299179086457904, "cost2_mean": -67.81730203290776, "cost2_max": -16.000632930320236, "outflow_rate_max": 1470.3564304343192, "cost1_mean": 177.74326904962837, "system_level_velocity_min": 11.776810511030526, "system_level_velocity_max": 19.01617671336451, "outflow_rate_min": 444.6769763958757, "outflow_rate_mean": 1148.325783747922, "cost2_min": -94.02787735828184}, "done": false, "pid": 24639, "episode_len_mean": 319.04, "info": {"default": {"kl": 0.011407905258238316, "total_loss": 16.873517990112305, "vf_loss": 16.87948989868164, "vf_explained_var": 0.9286422729492188, "cur_lr": 0.0005000000237487257, "entropy": 1.6211260557174683, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.012472162954509258}, "num_steps_trained": 7528166, "update_time_ms": 9.466, "load_time_ms": 21.694, "sample_time_ms": 18540.205, "num_steps_sampled": 7528166, "grad_time_ms": 10062.201}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5915.338815450668, "timestamp": 1558609122, "time_since_restore": 5915.338815450668, "policy_reward_mean": {}, "training_iteration": 184, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845652b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565b70>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7528166, "episodes_total": 8557, "timesteps_total": 7528166, "episode_reward_mean": -402.96854890180765, "episodes_this_iter": 47, "date": "2019-05-23_10-58-42", "time_this_iter_s": 27.81643843650818, "num_metric_batches_dropped": 0, "episode_reward_min": -564.9128156466742}
{"iterations_since_restore": 185, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.171825658854193, "timesteps_this_iter": 34811, "custom_metrics": {"cost1_max": 226.84445435245917, "cost1_min": 23.15408451211624, "system_level_velocity_mean": 15.019549044168066, "cost2_mean": -66.0577235778716, "cost2_max": -20.64436151273071, "outflow_rate_max": 1459.5649899511918, "cost1_mean": 176.07661084237773, "system_level_velocity_min": 11.70490415592368, "system_level_velocity_max": 19.12347143575044, "outflow_rate_min": 462.43348918263234, "outflow_rate_mean": 1135.7413892598922, "cost2_min": -93.06348437240032}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.012945244088768959, "total_loss": 16.363811492919922, "vf_loss": 16.371288299560547, "vf_explained_var": 0.9298228025436401, "cur_lr": 0.0005000000237487257, "entropy": 1.6592177152633667, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.014849233441054821}, "num_steps_trained": 7562977, "update_time_ms": 9.342, "load_time_ms": 21.687, "sample_time_ms": 18641.191, "num_steps_sampled": 7562977, "grad_time_ms": 10121.075}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5944.99045419693, "timestamp": 1558609152, "time_since_restore": 5944.99045419693, "policy_reward_mean": {}, "training_iteration": 185, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845659e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565400>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7562977, "episodes_total": 8606, "timesteps_total": 7562977, "episode_reward_mean": -411.1163230131279, "episodes_this_iter": 49, "date": "2019-05-23_10-59-12", "time_this_iter_s": 29.651638746261597, "num_metric_batches_dropped": 0, "episode_reward_min": -630.5397481367353}
{"iterations_since_restore": 186, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -29.171825658854193, "timesteps_this_iter": 34522, "custom_metrics": {"cost1_max": 227.0069448685295, "cost1_min": 23.15408451211624, "system_level_velocity_mean": 15.112087761695053, "cost2_mean": -65.02526684421586, "cost2_max": -16.889258680752892, "outflow_rate_max": 1466.9702436003302, "cost1_mean": 177.29623449428766, "system_level_velocity_min": 11.70490415592368, "system_level_velocity_max": 19.12347143575044, "outflow_rate_min": 462.43348918263234, "outflow_rate_mean": 1137.5689317253855, "cost2_min": -95.09896537252564}, "done": false, "pid": 24639, "episode_len_mean": 322.1, "info": {"default": {"kl": 0.013404718600213528, "total_loss": 15.369108200073242, "vf_loss": 15.375061988830566, "vf_explained_var": 0.9335560202598572, "cur_lr": 0.0005000000237487257, "entropy": 1.6356645822525024, "cur_kl_coeff": 0.5695313215255737, "policy_loss": -0.013588286936283112}, "num_steps_trained": 7597499, "update_time_ms": 9.269, "load_time_ms": 21.293, "sample_time_ms": 18645.391, "num_steps_sampled": 7597499, "grad_time_ms": 10139.172}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 5973.69885468483, "timestamp": 1558609180, "time_since_restore": 5973.69885468483, "policy_reward_mean": {}, "training_iteration": 186, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845668d0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7597499, "episodes_total": 8651, "timesteps_total": 7597499, "episode_reward_mean": -400.0680844898105, "episodes_this_iter": 45, "date": "2019-05-23_10-59-40", "time_this_iter_s": 28.70840048789978, "num_metric_batches_dropped": 0, "episode_reward_min": -630.5397481367353}
{"iterations_since_restore": 187, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -89.51526067393388, "timesteps_this_iter": 35565, "custom_metrics": {"cost1_max": 227.0069448685295, "cost1_min": 80.04649845323661, "system_level_velocity_mean": 15.397562258279999, "cost2_mean": -66.31855236655637, "cost2_max": -16.889258680752892, "outflow_rate_max": 1466.9702436003302, "cost1_mean": 181.3718103764781, "system_level_velocity_min": 11.590294640244538, "system_level_velocity_max": 19.041121418013887, "outflow_rate_min": 779.8462170820391, "outflow_rate_mean": 1159.8934199153582, "cost2_min": -95.09896537252564}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.01250244677066803, "total_loss": 17.808202743530273, "vf_loss": 17.813983917236328, "vf_explained_var": 0.9260069727897644, "cur_lr": 0.0005000000237487257, "entropy": 1.6015846729278564, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.012901880778372288}, "num_steps_trained": 7633064, "update_time_ms": 9.303, "load_time_ms": 20.968, "sample_time_ms": 18744.086, "num_steps_sampled": 7633064, "grad_time_ms": 10089.383}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6002.457033395767, "timestamp": 1558609209, "time_since_restore": 6002.457033395767, "policy_reward_mean": {}, "training_iteration": 187, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84549f28>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7633064, "episodes_total": 8699, "timesteps_total": 7633064, "episode_reward_mean": -397.39489610855054, "episodes_this_iter": 48, "date": "2019-05-23_11-00-09", "time_this_iter_s": 28.7581787109375, "num_metric_batches_dropped": 0, "episode_reward_min": -563.0977487922235}
{"iterations_since_restore": 188, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -89.51526067393388, "timesteps_this_iter": 33572, "custom_metrics": {"cost1_max": 226.64819048216663, "cost1_min": 80.04649845323661, "system_level_velocity_mean": 15.641863234622145, "cost2_mean": -67.46605293302936, "cost2_max": -26.607983486914897, "outflow_rate_max": 1462.6414450013772, "cost1_mean": 184.2210683080919, "system_level_velocity_min": 11.590294640244538, "system_level_velocity_max": 19.061987376392203, "outflow_rate_min": 779.8462170820391, "outflow_rate_mean": 1175.1280853551025, "cost2_min": -95.09896537252564}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.011960645206272602, "total_loss": 13.758931159973145, "vf_loss": 13.767048835754395, "vf_explained_var": 0.9358103275299072, "cur_lr": 0.0005000000237487257, "entropy": 1.5393273830413818, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.01492933090776205}, "num_steps_trained": 7666636, "update_time_ms": 9.123, "load_time_ms": 20.635, "sample_time_ms": 18803.091, "num_steps_sampled": 7666636, "grad_time_ms": 9864.668}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6028.988644838333, "timestamp": 1558609236, "time_since_restore": 6028.988644838333, "policy_reward_mean": {}, "training_iteration": 188, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845669e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566cf8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7666636, "episodes_total": 8744, "timesteps_total": 7666636, "episode_reward_mean": -381.04897641124944, "episodes_this_iter": 45, "date": "2019-05-23_11-00-36", "time_this_iter_s": 26.531611442565918, "num_metric_batches_dropped": 0, "episode_reward_min": -563.0977487922235}
{"iterations_since_restore": 189, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.828673356042085, "timesteps_this_iter": 34271, "custom_metrics": {"cost1_max": 227.38773990184518, "cost1_min": 17.948146124288968, "system_level_velocity_mean": 15.853250540100573, "cost2_mean": -67.08222245553979, "cost2_max": -17.950449932922886, "outflow_rate_max": 1466.0622660544334, "cost1_mean": 186.08221455860436, "system_level_velocity_min": 12.380888636441943, "system_level_velocity_max": 19.075855045205838, "outflow_rate_min": 431.75782487237836, "outflow_rate_mean": 1178.2245059119296, "cost2_min": -93.38098390642693}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.012078734114766121, "total_loss": 17.352155685424805, "vf_loss": 17.359399795532227, "vf_explained_var": 0.9180482029914856, "cur_lr": 0.0005000000237487257, "entropy": 1.565514326095581, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.014122781343758106}, "num_steps_trained": 7700907, "update_time_ms": 8.799, "load_time_ms": 20.739, "sample_time_ms": 18940.386, "num_steps_sampled": 7700907, "grad_time_ms": 9789.87}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6057.85663318634, "timestamp": 1558609265, "time_since_restore": 6057.85663318634, "policy_reward_mean": {}, "training_iteration": 189, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557eb8>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7700907, "episodes_total": 8791, "timesteps_total": 7700907, "episode_reward_mean": -363.833451455889, "episodes_this_iter": 47, "date": "2019-05-23_11-01-05", "time_this_iter_s": 28.867988348007202, "num_metric_batches_dropped": 0, "episode_reward_min": -550.28983858635}
{"iterations_since_restore": 190, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.828673356042085, "timesteps_this_iter": 34244, "custom_metrics": {"cost1_max": 227.38773990184518, "cost1_min": 17.948146124288968, "system_level_velocity_mean": 15.631104419020136, "cost2_mean": -64.15934413706381, "cost2_max": -17.950449932922886, "outflow_rate_max": 1466.0622660544334, "cost1_mean": 183.3736775631658, "system_level_velocity_min": 12.263853654393257, "system_level_velocity_max": 19.075855045205838, "outflow_rate_min": 431.75782487237836, "outflow_rate_mean": 1161.1897254602204, "cost2_min": -93.38098390642693}, "done": false, "pid": 24639, "episode_len_mean": 322.02, "info": {"default": {"kl": 0.011779514141380787, "total_loss": 15.888524055480957, "vf_loss": 15.896669387817383, "vf_explained_var": 0.9299288988113403, "cur_lr": 0.0005000000237487257, "entropy": 1.7156572341918945, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.014854495413601398}, "num_steps_trained": 7735151, "update_time_ms": 8.566, "load_time_ms": 19.065, "sample_time_ms": 18796.17, "num_steps_sampled": 7735151, "grad_time_ms": 9732.183}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6085.335127353668, "timestamp": 1558609292, "time_since_restore": 6085.335127353668, "policy_reward_mean": {}, "training_iteration": 190, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557a20>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7735151, "episodes_total": 8838, "timesteps_total": 7735151, "episode_reward_mean": -373.78086751789147, "episodes_this_iter": 47, "date": "2019-05-23_11-01-32", "time_this_iter_s": 27.47849416732788, "num_metric_batches_dropped": 0, "episode_reward_min": -677.1505489493742}
{"iterations_since_restore": 191, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.28579188354634, "timesteps_this_iter": 33624, "custom_metrics": {"cost1_max": 225.52986040161315, "cost1_min": 80.44393158683451, "system_level_velocity_mean": 15.520296035198715, "cost2_mean": -61.75471115186429, "cost2_max": -23.94740636847901, "outflow_rate_max": 1455.2662828950113, "cost1_mean": 181.9980056227206, "system_level_velocity_min": 11.907224745109973, "system_level_velocity_max": 18.864787979802063, "outflow_rate_min": 780.6397210596915, "outflow_rate_mean": 1148.5925154514853, "cost2_min": -90.99284834458982}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.012795810587704182, "total_loss": 16.329374313354492, "vf_loss": 16.33684730529785, "vf_explained_var": 0.9223883152008057, "cur_lr": 0.0005000000237487257, "entropy": 1.63706636428833, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.01476189587265253}, "num_steps_trained": 7768775, "update_time_ms": 8.532, "load_time_ms": 18.637, "sample_time_ms": 18486.575, "num_steps_sampled": 7768775, "grad_time_ms": 9878.827}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6114.02228808403, "timestamp": 1558609321, "time_since_restore": 6114.02228808403, "policy_reward_mean": {}, "training_iteration": 191, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845657f0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7768775, "episodes_total": 8883, "timesteps_total": 7768775, "episode_reward_mean": -376.96856334975996, "episodes_this_iter": 45, "date": "2019-05-23_11-02-01", "time_this_iter_s": 28.68716073036194, "num_metric_batches_dropped": 0, "episode_reward_min": -677.1505489493742}
{"iterations_since_restore": 192, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -90.28579188354634, "timesteps_this_iter": 34760, "custom_metrics": {"cost1_max": 226.38790451688982, "cost1_min": 80.44393158683451, "system_level_velocity_mean": 15.560395969170216, "cost2_mean": -63.320601549348574, "cost2_max": -27.40712894036515, "outflow_rate_max": 1455.2662828950113, "cost1_mean": 182.8687345227844, "system_level_velocity_min": 11.270826622188691, "system_level_velocity_max": 18.98049639757993, "outflow_rate_min": 780.6397210596915, "outflow_rate_mean": 1162.5878435019008, "cost2_min": -87.81395303687314}, "done": false, "pid": 24639, "episode_len_mean": 322.92, "info": {"default": {"kl": 0.015590669587254524, "total_loss": 16.822490692138672, "vf_loss": 16.82607650756836, "vf_explained_var": 0.9227575063705444, "cur_lr": 0.0005000000237487257, "entropy": 1.6498324871063232, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.012464375235140324}, "num_steps_trained": 7803535, "update_time_ms": 8.731, "load_time_ms": 19.077, "sample_time_ms": 18299.834, "num_steps_sampled": 7803535, "grad_time_ms": 9996.39}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6143.159571170807, "timestamp": 1558609350, "time_since_restore": 6143.159571170807, "policy_reward_mean": {}, "training_iteration": 192, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845573c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84557550>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7803535, "episodes_total": 8932, "timesteps_total": 7803535, "episode_reward_mean": -382.1525319918961, "episodes_this_iter": 49, "date": "2019-05-23_11-02-30", "time_this_iter_s": 29.137283086776733, "num_metric_batches_dropped": 0, "episode_reward_min": -677.1505489493742}
{"iterations_since_restore": 193, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -249.70720802362507, "timesteps_this_iter": 33175, "custom_metrics": {"cost1_max": 226.38790451688982, "cost1_min": 133.66802416070198, "system_level_velocity_mean": 15.533544866853601, "cost2_mean": -62.3377702301407, "cost2_max": -30.011770016873836, "outflow_rate_max": 1452.5673988259978, "cost1_mean": 184.03863328846543, "system_level_velocity_min": 11.270826622188691, "system_level_velocity_max": 18.98049639757993, "outflow_rate_min": 864.1855041322311, "outflow_rate_mean": 1160.8987100308875, "cost2_min": -87.81395303687314}, "done": false, "pid": 24639, "episode_len_mean": 325.0, "info": {"default": {"kl": 0.013440761715173721, "total_loss": 13.059971809387207, "vf_loss": 13.067811965942383, "vf_explained_var": 0.9391067028045654, "cur_lr": 0.0005000000237487257, "entropy": 1.683974027633667, "cur_kl_coeff": 0.5695313215255737, "policy_loss": -0.015495428815484047}, "num_steps_trained": 7836710, "update_time_ms": 9.038, "load_time_ms": 19.792, "sample_time_ms": 18249.505, "num_steps_sampled": 7836710, "grad_time_ms": 9892.156}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6170.11211514473, "timestamp": 1558609377, "time_since_restore": 6170.11211514473, "policy_reward_mean": {}, "training_iteration": 193, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845650b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565ef0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7836710, "episodes_total": 8975, "timesteps_total": 7836710, "episode_reward_mean": -376.8905631742592, "episodes_this_iter": 43, "date": "2019-05-23_11-02-57", "time_this_iter_s": 26.95254397392273, "num_metric_batches_dropped": 0, "episode_reward_min": -639.5152373608338}
{"iterations_since_restore": 194, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.63367385672099, "timesteps_this_iter": 33164, "custom_metrics": {"cost1_max": 223.2692999790865, "cost1_min": 85.86517690835517, "system_level_velocity_mean": 15.256471082647392, "cost2_mean": -57.722751162239774, "cost2_max": -29.429914928472197, "outflow_rate_max": 1442.0024219010156, "cost1_mean": 178.97720722803558, "system_level_velocity_min": 11.47559118636741, "system_level_velocity_max": 18.969082564824564, "outflow_rate_min": 813.5175097449604, "outflow_rate_mean": 1118.3295911700118, "cost2_min": -85.6269590965199}, "done": false, "pid": 24639, "episode_len_mean": 323.0, "info": {"default": {"kl": 0.014124663546681404, "total_loss": 11.542181015014648, "vf_loss": 11.549757957458496, "vf_explained_var": 0.9458339810371399, "cur_lr": 0.0005000000237487257, "entropy": 1.693670630455017, "cur_kl_coeff": 0.5695313215255737, "policy_loss": -0.015620940364897251}, "num_steps_trained": 7869874, "update_time_ms": 9.149, "load_time_ms": 19.706, "sample_time_ms": 18370.635, "num_steps_sampled": 7869874, "grad_time_ms": 9702.172}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6197.241824626923, "timestamp": 1558609404, "time_since_restore": 6197.241824626923, "policy_reward_mean": {}, "training_iteration": 194, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845665c0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7869874, "episodes_total": 9021, "timesteps_total": 7869874, "episode_reward_mean": -371.23255283344474, "episodes_this_iter": 46, "date": "2019-05-23_11-03-24", "time_this_iter_s": 27.129709482192993, "num_metric_batches_dropped": 0, "episode_reward_min": -616.5330432213918}
{"iterations_since_restore": 195, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -99.63367385672099, "timesteps_this_iter": 34452, "custom_metrics": {"cost1_max": 223.20186897290938, "cost1_min": 85.86517690835517, "system_level_velocity_mean": 15.23744268653628, "cost2_mean": -58.7766606575606, "cost2_max": -29.429914928472197, "outflow_rate_max": 1438.077533943329, "cost1_mean": 178.32041981301444, "system_level_velocity_min": 11.47559118636741, "system_level_velocity_max": 18.969082564824564, "outflow_rate_min": 813.5175097449604, "outflow_rate_mean": 1120.589393175308, "cost2_min": -85.6269590965199}, "done": false, "pid": 24639, "episode_len_mean": 321.72, "info": {"default": {"kl": 0.014048670418560505, "total_loss": 12.630515098571777, "vf_loss": 12.639775276184082, "vf_explained_var": 0.9473227858543396, "cur_lr": 0.0005000000237487257, "entropy": 1.7269779443740845, "cur_kl_coeff": 0.5695313215255737, "policy_loss": -0.017261255532503128}, "num_steps_trained": 7904326, "update_time_ms": 9.125, "load_time_ms": 19.96, "sample_time_ms": 18371.205, "num_steps_sampled": 7904326, "grad_time_ms": 9486.453}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6224.711280822754, "timestamp": 1558609432, "time_since_restore": 6224.711280822754, "policy_reward_mean": {}, "training_iteration": 195, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845664e0>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7904326, "episodes_total": 9071, "timesteps_total": 7904326, "episode_reward_mean": -379.46869455532186, "episodes_this_iter": 50, "date": "2019-05-23_11-03-52", "time_this_iter_s": 27.4694561958313, "num_metric_batches_dropped": 0, "episode_reward_min": -616.5330432213918}
{"iterations_since_restore": 196, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -21.356731618671294, "timesteps_this_iter": 33330, "custom_metrics": {"cost1_max": 223.08079539553455, "cost1_min": 18.82501048707545, "system_level_velocity_mean": 15.25737270939091, "cost2_mean": -59.839307112333564, "cost2_max": -15.032240815919723, "outflow_rate_max": 1449.2256732803182, "cost1_mean": 175.7559828161386, "system_level_velocity_min": 11.47559118636741, "system_level_velocity_max": 18.928088951234525, "outflow_rate_min": 497.50056700217027, "outflow_rate_mean": 1121.2130549291232, "cost2_min": -92.48375021599207}, "done": false, "pid": 24639, "episode_len_mean": 317.49, "info": {"default": {"kl": 0.012281285598874092, "total_loss": 12.987905502319336, "vf_loss": 12.99559211730957, "vf_explained_var": 0.9398707747459412, "cur_lr": 0.0005000000237487257, "entropy": 1.6308337450027466, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.014681016094982624}, "num_steps_trained": 7937656, "update_time_ms": 9.024, "load_time_ms": 20.046, "sample_time_ms": 18326.247, "num_steps_sampled": 7937656, "grad_time_ms": 9432.424}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6252.428939580917, "timestamp": 1558609459, "time_since_restore": 6252.428939580917, "policy_reward_mean": {}, "training_iteration": 196, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e845650b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84565358>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7937656, "episodes_total": 9117, "timesteps_total": 7937656, "episode_reward_mean": -379.02772110942317, "episodes_this_iter": 46, "date": "2019-05-23_11-04-19", "time_this_iter_s": 27.717658758163452, "num_metric_batches_dropped": 0, "episode_reward_min": -616.5330432213918}
{"iterations_since_restore": 197, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.898971072711117, "timesteps_this_iter": 34532, "custom_metrics": {"cost1_max": 224.34915776845847, "cost1_min": 18.82501048707545, "system_level_velocity_mean": 15.593035945014527, "cost2_mean": -61.59698336083826, "cost2_max": -15.029270818193886, "outflow_rate_max": 1449.2256732803182, "cost1_mean": 177.36999557691618, "system_level_velocity_min": 11.475939187711539, "system_level_velocity_max": 19.071920743658755, "outflow_rate_min": 497.50056700217027, "outflow_rate_mean": 1137.3547922626485, "cost2_min": -92.48375021599207}, "done": false, "pid": 24639, "episode_len_mean": 313.54, "info": {"default": {"kl": 0.013844778761267662, "total_loss": 18.982114791870117, "vf_loss": 18.987979888916016, "vf_explained_var": 0.9166976809501648, "cur_lr": 0.0005000000237487257, "entropy": 1.6334091424942017, "cur_kl_coeff": 0.5695313215255737, "policy_loss": -0.013749676756560802}, "num_steps_trained": 7972188, "update_time_ms": 8.766, "load_time_ms": 19.211, "sample_time_ms": 18006.967, "num_steps_sampled": 7972188, "grad_time_ms": 9513.625}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6278.7972865104675, "timestamp": 1558609486, "time_since_restore": 6278.7972865104675, "policy_reward_mean": {}, "training_iteration": 197, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8454bfd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84566f28>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 7972188, "episodes_total": 9165, "timesteps_total": 7972188, "episode_reward_mean": -365.7166870026203, "episodes_this_iter": 48, "date": "2019-05-23_11-04-46", "time_this_iter_s": 26.36834692955017, "num_metric_batches_dropped": 0, "episode_reward_min": -642.271650641575}
{"iterations_since_restore": 198, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -20.898971072711117, "timesteps_this_iter": 33504, "custom_metrics": {"cost1_max": 225.04153696192404, "cost1_min": 18.86621507992216, "system_level_velocity_mean": 15.467174631813428, "cost2_mean": -60.42054620096237, "cost2_max": -15.029270818193886, "outflow_rate_max": 1449.6065568935594, "cost1_mean": 178.20833167254426, "system_level_velocity_min": 11.416813190869078, "system_level_velocity_max": 19.071920743658755, "outflow_rate_min": 484.88522595723686, "outflow_rate_mean": 1131.9692012344062, "cost2_min": -87.32084458751456}, "done": false, "pid": 24639, "episode_len_mean": 316.87, "info": {"default": {"kl": 0.012872609309852123, "total_loss": 13.016611099243164, "vf_loss": 13.025076866149902, "vf_explained_var": 0.9403394460678101, "cur_lr": 0.0005000000237487257, "entropy": 1.7218471765518188, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.01579756662249565}, "num_steps_trained": 8005692, "update_time_ms": 8.903, "load_time_ms": 18.285, "sample_time_ms": 17762.532, "num_steps_sampled": 8005692, "grad_time_ms": 9804.79}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6305.8205552101135, "timestamp": 1558609513, "time_since_restore": 6305.8205552101135, "policy_reward_mean": {}, "training_iteration": 198, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e8455ca58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84537c50>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8005692, "episodes_total": 9213, "timesteps_total": 8005692, "episode_reward_mean": -368.98169774728393, "episodes_this_iter": 48, "date": "2019-05-23_11-05-13", "time_this_iter_s": 27.023268699645996, "num_metric_batches_dropped": 0, "episode_reward_min": -642.271650641575}
{"iterations_since_restore": 199, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.051359303801345, "timesteps_this_iter": 34384, "custom_metrics": {"cost1_max": 226.72483864571308, "cost1_min": 17.82433361189784, "system_level_velocity_mean": 15.247321837136491, "cost2_mean": -59.76199904863997, "cost2_max": -16.07603731759307, "outflow_rate_max": 1458.3381732803184, "cost1_mean": 177.489815616162, "system_level_velocity_min": 11.416813190869078, "system_level_velocity_max": 19.153256202526816, "outflow_rate_min": 431.75782487237836, "outflow_rate_mean": 1122.7136847624442, "cost2_min": -86.03524019931628}, "done": false, "pid": 24639, "episode_len_mean": 319.12, "info": {"default": {"kl": 0.013375689275562763, "total_loss": 14.916316032409668, "vf_loss": 14.922639846801758, "vf_explained_var": 0.9353953003883362, "cur_lr": 0.0005000000237487257, "entropy": 1.6638320684432983, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.013942626304924488}, "num_steps_trained": 8040076, "update_time_ms": 9.33, "load_time_ms": 17.355, "sample_time_ms": 17651.457, "num_steps_sampled": 8040076, "grad_time_ms": 9776.885}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6333.3217878341675, "timestamp": 1558609540, "time_since_restore": 6333.3217878341675, "policy_reward_mean": {}, "training_iteration": 199, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e84530748>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8040076, "episodes_total": 9260, "timesteps_total": 8040076, "episode_reward_mean": -380.3332320442257, "episodes_this_iter": 47, "date": "2019-05-23_11-05-40", "time_this_iter_s": 27.501232624053955, "num_metric_batches_dropped": 0, "episode_reward_min": -571.7572539488086}
{"iterations_since_restore": 200, "node_ip": "10.138.0.2", "hostname": "flow-main", "episode_reward_max": -22.051359303801345, "timesteps_this_iter": 33724, "custom_metrics": {"cost1_max": 227.2021443238256, "cost1_min": 17.82433361189784, "system_level_velocity_mean": 15.377247352030233, "cost2_mean": -61.909264280968785, "cost2_max": -17.279731198426184, "outflow_rate_max": 1458.3381732803184, "cost1_mean": 179.71885732503088, "system_level_velocity_min": 11.416813190869078, "system_level_velocity_max": 19.153256202526816, "outflow_rate_min": 431.75782487237836, "outflow_rate_mean": 1134.4846168923689, "cost2_min": -89.04184991652744}, "done": true, "pid": 24639, "episode_len_mean": 319.94, "info": {"default": {"kl": 0.012157613411545753, "total_loss": 14.170129776000977, "vf_loss": 14.178324699401855, "vf_explained_var": 0.9346483945846558, "cur_lr": 0.0005000000237487257, "entropy": 1.6426981687545776, "cur_kl_coeff": 0.569531261920929, "policy_loss": -0.015119099989533424}, "num_steps_trained": 8073800, "update_time_ms": 9.813, "load_time_ms": 18.924, "sample_time_ms": 17868.218, "num_steps_sampled": 8073800, "grad_time_ms": 9555.548}, "experiment_id": "7ba5ddfb306a4ec5a69aeaf9f7d6b7c3", "time_total_s": 6360.760000705719, "timestamp": 1558609568, "time_since_restore": 6360.760000705719, "policy_reward_mean": {}, "training_iteration": 200, "config": {"lambda": 0.97, "clip_param": 0.3, "preprocessor_pref": "deepmind", "sgd_minibatch_size": 128, "output": null, "simple_optimizer": false, "train_batch_size": 15000, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "output_max_file_size": 67108864, "num_gpus_per_worker": 0, "log_level": "INFO", "optimizer": {}, "horizon": 750, "observation_filter": "NoFilter", "num_cpus_for_driver": 1, "num_envs_per_worker": 1, "vf_share_layers": false, "entropy_coeff": 0.0, "kl_coeff": 0.2, "num_sgd_iter": 10, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f22e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5e844f2278>", "on_train_result": null, "on_sample_end": null}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "input": "sampler", "synchronize_filters": true, "collect_metrics_timeout": 180, "lr_schedule": null, "input_evaluation": null, "sample_async": false, "vf_clip_param": 1000000.0, "compress_observations": false, "vf_loss_coeff": 1.0, "output_compress_columns": ["obs", "new_obs"], "gamma": 0.99, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "kl_target": 0.01, "monitor": false, "num_cpus_per_worker": 1, "straggler_mitigation": false, "num_gpus": 0, "sample_batch_size": 750, "batch_mode": "truncate_episodes", "clip_rewards": null, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 3,\n            \"eta1\": 1.0,\n            \"eta2\": 0.05,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 10.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "custom_resources_per_worker": {}, "use_gae": true, "clip_actions": false, "model": {"conv_filters": null, "dim": 84, "framestack": true, "zero_mean": true, "use_lstm": false, "conv_activation": "relu", "fcnet_hiddens": [128, 64, 32], "custom_preprocessor": null, "squash_to_range": false, "free_log_std": false, "fcnet_activation": "tanh", "lstm_cell_size": 256, "lstm_use_prev_action_reward": false, "grayscale": false, "channel_major": false, "max_seq_len": 20, "custom_model": null, "custom_options": {}}, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 5", "num_workers": 20, "lr": 0.0005}, "timesteps_since_restore": 8073800, "episodes_total": 9307, "timesteps_total": 8073800, "episode_reward_mean": -377.04445199968677, "episodes_this_iter": 47, "date": "2019-05-23_11-06-08", "time_this_iter_s": 27.438212871551514, "num_metric_batches_dropped": 0, "episode_reward_min": -549.3366279894578}
