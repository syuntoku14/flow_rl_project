{"custom_metrics": {}, "episode_reward_max": NaN, "episode_reward_mean": NaN, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 47747, "pid": 10559, "time_since_restore": 49.64503312110901, "episodes_total": 0, "iterations_since_restore": 1, "episode_len_mean": NaN, "time_this_iter_s": 49.64503312110901, "date": "2019-05-07_17-51-27", "timestamp": 1557251487, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 47747, "update_time_ms": 1351.073, "load_time_ms": 85.003, "default": {"vf_explained_var": 0.9267265796661377, "kl": 0.0005860631936229765, "policy_loss": 8.585945579397958e-06, "cur_kl_coeff": 0.20000003278255463, "total_loss": 0.9539202451705933, "entropy": 1.4261480569839478, "vf_loss": 0.9537944197654724, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 37871.68, "num_steps_trained": 47747, "grad_time_ms": 10138.767}, "episodes_this_iter": 0, "time_total_s": 49.64503312110901, "timesteps_total": 47747, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f5943518ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f5943518b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f5943518b00>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 1, "policy_reward_mean": {}, "timesteps_this_iter": 47747, "episode_reward_min": NaN, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 317.44, "outflow_rate_max": 677.6444831168831, "cost1_mean": 215.69838805020157, "system_level_velocity_mean": 9.1239757466654, "system_level_velocity_max": 18.16846642287544, "cost2_min": -120.73624375533123, "cost2_max": -19.59748532891196, "cost2_mean": -100.47354955902136, "outflow_rate_mean": 494.8130481091344, "system_level_velocity_min": 6.491288508673397, "cost1_min": 34.63386137511508}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 355.78938332411064, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 93206, "pid": 10559, "time_since_restore": 77.18872213363647, "episodes_total": 21, "iterations_since_restore": 2, "episode_len_mean": 669.2380952380952, "time_this_iter_s": 27.543689012527466, "date": "2019-05-07_17-51-55", "timestamp": 1557251515, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 93206, "update_time_ms": 679.718, "load_time_ms": 46.19, "default": {"vf_explained_var": 0.9660695195198059, "kl": 0.003298492170870304, "policy_loss": -0.0008512874483130872, "cur_kl_coeff": 0.10000002384185791, "total_loss": 1.1146392822265625, "entropy": 1.4238371849060059, "vf_loss": 1.1151608228683472, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 28462.55, "num_steps_trained": 93206, "grad_time_ms": 9256.086}, "episodes_this_iter": 21, "time_total_s": 77.18872213363647, "timesteps_total": 93206, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc828>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc7f0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 2, "policy_reward_mean": {}, "timesteps_this_iter": 45459, "episode_reward_min": 57.00922097768319, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 275.3057142857143, "outflow_rate_max": 871.684, "cost1_mean": 222.04933850829744, "system_level_velocity_mean": 8.960799989806976, "system_level_velocity_max": 18.16846642287544, "cost2_min": -127.59327994179628, "cost2_max": -19.59748532891196, "cost2_mean": -101.9982188110255, "outflow_rate_mean": 484.2313916858669, "system_level_velocity_min": 6.491288508673397, "cost1_min": 34.63386137511508}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 361.57306768231956, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 137009, "pid": 10559, "time_since_restore": 104.53126692771912, "episodes_total": 40, "iterations_since_restore": 3, "episode_len_mean": 683.85, "time_this_iter_s": 27.34254479408264, "date": "2019-05-07_17-52-22", "timestamp": 1557251542, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 137009, "update_time_ms": 455.731, "load_time_ms": 33.179, "default": {"vf_explained_var": 0.9834614396095276, "kl": 0.0037227151915431023, "policy_loss": -0.001301331678405404, "cur_kl_coeff": 0.050000011920928955, "total_loss": 0.6364980936050415, "entropy": 1.4288442134857178, "vf_loss": 0.6376132965087891, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 25294.339, "num_steps_trained": 137009, "grad_time_ms": 8930.971}, "episodes_this_iter": 19, "time_total_s": 104.53126692771912, "timesteps_total": 137009, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca5c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca588>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 3, "policy_reward_mean": {}, "timesteps_this_iter": 43803, "episode_reward_min": 57.00922097768319, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 219.87428571428575, "outflow_rate_max": 871.684, "cost1_mean": 211.28203388430583, "system_level_velocity_mean": 9.187407298276813, "system_level_velocity_max": 19.300917008309938, "cost2_min": -127.59327994179628, "cost2_max": -19.59748532891196, "cost2_mean": -97.04459255316112, "outflow_rate_mean": 474.71319641610506, "system_level_velocity_min": 3.3317639289443126, "cost1_min": 30.82691157774773}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 342.4064610850057, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 184370, "pid": 10559, "time_since_restore": 133.9577476978302, "episodes_total": 49, "iterations_since_restore": 4, "episode_len_mean": 660.3877551020408, "time_this_iter_s": 29.426480770111084, "date": "2019-05-07_17-52-51", "timestamp": 1557251571, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 184370, "update_time_ms": 343.428, "load_time_ms": 26.924, "default": {"vf_explained_var": 0.9765430092811584, "kl": 0.003995066042989492, "policy_loss": -0.001633225940167904, "cur_kl_coeff": 0.02500000223517418, "total_loss": 0.8010296821594238, "entropy": 1.4051378965377808, "vf_loss": 0.8025630712509155, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 23692.334, "num_steps_trained": 184370, "grad_time_ms": 9308.8}, "episodes_this_iter": 9, "time_total_s": 133.9577476978302, "timesteps_total": 184370, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c79e8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 4, "policy_reward_mean": {}, "timesteps_this_iter": 47361, "episode_reward_min": 44.37408723852713, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 93.65142857142858, "outflow_rate_max": 871.684, "cost1_mean": 195.06432682619726, "system_level_velocity_mean": 9.023659548951505, "system_level_velocity_max": 19.300917008309938, "cost2_min": -127.59327994179628, "cost2_max": -16.207905808381575, "cost2_mean": -91.57384486534319, "outflow_rate_mean": 420.4980219666867, "system_level_velocity_min": 3.3317639289443126, "cost1_min": 18.52844149278553}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 318.6898145658239, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 229580, "pid": 10559, "time_since_restore": 162.46134614944458, "episodes_total": 69, "iterations_since_restore": 5, "episode_len_mean": 643.1014492753624, "time_this_iter_s": 28.50359845161438, "date": "2019-05-07_17-53-20", "timestamp": 1557251600, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 229580, "update_time_ms": 276.418, "load_time_ms": 23.152, "default": {"vf_explained_var": 0.977985143661499, "kl": 0.005209111608564854, "policy_loss": -0.0015754024498164654, "cur_kl_coeff": 0.01250000111758709, "total_loss": 1.1936702728271484, "entropy": 1.3820466995239258, "vf_loss": 1.1951805353164673, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 22919.328, "num_steps_trained": 229580, "grad_time_ms": 9162.409}, "episodes_this_iter": 20, "time_total_s": 162.46134614944458, "timesteps_total": 229580, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c75f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c70f0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 5, "policy_reward_mean": {}, "timesteps_this_iter": 45210, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 86.928, "outflow_rate_max": 871.684, "outflow_rate_mean": 402.22582188696595, "cost1_mean": 193.55830974810718, "system_level_velocity_mean": 8.745789442871825, "system_level_velocity_max": 19.300917008309938, "cost2_min": -127.59327994179628, "cost1_min": 18.52844149278553, "cost2_max": -16.207905808381575, "cost2_mean": -91.31473244073229, "system_level_velocity_min": 3.3317639289443126}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 317.73817527154233, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 276434, "pid": 10559, "time_since_restore": 190.78444933891296, "episodes_total": 81, "iterations_since_restore": 6, "episode_len_mean": 651.5308641975308, "time_this_iter_s": 28.323103189468384, "date": "2019-05-07_17-53-48", "timestamp": 1557251628, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 276434, "update_time_ms": 231.431, "load_time_ms": 20.664, "default": {"vf_explained_var": 0.9946796298027039, "kl": 0.01081615686416626, "policy_loss": -0.0027999519370496273, "cur_kl_coeff": 0.012500002048909664, "total_loss": 0.31164759397506714, "entropy": 1.3965028524398804, "vf_loss": 0.3143123686313629, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 22083.97, "num_steps_trained": 276434, "grad_time_ms": 9351.743}, "episodes_this_iter": 12, "time_total_s": 190.78444933891296, "timesteps_total": 276434, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7be0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 6, "policy_reward_mean": {}, "timesteps_this_iter": 46854, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 86.928, "outflow_rate_max": 871.684, "cost1_mean": 194.97706361369484, "system_level_velocity_mean": 8.625889701695764, "system_level_velocity_max": 19.300917008309938, "cost2_min": -136.23225624864813, "cost2_max": -16.207905808381575, "cost2_mean": -92.9725871726935, "outflow_rate_mean": 403.4603406659693, "system_level_velocity_min": 3.3317639289443126, "cost1_min": 18.52844149278553}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 323.7852314592121, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 324022, "pid": 10559, "time_since_restore": 219.67531085014343, "episodes_total": 93, "iterations_since_restore": 7, "episode_len_mean": 657.7849462365591, "time_this_iter_s": 28.89086151123047, "date": "2019-05-07_17-54-17", "timestamp": 1557251657, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 324022, "update_time_ms": 199.531, "load_time_ms": 18.639, "default": {"vf_explained_var": 0.9924904704093933, "kl": 0.00821547582745552, "policy_loss": -0.0029733942355960608, "cur_kl_coeff": 0.012500002048909664, "total_loss": 0.5347291231155396, "entropy": 1.3885455131530762, "vf_loss": 0.5375998616218567, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 21539.212, "num_steps_trained": 324022, "grad_time_ms": 9517.794}, "episodes_this_iter": 12, "time_total_s": 219.67531085014343, "timesteps_total": 324022, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bca58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc748>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 7, "policy_reward_mean": {}, "timesteps_this_iter": 47588, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 290.32353363603244, "outflow_rate_min": 86.928, "outflow_rate_max": 871.684, "cost1_mean": 197.17249291064553, "system_level_velocity_mean": 8.457144516953766, "system_level_velocity_max": 19.300917008309938, "cost2_min": -136.23225624864813, "cost2_max": -16.207905808381575, "cost2_mean": -94.83903772095805, "outflow_rate_mean": 427.43869754760215, "system_level_velocity_min": 3.3317639289443126, "cost1_min": 18.52844149278553}, "episode_reward_max": 456.88234340279496, "episode_reward_mean": 333.4182343479307, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 366551, "pid": 10559, "time_since_restore": 246.16041350364685, "episodes_total": 111, "iterations_since_restore": 8, "episode_len_mean": 667.2, "time_this_iter_s": 26.485102653503418, "date": "2019-05-07_17-54-44", "timestamp": 1557251684, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 366551, "update_time_ms": 175.719, "load_time_ms": 17.185, "default": {"vf_explained_var": 0.9837777018547058, "kl": 0.009502741508185863, "policy_loss": -0.003431608434766531, "cur_kl_coeff": 0.012500002048909664, "total_loss": 1.346074104309082, "entropy": 1.3454492092132568, "vf_loss": 1.3493870496749878, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 20921.345, "num_steps_trained": 366551, "grad_time_ms": 9552.201}, "episodes_this_iter": 18, "time_total_s": 246.16041350364685, "timesteps_total": 366551, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2b70>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 8, "policy_reward_mean": {}, "timesteps_this_iter": 42529, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 271.16347169700873, "outflow_rate_min": 86.928, "outflow_rate_max": 933.1756571428571, "cost1_mean": 197.1956996735641, "system_level_velocity_mean": 8.464647198542092, "system_level_velocity_max": 19.300917008309938, "cost2_min": -136.23225624864813, "cost2_max": -16.207905808381575, "cost2_mean": -94.91162145468186, "outflow_rate_mean": 475.1351875735761, "system_level_velocity_min": 3.3317639289443126, "cost1_min": 18.52844149278553}, "episode_reward_max": 501.23765169270104, "episode_reward_mean": 346.0975224238948, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 407290, "pid": 10559, "time_since_restore": 271.3338871002197, "episodes_total": 127, "iterations_since_restore": 9, "episode_len_mean": 667.2, "time_this_iter_s": 25.173473596572876, "date": "2019-05-07_17-55-09", "timestamp": 1557251709, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 407290, "update_time_ms": 157.256, "load_time_ms": 16.014, "default": {"vf_explained_var": 0.948600709438324, "kl": 0.013613012619316578, "policy_loss": -0.003323304234072566, "cur_kl_coeff": 0.012500002980232239, "total_loss": 3.7033047676086426, "entropy": 1.327744722366333, "vf_loss": 3.70645809173584, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 20342.301, "num_steps_trained": 407290, "grad_time_ms": 9530.22}, "episodes_this_iter": 16, "time_total_s": 271.3338871002197, "timesteps_total": 407290, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f594359bef0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 9, "policy_reward_mean": {}, "timesteps_this_iter": 40739, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 266.18701928021596, "outflow_rate_min": 86.928, "outflow_rate_max": 1035.9658545454545, "cost1_mean": 203.12475692679214, "system_level_velocity_mean": 8.51818630816622, "system_level_velocity_max": 19.300917008309938, "cost2_min": -147.21877355729052, "cost2_max": -16.207905808381575, "cost2_mean": -98.3875171513457, "outflow_rate_mean": 553.6406278572031, "system_level_velocity_min": 5.556738899173993, "cost1_min": 18.52844149278553}, "episode_reward_max": 588.0462292700045, "episode_reward_mean": 374.2488797126205, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 447558, "pid": 10559, "time_since_restore": 297.3617112636566, "episodes_total": 145, "iterations_since_restore": 10, "episode_len_mean": 673.61, "time_this_iter_s": 26.02782416343689, "date": "2019-05-07_17-55-35", "timestamp": 1557251735, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 447558, "update_time_ms": 142.474, "load_time_ms": 15.185, "default": {"vf_explained_var": 0.9359537363052368, "kl": 0.009471019729971886, "policy_loss": -0.002070691669359803, "cur_kl_coeff": 0.012500002048909664, "total_loss": 4.165777683258057, "entropy": 1.3214672803878784, "vf_loss": 4.16772985458374, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 19965.046, "num_steps_trained": 447558, "grad_time_ms": 9513.776}, "episodes_this_iter": 18, "time_total_s": 297.3617112636566, "timesteps_total": 447558, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7208>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 10, "policy_reward_mean": {}, "timesteps_this_iter": 40268, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 265.24466010046956, "outflow_rate_min": 86.928, "outflow_rate_max": 1035.9658545454545, "cost1_mean": 213.4859239203185, "system_level_velocity_mean": 8.383427314543233, "system_level_velocity_max": 17.724918766022736, "cost2_min": -147.21877355729052, "cost2_max": -19.133634020095077, "cost2_mean": -102.83770238184144, "outflow_rate_mean": 637.906188732808, "system_level_velocity_min": 5.556738899173993, "cost1_min": 18.52844149278553}, "episode_reward_max": 588.0462292700045, "episode_reward_mean": 410.17666220061705, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 487410, "pid": 10559, "time_since_restore": 322.152809381485, "episodes_total": 161, "iterations_since_restore": 11, "episode_len_mean": 693.28, "time_this_iter_s": 24.79109811782837, "date": "2019-05-07_17-56-00", "timestamp": 1557251760, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 487410, "update_time_ms": 8.365, "load_time_ms": 7.28, "default": {"vf_explained_var": 0.9373047351837158, "kl": 0.009128233417868614, "policy_loss": -0.0011457741493359208, "cur_kl_coeff": 0.012500002048909664, "total_loss": 4.039383411407471, "entropy": 1.3202012777328491, "vf_loss": 4.040415287017822, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17717.327, "num_steps_trained": 487410, "grad_time_ms": 9430.357}, "episodes_this_iter": 16, "time_total_s": 322.152809381485, "timesteps_total": 487410, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cacc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434caac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca0b8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 11, "policy_reward_mean": {}, "timesteps_this_iter": 39852, "episode_reward_min": 33.293125261185274, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 283.3100509990951, "outflow_rate_min": 86.928, "outflow_rate_max": 1080.585994805195, "cost1_mean": 222.27214110111044, "system_level_velocity_mean": 8.69604266013074, "system_level_velocity_max": 18.36674043250308, "cost2_min": -147.21877355729052, "cost2_max": -23.146004611909106, "cost2_mean": -107.48781980712697, "outflow_rate_mean": 744.4782887222613, "system_level_velocity_min": 5.820540184595562, "cost1_min": 34.4858668055298}, "episode_reward_max": 601.9942083901567, "episode_reward_mean": 447.133671484622, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 526476, "pid": 10559, "time_since_restore": 347.72015023231506, "episodes_total": 178, "iterations_since_restore": 12, "episode_len_mean": 693.52, "time_this_iter_s": 25.567340850830078, "date": "2019-05-07_17-56-25", "timestamp": 1557251785, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 526476, "update_time_ms": 8.435, "load_time_ms": 7.291, "default": {"vf_explained_var": 0.9142196774482727, "kl": 0.015553292818367481, "policy_loss": -0.0024232505820691586, "cur_kl_coeff": 0.01250000111758709, "total_loss": 5.820946216583252, "entropy": 1.3105520009994507, "vf_loss": 5.823174953460693, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17442.148, "num_steps_trained": 526476, "grad_time_ms": 9508.586}, "episodes_this_iter": 17, "time_total_s": 347.72015023231506, "timesteps_total": 526476, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d23c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2eb8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 12, "policy_reward_mean": {}, "timesteps_this_iter": 39066, "episode_reward_min": 60.123223754120964, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 298.1290314527963, "outflow_rate_min": 424.96542857142856, "outflow_rate_max": 1128.387355844156, "cost1_mean": 230.4668213625544, "system_level_velocity_mean": 9.003973460328046, "system_level_velocity_max": 18.36674043250308, "cost2_min": -147.21877355729052, "cost2_max": -23.146004611909106, "cost2_mean": -110.08572008862264, "outflow_rate_mean": 841.9194837871961, "system_level_velocity_min": 5.820540184595562, "cost1_min": 34.4858668055298}, "episode_reward_max": 601.9942083901567, "episode_reward_mean": 479.431604661266, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 566263, "pid": 10559, "time_since_restore": 375.0785298347473, "episodes_total": 195, "iterations_since_restore": 13, "episode_len_mean": 693.52, "time_this_iter_s": 27.35837960243225, "date": "2019-05-07_17-56-53", "timestamp": 1557251813, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 566263, "update_time_ms": 8.681, "load_time_ms": 7.357, "default": {"vf_explained_var": 0.914763331413269, "kl": 0.008188056759536266, "policy_loss": -0.0016582345124334097, "cur_kl_coeff": 0.012500002048909664, "total_loss": 5.410337448120117, "entropy": 1.3168050050735474, "vf_loss": 5.411893367767334, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17206.828, "num_steps_trained": 566263, "grad_time_ms": 9745.647}, "episodes_this_iter": 17, "time_total_s": 375.0785298347473, "timesteps_total": 566263, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d22b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d24a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d25c0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 13, "policy_reward_mean": {}, "timesteps_this_iter": 39787, "episode_reward_min": 60.123223754120964, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 298.1290314527963, "outflow_rate_min": 485.99960235074565, "outflow_rate_max": 1128.387355844156, "cost1_mean": 233.38667039441526, "system_level_velocity_mean": 9.269289375641794, "system_level_velocity_max": 18.36674043250308, "cost2_min": -147.21877355729052, "cost2_max": -23.146004611909106, "cost2_mean": -111.08890846632865, "outflow_rate_mean": 903.4971860444697, "system_level_velocity_min": 5.820540184595562, "cost1_min": 34.4858668055298}, "episode_reward_max": 601.9942083901567, "episode_reward_mean": 501.27814273911287, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 605346, "pid": 10559, "time_since_restore": 401.47694206237793, "episodes_total": 215, "iterations_since_restore": 14, "episode_len_mean": 687.05, "time_this_iter_s": 26.398412227630615, "date": "2019-05-07_17-57-19", "timestamp": 1557251839, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 605346, "update_time_ms": 8.974, "load_time_ms": 7.261, "default": {"vf_explained_var": 0.9087626338005066, "kl": 0.011228464543819427, "policy_loss": -0.0013246770249679685, "cur_kl_coeff": 0.01250000111758709, "total_loss": 6.7964396476745605, "entropy": 1.3051916360855103, "vf_loss": 6.797624111175537, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16964.122, "num_steps_trained": 605346, "grad_time_ms": 9683.073}, "episodes_this_iter": 20, "time_total_s": 401.47694206237793, "timesteps_total": 605346, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c74e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7860>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 14, "policy_reward_mean": {}, "timesteps_this_iter": 39083, "episode_reward_min": 60.123223754120964, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 298.1290314527963, "outflow_rate_min": 485.99960235074565, "outflow_rate_max": 1128.387355844156, "cost1_mean": 237.95901604497797, "system_level_velocity_mean": 9.442823334166704, "system_level_velocity_max": 18.36674043250308, "cost2_min": -147.21877355729052, "cost2_max": -23.146004611909106, "cost2_mean": -110.65043008531444, "outflow_rate_mean": 932.924009109405, "system_level_velocity_min": 7.295583885769629, "cost1_min": 34.4858668055298}, "episode_reward_max": 608.5637073759235, "episode_reward_mean": 513.2463979416872, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 643461, "pid": 10559, "time_since_restore": 427.43160367012024, "episodes_total": 235, "iterations_since_restore": 15, "episode_len_mean": 687.05, "time_this_iter_s": 25.95466160774231, "date": "2019-05-07_17-57-45", "timestamp": 1557251865, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 643461, "update_time_ms": 9.039, "load_time_ms": 7.182, "default": {"vf_explained_var": 0.8981104493141174, "kl": 0.010286994278430939, "policy_loss": -0.0008166740299202502, "cur_kl_coeff": 0.012500002048909664, "total_loss": 7.240360736846924, "entropy": 1.2884912490844727, "vf_loss": 7.241048812866211, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16614.064, "num_steps_trained": 643461, "grad_time_ms": 9777.917}, "episodes_this_iter": 20, "time_total_s": 427.43160367012024, "timesteps_total": 643461, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2588>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 15, "policy_reward_mean": {}, "timesteps_this_iter": 38115, "episode_reward_min": 60.123223754120964, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 298.1290314527963, "outflow_rate_min": 485.99960235074565, "outflow_rate_max": 1128.387355844156, "cost1_mean": 239.85628325705818, "system_level_velocity_mean": 9.686577091497995, "system_level_velocity_max": 18.36674043250308, "cost2_min": -143.6698747125469, "cost2_max": -23.146004611909106, "cost2_mean": -108.86423642310325, "outflow_rate_mean": 946.4045947756922, "system_level_velocity_min": 7.295583885769629, "cost1_min": 34.4858668055298}, "episode_reward_max": 608.5637073759235, "episode_reward_mean": 515.8918423400478, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 680190, "pid": 10559, "time_since_restore": 454.6171844005585, "episodes_total": 252, "iterations_since_restore": 16, "episode_len_mean": 680.68, "time_this_iter_s": 27.185580730438232, "date": "2019-05-07_17-58-12", "timestamp": 1557251892, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 680190, "update_time_ms": 9.334, "load_time_ms": 6.957, "default": {"vf_explained_var": 0.9055213928222656, "kl": 0.017877334728837013, "policy_loss": -0.004138332791626453, "cur_kl_coeff": 0.01250000111758709, "total_loss": 7.295403480529785, "entropy": 1.2691848278045654, "vf_loss": 7.299318313598633, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16459.19, "num_steps_trained": 680190, "grad_time_ms": 9820.723}, "episodes_this_iter": 17, "time_total_s": 454.6171844005585, "timesteps_total": 680190, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d24e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d27f0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 16, "policy_reward_mean": {}, "timesteps_this_iter": 36729, "episode_reward_min": 60.123223754120964, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 329.0130730114953, "outflow_rate_min": 485.99960235074565, "outflow_rate_max": 1234.8655636363635, "cost1_mean": 246.93185287940065, "system_level_velocity_mean": 9.787774544921739, "system_level_velocity_max": 18.101667512681015, "cost2_min": -143.6698747125469, "cost2_max": -24.284208479500936, "cost2_mean": -108.34061679734297, "outflow_rate_mean": 968.1645614300546, "system_level_velocity_min": 7.295583885769629, "cost1_min": 34.89272163857403}, "episode_reward_max": 608.5637073759235, "episode_reward_mean": 522.7295517747662, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 717173, "pid": 10559, "time_since_restore": 477.5252616405487, "episodes_total": 269, "iterations_since_restore": 17, "episode_len_mean": 687.16, "time_this_iter_s": 22.908077239990234, "date": "2019-05-07_17-58-35", "timestamp": 1557251915, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 717173, "update_time_ms": 9.266, "load_time_ms": 6.952, "default": {"vf_explained_var": 0.8940553665161133, "kl": 0.010639810003340244, "policy_loss": -0.0013478422770276666, "cur_kl_coeff": 0.01250000111758709, "total_loss": 6.708463668823242, "entropy": 1.258013367652893, "vf_loss": 6.709677696228027, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16076.465, "num_steps_trained": 717173, "grad_time_ms": 9606.559}, "episodes_this_iter": 17, "time_total_s": 477.5252616405487, "timesteps_total": 717173, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc7b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc828>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 17, "policy_reward_mean": {}, "timesteps_this_iter": 36983, "episode_reward_min": 64.86293885509306, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 343.4676193888923, "outflow_rate_min": 485.99960235074565, "outflow_rate_max": 1260.2266805194804, "cost1_mean": 251.37768496913495, "system_level_velocity_mean": 9.959153889766323, "system_level_velocity_max": 18.101667512681015, "cost2_min": -143.6698747125469, "cost2_max": -24.284208479500936, "cost2_mean": -106.57539748850239, "outflow_rate_mean": 981.187576910574, "system_level_velocity_min": 7.295583885769629, "cost1_min": 34.89272163857403}, "episode_reward_max": 608.5637073759235, "episode_reward_mean": 520.3814659840322, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 755653, "pid": 10559, "time_since_restore": 503.1295416355133, "episodes_total": 284, "iterations_since_restore": 18, "episode_len_mean": 687.16, "time_this_iter_s": 25.6042799949646, "date": "2019-05-07_17-59-01", "timestamp": 1557251941, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 755653, "update_time_ms": 9.324, "load_time_ms": 6.936, "default": {"vf_explained_var": 0.9298053979873657, "kl": 0.012491419911384583, "policy_loss": -0.0023628962226212025, "cur_kl_coeff": 0.012500002048909664, "total_loss": 5.613680839538574, "entropy": 1.257826328277588, "vf_loss": 5.615887641906738, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16094.686, "num_steps_trained": 755653, "grad_time_ms": 9500.392}, "episodes_this_iter": 15, "time_total_s": 503.1295416355133, "timesteps_total": 755653, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c77b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c75f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7400>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 18, "policy_reward_mean": {}, "timesteps_this_iter": 38480, "episode_reward_min": 64.86293885509306, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 343.4676193888923, "outflow_rate_min": 485.99960235074565, "outflow_rate_max": 1260.2266805194804, "cost1_mean": 253.9067626926703, "system_level_velocity_mean": 10.053983280775554, "system_level_velocity_max": 18.101667512681015, "cost2_min": -130.35374252505724, "cost2_max": -24.284208479500936, "cost2_mean": -105.23583953493927, "outflow_rate_mean": 988.1595705729114, "system_level_velocity_min": 7.954260720513665, "cost1_min": 34.89272163857403}, "episode_reward_max": 608.5637073759235, "episode_reward_mean": 516.227814473593, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 794719, "pid": 10559, "time_since_restore": 528.7279937267303, "episodes_total": 302, "iterations_since_restore": 19, "episode_len_mean": 687.16, "time_this_iter_s": 25.59845209121704, "date": "2019-05-07_17-59-27", "timestamp": 1557251967, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 794719, "update_time_ms": 9.144, "load_time_ms": 7.066, "default": {"vf_explained_var": 0.9107701778411865, "kl": 0.01411533635109663, "policy_loss": -0.0038733729161322117, "cur_kl_coeff": 0.01250000111758709, "total_loss": 6.842996597290039, "entropy": 1.274809718132019, "vf_loss": 6.846693992614746, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16154.303, "num_steps_trained": 794719, "grad_time_ms": 9484.831}, "episodes_this_iter": 18, "time_total_s": 528.7279937267303, "timesteps_total": 794719, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7ef0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 19, "policy_reward_mean": {}, "timesteps_this_iter": 39066, "episode_reward_min": 64.86293885509306, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 343.4676193888923, "outflow_rate_min": 519.895210784575, "outflow_rate_max": 1260.2266805194804, "cost1_mean": 260.80295653196004, "system_level_velocity_mean": 10.140002788191603, "system_level_velocity_max": 18.101667512681015, "cost2_min": -126.88361201762328, "cost2_max": -26.442700259923694, "cost2_mean": -105.36883012480446, "outflow_rate_mean": 1003.8790508091446, "system_level_velocity_min": 7.954260720513665, "cost1_min": 41.69653154724836}, "episode_reward_max": 608.5637073759235, "episode_reward_mean": 519.2350143294627, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 832894, "pid": 10559, "time_since_restore": 555.0113632678986, "episodes_total": 322, "iterations_since_restore": 20, "episode_len_mean": 693.63, "time_this_iter_s": 26.283369541168213, "date": "2019-05-07_17-59-53", "timestamp": 1557251993, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 832894, "update_time_ms": 8.949, "load_time_ms": 6.918, "default": {"vf_explained_var": 0.9297330975532532, "kl": 0.014297040179371834, "policy_loss": -0.003368559991940856, "cur_kl_coeff": 0.01250000111758709, "total_loss": 6.389118194580078, "entropy": 1.2562341690063477, "vf_loss": 6.392307758331299, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16193.403, "num_steps_trained": 832894, "grad_time_ms": 9471.487}, "episodes_this_iter": 20, "time_total_s": 555.0113632678986, "timesteps_total": 832894, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bce10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2e10>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 20, "policy_reward_mean": {}, "timesteps_this_iter": 38175, "episode_reward_min": 65.16148079537214, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 343.4676193888923, "outflow_rate_min": 901.8481714285715, "outflow_rate_max": 1260.2266805194804, "cost1_mean": 267.5205473149067, "system_level_velocity_mean": 10.223028778982705, "system_level_velocity_max": 12.891014586600503, "cost2_min": -126.88361201762328, "cost2_max": -89.09055590205044, "cost2_mean": -107.11974275740342, "outflow_rate_mean": 1022.4557504415584, "system_level_velocity_min": 7.954260720513665, "cost1_min": 204.32886711324073}, "episode_reward_max": 608.0062534779698, "episode_reward_mean": 523.2108422526109, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 871211, "pid": 10559, "time_since_restore": 580.7358593940735, "episodes_total": 341, "iterations_since_restore": 21, "episode_len_mean": 700.0, "time_this_iter_s": 25.724496126174927, "date": "2019-05-07_18-00-19", "timestamp": 1557252019, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 871211, "update_time_ms": 8.889, "load_time_ms": 6.995, "default": {"vf_explained_var": 0.9231210947036743, "kl": 0.01234016939997673, "policy_loss": -0.003745786612853408, "cur_kl_coeff": 0.012500002048909664, "total_loss": 6.520233154296875, "entropy": 1.2272396087646484, "vf_loss": 6.523824691772461, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16288.912, "num_steps_trained": 871211, "grad_time_ms": 9466.699}, "episodes_this_iter": 19, "time_total_s": 580.7358593940735, "timesteps_total": 871211, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bcf60>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 21, "policy_reward_mean": {}, "timesteps_this_iter": 38317, "episode_reward_min": 457.5539577469576, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 343.4676193888923, "outflow_rate_min": 901.8481714285715, "outflow_rate_max": 1260.2266805194804, "cost1_mean": 268.22007213516474, "system_level_velocity_mean": 10.24006063441347, "system_level_velocity_max": 12.891014586600503, "cost2_min": -134.4450855823523, "cost2_max": -83.33057232866456, "cost2_mean": -108.55363325679129, "outflow_rate_mean": 1027.7492726753246, "system_level_velocity_min": 7.954260720513665, "cost1_min": 204.32886711324073}, "episode_reward_max": 615.284956944, "episode_reward_mean": 522.8689112437581, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 909164, "pid": 10559, "time_since_restore": 605.1583178043365, "episodes_total": 359, "iterations_since_restore": 22, "episode_len_mean": 700.0, "time_this_iter_s": 24.42245841026306, "date": "2019-05-07_18-00-43", "timestamp": 1557252043, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 909164, "update_time_ms": 8.858, "load_time_ms": 6.953, "default": {"vf_explained_var": 0.9317941665649414, "kl": 0.01347601879388094, "policy_loss": -0.0053048268891870975, "cur_kl_coeff": 0.01250000111758709, "total_loss": 5.0401201248168945, "entropy": 1.2197061777114868, "vf_loss": 5.045256614685059, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16209.018, "num_steps_trained": 909164, "grad_time_ms": 9433.912}, "episodes_this_iter": 18, "time_total_s": 605.1583178043365, "timesteps_total": 909164, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7cc0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 22, "policy_reward_mean": {}, "timesteps_this_iter": 37953, "episode_reward_min": 413.30107384343154, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 343.4676193888923, "outflow_rate_min": 915.4629714285714, "outflow_rate_max": 1260.2266805194804, "cost1_mean": 270.1909066372172, "system_level_velocity_mean": 10.30640563380709, "system_level_velocity_max": 12.891014586600503, "cost2_min": -134.4450855823523, "cost2_max": -83.33057232866456, "cost2_mean": -110.14399870845766, "outflow_rate_mean": 1034.1210218701299, "system_level_velocity_min": 8.660634758611652, "cost1_min": 222.16266421922333}, "episode_reward_max": 620.8546563191329, "episode_reward_mean": 523.2791540809518, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 946879, "pid": 10559, "time_since_restore": 629.944666147232, "episodes_total": 375, "iterations_since_restore": 23, "episode_len_mean": 700.0, "time_this_iter_s": 24.786348342895508, "date": "2019-05-07_18-01-08", "timestamp": 1557252068, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 946879, "update_time_ms": 8.626, "load_time_ms": 6.828, "default": {"vf_explained_var": 0.934628963470459, "kl": 0.012068322859704494, "policy_loss": -0.005657210014760494, "cur_kl_coeff": 0.012500000186264515, "total_loss": 5.484780311584473, "entropy": 1.2181475162506104, "vf_loss": 5.490286827087402, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16183.99, "num_steps_trained": 946879, "grad_time_ms": 9203.336}, "episodes_this_iter": 16, "time_total_s": 629.944666147232, "timesteps_total": 946879, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d28d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2d68>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 23, "policy_reward_mean": {}, "timesteps_this_iter": 37715, "episode_reward_min": 413.30107384343154, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 342.3941305274882, "outflow_rate_min": 915.4629714285714, "outflow_rate_max": 1223.2780519480518, "cost1_mean": 270.952658171993, "system_level_velocity_mean": 10.3320437501705, "system_level_velocity_max": 12.891014586600503, "cost2_min": -139.3806425626359, "cost2_max": -83.33057232866456, "cost2_mean": -113.33630450038807, "outflow_rate_mean": 1039.4569214025973, "system_level_velocity_min": 8.173295279222321, "cost1_min": 210.72546576773155}, "episode_reward_max": 620.8546563191329, "episode_reward_mean": 526.9621305477564, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 984456, "pid": 10559, "time_since_restore": 655.7842988967896, "episodes_total": 394, "iterations_since_restore": 24, "episode_len_mean": 700.0, "time_this_iter_s": 25.839632749557495, "date": "2019-05-07_18-01-34", "timestamp": 1557252094, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 984456, "update_time_ms": 8.737, "load_time_ms": 6.745, "default": {"vf_explained_var": 0.9399620294570923, "kl": 0.012783697806298733, "policy_loss": -0.004756990820169449, "cur_kl_coeff": 0.01250000111758709, "total_loss": 5.271310806274414, "entropy": 1.2147018909454346, "vf_loss": 5.27590799331665, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16269.904, "num_steps_trained": 984456, "grad_time_ms": 9063.175}, "episodes_this_iter": 19, "time_total_s": 655.7842988967896, "timesteps_total": 984456, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d27f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d20f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2908>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 24, "policy_reward_mean": {}, "timesteps_this_iter": 37577, "episode_reward_min": 413.30107384343154, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 370.9024844669134, "outflow_rate_min": 452.6374210221678, "outflow_rate_max": 1287.6022701298702, "cost1_mean": 274.4753526182737, "system_level_velocity_mean": 10.622266828552062, "system_level_velocity_max": 18.525555476295587, "cost2_min": -157.4162599590616, "cost2_max": -21.875019042450944, "cost2_mean": -116.075304120686, "outflow_rate_mean": 1052.8733488236082, "system_level_velocity_min": 8.173295279222321, "cost1_min": 27.189735886064135}, "episode_reward_max": 717.2444878592474, "episode_reward_mean": 531.412773811781, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1022529, "pid": 10559, "time_since_restore": 681.1738522052765, "episodes_total": 411, "iterations_since_restore": 25, "episode_len_mean": 693.4, "time_this_iter_s": 25.38955330848694, "date": "2019-05-07_18-01-59", "timestamp": 1557252119, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1022529, "update_time_ms": 8.749, "load_time_ms": 6.639, "default": {"vf_explained_var": 0.9347190856933594, "kl": 0.013162127695977688, "policy_loss": -0.004257616586983204, "cur_kl_coeff": 0.012500002048909664, "total_loss": 6.169682025909424, "entropy": 1.2073711156845093, "vf_loss": 6.173774719238281, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16250.142, "num_steps_trained": 1022529, "grad_time_ms": 9026.208}, "episodes_this_iter": 17, "time_total_s": 681.1738522052765, "timesteps_total": 1022529, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bce48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc7b8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 25, "policy_reward_mean": {}, "timesteps_this_iter": 38073, "episode_reward_min": 47.9917111115836, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 370.9024844669134, "outflow_rate_min": 452.6374210221678, "outflow_rate_max": 1287.6022701298702, "cost1_mean": 274.265755950298, "system_level_velocity_mean": 10.77849310567895, "system_level_velocity_max": 18.525555476295587, "cost2_min": -164.73940115461863, "cost2_max": -21.875019042450944, "cost2_mean": -120.31684273502084, "outflow_rate_mean": 1055.4861194547923, "system_level_velocity_min": 8.173295279222321, "cost1_min": 27.189735886064135}, "episode_reward_max": 717.2444878592474, "episode_reward_mean": 532.3559281178797, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1061103, "pid": 10559, "time_since_restore": 706.0982694625854, "episodes_total": 427, "iterations_since_restore": 26, "episode_len_mean": 686.98, "time_this_iter_s": 24.92441725730896, "date": "2019-05-07_18-02-24", "timestamp": 1557252144, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1061103, "update_time_ms": 8.804, "load_time_ms": 6.692, "default": {"vf_explained_var": 0.9190893769264221, "kl": 0.016599154099822044, "policy_loss": -0.005935968365520239, "cur_kl_coeff": 0.012500002980232239, "total_loss": 6.744553565979004, "entropy": 1.2000665664672852, "vf_loss": 6.75028133392334, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16226.544, "num_steps_trained": 1061103, "grad_time_ms": 8824.539}, "episodes_this_iter": 16, "time_total_s": 706.0982694625854, "timesteps_total": 1061103, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de0b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de080>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 26, "policy_reward_mean": {}, "timesteps_this_iter": 38574, "episode_reward_min": 47.9917111115836, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 371.93327006431355, "outflow_rate_min": 452.6374210221678, "outflow_rate_max": 1409.629723076923, "cost1_mean": 279.13711483482314, "system_level_velocity_mean": 10.93688403775748, "system_level_velocity_max": 18.525555476295587, "cost2_min": -172.22762480794853, "cost2_max": -21.875019042450944, "cost2_mean": -125.1905956013433, "outflow_rate_mean": 1076.366341500746, "system_level_velocity_min": 8.173295279222321, "cost1_min": 27.189735886064135}, "episode_reward_max": 719.3557240667033, "episode_reward_mean": 544.711754367542, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1098751, "pid": 10559, "time_since_restore": 731.3775992393494, "episodes_total": 446, "iterations_since_restore": 27, "episode_len_mean": 686.98, "time_this_iter_s": 25.279329776763916, "date": "2019-05-07_18-02-49", "timestamp": 1557252169, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1098751, "update_time_ms": 8.944, "load_time_ms": 6.821, "default": {"vf_explained_var": 0.9406580328941345, "kl": 0.01958363503217697, "policy_loss": -0.005510733928531408, "cur_kl_coeff": 0.012500000186264515, "total_loss": 5.291933059692383, "entropy": 1.2408127784729004, "vf_loss": 5.297199726104736, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16486.376, "num_steps_trained": 1098751, "grad_time_ms": 8802.682}, "episodes_this_iter": 19, "time_total_s": 731.3775992393494, "timesteps_total": 1098751, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d29e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2630>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 27, "policy_reward_mean": {}, "timesteps_this_iter": 37648, "episode_reward_min": 47.9917111115836, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 371.93327006431355, "outflow_rate_min": 452.6374210221678, "outflow_rate_max": 1409.629723076923, "cost1_mean": 282.02646759503307, "system_level_velocity_mean": 11.03977151594874, "system_level_velocity_max": 18.525555476295587, "cost2_min": -172.22762480794853, "cost2_max": -21.875019042450944, "cost2_mean": -127.69326435072001, "outflow_rate_mean": 1090.868722184063, "system_level_velocity_min": 8.173295279222321, "cost1_min": 27.189735886064135}, "episode_reward_max": 719.3557240667033, "episode_reward_mean": 548.5708599393731, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1136454, "pid": 10559, "time_since_restore": 758.4685733318329, "episodes_total": 466, "iterations_since_restore": 28, "episode_len_mean": 686.98, "time_this_iter_s": 27.09097409248352, "date": "2019-05-07_18-03-17", "timestamp": 1557252197, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1136454, "update_time_ms": 8.798, "load_time_ms": 6.423, "default": {"vf_explained_var": 0.9225530028343201, "kl": 0.014699040912091732, "policy_loss": -0.005157409235835075, "cur_kl_coeff": 0.012500000186264515, "total_loss": 7.246597766876221, "entropy": 1.2458643913269043, "vf_loss": 7.251571178436279, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16534.197, "num_steps_trained": 1136454, "grad_time_ms": 8903.231}, "episodes_this_iter": 20, "time_total_s": 758.4685733318329, "timesteps_total": 1136454, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434daa58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dad30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da898>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 28, "policy_reward_mean": {}, "timesteps_this_iter": 37703, "episode_reward_min": 47.9917111115836, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 371.93327006431355, "outflow_rate_min": 450.51694845912306, "outflow_rate_max": 1409.629723076923, "cost1_mean": 277.2201177963698, "system_level_velocity_mean": 11.364947065650997, "system_level_velocity_max": 18.749400215391024, "cost2_min": -172.22762480794853, "cost2_max": -18.734531276584946, "cost2_mean": -124.79549802496072, "outflow_rate_mean": 1078.4472083188798, "system_level_velocity_min": 9.157941530165285, "cost1_min": 24.468457524988757}, "episode_reward_max": 719.3557240667033, "episode_reward_mean": 533.2558527350448, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1173812, "pid": 10559, "time_since_restore": 784.824273109436, "episodes_total": 488, "iterations_since_restore": 29, "episode_len_mean": 667.51, "time_this_iter_s": 26.35569977760315, "date": "2019-05-07_18-03-43", "timestamp": 1557252223, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1173812, "update_time_ms": 8.93, "load_time_ms": 6.314, "default": {"vf_explained_var": 0.91033935546875, "kl": 0.017567409202456474, "policy_loss": -0.005003375932574272, "cur_kl_coeff": 0.01250000111758709, "total_loss": 8.306525230407715, "entropy": 1.2619810104370117, "vf_loss": 8.311308860778809, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16711.576, "num_steps_trained": 1173812, "grad_time_ms": 8800.439}, "episodes_this_iter": 22, "time_total_s": 784.824273109436, "timesteps_total": 1173812, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dea20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434debe0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2400>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 29, "policy_reward_mean": {}, "timesteps_this_iter": 37358, "episode_reward_min": 44.65163921080694, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 371.93327006431355, "outflow_rate_min": 450.51694845912306, "outflow_rate_max": 1409.629723076923, "cost1_mean": 272.5581489214743, "system_level_velocity_mean": 11.36611436949198, "system_level_velocity_max": 18.749400215391024, "cost2_min": -172.22762480794853, "cost2_max": -18.734531276584946, "cost2_mean": -122.04037186460431, "outflow_rate_mean": 1072.1871250388626, "system_level_velocity_min": 9.157941530165285, "cost1_min": 24.468457524988757}, "episode_reward_max": 719.3557240667033, "episode_reward_mean": 523.119266089941, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1210523, "pid": 10559, "time_since_restore": 810.6450927257538, "episodes_total": 505, "iterations_since_restore": 30, "episode_len_mean": 661.01, "time_this_iter_s": 25.82081961631775, "date": "2019-05-07_18-04-09", "timestamp": 1557252249, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1210523, "update_time_ms": 8.893, "load_time_ms": 6.32, "default": {"vf_explained_var": 0.9389810562133789, "kl": 0.02175023779273033, "policy_loss": -0.007727074436843395, "cur_kl_coeff": 0.01250000111758709, "total_loss": 5.328521251678467, "entropy": 1.283238410949707, "vf_loss": 5.335976600646973, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16763.463, "num_steps_trained": 1210523, "grad_time_ms": 8699.536}, "episodes_this_iter": 17, "time_total_s": 810.6450927257538, "timesteps_total": 1210523, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da860>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 30, "policy_reward_mean": {}, "timesteps_this_iter": 36711, "episode_reward_min": 44.65163921080694, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 371.93327006431355, "outflow_rate_min": 450.51694845912306, "outflow_rate_max": 1409.629723076923, "cost1_mean": 273.1435064168052, "system_level_velocity_mean": 11.241048958808134, "system_level_velocity_max": 18.749400215391024, "cost2_min": -172.22762480794853, "cost2_max": -18.734531276584946, "cost2_mean": -120.25060665067808, "outflow_rate_mean": 1076.830125285713, "system_level_velocity_min": 9.157941530165285, "cost1_min": 24.468457524988757}, "episode_reward_max": 719.3557240667033, "episode_reward_mean": 526.2829715967376, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1247462, "pid": 10559, "time_since_restore": 837.1246404647827, "episodes_total": 523, "iterations_since_restore": 31, "episode_len_mean": 667.47, "time_this_iter_s": 26.47954773902893, "date": "2019-05-07_18-04-35", "timestamp": 1557252275, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1247462, "update_time_ms": 8.833, "load_time_ms": 6.426, "default": {"vf_explained_var": 0.9287267327308655, "kl": 0.016182713210582733, "policy_loss": -0.005810815375298262, "cur_kl_coeff": 0.01874999888241291, "total_loss": 6.268045902252197, "entropy": 1.2676100730895996, "vf_loss": 6.273552894592285, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16912.871, "num_steps_trained": 1247462, "grad_time_ms": 8627.806}, "episodes_this_iter": 18, "time_total_s": 837.1246404647827, "timesteps_total": 1247462, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434daac8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 31, "policy_reward_mean": {}, "timesteps_this_iter": 36939, "episode_reward_min": 44.65163921080694, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 371.93327006431355, "outflow_rate_min": 450.51694845912306, "outflow_rate_max": 1409.629723076923, "cost1_mean": 271.54293580560017, "system_level_velocity_mean": 11.204298440159466, "system_level_velocity_max": 18.749400215391024, "cost2_min": -172.22762480794853, "cost2_max": -18.734531276584946, "cost2_mean": -117.35851877005788, "outflow_rate_mean": 1071.8441227042943, "system_level_velocity_min": 9.157941530165285, "cost1_min": 24.468457524988757}, "episode_reward_max": 699.4713325166148, "episode_reward_mean": 521.7462313014759, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1285325, "pid": 10559, "time_since_restore": 863.7026629447937, "episodes_total": 541, "iterations_since_restore": 32, "episode_len_mean": 667.47, "time_this_iter_s": 26.578022480010986, "date": "2019-05-07_18-05-02", "timestamp": 1557252302, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1285325, "update_time_ms": 8.654, "load_time_ms": 6.507, "default": {"vf_explained_var": 0.9302034974098206, "kl": 0.01438190508633852, "policy_loss": -0.00490320660173893, "cur_kl_coeff": 0.01874999701976776, "total_loss": 6.162362098693848, "entropy": 1.2587131261825562, "vf_loss": 6.166995525360107, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17095.359, "num_steps_trained": 1285325, "grad_time_ms": 8659.53}, "episodes_this_iter": 18, "time_total_s": 863.7026629447937, "timesteps_total": 1285325, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2ac8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 32, "policy_reward_mean": {}, "timesteps_this_iter": 37863, "episode_reward_min": 44.65163921080694, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 355.5069198969454, "outflow_rate_min": 450.51694845912306, "outflow_rate_max": 1270.9029074925077, "cost1_mean": 272.60177235211484, "system_level_velocity_mean": 11.26120802485846, "system_level_velocity_max": 18.749400215391024, "cost2_min": -146.3629433193183, "cost2_max": -18.734531276584946, "cost2_mean": -116.49966688037465, "outflow_rate_mean": 1067.811411491507, "system_level_velocity_min": 9.034110174019606, "cost1_min": 24.468457524988757}, "episode_reward_max": 678.116764524371, "episode_reward_mean": 525.4234706022522, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1323625, "pid": 10559, "time_since_restore": 889.6383810043335, "episodes_total": 559, "iterations_since_restore": 33, "episode_len_mean": 667.47, "time_this_iter_s": 25.935718059539795, "date": "2019-05-07_18-05-28", "timestamp": 1557252328, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1323625, "update_time_ms": 8.578, "load_time_ms": 6.493, "default": {"vf_explained_var": 0.8939419388771057, "kl": 0.01874796487390995, "policy_loss": -0.005160946398973465, "cur_kl_coeff": 0.01874999701976776, "total_loss": 8.172724723815918, "entropy": 1.277523398399353, "vf_loss": 8.177534103393555, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17193.799, "num_steps_trained": 1323625, "grad_time_ms": 8675.072}, "episodes_this_iter": 18, "time_total_s": 889.6383810043335, "timesteps_total": 1323625, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de940>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 33, "policy_reward_mean": {}, "timesteps_this_iter": 38300, "episode_reward_min": 44.65163921080694, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 355.5069198969454, "outflow_rate_min": 411.80504082048884, "outflow_rate_max": 1369.761562037962, "cost1_mean": 273.1845189305106, "system_level_velocity_mean": 11.464398437395426, "system_level_velocity_max": 18.975779357251977, "cost2_min": -146.3629433193183, "cost2_max": -18.59408971704146, "cost2_mean": -116.85431221680562, "outflow_rate_mean": 1073.7940981075042, "system_level_velocity_min": 9.034110174019606, "cost1_min": 19.42141528711275}, "episode_reward_max": 678.116764524371, "episode_reward_mean": 530.0115817817781, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1361218, "pid": 10559, "time_since_restore": 915.3363163471222, "episodes_total": 579, "iterations_since_restore": 34, "episode_len_mean": 660.76, "time_this_iter_s": 25.697935342788696, "date": "2019-05-07_18-05-54", "timestamp": 1557252354, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1361218, "update_time_ms": 8.441, "load_time_ms": 6.547, "default": {"vf_explained_var": 0.8681166172027588, "kl": 0.01678922399878502, "policy_loss": -0.00524970144033432, "cur_kl_coeff": 0.01874999888241291, "total_loss": 10.52665901184082, "entropy": 1.2937055826187134, "vf_loss": 10.531593322753906, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17171.904, "num_steps_trained": 1361218, "grad_time_ms": 8683.604}, "episodes_this_iter": 20, "time_total_s": 915.3363163471222, "timesteps_total": 1361218, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da518>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 34, "policy_reward_mean": {}, "timesteps_this_iter": 37593, "episode_reward_min": 32.248655586271084, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 355.5069198969454, "outflow_rate_min": 411.80504082048884, "outflow_rate_max": 1369.761562037962, "cost1_mean": 283.02223227722317, "system_level_velocity_mean": 11.33325104153324, "system_level_velocity_max": 18.975779357251977, "cost2_min": -146.3629433193183, "cost2_max": -18.59408971704146, "cost2_mean": -120.71813319004697, "outflow_rate_mean": 1097.1157360765835, "system_level_velocity_min": 9.034110174019606, "cost1_min": 19.42141528711275}, "episode_reward_max": 678.116764524371, "episode_reward_mean": 550.2234396848644, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1398696, "pid": 10559, "time_since_restore": 941.2188453674316, "episodes_total": 597, "iterations_since_restore": 35, "episode_len_mean": 680.23, "time_this_iter_s": 25.88252902030945, "date": "2019-05-07_18-06-20", "timestamp": 1557252380, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1398696, "update_time_ms": 8.365, "load_time_ms": 6.474, "default": {"vf_explained_var": 0.8911314606666565, "kl": 0.017285291105508804, "policy_loss": -0.00623311847448349, "cur_kl_coeff": 0.01874999888241291, "total_loss": 8.11994743347168, "entropy": 1.2727627754211426, "vf_loss": 8.12585735321045, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17267.472, "num_steps_trained": 1398696, "grad_time_ms": 8636.989}, "episodes_this_iter": 18, "time_total_s": 941.2188453674316, "timesteps_total": 1398696, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de9b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de1d0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 35, "policy_reward_mean": {}, "timesteps_this_iter": 37478, "episode_reward_min": 32.248655586271084, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 355.5069198969454, "outflow_rate_min": 411.80504082048884, "outflow_rate_max": 1369.761562037962, "cost1_mean": 285.69871090626634, "system_level_velocity_mean": 11.268259741769082, "system_level_velocity_max": 18.975779357251977, "cost2_min": -146.3629433193183, "cost2_max": -18.59408971704146, "cost2_mean": -121.79312365461999, "outflow_rate_mean": 1104.7390422257317, "system_level_velocity_min": 9.034110174019606, "cost1_min": 19.42141528711275}, "episode_reward_max": 678.116764524371, "episode_reward_mean": 558.2813363608286, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1435254, "pid": 10559, "time_since_restore": 966.4541983604431, "episodes_total": 615, "iterations_since_restore": 36, "episode_len_mean": 686.73, "time_this_iter_s": 25.235352993011475, "date": "2019-05-07_18-06-45", "timestamp": 1557252405, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1435254, "update_time_ms": 8.394, "load_time_ms": 6.458, "default": {"vf_explained_var": 0.9215596318244934, "kl": 0.014939813874661922, "policy_loss": -0.0018140851752832532, "cur_kl_coeff": 0.01874999701976776, "total_loss": 6.1582560539245605, "entropy": 1.2624393701553345, "vf_loss": 6.159790515899658, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17324.459, "num_steps_trained": 1435254, "grad_time_ms": 8610.039}, "episodes_this_iter": 18, "time_total_s": 966.4541983604431, "timesteps_total": 1435254, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bce10>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 36, "policy_reward_mean": {}, "timesteps_this_iter": 36558, "episode_reward_min": 32.248655586271084, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 355.5069198969454, "outflow_rate_min": 411.80504082048884, "outflow_rate_max": 1369.761562037962, "cost1_mean": 287.7056152364545, "system_level_velocity_mean": 11.175424604640336, "system_level_velocity_max": 18.975779357251977, "cost2_min": -146.3629433193183, "cost2_max": -18.59408971704146, "cost2_mean": -122.74930679199288, "outflow_rate_mean": 1110.9640177448682, "system_level_velocity_min": 9.034110174019606, "cost1_min": 19.42141528711275}, "episode_reward_max": 678.116764524371, "episode_reward_mean": 565.4409188700756, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1472404, "pid": 10559, "time_since_restore": 991.8718304634094, "episodes_total": 633, "iterations_since_restore": 37, "episode_len_mean": 693.29, "time_this_iter_s": 25.41763210296631, "date": "2019-05-07_18-07-10", "timestamp": 1557252430, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1472404, "update_time_ms": 8.311, "load_time_ms": 6.301, "default": {"vf_explained_var": 0.8921981453895569, "kl": 0.015076493844389915, "policy_loss": -0.0045096189714968204, "cur_kl_coeff": 0.01874999888241291, "total_loss": 7.854397773742676, "entropy": 1.2612382173538208, "vf_loss": 7.858625888824463, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17289.283, "num_steps_trained": 1472404, "grad_time_ms": 8658.456}, "episodes_this_iter": 18, "time_total_s": 991.8718304634094, "timesteps_total": 1472404, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ded68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de0f0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 37, "policy_reward_mean": {}, "timesteps_this_iter": 37150, "episode_reward_min": 32.248655586271084, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 355.5069198969454, "outflow_rate_min": 411.80504082048884, "outflow_rate_max": 1369.761562037962, "cost1_mean": 285.9467731444144, "system_level_velocity_mean": 11.112020781425342, "system_level_velocity_max": 18.975779357251977, "cost2_min": -146.3629433193183, "cost2_max": -18.59408971704146, "cost2_mean": -121.82149297137306, "outflow_rate_mean": 1113.9709706639492, "system_level_velocity_min": 9.034110174019606, "cost1_min": 19.42141528711275}, "episode_reward_max": 678.116764524371, "episode_reward_mean": 564.2336505593183, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1509188, "pid": 10559, "time_since_restore": 1016.9415764808655, "episodes_total": 651, "iterations_since_restore": 38, "episode_len_mean": 693.29, "time_this_iter_s": 25.069746017456055, "date": "2019-05-07_18-07-35", "timestamp": 1557252455, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1509188, "update_time_ms": 8.616, "load_time_ms": 6.6, "default": {"vf_explained_var": 0.9101473093032837, "kl": 0.01313302293419838, "policy_loss": -0.0035194794181734324, "cur_kl_coeff": 0.01874999888241291, "total_loss": 6.8789825439453125, "entropy": 1.2692618370056152, "vf_loss": 6.8822550773620605, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17226.224, "num_steps_trained": 1509188, "grad_time_ms": 8520.059}, "episodes_this_iter": 18, "time_total_s": 1016.9415764808655, "timesteps_total": 1509188, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da0b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da550>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 38, "policy_reward_mean": {}, "timesteps_this_iter": 36784, "episode_reward_min": 32.248655586271084, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 363.37198295562376, "outflow_rate_min": 411.80504082048884, "outflow_rate_max": 1312.0869662337661, "cost1_mean": 285.0878187729151, "system_level_velocity_mean": 11.089333847182663, "system_level_velocity_max": 18.975779357251977, "cost2_min": -143.6360923732859, "cost2_max": -18.59408971704146, "cost2_mean": -119.57869097185228, "outflow_rate_mean": 1104.4072373692438, "system_level_velocity_min": 9.190181297956105, "cost1_min": 19.42141528711275}, "episode_reward_max": 674.6181617217916, "episode_reward_mean": 556.7197757317895, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1546274, "pid": 10559, "time_since_restore": 1042.9171662330627, "episodes_total": 669, "iterations_since_restore": 39, "episode_len_mean": 693.29, "time_this_iter_s": 25.975589752197266, "date": "2019-05-07_18-08-01", "timestamp": 1557252481, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1546274, "update_time_ms": 8.496, "load_time_ms": 6.497, "default": {"vf_explained_var": 0.9133497476577759, "kl": 0.017223594710230827, "policy_loss": -0.004400248173624277, "cur_kl_coeff": 0.01874999888241291, "total_loss": 7.355052471160889, "entropy": 1.2599120140075684, "vf_loss": 7.359129905700684, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17108.832, "num_steps_trained": 1546274, "grad_time_ms": 8600.972}, "episodes_this_iter": 18, "time_total_s": 1042.9171662330627, "timesteps_total": 1546274, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434daf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da4a8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 39, "policy_reward_mean": {}, "timesteps_this_iter": 37086, "episode_reward_min": 32.248655586271084, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.09130950213364, "outflow_rate_min": 546.4542261301443, "outflow_rate_max": 1334.1165194805194, "cost1_mean": 287.66295818904496, "system_level_velocity_mean": 11.172451670336015, "system_level_velocity_max": 18.86835915745389, "cost2_min": -143.6360923732859, "cost2_max": -30.522946460426365, "cost2_mean": -120.0627597159613, "outflow_rate_mean": 1109.2208963711914, "system_level_velocity_min": 9.165517691371234, "cost1_min": 44.75399560262231}, "episode_reward_max": 732.9938657662186, "episode_reward_mean": 560.3967388683204, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1584045, "pid": 10559, "time_since_restore": 1071.4002883434296, "episodes_total": 687, "iterations_since_restore": 40, "episode_len_mean": 693.66, "time_this_iter_s": 28.48312211036682, "date": "2019-05-07_18-08-30", "timestamp": 1557252510, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1584045, "update_time_ms": 8.659, "load_time_ms": 6.526, "default": {"vf_explained_var": 0.882814884185791, "kl": 0.015124654397368431, "policy_loss": -0.004479183349758387, "cur_kl_coeff": 0.01874999701976776, "total_loss": 9.041827201843262, "entropy": 1.2781802415847778, "vf_loss": 9.04602336883545, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 17169.301, "num_steps_trained": 1584045, "grad_time_ms": 8809.484}, "episodes_this_iter": 18, "time_total_s": 1071.4002883434296, "timesteps_total": 1584045, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d22e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2a90>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 40, "policy_reward_mean": {}, "timesteps_this_iter": 37771, "episode_reward_min": 68.2075305333238, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.09130950213364, "outflow_rate_min": 546.4542261301443, "outflow_rate_max": 1334.1165194805194, "cost1_mean": 289.2722559860824, "system_level_velocity_mean": 11.231507610680156, "system_level_velocity_max": 18.86835915745389, "cost2_min": -142.16308809927978, "cost2_max": -30.522946460426365, "cost2_mean": -119.7493798897041, "outflow_rate_mean": 1113.4148459655971, "system_level_velocity_min": 9.165517691371234, "cost1_min": 44.75399560262231}, "episode_reward_max": 732.9938657662186, "episode_reward_mean": 563.2337840680127, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1620783, "pid": 10559, "time_since_restore": 1095.918732881546, "episodes_total": 703, "iterations_since_restore": 41, "episode_len_mean": 693.66, "time_this_iter_s": 24.518444538116455, "date": "2019-05-07_18-08-54", "timestamp": 1557252534, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1620783, "update_time_ms": 8.66, "load_time_ms": 6.544, "default": {"vf_explained_var": 0.9053682088851929, "kl": 0.017433682456612587, "policy_loss": -0.004678370431065559, "cur_kl_coeff": 0.01874999888241291, "total_loss": 7.578615188598633, "entropy": 1.267769694328308, "vf_loss": 7.582966327667236, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16988.936, "num_steps_trained": 1620783, "grad_time_ms": 8793.942}, "episodes_this_iter": 16, "time_total_s": 1095.918732881546, "timesteps_total": 1620783, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de160>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 41, "policy_reward_mean": {}, "timesteps_this_iter": 36738, "episode_reward_min": 68.2075305333238, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.09130950213364, "outflow_rate_min": 546.4542261301443, "outflow_rate_max": 1334.1165194805194, "cost1_mean": 287.5363723223308, "system_level_velocity_mean": 11.185158311724546, "system_level_velocity_max": 18.86835915745389, "cost2_min": -142.16308809927978, "cost2_max": -30.522946460426365, "cost2_mean": -120.14061488799769, "outflow_rate_mean": 1111.6040654501128, "system_level_velocity_min": 9.165517691371234, "cost1_min": 44.75399560262231}, "episode_reward_max": 732.9938657662186, "episode_reward_mean": 563.2008663649835, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1658835, "pid": 10559, "time_since_restore": 1121.5126984119415, "episodes_total": 722, "iterations_since_restore": 42, "episode_len_mean": 693.66, "time_this_iter_s": 25.593965530395508, "date": "2019-05-07_18-09-20", "timestamp": 1557252560, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1658835, "update_time_ms": 8.78, "load_time_ms": 6.421, "default": {"vf_explained_var": 0.8900163173675537, "kl": 0.01636863872408867, "policy_loss": -0.006695189513266087, "cur_kl_coeff": 0.01874999888241291, "total_loss": 8.617177963256836, "entropy": 1.2576416730880737, "vf_loss": 8.623565673828125, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16928.514, "num_steps_trained": 1658835, "grad_time_ms": 8758.083}, "episodes_this_iter": 19, "time_total_s": 1121.5126984119415, "timesteps_total": 1658835, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dad30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da7b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da240>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 42, "policy_reward_mean": {}, "timesteps_this_iter": 38052, "episode_reward_min": 68.2075305333238, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.09130950213364, "outflow_rate_min": 546.4542261301443, "outflow_rate_max": 1334.1165194805194, "cost1_mean": 289.8000927971106, "system_level_velocity_mean": 11.26403070273587, "system_level_velocity_max": 18.86835915745389, "cost2_min": -152.5000693383088, "cost2_max": -30.522946460426365, "cost2_mean": -122.05454969588033, "outflow_rate_mean": 1112.607518608954, "system_level_velocity_min": 8.592766031070143, "cost1_min": 44.75399560262231}, "episode_reward_max": 732.9938657662186, "episode_reward_mean": 568.3093991667247, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1696738, "pid": 10559, "time_since_restore": 1147.2394375801086, "episodes_total": 740, "iterations_since_restore": 43, "episode_len_mean": 693.66, "time_this_iter_s": 25.726739168167114, "date": "2019-05-07_18-09-46", "timestamp": 1557252586, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1696738, "update_time_ms": 8.686, "load_time_ms": 6.456, "default": {"vf_explained_var": 0.8888530135154724, "kl": 0.01723647117614746, "policy_loss": -0.004023425281047821, "cur_kl_coeff": 0.01874999888241291, "total_loss": 8.637405395507812, "entropy": 1.2428467273712158, "vf_loss": 8.641105651855469, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16904.991, "num_steps_trained": 1696738, "grad_time_ms": 8761.422}, "episodes_this_iter": 18, "time_total_s": 1147.2394375801086, "timesteps_total": 1696738, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de2b0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 43, "policy_reward_mean": {}, "timesteps_this_iter": 37903, "episode_reward_min": 68.2075305333238, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.09130950213364, "outflow_rate_min": 546.4542261301443, "outflow_rate_max": 1334.1165194805194, "cost1_mean": 289.45851080183127, "system_level_velocity_mean": 11.24974819621628, "system_level_velocity_max": 18.86835915745389, "cost2_min": -152.5000693383088, "cost2_max": -30.522946460426365, "cost2_mean": -124.14203145158788, "outflow_rate_mean": 1112.6091543212415, "system_level_velocity_min": 8.592766031070143, "cost1_min": 44.75399560262231}, "episode_reward_max": 732.9938657662186, "episode_reward_mean": 572.9865155823235, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1734675, "pid": 10559, "time_since_restore": 1173.1577706336975, "episodes_total": 757, "iterations_since_restore": 44, "episode_len_mean": 693.66, "time_this_iter_s": 25.918333053588867, "date": "2019-05-07_18-10-12", "timestamp": 1557252612, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1734675, "update_time_ms": 8.504, "load_time_ms": 6.08, "default": {"vf_explained_var": 0.8951293230056763, "kl": 0.015050056390464306, "policy_loss": -0.004833119921386242, "cur_kl_coeff": 0.01874999888241291, "total_loss": 8.60350227355957, "entropy": 1.252371907234192, "vf_loss": 8.608053207397461, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16875.306, "num_steps_trained": 1734675, "grad_time_ms": 8814.309}, "episodes_this_iter": 17, "time_total_s": 1173.1577706336975, "timesteps_total": 1734675, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eacf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea0b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eac18>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 44, "policy_reward_mean": {}, "timesteps_this_iter": 37937, "episode_reward_min": 68.2075305333238, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.09130950213364, "outflow_rate_min": 974.4442077922079, "outflow_rate_max": 1334.1165194805194, "cost1_mean": 292.79774340597834, "system_level_velocity_mean": 11.19967466098969, "system_level_velocity_max": 13.883633281358364, "cost2_min": -152.5000693383088, "cost2_max": -105.77451797806334, "cost2_mean": -127.03207189050329, "outflow_rate_mean": 1124.4308726913087, "system_level_velocity_min": 8.592766031070143, "cost1_min": 218.560414048163}, "episode_reward_max": 732.9938657662186, "episode_reward_mean": 583.2950572897582, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1772578, "pid": 10559, "time_since_restore": 1198.9305510520935, "episodes_total": 775, "iterations_since_restore": 45, "episode_len_mean": 700.0, "time_this_iter_s": 25.772780418395996, "date": "2019-05-07_18-10-38", "timestamp": 1557252638, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1772578, "update_time_ms": 8.418, "load_time_ms": 5.864, "default": {"vf_explained_var": 0.9072315096855164, "kl": 0.02073306404054165, "policy_loss": -0.005094435531646013, "cur_kl_coeff": 0.01874999888241291, "total_loss": 8.505997657775879, "entropy": 1.2358053922653198, "vf_loss": 8.510704040527344, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16865.098, "num_steps_trained": 1772578, "grad_time_ms": 8815.874}, "episodes_this_iter": 18, "time_total_s": 1198.9305510520935, "timesteps_total": 1772578, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da7f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da2b0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 45, "policy_reward_mean": {}, "timesteps_this_iter": 37903, "episode_reward_min": 488.2875210069983, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 348.88055513937496, "outflow_rate_min": 977.5856207792208, "outflow_rate_max": 1285.9375220779223, "cost1_mean": 291.1234607863819, "system_level_velocity_mean": 11.134214707732173, "system_level_velocity_max": 13.201316517656212, "cost2_min": -152.50803171121197, "cost2_max": -105.77451797806334, "cost2_mean": -127.55937895832044, "outflow_rate_mean": 1120.061731060939, "system_level_velocity_min": 8.592766031070143, "cost1_min": 218.560414048163}, "episode_reward_max": 689.8856808783219, "episode_reward_mean": 586.2445145576905, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1810837, "pid": 10559, "time_since_restore": 1224.7366485595703, "episodes_total": 795, "iterations_since_restore": 46, "episode_len_mean": 700.0, "time_this_iter_s": 25.806097507476807, "date": "2019-05-07_18-11-03", "timestamp": 1557252663, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1810837, "update_time_ms": 8.042, "load_time_ms": 5.875, "default": {"vf_explained_var": 0.8940097689628601, "kl": 0.01931823417544365, "policy_loss": -0.004623739514499903, "cur_kl_coeff": 0.02812500111758709, "total_loss": 9.364278793334961, "entropy": 1.2100887298583984, "vf_loss": 9.368358612060547, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16878.139, "num_steps_trained": 1810837, "grad_time_ms": 8860.4}, "episodes_this_iter": 20, "time_total_s": 1224.7366485595703, "timesteps_total": 1810837, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eafd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eaeb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ead68>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 46, "policy_reward_mean": {}, "timesteps_this_iter": 38259, "episode_reward_min": 488.2875210069983, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 348.88055513937496, "outflow_rate_min": 977.5856207792208, "outflow_rate_max": 1409.6509950049947, "cost1_mean": 292.8198200152963, "system_level_velocity_mean": 11.174385858955315, "system_level_velocity_max": 13.201316517656212, "cost2_min": -152.50803171121197, "cost2_max": -106.04795443595005, "cost2_mean": -130.54202779100618, "outflow_rate_mean": 1124.9962244235765, "system_level_velocity_min": 8.592766031070143, "cost1_min": 218.560414048163}, "episode_reward_max": 752.938590963423, "episode_reward_mean": 593.1846857400122, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1848434, "pid": 10559, "time_since_restore": 1249.0706565380096, "episodes_total": 811, "iterations_since_restore": 47, "episode_len_mean": 700.0, "time_this_iter_s": 24.33400797843933, "date": "2019-05-07_18-11-28", "timestamp": 1557252688, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1848434, "update_time_ms": 7.964, "load_time_ms": 5.97, "default": {"vf_explained_var": 0.8833244442939758, "kl": 0.017050916329026222, "policy_loss": -0.005099491216242313, "cur_kl_coeff": 0.02812500111758709, "total_loss": 8.269136428833008, "entropy": 1.2056525945663452, "vf_loss": 8.273757934570312, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16765.45, "num_steps_trained": 1848434, "grad_time_ms": 8863.892}, "episodes_this_iter": 16, "time_total_s": 1249.0706565380096, "timesteps_total": 1848434, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7f98>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 47, "policy_reward_mean": {}, "timesteps_this_iter": 37597, "episode_reward_min": 500.96305275547616, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 348.88055513937496, "outflow_rate_min": 1004.2337090909091, "outflow_rate_max": 1409.6509950049947, "cost1_mean": 293.8304455500484, "system_level_velocity_mean": 11.198523477489726, "system_level_velocity_max": 13.201316517656212, "cost2_min": -162.95577613886948, "cost2_max": -106.04795443595005, "cost2_mean": -133.83449433727597, "outflow_rate_mean": 1133.044267984016, "system_level_velocity_min": 9.416427535434707, "cost1_min": 242.15445487469535}, "episode_reward_max": 752.938590963423, "episode_reward_mean": 595.4729970845735, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1886258, "pid": 10559, "time_since_restore": 1274.7295362949371, "episodes_total": 827, "iterations_since_restore": 48, "episode_len_mean": 700.0, "time_this_iter_s": 25.65887975692749, "date": "2019-05-07_18-11-53", "timestamp": 1557252713, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1886258, "update_time_ms": 7.617, "load_time_ms": 6.114, "default": {"vf_explained_var": 0.9018990993499756, "kl": 0.02205033414065838, "policy_loss": -0.004606696777045727, "cur_kl_coeff": 0.02812500298023224, "total_loss": 7.956419467926025, "entropy": 1.1745381355285645, "vf_loss": 7.960406303405762, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16776.277, "num_steps_trained": 1886258, "grad_time_ms": 8911.642}, "episodes_this_iter": 16, "time_total_s": 1274.7295362949371, "timesteps_total": 1886258, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eae48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea518>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea860>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 48, "policy_reward_mean": {}, "timesteps_this_iter": 37824, "episode_reward_min": 515.3834955800643, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 348.6248986531451, "outflow_rate_min": 1011.2003636363635, "outflow_rate_max": 1409.6509950049947, "cost1_mean": 293.8515793731132, "system_level_velocity_mean": 11.184025958199225, "system_level_velocity_max": 13.019101267640675, "cost2_min": -165.9083967769726, "cost2_max": -106.04795443595005, "cost2_mean": -135.02014060074723, "outflow_rate_mean": 1137.192541918082, "system_level_velocity_min": 9.416427535434707, "cost1_min": 242.15445487469535}, "episode_reward_max": 752.938590963423, "episode_reward_mean": 600.4273443582989, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1924132, "pid": 10559, "time_since_restore": 1300.3993854522705, "episodes_total": 847, "iterations_since_restore": 49, "episode_len_mean": 700.0, "time_this_iter_s": 25.669849157333374, "date": "2019-05-07_18-12-19", "timestamp": 1557252739, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1924132, "update_time_ms": 7.525, "load_time_ms": 5.856, "default": {"vf_explained_var": 0.8662056922912598, "kl": 0.021050691604614258, "policy_loss": -0.004649955779314041, "cur_kl_coeff": 0.04218750447034836, "total_loss": 10.986063003540039, "entropy": 1.2144479751586914, "vf_loss": 10.989824295043945, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16751.017, "num_steps_trained": 1924132, "grad_time_ms": 8906.254}, "episodes_this_iter": 20, "time_total_s": 1300.3993854522705, "timesteps_total": 1924132, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de3c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dee48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de550>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 49, "policy_reward_mean": {}, "timesteps_this_iter": 37874, "episode_reward_min": 528.392754453975, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 348.6248986531451, "outflow_rate_min": 1011.2003636363635, "outflow_rate_max": 1409.6509950049947, "cost1_mean": 293.8255700877633, "system_level_velocity_mean": 11.175781219977628, "system_level_velocity_max": 13.05835563975004, "cost2_min": -165.9083967769726, "cost2_max": -106.04795443595005, "cost2_mean": -135.5964884872815, "outflow_rate_mean": 1141.4271036963037, "system_level_velocity_min": 9.603372859051314, "cost1_min": 248.080839446062}, "episode_reward_max": 752.938590963423, "episode_reward_mean": 603.5906309790988, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1961999, "pid": 10559, "time_since_restore": 1325.982966184616, "episodes_total": 865, "iterations_since_restore": 50, "episode_len_mean": 700.0, "time_this_iter_s": 25.58358073234558, "date": "2019-05-07_18-12-45", "timestamp": 1557252765, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1961999, "update_time_ms": 7.476, "load_time_ms": 5.5, "default": {"vf_explained_var": 0.8977044820785522, "kl": 0.01631789468228817, "policy_loss": -0.004282031673938036, "cur_kl_coeff": 0.06328123807907104, "total_loss": 9.021162033081055, "entropy": 1.2060067653656006, "vf_loss": 9.02441120147705, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16609.876, "num_steps_trained": 1961999, "grad_time_ms": 8758.147}, "episodes_this_iter": 18, "time_total_s": 1325.982966184616, "timesteps_total": 1961999, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cac50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cada0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cae48>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 50, "policy_reward_mean": {}, "timesteps_this_iter": 37867, "episode_reward_min": 528.8498787208409, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.58739992674884, "outflow_rate_min": 1011.2003636363635, "outflow_rate_max": 1409.6509950049947, "cost1_mean": 293.9968850336476, "system_level_velocity_mean": 11.178825431867022, "system_level_velocity_max": 13.28834802256868, "cost2_min": -165.9083967769726, "cost2_max": -106.04795443595005, "cost2_mean": -136.17143069043425, "outflow_rate_mean": 1148.9923771068932, "system_level_velocity_min": 9.586273570886007, "cost1_min": 248.080839446062}, "episode_reward_max": 752.938590963423, "episode_reward_mean": 607.2654421002502, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 1999576, "pid": 10559, "time_since_restore": 1351.1704902648926, "episodes_total": 881, "iterations_since_restore": 51, "episode_len_mean": 700.0, "time_this_iter_s": 25.18752408027649, "date": "2019-05-07_18-13-10", "timestamp": 1557252790, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 1999576, "update_time_ms": 7.281, "load_time_ms": 5.403, "default": {"vf_explained_var": 0.8889378905296326, "kl": 0.018099267035722733, "policy_loss": -0.0034421198070049286, "cur_kl_coeff": 0.06328124552965164, "total_loss": 9.297995567321777, "entropy": 1.1711584329605103, "vf_loss": 9.30029296875, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16641.386, "num_steps_trained": 1999576, "grad_time_ms": 8793.245}, "episodes_this_iter": 16, "time_total_s": 1351.1704902648926, "timesteps_total": 1999576, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7470>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 51, "policy_reward_mean": {}, "timesteps_this_iter": 37577, "episode_reward_min": 526.464141217627, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.58739992674884, "outflow_rate_min": 748.1801551195863, "outflow_rate_max": 1409.6509950049947, "cost1_mean": 290.884430517319, "system_level_velocity_mean": 11.22655206015386, "system_level_velocity_max": 18.49430660241702, "cost2_min": -165.9083967769726, "cost2_max": -49.61223591391948, "cost2_mean": -136.26574811614094, "outflow_rate_mean": 1144.9040328039432, "system_level_velocity_min": 9.586273570886007, "cost1_min": 83.61721866478672}, "episode_reward_max": 752.938590963423, "episode_reward_mean": 600.5552212154703, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2036483, "pid": 10559, "time_since_restore": 1377.3557868003845, "episodes_total": 901, "iterations_since_restore": 52, "episode_len_mean": 694.22, "time_this_iter_s": 26.185296535491943, "date": "2019-05-07_18-13-36", "timestamp": 1557252816, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2036483, "update_time_ms": 7.24, "load_time_ms": 5.503, "default": {"vf_explained_var": 0.8899313807487488, "kl": 0.01733134500682354, "policy_loss": -0.005219863727688789, "cur_kl_coeff": 0.06328124552965164, "total_loss": 10.82159423828125, "entropy": 1.1802035570144653, "vf_loss": 10.825716972351074, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16638.89, "num_steps_trained": 2036483, "grad_time_ms": 8854.018}, "episodes_this_iter": 20, "time_total_s": 1377.3557868003845, "timesteps_total": 2036483, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d23c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2ba8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 52, "policy_reward_mean": {}, "timesteps_this_iter": 36907, "episode_reward_min": 124.9672227688864, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.58739992674884, "outflow_rate_min": 748.1801551195863, "outflow_rate_max": 1297.1691104895106, "cost1_mean": 288.88083602741887, "system_level_velocity_mean": 11.176060948842274, "system_level_velocity_max": 18.49430660241702, "cost2_min": -165.9083967769726, "cost2_max": -49.61223591391948, "cost2_mean": -133.52998729010267, "outflow_rate_mean": 1138.9987859428043, "system_level_velocity_min": 9.586273570886007, "cost1_min": 83.61721866478672}, "episode_reward_max": 717.4561058285902, "episode_reward_mean": 592.6653185697264, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2073628, "pid": 10559, "time_since_restore": 1403.5741834640503, "episodes_total": 921, "iterations_since_restore": 53, "episode_len_mean": 694.22, "time_this_iter_s": 26.21839666366577, "date": "2019-05-07_18-14-02", "timestamp": 1557252842, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2073628, "update_time_ms": 7.483, "load_time_ms": 5.513, "default": {"vf_explained_var": 0.8823608160018921, "kl": 0.017089366912841797, "policy_loss": -0.007004494313150644, "cur_kl_coeff": 0.06328124552965164, "total_loss": 11.118852615356445, "entropy": 1.1912474632263184, "vf_loss": 11.124774932861328, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16653.009, "num_steps_trained": 2073628, "grad_time_ms": 8889.347}, "episodes_this_iter": 20, "time_total_s": 1403.5741834640503, "timesteps_total": 2073628, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dedd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de9e8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 53, "policy_reward_mean": {}, "timesteps_this_iter": 37145, "episode_reward_min": 124.9672227688864, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 374.42414947289296, "outflow_rate_min": 748.1801551195863, "outflow_rate_max": 1446.0788999001, "cost1_mean": 291.52733963833447, "system_level_velocity_mean": 11.281800061707408, "system_level_velocity_max": 18.49430660241702, "cost2_min": -161.78590213452415, "cost2_max": -49.61223591391948, "cost2_mean": -131.98063219324, "outflow_rate_mean": 1142.8223504183286, "system_level_velocity_min": 9.586273570886007, "cost1_min": 83.61721866478672}, "episode_reward_max": 768.6088895241007, "episode_reward_mean": 590.0839280430487, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2110814, "pid": 10559, "time_since_restore": 1428.781964302063, "episodes_total": 936, "iterations_since_restore": 54, "episode_len_mean": 694.22, "time_this_iter_s": 25.207780838012695, "date": "2019-05-07_18-14-28", "timestamp": 1557252868, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2110814, "update_time_ms": 7.443, "load_time_ms": 5.518, "default": {"vf_explained_var": 0.8952268362045288, "kl": 0.01897376962006092, "policy_loss": -0.008158399723470211, "cur_kl_coeff": 0.06328124552965164, "total_loss": 10.388481140136719, "entropy": 1.1792651414871216, "vf_loss": 10.395439147949219, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16609.649, "num_steps_trained": 2110814, "grad_time_ms": 8860.946}, "episodes_this_iter": 15, "time_total_s": 1428.781964302063, "timesteps_total": 2110814, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eae10>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 54, "policy_reward_mean": {}, "timesteps_this_iter": 37186, "episode_reward_min": 124.9672227688864, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 382.75065338251284, "outflow_rate_min": 493.9241306526324, "outflow_rate_max": 1519.13467012987, "cost1_mean": 288.4740904331595, "system_level_velocity_mean": 11.368638919951469, "system_level_velocity_max": 19.197660168468843, "cost2_min": -175.16455112141378, "cost2_max": -28.19023533866627, "cost2_mean": -129.49133797352576, "outflow_rate_mean": 1138.4082242643155, "system_level_velocity_min": 9.20081837460785, "cost1_min": 36.38233939328674}, "episode_reward_max": 815.9823519658498, "episode_reward_mean": 583.1881644166023, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2148295, "pid": 10559, "time_since_restore": 1454.4243593215942, "episodes_total": 957, "iterations_since_restore": 55, "episode_len_mean": 687.75, "time_this_iter_s": 25.64239501953125, "date": "2019-05-07_18-14-53", "timestamp": 1557252893, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2148295, "update_time_ms": 7.526, "load_time_ms": 5.895, "default": {"vf_explained_var": 0.8826024532318115, "kl": 0.015417265705764294, "policy_loss": -0.004692197311669588, "cur_kl_coeff": 0.06328124552965164, "total_loss": 12.931032180786133, "entropy": 1.1971932649612427, "vf_loss": 12.934749603271484, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16616.479, "num_steps_trained": 2148295, "grad_time_ms": 8840.564}, "episodes_this_iter": 21, "time_total_s": 1454.4243593215942, "timesteps_total": 2148295, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c76a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c70b8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 55, "policy_reward_mean": {}, "timesteps_this_iter": 37481, "episode_reward_min": 52.86128344083793, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 382.75065338251284, "outflow_rate_min": 453.566997961879, "outflow_rate_max": 1519.13467012987, "cost1_mean": 283.94742721765743, "system_level_velocity_mean": 11.4084265067161, "system_level_velocity_max": 19.197660168468843, "cost2_min": -175.16455112141378, "cost2_max": -18.899041223470746, "cost2_mean": -127.10449980880763, "outflow_rate_mean": 1126.4623266715068, "system_level_velocity_min": 9.20081837460785, "cost1_min": 24.36326766130277}, "episode_reward_max": 815.9823519658498, "episode_reward_mean": 569.7777753482073, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2186231, "pid": 10559, "time_since_restore": 1479.8448238372803, "episodes_total": 978, "iterations_since_restore": 56, "episode_len_mean": 681.12, "time_this_iter_s": 25.420464515686035, "date": "2019-05-07_18-15-19", "timestamp": 1557252919, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2186231, "update_time_ms": 7.601, "load_time_ms": 5.99, "default": {"vf_explained_var": 0.8897512555122375, "kl": 0.01812940463423729, "policy_loss": -0.006188018713146448, "cur_kl_coeff": 0.06328124552965164, "total_loss": 12.000954627990723, "entropy": 1.2136057615280151, "vf_loss": 12.005995750427246, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16592.47, "num_steps_trained": 2186231, "grad_time_ms": 8826.651}, "episodes_this_iter": 21, "time_total_s": 1479.8448238372803, "timesteps_total": 2186231, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2860>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 56, "policy_reward_mean": {}, "timesteps_this_iter": 37936, "episode_reward_min": 39.4932282933493, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 382.75065338251284, "outflow_rate_min": 453.566997961879, "outflow_rate_max": 1519.13467012987, "cost1_mean": 287.6872151920932, "system_level_velocity_mean": 11.747343160537618, "system_level_velocity_max": 19.26456360263033, "cost2_min": -175.16455112141378, "cost2_max": -18.899041223470746, "cost2_mean": -124.36189435993263, "outflow_rate_mean": 1135.4159315557945, "system_level_velocity_min": 9.20081837460785, "cost1_min": 24.36326766130277}, "episode_reward_max": 815.9823519658498, "episode_reward_mean": 569.6523900091862, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2223034, "pid": 10559, "time_since_restore": 1504.916359424591, "episodes_total": 998, "iterations_since_restore": 57, "episode_len_mean": 673.78, "time_this_iter_s": 25.07153558731079, "date": "2019-05-07_18-15-44", "timestamp": 1557252944, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2223034, "update_time_ms": 7.481, "load_time_ms": 5.927, "default": {"vf_explained_var": 0.8681081533432007, "kl": 0.022061064839363098, "policy_loss": -0.008105223067104816, "cur_kl_coeff": 0.06328124552965164, "total_loss": 14.226322174072266, "entropy": 1.2176357507705688, "vf_loss": 14.233031272888184, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16676.244, "num_steps_trained": 2223034, "grad_time_ms": 8817.417}, "episodes_this_iter": 20, "time_total_s": 1504.916359424591, "timesteps_total": 2223034, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea6a0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 57, "policy_reward_mean": {}, "timesteps_this_iter": 36803, "episode_reward_min": 39.4932282933493, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 382.75065338251284, "outflow_rate_min": 453.566997961879, "outflow_rate_max": 1519.13467012987, "cost1_mean": 291.021530408916, "system_level_velocity_mean": 11.884688331589173, "system_level_velocity_max": 19.26456360263033, "cost2_min": -175.16455112141378, "cost2_max": -18.899041223470746, "cost2_mean": -123.92979946936748, "outflow_rate_mean": 1145.7879766427075, "system_level_velocity_min": 9.20081837460785, "cost1_min": 24.36326766130277}, "episode_reward_max": 815.9823519658498, "episode_reward_mean": 574.7597582108378, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2259384, "pid": 10559, "time_since_restore": 1530.4424886703491, "episodes_total": 1016, "iterations_since_restore": 58, "episode_len_mean": 673.78, "time_this_iter_s": 25.526129245758057, "date": "2019-05-07_18-16-09", "timestamp": 1557252969, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2259384, "update_time_ms": 7.345, "load_time_ms": 5.902, "default": {"vf_explained_var": 0.8931611776351929, "kl": 0.012621525675058365, "policy_loss": -0.005590359680354595, "cur_kl_coeff": 0.09492187947034836, "total_loss": 11.131730079650879, "entropy": 1.23823881149292, "vf_loss": 11.13612174987793, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16639.045, "num_steps_trained": 2259384, "grad_time_ms": 8841.441}, "episodes_this_iter": 18, "time_total_s": 1530.4424886703491, "timesteps_total": 2259384, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eaa90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea4a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea198>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 58, "policy_reward_mean": {}, "timesteps_this_iter": 36350, "episode_reward_min": 39.4932282933493, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 382.75065338251284, "outflow_rate_min": 453.566997961879, "outflow_rate_max": 1519.13467012987, "cost1_mean": 290.6321271404085, "system_level_velocity_mean": 11.880360169920095, "system_level_velocity_max": 19.26456360263033, "cost2_min": -175.16455112141378, "cost2_max": -18.899041223470746, "cost2_mean": -123.71375142638908, "outflow_rate_mean": 1139.9826520233269, "system_level_velocity_min": 9.20081837460785, "cost1_min": 24.36326766130277}, "episode_reward_max": 815.9823519658498, "episode_reward_mean": 575.1869401677127, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2296513, "pid": 10559, "time_since_restore": 1555.740623474121, "episodes_total": 1033, "iterations_since_restore": 59, "episode_len_mean": 673.78, "time_this_iter_s": 25.298134803771973, "date": "2019-05-07_18-16-35", "timestamp": 1557252995, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2296513, "update_time_ms": 7.537, "load_time_ms": 6.279, "default": {"vf_explained_var": 0.9080916047096252, "kl": 0.01674525812268257, "policy_loss": -0.007105749100446701, "cur_kl_coeff": 0.09492187947034836, "total_loss": 10.182236671447754, "entropy": 1.2345435619354248, "vf_loss": 10.187752723693848, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16629.026, "num_steps_trained": 2296513, "grad_time_ms": 8814.274}, "episodes_this_iter": 17, "time_total_s": 1555.740623474121, "timesteps_total": 2296513, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d20f0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 59, "policy_reward_mean": {}, "timesteps_this_iter": 37129, "episode_reward_min": 39.4932282933493, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 376.30075885726865, "outflow_rate_min": 453.566997961879, "outflow_rate_max": 1503.8448859140858, "cost1_mean": 292.574327260084, "system_level_velocity_mean": 11.968224786183178, "system_level_velocity_max": 19.26456360263033, "cost2_min": -164.3194028638788, "cost2_max": -18.899041223470746, "cost2_mean": -123.1887906598871, "outflow_rate_mean": 1141.8348243749751, "system_level_velocity_min": 9.27152329238699, "cost1_min": 24.36326766130277}, "episode_reward_max": 730.7467691484202, "episode_reward_mean": 574.3436959583763, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2333122, "pid": 10559, "time_since_restore": 1580.9007823467255, "episodes_total": 1051, "iterations_since_restore": 60, "episode_len_mean": 673.78, "time_this_iter_s": 25.16015887260437, "date": "2019-05-07_18-17-00", "timestamp": 1557253020, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2333122, "update_time_ms": 7.378, "load_time_ms": 6.616, "default": {"vf_explained_var": 0.8847533464431763, "kl": 0.015890631824731827, "policy_loss": -0.007092914544045925, "cur_kl_coeff": 0.09492188692092896, "total_loss": 12.199312210083008, "entropy": 1.2553623914718628, "vf_loss": 12.20489501953125, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16595.164, "num_steps_trained": 2333122, "grad_time_ms": 8803.051}, "episodes_this_iter": 18, "time_total_s": 1580.9007823467255, "timesteps_total": 2333122, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea128>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 60, "policy_reward_mean": {}, "timesteps_this_iter": 36609, "episode_reward_min": 39.4932282933493, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 376.30075885726865, "outflow_rate_min": 453.566997961879, "outflow_rate_max": 1503.8448859140858, "cost1_mean": 296.6534925667693, "system_level_velocity_mean": 11.958557337141196, "system_level_velocity_max": 19.26456360263033, "cost2_min": -164.3194028638788, "cost2_max": -18.899041223470746, "cost2_mean": -123.50995321290331, "outflow_rate_mean": 1156.7699253062112, "system_level_velocity_min": 9.27152329238699, "cost1_min": 24.36326766130277}, "episode_reward_max": 730.7467691484202, "episode_reward_mean": 579.2577552344625, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2369494, "pid": 10559, "time_since_restore": 1606.40505361557, "episodes_total": 1069, "iterations_since_restore": 61, "episode_len_mean": 680.25, "time_this_iter_s": 25.504271268844604, "date": "2019-05-07_18-17-25", "timestamp": 1557253045, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2369494, "update_time_ms": 7.63, "load_time_ms": 6.628, "default": {"vf_explained_var": 0.8937745094299316, "kl": 0.015554091893136501, "policy_loss": -0.006365490611642599, "cur_kl_coeff": 0.09492188692092896, "total_loss": 11.541237831115723, "entropy": 1.2590464353561401, "vf_loss": 11.546126365661621, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16643.213, "num_steps_trained": 2369494, "grad_time_ms": 8787.053}, "episodes_this_iter": 18, "time_total_s": 1606.40505361557, "timesteps_total": 2369494, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eac88>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 61, "policy_reward_mean": {}, "timesteps_this_iter": 36372, "episode_reward_min": 39.4932282933493, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 383.1212314012139, "outflow_rate_min": 454.52817732468884, "outflow_rate_max": 1404.316415984016, "cost1_mean": 301.27644678340994, "system_level_velocity_mean": 11.795443519799129, "system_level_velocity_max": 18.937708319856075, "cost2_min": -149.8357358157114, "cost2_max": -24.65963477749701, "cost2_mean": -125.50837020977167, "outflow_rate_mean": 1171.653041985035, "system_level_velocity_min": 9.27152329238699, "cost1_min": 27.663107852807443}, "episode_reward_max": 711.6420111741379, "episode_reward_mean": 584.267237927844, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2405705, "pid": 10559, "time_since_restore": 1631.711930513382, "episodes_total": 1089, "iterations_since_restore": 62, "episode_len_mean": 693.4, "time_this_iter_s": 25.30687689781189, "date": "2019-05-07_18-17-51", "timestamp": 1557253071, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2405705, "update_time_ms": 7.714, "load_time_ms": 6.605, "default": {"vf_explained_var": 0.8933423161506653, "kl": 0.013815726153552532, "policy_loss": -0.0065255919471383095, "cur_kl_coeff": 0.09492187947034836, "total_loss": 11.006736755371094, "entropy": 1.261318564414978, "vf_loss": 11.011950492858887, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16620.573, "num_steps_trained": 2405705, "grad_time_ms": 8721.404}, "episodes_this_iter": 20, "time_total_s": 1631.711930513382, "timesteps_total": 2405705, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eaa20>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eac50>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 62, "policy_reward_mean": {}, "timesteps_this_iter": 36211, "episode_reward_min": 45.977622980276095, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 383.1212314012139, "outflow_rate_min": 1010.8492571428571, "outflow_rate_max": 1369.1047216783218, "cost1_mean": 301.92784383097097, "system_level_velocity_mean": 11.65548489175804, "system_level_velocity_max": 14.359816016255165, "cost2_min": -154.68137753239958, "cost2_max": -105.2182237108869, "cost2_mean": -128.3823415536137, "outflow_rate_mean": 1176.3640280359643, "system_level_velocity_min": 9.27152329238699, "cost1_min": 233.61538665012148}, "episode_reward_max": 699.5610379457149, "episode_reward_mean": 589.9828651917553, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2442638, "pid": 10559, "time_since_restore": 1656.543067932129, "episodes_total": 1106, "iterations_since_restore": 63, "episode_len_mean": 700.0, "time_this_iter_s": 24.83113741874695, "date": "2019-05-07_18-18-16", "timestamp": 1557253096, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2442638, "update_time_ms": 7.787, "load_time_ms": 6.755, "default": {"vf_explained_var": 0.8932928442955017, "kl": 0.015512281097471714, "policy_loss": -0.005944386590272188, "cur_kl_coeff": 0.09492187947034836, "total_loss": 10.081615447998047, "entropy": 1.2772412300109863, "vf_loss": 10.08608627319336, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16518.713, "num_steps_trained": 2442638, "grad_time_ms": 8683.218}, "episodes_this_iter": 17, "time_total_s": 1656.543067932129, "timesteps_total": 2442638, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7048>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 63, "policy_reward_mean": {}, "timesteps_this_iter": 36933, "episode_reward_min": 472.7776701567984, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 383.1212314012139, "outflow_rate_min": 1058.7494285714283, "outflow_rate_max": 1369.1047216783218, "cost1_mean": 303.88077327908513, "system_level_velocity_mean": 11.724221179136599, "system_level_velocity_max": 14.359816016255165, "cost2_min": -154.68137753239958, "cost2_max": -105.2182237108869, "cost2_mean": -130.0880441266839, "outflow_rate_mean": 1180.301934041958, "system_level_velocity_min": 9.307235117214864, "cost1_min": 234.68997892028142}, "episode_reward_max": 699.5610379457149, "episode_reward_mean": 592.977188162315, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2479859, "pid": 10559, "time_since_restore": 1681.4611728191376, "episodes_total": 1125, "iterations_since_restore": 64, "episode_len_mean": 700.0, "time_this_iter_s": 24.918104887008667, "date": "2019-05-07_18-18-41", "timestamp": 1557253121, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2479859, "update_time_ms": 7.833, "load_time_ms": 7.155, "default": {"vf_explained_var": 0.878490149974823, "kl": 0.015498805791139603, "policy_loss": -0.006757605355232954, "cur_kl_coeff": 0.09492187947034836, "total_loss": 11.864762306213379, "entropy": 1.286627173423767, "vf_loss": 11.870048522949219, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16484.576, "num_steps_trained": 2479859, "grad_time_ms": 8689.076}, "episodes_this_iter": 19, "time_total_s": 1681.4611728191376, "timesteps_total": 2479859, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2400>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 64, "policy_reward_mean": {}, "timesteps_this_iter": 37221, "episode_reward_min": 483.56085298263065, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 383.1212314012139, "outflow_rate_min": 1037.3808363636365, "outflow_rate_max": 1369.1047216783218, "cost1_mean": 301.48749010030735, "system_level_velocity_mean": 11.650629109541507, "system_level_velocity_max": 14.359816016255165, "cost2_min": -157.81042584256983, "cost2_max": -105.2182237108869, "cost2_mean": -131.33574899083496, "outflow_rate_mean": 1175.0583703136863, "system_level_velocity_min": 9.307235117214864, "cost1_min": 234.68997892028142}, "episode_reward_max": 699.5610379457149, "episode_reward_mean": 588.7592302960429, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2516351, "pid": 10559, "time_since_restore": 1706.5092914104462, "episodes_total": 1142, "iterations_since_restore": 65, "episode_len_mean": 700.0, "time_this_iter_s": 25.048118591308594, "date": "2019-05-07_18-19-06", "timestamp": 1557253146, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2516351, "update_time_ms": 7.9, "load_time_ms": 7.032, "default": {"vf_explained_var": 0.8766461610794067, "kl": 0.017018873244524002, "policy_loss": -0.007888679392635822, "cur_kl_coeff": 0.09492188692092896, "total_loss": 11.108182907104492, "entropy": 1.2727577686309814, "vf_loss": 11.114455223083496, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16425.187, "num_steps_trained": 2516351, "grad_time_ms": 8685.989}, "episodes_this_iter": 17, "time_total_s": 1706.5092914104462, "timesteps_total": 2516351, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c75f8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 65, "policy_reward_mean": {}, "timesteps_this_iter": 36492, "episode_reward_min": 483.56085298263065, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 383.1212314012139, "outflow_rate_min": 1037.3808363636365, "outflow_rate_max": 1369.1047216783218, "cost1_mean": 301.68655922836746, "system_level_velocity_mean": 11.672603064759173, "system_level_velocity_max": 14.359816016255165, "cost2_min": -157.81042584256983, "cost2_max": -105.2182237108869, "cost2_mean": -132.25088645867865, "outflow_rate_mean": 1174.0388012307694, "system_level_velocity_min": 9.760200233179585, "cost1_min": 246.62466298854918}, "episode_reward_max": 699.5610379457149, "episode_reward_mean": 586.5800305521666, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2553080, "pid": 10559, "time_since_restore": 1731.7372937202454, "episodes_total": 1161, "iterations_since_restore": 66, "episode_len_mean": 700.0, "time_this_iter_s": 25.228002309799194, "date": "2019-05-07_18-19-31", "timestamp": 1557253171, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2553080, "update_time_ms": 8.143, "load_time_ms": 7.023, "default": {"vf_explained_var": 0.8965954780578613, "kl": 0.01608964242041111, "policy_loss": -0.006246031261980534, "cur_kl_coeff": 0.09492188692092896, "total_loss": 10.788535118103027, "entropy": 1.2442035675048828, "vf_loss": 10.793254852294922, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16412.116, "num_steps_trained": 2553080, "grad_time_ms": 8679.836}, "episodes_this_iter": 19, "time_total_s": 1731.7372937202454, "timesteps_total": 2553080, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eaa20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eae10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eaeb8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 66, "policy_reward_mean": {}, "timesteps_this_iter": 36729, "episode_reward_min": 483.56085298263065, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 394.75201314989476, "outflow_rate_min": 1037.3808363636365, "outflow_rate_max": 1308.0092599400598, "cost1_mean": 301.9175040651606, "system_level_velocity_mean": 11.737275001938563, "system_level_velocity_max": 15.226431841806605, "cost2_min": -159.42029429215376, "cost2_max": -112.86357385046917, "cost2_mean": -133.49678313622644, "outflow_rate_mean": 1172.375299388576, "system_level_velocity_min": 9.760200233179585, "cost1_min": 241.08674050068294}, "episode_reward_max": 699.5610379457149, "episode_reward_mean": 588.8732290991059, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2589245, "pid": 10559, "time_since_restore": 1757.1630623340607, "episodes_total": 1181, "iterations_since_restore": 67, "episode_len_mean": 698.17, "time_this_iter_s": 25.425768613815308, "date": "2019-05-07_18-19-56", "timestamp": 1557253196, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2589245, "update_time_ms": 8.43, "load_time_ms": 7.163, "default": {"vf_explained_var": 0.8904603719711304, "kl": 0.014307072386145592, "policy_loss": -0.00762157654389739, "cur_kl_coeff": 0.09492187947034836, "total_loss": 11.392159461975098, "entropy": 1.272151231765747, "vf_loss": 11.398423194885254, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16422.275, "num_steps_trained": 2589245, "grad_time_ms": 8701.224}, "episodes_this_iter": 20, "time_total_s": 1757.1630623340607, "timesteps_total": 2589245, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eac88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434d2fd0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 67, "policy_reward_mean": {}, "timesteps_this_iter": 36165, "episode_reward_min": 465.92562339574135, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 394.75201314989476, "outflow_rate_min": 487.1760573448925, "outflow_rate_max": 1308.0092599400598, "cost1_mean": 298.76019251038014, "system_level_velocity_mean": 11.808782646968684, "system_level_velocity_max": 19.10071312248312, "cost2_min": -159.42029429215376, "cost2_max": -27.92671259117257, "cost2_mean": -132.85636017975546, "outflow_rate_mean": 1163.4406136603266, "system_level_velocity_min": 9.760200233179585, "cost1_min": 34.71093800571098}, "episode_reward_max": 686.13292187167, "episode_reward_mean": 580.2293807807695, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2625103, "pid": 10559, "time_since_restore": 1783.292998790741, "episodes_total": 1199, "iterations_since_restore": 68, "episode_len_mean": 691.68, "time_this_iter_s": 26.129936456680298, "date": "2019-05-07_18-20-23", "timestamp": 1557253223, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2625103, "update_time_ms": 8.598, "load_time_ms": 7.181, "default": {"vf_explained_var": 0.8936652541160583, "kl": 0.01844155602157116, "policy_loss": -0.007669438607990742, "cur_kl_coeff": 0.09492187947034836, "total_loss": 11.835684776306152, "entropy": 1.2685821056365967, "vf_loss": 11.84160327911377, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16511.694, "num_steps_trained": 2625103, "grad_time_ms": 8672.278}, "episodes_this_iter": 18, "time_total_s": 1783.292998790741, "timesteps_total": 2625103, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de160>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 68, "policy_reward_mean": {}, "timesteps_this_iter": 35858, "episode_reward_min": 58.75452421154384, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 421.6477040734491, "outflow_rate_min": 487.1760573448925, "outflow_rate_max": 1562.514491908092, "cost1_mean": 301.6484964009758, "system_level_velocity_mean": 11.926856022016326, "system_level_velocity_max": 19.10071312248312, "cost2_min": -159.42029429215376, "cost2_max": -27.92671259117257, "cost2_mean": -132.62447436078352, "outflow_rate_mean": 1169.8478734405462, "system_level_velocity_min": 9.760200233179585, "cost1_min": 34.71093800571098}, "episode_reward_max": 758.3182874382911, "episode_reward_mean": 580.7021062563201, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2660904, "pid": 10559, "time_since_restore": 1807.917283296585, "episodes_total": 1217, "iterations_since_restore": 69, "episode_len_mean": 691.68, "time_this_iter_s": 24.624284505844116, "date": "2019-05-07_18-20-47", "timestamp": 1557253247, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2660904, "update_time_ms": 8.658, "load_time_ms": 7.196, "default": {"vf_explained_var": 0.9100587368011475, "kl": 0.01578587107360363, "policy_loss": -0.00733041251078248, "cur_kl_coeff": 0.09492188692092896, "total_loss": 10.349666595458984, "entropy": 1.271030068397522, "vf_loss": 10.355498313903809, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16455.237, "num_steps_trained": 2660904, "grad_time_ms": 8658.324}, "episodes_this_iter": 18, "time_total_s": 1807.917283296585, "timesteps_total": 2660904, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7b70>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 69, "policy_reward_mean": {}, "timesteps_this_iter": 35801, "episode_reward_min": 58.75452421154384, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 421.6477040734491, "outflow_rate_min": 487.1760573448925, "outflow_rate_max": 1562.514491908092, "cost1_mean": 301.4241670869435, "system_level_velocity_mean": 11.945062679827997, "system_level_velocity_max": 19.10071312248312, "cost2_min": -159.42029429215376, "cost2_max": -27.92671259117257, "cost2_mean": -131.34348588770573, "outflow_rate_mean": 1170.1160455044824, "system_level_velocity_min": 9.52112475569998, "cost1_min": 34.71093800571098}, "episode_reward_max": 758.3182874382911, "episode_reward_mean": 576.2421650844606, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2697106, "pid": 10559, "time_since_restore": 1833.4914119243622, "episodes_total": 1236, "iterations_since_restore": 70, "episode_len_mean": 691.68, "time_this_iter_s": 25.5741286277771, "date": "2019-05-07_18-21-13", "timestamp": 1557253273, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2697106, "update_time_ms": 8.919, "load_time_ms": 7.19, "default": {"vf_explained_var": 0.912615180015564, "kl": 0.01666330173611641, "policy_loss": -0.007048379629850388, "cur_kl_coeff": 0.09492187947034836, "total_loss": 10.602569580078125, "entropy": 1.2612797021865845, "vf_loss": 10.608036994934082, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16501.197, "num_steps_trained": 2697106, "grad_time_ms": 8655.336}, "episodes_this_iter": 19, "time_total_s": 1833.4914119243622, "timesteps_total": 2697106, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c79e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca588>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 70, "policy_reward_mean": {}, "timesteps_this_iter": 36202, "episode_reward_min": 58.75452421154384, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 421.6477040734491, "outflow_rate_min": 487.1760573448925, "outflow_rate_max": 1562.514491908092, "cost1_mean": 304.8834513199921, "system_level_velocity_mean": 12.08924135768429, "system_level_velocity_max": 19.10071312248312, "cost2_min": -159.42029429215376, "cost2_max": -27.92671259117257, "cost2_mean": -131.35859776150522, "outflow_rate_mean": 1175.157337140846, "system_level_velocity_min": 9.52112475569998, "cost1_min": 34.71093800571098}, "episode_reward_max": 758.3182874382911, "episode_reward_mean": 572.2232129550263, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2733334, "pid": 10559, "time_since_restore": 1858.4510180950165, "episodes_total": 1255, "iterations_since_restore": 71, "episode_len_mean": 691.68, "time_this_iter_s": 24.959606170654297, "date": "2019-05-07_18-21-38", "timestamp": 1557253298, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2733334, "update_time_ms": 8.918, "load_time_ms": 7.062, "default": {"vf_explained_var": 0.8877630233764648, "kl": 0.021496424451470375, "policy_loss": -0.00723582599312067, "cur_kl_coeff": 0.09492187947034836, "total_loss": 11.842944145202637, "entropy": 1.2413843870162964, "vf_loss": 11.848139762878418, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16448.44, "num_steps_trained": 2733334, "grad_time_ms": 8653.693}, "episodes_this_iter": 19, "time_total_s": 1858.4510180950165, "timesteps_total": 2733334, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434c7ac8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 71, "policy_reward_mean": {}, "timesteps_this_iter": 36228, "episode_reward_min": 58.75452421154384, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 421.6477040734491, "outflow_rate_min": 487.1760573448925, "outflow_rate_max": 1562.514491908092, "cost1_mean": 304.7745157113693, "system_level_velocity_mean": 12.070639772915293, "system_level_velocity_max": 19.10071312248312, "cost2_min": -159.42029429215376, "cost2_max": -27.92671259117257, "cost2_mean": -132.3929225550139, "outflow_rate_mean": 1172.4181227153072, "system_level_velocity_min": 9.52112475569998, "cost1_min": 34.71093800571098}, "episode_reward_max": 758.3182874382911, "episode_reward_mean": 573.9923954410137, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2769369, "pid": 10559, "time_since_restore": 1883.4014565944672, "episodes_total": 1272, "iterations_since_restore": 72, "episode_len_mean": 693.51, "time_this_iter_s": 24.950438499450684, "date": "2019-05-07_18-22-03", "timestamp": 1557253323, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2769369, "update_time_ms": 8.802, "load_time_ms": 7.088, "default": {"vf_explained_var": 0.9047042727470398, "kl": 0.014626499265432358, "policy_loss": -0.007439124397933483, "cur_kl_coeff": 0.14238281548023224, "total_loss": 10.433982849121094, "entropy": 1.2605736255645752, "vf_loss": 10.439340591430664, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16405.96, "num_steps_trained": 2769369, "grad_time_ms": 8660.321}, "episodes_this_iter": 17, "time_total_s": 1883.4014565944672, "timesteps_total": 2769369, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bce48>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 72, "policy_reward_mean": {}, "timesteps_this_iter": 36035, "episode_reward_min": 58.75452421154384, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 421.6477040734491, "outflow_rate_min": 474.5328649908782, "outflow_rate_max": 1562.514491908092, "cost1_mean": 303.9902473829032, "system_level_velocity_mean": 12.218256201833835, "system_level_velocity_max": 19.10071312248312, "cost2_min": -162.6631159679951, "cost2_max": -26.639239088675357, "cost2_mean": -132.11960419559534, "outflow_rate_mean": 1171.9026935790018, "system_level_velocity_min": 9.52112475569998, "cost1_min": 30.93353047814343}, "episode_reward_max": 758.3182874382911, "episode_reward_mean": 574.0352491476963, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2805346, "pid": 10559, "time_since_restore": 1908.9131722450256, "episodes_total": 1293, "iterations_since_restore": 73, "episode_len_mean": 686.96, "time_this_iter_s": 25.51171565055847, "date": "2019-05-07_18-22-28", "timestamp": 1557253348, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2805346, "update_time_ms": 8.779, "load_time_ms": 6.562, "default": {"vf_explained_var": 0.8886642456054688, "kl": 0.016153912991285324, "policy_loss": -0.008620123378932476, "cur_kl_coeff": 0.14238281548023224, "total_loss": 12.349152565002441, "entropy": 1.250365138053894, "vf_loss": 12.355472564697266, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16466.394, "num_steps_trained": 2805346, "grad_time_ms": 8669.266}, "episodes_this_iter": 21, "time_total_s": 1908.9131722450256, "timesteps_total": 2805346, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edc88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed668>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 73, "policy_reward_mean": {}, "timesteps_this_iter": 35977, "episode_reward_min": 49.464111493263516, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 421.6477040734491, "outflow_rate_min": 474.5328649908782, "outflow_rate_max": 1562.514491908092, "cost1_mean": 307.69604464721283, "system_level_velocity_mean": 12.190084674784122, "system_level_velocity_max": 18.898737453526838, "cost2_min": -162.6631159679951, "cost2_max": -26.639239088675357, "cost2_mean": -133.96027575774318, "outflow_rate_mean": 1182.5255239825758, "system_level_velocity_min": 9.52112475569998, "cost1_min": 30.93353047814343}, "episode_reward_max": 758.3182874382911, "episode_reward_mean": 583.2484049841872, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2841948, "pid": 10559, "time_since_restore": 1933.954110622406, "episodes_total": 1310, "iterations_since_restore": 74, "episode_len_mean": 693.45, "time_this_iter_s": 25.04093837738037, "date": "2019-05-07_18-22-53", "timestamp": 1557253373, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2841948, "update_time_ms": 8.776, "load_time_ms": 6.634, "default": {"vf_explained_var": 0.9004668593406677, "kl": 0.013104498386383057, "policy_loss": -0.006682279985398054, "cur_kl_coeff": 0.14238281548023224, "total_loss": 9.502394676208496, "entropy": 1.2589447498321533, "vf_loss": 9.507210731506348, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16480.01, "num_steps_trained": 2841948, "grad_time_ms": 8667.498}, "episodes_this_iter": 17, "time_total_s": 1933.954110622406, "timesteps_total": 2841948, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edb38>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 74, "policy_reward_mean": {}, "timesteps_this_iter": 36602, "episode_reward_min": 49.464111493263516, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 390.9781496005974, "outflow_rate_min": 439.6544456755007, "outflow_rate_max": 1428.7198965034966, "cost1_mean": 302.6192418655389, "system_level_velocity_mean": 12.185655203790915, "system_level_velocity_max": 19.559513089444838, "cost2_min": -162.6631159679951, "cost2_max": -20.54190320318091, "cost2_mean": -135.35669187928193, "outflow_rate_mean": 1172.7681621456247, "system_level_velocity_min": 9.427224043491922, "cost1_min": 19.433702706087324}, "episode_reward_max": 720.8792205855485, "episode_reward_mean": 583.6922884451353, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2879478, "pid": 10559, "time_since_restore": 1959.512327671051, "episodes_total": 1329, "iterations_since_restore": 75, "episode_len_mean": 686.74, "time_this_iter_s": 25.55821704864502, "date": "2019-05-07_18-23-19", "timestamp": 1557253399, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2879478, "update_time_ms": 8.847, "load_time_ms": 6.938, "default": {"vf_explained_var": 0.8767630457878113, "kl": 0.017795700579881668, "policy_loss": -0.008334055542945862, "cur_kl_coeff": 0.14238280057907104, "total_loss": 11.274848937988281, "entropy": 1.2749007940292358, "vf_loss": 11.280649185180664, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16477.006, "num_steps_trained": 2879478, "grad_time_ms": 8720.94}, "episodes_this_iter": 19, "time_total_s": 1959.512327671051, "timesteps_total": 2879478, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bc710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434bce48>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 75, "policy_reward_mean": {}, "timesteps_this_iter": 37530, "episode_reward_min": 29.501509447515737, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 390.9781496005974, "outflow_rate_min": 439.6544456755007, "outflow_rate_max": 1428.7198965034966, "cost1_mean": 297.85310389170866, "system_level_velocity_mean": 12.01213436766302, "system_level_velocity_max": 19.559513089444838, "cost2_min": -162.6631159679951, "cost2_max": -20.54190320318091, "cost2_mean": -137.30285493593743, "outflow_rate_mean": 1167.0316783494209, "system_level_velocity_min": 9.427224043491922, "cost1_min": 19.433702706087324}, "episode_reward_max": 720.8792205855485, "episode_reward_mean": 586.0307487608474, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2916452, "pid": 10559, "time_since_restore": 1984.700663805008, "episodes_total": 1347, "iterations_since_restore": 76, "episode_len_mean": 686.74, "time_this_iter_s": 25.18833613395691, "date": "2019-05-07_18-23-44", "timestamp": 1557253424, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2916452, "update_time_ms": 8.752, "load_time_ms": 6.881, "default": {"vf_explained_var": 0.9064509272575378, "kl": 0.013435364700853825, "policy_loss": -0.0062095243483781815, "cur_kl_coeff": 0.14238281548023224, "total_loss": 8.695392608642578, "entropy": 1.2805454730987549, "vf_loss": 8.699687957763672, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16438.01, "num_steps_trained": 2916452, "grad_time_ms": 8753.701}, "episodes_this_iter": 18, "time_total_s": 1984.700663805008, "timesteps_total": 2916452, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cada0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cacc0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 76, "policy_reward_mean": {}, "timesteps_this_iter": 36974, "episode_reward_min": 29.501509447515737, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 390.9781496005974, "outflow_rate_min": 439.6544456755007, "outflow_rate_max": 1428.7198965034966, "cost1_mean": 293.27209117386553, "system_level_velocity_mean": 11.84301722505353, "system_level_velocity_max": 19.559513089444838, "cost2_min": -162.6631159679951, "cost2_max": -20.54190320318091, "cost2_mean": -138.1956158964712, "outflow_rate_mean": 1166.8773793204498, "system_level_velocity_min": 8.98631237039792, "cost1_min": 19.433702706087324}, "episode_reward_max": 720.8792205855485, "episode_reward_mean": 586.3222897865196, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2953642, "pid": 10559, "time_since_restore": 2011.42489027977, "episodes_total": 1367, "iterations_since_restore": 77, "episode_len_mean": 686.74, "time_this_iter_s": 26.724226474761963, "date": "2019-05-07_18-24-11", "timestamp": 1557253451, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2953642, "update_time_ms": 8.617, "load_time_ms": 6.739, "default": {"vf_explained_var": 0.8943070769309998, "kl": 0.015430173836648464, "policy_loss": -0.007494470104575157, "cur_kl_coeff": 0.14238281548023224, "total_loss": 11.285290718078613, "entropy": 1.282151460647583, "vf_loss": 11.29058837890625, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16518.353, "num_steps_trained": 2953642, "grad_time_ms": 8804.702}, "episodes_this_iter": 20, "time_total_s": 2011.42489027977, "timesteps_total": 2953642, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eab38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea1d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eac50>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 77, "policy_reward_mean": {}, "timesteps_this_iter": 37190, "episode_reward_min": 29.501509447515737, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 390.9781496005974, "outflow_rate_min": 439.6544456755007, "outflow_rate_max": 1428.7198965034966, "cost1_mean": 293.31841803863085, "system_level_velocity_mean": 11.673068930286265, "system_level_velocity_max": 19.559513089444838, "cost2_min": -158.9168937243688, "cost2_max": -20.54190320318091, "cost2_mean": -139.33599476752468, "outflow_rate_mean": 1167.2739759252865, "system_level_velocity_min": 8.98631237039792, "cost1_min": 19.433702706087324}, "episode_reward_max": 720.8792205855485, "episode_reward_mean": 588.4606349468986, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 2990207, "pid": 10559, "time_since_restore": 2036.5478222370148, "episodes_total": 1384, "iterations_since_restore": 78, "episode_len_mean": 693.29, "time_this_iter_s": 25.122931957244873, "date": "2019-05-07_18-24-36", "timestamp": 1557253476, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 2990207, "update_time_ms": 8.727, "load_time_ms": 6.661, "default": {"vf_explained_var": 0.8949753642082214, "kl": 0.013996344991028309, "policy_loss": -0.007184919435530901, "cur_kl_coeff": 0.14238281548023224, "total_loss": 10.40007209777832, "entropy": 1.2822835445404053, "vf_loss": 10.405263900756836, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16411.822, "num_steps_trained": 2990207, "grad_time_ms": 8807.304}, "episodes_this_iter": 17, "time_total_s": 2036.5478222370148, "timesteps_total": 2990207, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de0b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca3c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca7b8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 78, "policy_reward_mean": {}, "timesteps_this_iter": 36565, "episode_reward_min": 29.501509447515737, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 390.9781496005974, "outflow_rate_min": 439.6544456755007, "outflow_rate_max": 1428.7198965034966, "cost1_mean": 287.83359110158324, "system_level_velocity_mean": 11.63720593484586, "system_level_velocity_max": 19.559513089444838, "cost2_min": -158.9168937243688, "cost2_max": -20.54190320318091, "cost2_mean": -138.34053980090383, "outflow_rate_mean": 1156.7876795665256, "system_level_velocity_min": 8.98631237039792, "cost1_min": 19.433702706087324}, "episode_reward_max": 720.8792205855485, "episode_reward_mean": 580.1221335904448, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3027626, "pid": 10559, "time_since_restore": 2062.300542831421, "episodes_total": 1401, "iterations_since_restore": 79, "episode_len_mean": 686.78, "time_this_iter_s": 25.752720594406128, "date": "2019-05-07_18-25-02", "timestamp": 1557253502, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3027626, "update_time_ms": 8.791, "load_time_ms": 6.66, "default": {"vf_explained_var": 0.9102599024772644, "kl": 0.015056567266583443, "policy_loss": -0.006386831868439913, "cur_kl_coeff": 0.14238281548023224, "total_loss": 8.580778121948242, "entropy": 1.287756085395813, "vf_loss": 8.585020065307617, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16471.637, "num_steps_trained": 3027626, "grad_time_ms": 8863.218}, "episodes_this_iter": 17, "time_total_s": 2062.300542831421, "timesteps_total": 3027626, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eda90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed860>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 79, "policy_reward_mean": {}, "timesteps_this_iter": 37419, "episode_reward_min": 29.501509447515737, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.5493190895983, "outflow_rate_min": 483.55059029774526, "outflow_rate_max": 1315.8746357642356, "cost1_mean": 286.696426427719, "system_level_velocity_mean": 11.412206175521721, "system_level_velocity_max": 18.26785025340626, "cost2_min": -159.97017319123984, "cost2_max": -25.518736440668597, "cost2_mean": -140.111751601042, "outflow_rate_mean": 1156.7440026542263, "system_level_velocity_min": 8.918202543944538, "cost1_min": 31.85843085438345}, "episode_reward_max": 706.4408212591319, "episode_reward_mean": 584.2816047104592, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3064898, "pid": 10559, "time_since_restore": 2088.495265483856, "episodes_total": 1421, "iterations_since_restore": 80, "episode_len_mean": 693.49, "time_this_iter_s": 26.194722652435303, "date": "2019-05-07_18-25-28", "timestamp": 1557253528, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3064898, "update_time_ms": 8.662, "load_time_ms": 6.736, "default": {"vf_explained_var": 0.9037517309188843, "kl": 0.01330514345318079, "policy_loss": -0.006915896199643612, "cur_kl_coeff": 0.14238283038139343, "total_loss": 10.56364917755127, "entropy": 1.2698891162872314, "vf_loss": 10.568670272827148, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16507.036, "num_steps_trained": 3064898, "grad_time_ms": 8889.476}, "episodes_this_iter": 20, "time_total_s": 2088.495265483856, "timesteps_total": 3064898, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cae48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cadd8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 80, "policy_reward_mean": {}, "timesteps_this_iter": 37272, "episode_reward_min": 44.40290116561004, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.5493190895983, "outflow_rate_min": 483.55059029774526, "outflow_rate_max": 1315.8746357642356, "cost1_mean": 289.07817417308155, "system_level_velocity_mean": 11.501450349189575, "system_level_velocity_max": 18.26785025340626, "cost2_min": -159.97017319123984, "cost2_max": -25.518736440668597, "cost2_mean": -140.4856150262534, "outflow_rate_mean": 1162.651715549331, "system_level_velocity_min": 8.918202543944538, "cost1_min": 31.85843085438345}, "episode_reward_max": 712.6222963254784, "episode_reward_mean": 586.6635447241906, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3102564, "pid": 10559, "time_since_restore": 2114.1129760742188, "episodes_total": 1440, "iterations_since_restore": 81, "episode_len_mean": 693.49, "time_this_iter_s": 25.61771059036255, "date": "2019-05-07_18-25-54", "timestamp": 1557253554, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3102564, "update_time_ms": 8.616, "load_time_ms": 6.902, "default": {"vf_explained_var": 0.9153056144714355, "kl": 0.014632844366133213, "policy_loss": -0.0066554956138134, "cur_kl_coeff": 0.14238281548023224, "total_loss": 9.05286693572998, "entropy": 1.2837927341461182, "vf_loss": 9.057439804077148, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16509.892, "num_steps_trained": 3102564, "grad_time_ms": 8951.944}, "episodes_this_iter": 19, "time_total_s": 2114.1129760742188, "timesteps_total": 3102564, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea6d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eab38>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 81, "policy_reward_mean": {}, "timesteps_this_iter": 37666, "episode_reward_min": 44.40290116561004, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.5493190895983, "outflow_rate_min": 483.55059029774526, "outflow_rate_max": 1315.8746357642356, "cost1_mean": 287.9963907448625, "system_level_velocity_mean": 11.469689664928847, "system_level_velocity_max": 18.26785025340626, "cost2_min": -159.97017319123984, "cost2_max": -25.518736440668597, "cost2_mean": -140.97069654705425, "outflow_rate_mean": 1162.8954271976827, "system_level_velocity_min": 8.918202543944538, "cost1_min": 31.85843085438345}, "episode_reward_max": 712.6222963254784, "episode_reward_mean": 589.1390471268846, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3140527, "pid": 10559, "time_since_restore": 2139.3004155158997, "episodes_total": 1460, "iterations_since_restore": 82, "episode_len_mean": 693.49, "time_this_iter_s": 25.187439441680908, "date": "2019-05-07_18-26-19", "timestamp": 1557253579, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3140527, "update_time_ms": 8.697, "load_time_ms": 6.907, "default": {"vf_explained_var": 0.9030442237854004, "kl": 0.012382661923766136, "policy_loss": -0.005514328368008137, "cur_kl_coeff": 0.14238283038139343, "total_loss": 9.51544189453125, "entropy": 1.3087362051010132, "vf_loss": 9.519192695617676, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16505.942, "num_steps_trained": 3140527, "grad_time_ms": 8979.105}, "episodes_this_iter": 20, "time_total_s": 2139.3004155158997, "timesteps_total": 3140527, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed940>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 82, "policy_reward_mean": {}, "timesteps_this_iter": 37963, "episode_reward_min": 44.40290116561004, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 342.9804122428435, "outflow_rate_min": 483.55059029774526, "outflow_rate_max": 1303.0515616383618, "cost1_mean": 284.8262138311813, "system_level_velocity_mean": 11.369324255316444, "system_level_velocity_max": 18.26785025340626, "cost2_min": -159.97017319123984, "cost2_max": -25.518736440668597, "cost2_mean": -141.8632346202665, "outflow_rate_mean": 1162.8400129918887, "system_level_velocity_min": 8.918202543944538, "cost1_min": 31.85843085438345}, "episode_reward_max": 712.6222963254784, "episode_reward_mean": 591.9112303031932, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3177543, "pid": 10559, "time_since_restore": 2164.365054130554, "episodes_total": 1477, "iterations_since_restore": 83, "episode_len_mean": 693.49, "time_this_iter_s": 25.06463861465454, "date": "2019-05-07_18-26-44", "timestamp": 1557253604, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3177543, "update_time_ms": 8.471, "load_time_ms": 7.414, "default": {"vf_explained_var": 0.918830931186676, "kl": 0.01537842396646738, "policy_loss": -0.006392650306224823, "cur_kl_coeff": 0.14238283038139343, "total_loss": 9.139799118041992, "entropy": 1.2980607748031616, "vf_loss": 9.144001960754395, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16425.16, "num_steps_trained": 3177543, "grad_time_ms": 9015.066}, "episodes_this_iter": 17, "time_total_s": 2164.365054130554, "timesteps_total": 3177543, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dada0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da7b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da6d8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 83, "policy_reward_mean": {}, "timesteps_this_iter": 37016, "episode_reward_min": 44.40290116561004, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.94513285931254, "outflow_rate_min": 1005.1628491508492, "outflow_rate_max": 1392.1209286713286, "cost1_mean": 288.6062336337495, "system_level_velocity_mean": 11.339672519276643, "system_level_velocity_max": 13.602328007261718, "cost2_min": -166.54071825050295, "cost2_max": -116.26671255104465, "cost2_mean": -142.66350851755138, "outflow_rate_mean": 1174.3802827532468, "system_level_velocity_min": 8.918202543944538, "cost1_min": 224.7465524613009}, "episode_reward_max": 712.6222963254784, "episode_reward_mean": 599.3653362748084, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3213800, "pid": 10559, "time_since_restore": 2189.661025285721, "episodes_total": 1496, "iterations_since_restore": 84, "episode_len_mean": 700.0, "time_this_iter_s": 25.295971155166626, "date": "2019-05-07_18-27-09", "timestamp": 1557253629, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3213800, "update_time_ms": 8.845, "load_time_ms": 7.231, "default": {"vf_explained_var": 0.9128807187080383, "kl": 0.013667002320289612, "policy_loss": -0.0076094320975244045, "cur_kl_coeff": 0.14238281548023224, "total_loss": 10.123087882995605, "entropy": 1.2896485328674316, "vf_loss": 10.128751754760742, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16467.449, "num_steps_trained": 3213800, "grad_time_ms": 8998.004}, "episodes_this_iter": 19, "time_total_s": 2189.661025285721, "timesteps_total": 3213800, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edf60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edb38>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 84, "policy_reward_mean": {}, "timesteps_this_iter": 36257, "episode_reward_min": 501.49070574221474, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.94513285931254, "outflow_rate_min": 1028.5788, "outflow_rate_max": 1392.1209286713286, "cost1_mean": 287.95235432816366, "system_level_velocity_mean": 11.323940570088753, "system_level_velocity_max": 13.602328007261718, "cost2_min": -166.54071825050295, "cost2_max": -117.2496070195835, "cost2_mean": -140.89440913469113, "outflow_rate_mean": 1170.4349844155845, "system_level_velocity_min": 9.676921118334175, "cost1_min": 238.12168167178058}, "episode_reward_max": 712.6222963254784, "episode_reward_mean": 598.5339665477959, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3250957, "pid": 10559, "time_since_restore": 2215.217064857483, "episodes_total": 1513, "iterations_since_restore": 85, "episode_len_mean": 700.0, "time_this_iter_s": 25.556039571762085, "date": "2019-05-07_18-27-35", "timestamp": 1557253655, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3250957, "update_time_ms": 8.974, "load_time_ms": 6.974, "default": {"vf_explained_var": 0.9063063859939575, "kl": 0.016288572922348976, "policy_loss": -0.006372467149049044, "cur_kl_coeff": 0.14238281548023224, "total_loss": 11.196163177490234, "entropy": 1.29360830783844, "vf_loss": 11.200215339660645, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16490.819, "num_steps_trained": 3250957, "grad_time_ms": 8977.654}, "episodes_this_iter": 17, "time_total_s": 2215.217064857483, "timesteps_total": 3250957, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eada0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eadd8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 85, "policy_reward_mean": {}, "timesteps_this_iter": 37157, "episode_reward_min": 499.8084092742016, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.94513285931254, "outflow_rate_min": 999.4109974025974, "outflow_rate_max": 1392.1209286713286, "cost1_mean": 285.06134206315585, "system_level_velocity_mean": 11.224112753880158, "system_level_velocity_max": 13.602328007261718, "cost2_min": -166.54071825050295, "cost2_max": -115.22343688079135, "cost2_mean": -138.72451478577187, "outflow_rate_mean": 1156.2470505854144, "system_level_velocity_min": 9.480099073001115, "cost1_min": 232.01204015006599}, "episode_reward_max": 712.6222963254784, "episode_reward_mean": 591.6503734871021, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3288025, "pid": 10559, "time_since_restore": 2240.999650478363, "episodes_total": 1529, "iterations_since_restore": 86, "episode_len_mean": 700.0, "time_this_iter_s": 25.782585620880127, "date": "2019-05-07_18-28-01", "timestamp": 1557253681, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3288025, "update_time_ms": 8.857, "load_time_ms": 6.906, "default": {"vf_explained_var": 0.9207455515861511, "kl": 0.012987323105335236, "policy_loss": -0.005999316927045584, "cur_kl_coeff": 0.14238283038139343, "total_loss": 8.502408027648926, "entropy": 1.297652244567871, "vf_loss": 8.506558418273926, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16538.223, "num_steps_trained": 3288025, "grad_time_ms": 8990.939}, "episodes_this_iter": 16, "time_total_s": 2240.999650478363, "timesteps_total": 3288025, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed8d0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 86, "policy_reward_mean": {}, "timesteps_this_iter": 37068, "episode_reward_min": 499.8084092742016, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.94513285931254, "outflow_rate_min": 999.4109974025974, "outflow_rate_max": 1392.1209286713286, "cost1_mean": 281.28553711634646, "system_level_velocity_mean": 11.086344893241256, "system_level_velocity_max": 13.602328007261718, "cost2_min": -166.54071825050295, "cost2_max": -115.22343688079135, "cost2_mean": -137.18428662631484, "outflow_rate_mean": 1145.489364975025, "system_level_velocity_min": 9.239372680529897, "cost1_min": 230.70966222226593}, "episode_reward_max": 708.2069031799922, "episode_reward_mean": 589.7820992048407, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3325206, "pid": 10559, "time_since_restore": 2266.643159389496, "episodes_total": 1549, "iterations_since_restore": 87, "episode_len_mean": 700.0, "time_this_iter_s": 25.643508911132812, "date": "2019-05-07_18-28-27", "timestamp": 1557253707, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3325206, "update_time_ms": 9.048, "load_time_ms": 6.903, "default": {"vf_explained_var": 0.9247308373451233, "kl": 0.014073521830141544, "policy_loss": -0.007767515257000923, "cur_kl_coeff": 0.14238281548023224, "total_loss": 8.845821380615234, "entropy": 1.3178317546844482, "vf_loss": 8.851585388183594, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16484.273, "num_steps_trained": 3325206, "grad_time_ms": 8939.14}, "episodes_this_iter": 20, "time_total_s": 2266.643159389496, "timesteps_total": 3325206, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da6d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da7b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434dac18>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 87, "policy_reward_mean": {}, "timesteps_this_iter": 37181, "episode_reward_min": 499.8084092742016, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.94513285931254, "outflow_rate_min": 958.2372, "outflow_rate_max": 1392.1209286713286, "cost1_mean": 281.60696557727084, "system_level_velocity_mean": 11.076979029266056, "system_level_velocity_max": 13.602328007261718, "cost2_min": -166.54071825050295, "cost2_max": -115.22343688079135, "cost2_mean": -136.01496044164247, "outflow_rate_mean": 1139.8926165034966, "system_level_velocity_min": 9.239372680529897, "cost1_min": 230.70966222226593}, "episode_reward_max": 708.2069031799922, "episode_reward_mean": 587.3751525526369, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3363547, "pid": 10559, "time_since_restore": 2292.5376482009888, "episodes_total": 1567, "iterations_since_restore": 88, "episode_len_mean": 700.0, "time_this_iter_s": 25.89448881149292, "date": "2019-05-07_18-28-52", "timestamp": 1557253732, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3363547, "update_time_ms": 8.841, "load_time_ms": 7.093, "default": {"vf_explained_var": 0.9189308285713196, "kl": 0.018424835056066513, "policy_loss": -0.006243724375963211, "cur_kl_coeff": 0.14238281548023224, "total_loss": 9.363900184631348, "entropy": 1.314928412437439, "vf_loss": 9.367520332336426, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16549.721, "num_steps_trained": 3363547, "grad_time_ms": 8952.204}, "episodes_this_iter": 18, "time_total_s": 2292.5376482009888, "timesteps_total": 3363547, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ca5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cadd8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 88, "policy_reward_mean": {}, "timesteps_this_iter": 38341, "episode_reward_min": 482.11135370513284, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 354.94513285931254, "outflow_rate_min": 958.2372, "outflow_rate_max": 1392.1209286713286, "cost1_mean": 282.4622117351789, "system_level_velocity_mean": 11.094025378440877, "system_level_velocity_max": 13.602328007261718, "cost2_min": -166.54071825050295, "cost2_max": -115.22343688079135, "cost2_mean": -134.7671322029397, "outflow_rate_mean": 1128.4984127072928, "system_level_velocity_min": 9.239372680529897, "cost1_min": 230.70966222226593}, "episode_reward_max": 693.7851343295004, "episode_reward_mean": 585.7675656498751, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3401028, "pid": 10559, "time_since_restore": 2319.4182574748993, "episodes_total": 1587, "iterations_since_restore": 89, "episode_len_mean": 700.0, "time_this_iter_s": 26.880609273910522, "date": "2019-05-07_18-29-19", "timestamp": 1557253759, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3401028, "update_time_ms": 8.58, "load_time_ms": 7.272, "default": {"vf_explained_var": 0.9223862886428833, "kl": 0.016521098092198372, "policy_loss": -0.008588576689362526, "cur_kl_coeff": 0.14238281548023224, "total_loss": 9.30123233795166, "entropy": 1.322400450706482, "vf_loss": 9.30746841430664, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16588.703, "num_steps_trained": 3401028, "grad_time_ms": 9024.919}, "episodes_this_iter": 20, "time_total_s": 2319.4182574748993, "timesteps_total": 3401028, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eada0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea780>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 89, "policy_reward_mean": {}, "timesteps_this_iter": 37481, "episode_reward_min": 482.11135370513284, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 352.7004428436755, "outflow_rate_min": 958.2372, "outflow_rate_max": 1295.4408851148848, "cost1_mean": 282.92068125594034, "system_level_velocity_mean": 11.11255531336027, "system_level_velocity_max": 13.636018267398919, "cost2_min": -160.45963432834066, "cost2_max": -102.01076703035818, "cost2_mean": -134.27084285576188, "outflow_rate_mean": 1129.1576176983017, "system_level_velocity_min": 9.239372680529897, "cost1_min": 228.7086603120846}, "episode_reward_max": 682.2077285716593, "episode_reward_mean": 585.51606168226, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3438183, "pid": 10559, "time_since_restore": 2345.0826094150543, "episodes_total": 1606, "iterations_since_restore": 90, "episode_len_mean": 700.0, "time_this_iter_s": 25.66435194015503, "date": "2019-05-07_18-29-45", "timestamp": 1557253785, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3438183, "update_time_ms": 8.473, "load_time_ms": 7.371, "default": {"vf_explained_var": 0.9100533127784729, "kl": 0.013620485551655293, "policy_loss": -0.006647094618529081, "cur_kl_coeff": 0.14238281548023224, "total_loss": 9.978271484375, "entropy": 1.332810640335083, "vf_loss": 9.982978820800781, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16578.79, "num_steps_trained": 3438183, "grad_time_ms": 8981.744}, "episodes_this_iter": 19, "time_total_s": 2345.0826094150543, "timesteps_total": 3438183, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eddd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edd68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed8d0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 90, "policy_reward_mean": {}, "timesteps_this_iter": 37155, "episode_reward_min": 482.11135370513284, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.4373574353059, "outflow_rate_min": 958.2372, "outflow_rate_max": 1311.0081302697301, "cost1_mean": 281.6940729774638, "system_level_velocity_mean": 11.068995801187725, "system_level_velocity_max": 14.248587873759789, "cost2_min": -160.45963432834066, "cost2_max": -102.01076703035818, "cost2_mean": -133.95433893945543, "outflow_rate_mean": 1128.1251845194806, "system_level_velocity_min": 9.239372680529897, "cost1_min": 228.7086603120846}, "episode_reward_max": 682.2077285716593, "episode_reward_mean": 583.6665415135492, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3474909, "pid": 10559, "time_since_restore": 2370.4829173088074, "episodes_total": 1625, "iterations_since_restore": 91, "episode_len_mean": 700.0, "time_this_iter_s": 25.40030789375305, "date": "2019-05-07_18-30-10", "timestamp": 1557253810, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3474909, "update_time_ms": 8.23, "load_time_ms": 7.296, "default": {"vf_explained_var": 0.9057815670967102, "kl": 0.015069803223013878, "policy_loss": -0.008360452950000763, "cur_kl_coeff": 0.14238281548023224, "total_loss": 9.675557136535645, "entropy": 1.3164993524551392, "vf_loss": 9.681772232055664, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16604.114, "num_steps_trained": 3474909, "grad_time_ms": 8935.925}, "episodes_this_iter": 19, "time_total_s": 2370.4829173088074, "timesteps_total": 3474909, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edbe0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 91, "policy_reward_mean": {}, "timesteps_this_iter": 36726, "episode_reward_min": 470.24530430313047, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.4373574353059, "outflow_rate_min": 958.2372, "outflow_rate_max": 1311.0081302697301, "cost1_mean": 281.89867885001735, "system_level_velocity_mean": 11.079576412908354, "system_level_velocity_max": 14.248587873759789, "cost2_min": -160.45963432834066, "cost2_max": -102.01076703035818, "cost2_mean": -133.36335306863816, "outflow_rate_mean": 1127.7213956763237, "system_level_velocity_min": 9.272412325746268, "cost1_min": 228.7086603120846}, "episode_reward_max": 682.4784025539008, "episode_reward_mean": 583.3551908767206, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3511638, "pid": 10559, "time_since_restore": 2394.762676000595, "episodes_total": 1639, "iterations_since_restore": 92, "episode_len_mean": 700.0, "time_this_iter_s": 24.27975869178772, "date": "2019-05-07_18-30-35", "timestamp": 1557253835, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3511638, "update_time_ms": 8.11, "load_time_ms": 6.805, "default": {"vf_explained_var": 0.9225497841835022, "kl": 0.015165428631007671, "policy_loss": -0.007322792429476976, "cur_kl_coeff": 0.14238281548023224, "total_loss": 7.434246063232422, "entropy": 1.3303250074386597, "vf_loss": 7.4394097328186035, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16574.035, "num_steps_trained": 3511638, "grad_time_ms": 8877.338}, "episodes_this_iter": 14, "time_total_s": 2394.762676000595, "timesteps_total": 3511638, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cab70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cacf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434cadd8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 92, "policy_reward_mean": {}, "timesteps_this_iter": 36729, "episode_reward_min": 470.24530430313047, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.4373574353059, "outflow_rate_min": 977.2809558441558, "outflow_rate_max": 1359.569261938062, "cost1_mean": 284.5549295120504, "system_level_velocity_mean": 11.182458491360135, "system_level_velocity_max": 14.248587873759789, "cost2_min": -160.45963432834066, "cost2_max": -102.01076703035818, "cost2_mean": -132.77147850759647, "outflow_rate_mean": 1131.9835397682318, "system_level_velocity_min": 9.272412325746268, "cost1_min": 228.7086603120846}, "episode_reward_max": 682.4784025539008, "episode_reward_mean": 585.1879809709721, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3549507, "pid": 10559, "time_since_restore": 2419.774050474167, "episodes_total": 1656, "iterations_since_restore": 93, "episode_len_mean": 700.0, "time_this_iter_s": 25.011374473571777, "date": "2019-05-07_18-31-00", "timestamp": 1557253860, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3549507, "update_time_ms": 8.086, "load_time_ms": 6.856, "default": {"vf_explained_var": 0.9346482157707214, "kl": 0.014881366863846779, "policy_loss": -0.006526827346533537, "cur_kl_coeff": 0.14238281548023224, "total_loss": 7.033201694488525, "entropy": 1.3375076055526733, "vf_loss": 7.037610054016113, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16530.832, "num_steps_trained": 3549507, "grad_time_ms": 8914.144}, "episodes_this_iter": 17, "time_total_s": 2419.774050474167, "timesteps_total": 3549507, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea0f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434da7b8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 93, "policy_reward_mean": {}, "timesteps_this_iter": 37869, "episode_reward_min": 470.24530430313047, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.4373574353059, "outflow_rate_min": 483.06079437937797, "outflow_rate_max": 1359.569261938062, "cost1_mean": 281.1660596093487, "system_level_velocity_mean": 11.219837242740537, "system_level_velocity_max": 18.075338742926427, "cost2_min": -159.08349631086688, "cost2_max": -28.443428526197444, "cost2_mean": -130.18855254300468, "outflow_rate_mean": 1119.161647096641, "system_level_velocity_min": 9.272412325746268, "cost1_min": 33.005473483583124}, "episode_reward_max": 682.4784025539008, "episode_reward_mean": 575.7363789511335, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3586463, "pid": 10559, "time_since_restore": 2445.2196927070618, "episodes_total": 1678, "iterations_since_restore": 94, "episode_len_mean": 693.49, "time_this_iter_s": 25.445642232894897, "date": "2019-05-07_18-31-25", "timestamp": 1557253885, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3586463, "update_time_ms": 7.666, "load_time_ms": 6.949, "default": {"vf_explained_var": 0.8912514448165894, "kl": 0.014779116958379745, "policy_loss": -0.006686366628855467, "cur_kl_coeff": 0.14238281548023224, "total_loss": 12.392510414123535, "entropy": 1.3349391222000122, "vf_loss": 12.39709186553955, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16509.736, "num_steps_trained": 3586463, "grad_time_ms": 8950.873}, "episodes_this_iter": 22, "time_total_s": 2445.2196927070618, "timesteps_total": 3586463, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ecef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ec668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ec320>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 94, "policy_reward_mean": {}, "timesteps_this_iter": 36956, "episode_reward_min": 57.58200412864497, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 367.4373574353059, "outflow_rate_min": 483.06079437937797, "outflow_rate_max": 1363.6188815184814, "cost1_mean": 283.02973798690334, "system_level_velocity_mean": 11.282647647067863, "system_level_velocity_max": 18.075338742926427, "cost2_min": -159.08349631086688, "cost2_max": -28.443428526197444, "cost2_mean": -130.04241822421653, "outflow_rate_mean": 1125.984605110627, "system_level_velocity_min": 9.038442662077152, "cost1_min": 33.005473483583124}, "episode_reward_max": 682.4784025539008, "episode_reward_mean": 576.9541155564125, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3623143, "pid": 10559, "time_since_restore": 2470.0418288707733, "episodes_total": 1698, "iterations_since_restore": 95, "episode_len_mean": 693.49, "time_this_iter_s": 24.822136163711548, "date": "2019-05-07_18-31-50", "timestamp": 1557253910, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3623143, "update_time_ms": 7.35, "load_time_ms": 6.999, "default": {"vf_explained_var": 0.9188371300697327, "kl": 0.014891562983393669, "policy_loss": -0.007008041720837355, "cur_kl_coeff": 0.14238281548023224, "total_loss": 10.514555931091309, "entropy": 1.3335646390914917, "vf_loss": 10.519444465637207, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16393.507, "num_steps_trained": 3623143, "grad_time_ms": 8994.569}, "episodes_this_iter": 20, "time_total_s": 2470.0418288707733, "timesteps_total": 3623143, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ecbe0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434de4e0>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 95, "policy_reward_mean": {}, "timesteps_this_iter": 36680, "episode_reward_min": 57.58200412864497, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 390.46946214431796, "outflow_rate_min": 483.06079437937797, "outflow_rate_max": 1363.6188815184814, "cost1_mean": 286.93223849136854, "system_level_velocity_mean": 11.415339161612184, "system_level_velocity_max": 18.075338742926427, "cost2_min": -159.08349631086688, "cost2_max": -28.443428526197444, "cost2_mean": -129.73632571456426, "outflow_rate_mean": 1133.0005038319055, "system_level_velocity_min": 9.038442662077152, "cost1_min": 33.005473483583124}, "episode_reward_max": 691.417172059212, "episode_reward_mean": 576.5257994148673, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3659596, "pid": 10559, "time_since_restore": 2494.966454267502, "episodes_total": 1718, "iterations_since_restore": 96, "episode_len_mean": 693.49, "time_this_iter_s": 24.924625396728516, "date": "2019-05-07_18-32-15", "timestamp": 1557253935, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3659596, "update_time_ms": 7.221, "load_time_ms": 7.258, "default": {"vf_explained_var": 0.8957350850105286, "kl": 0.02995145507156849, "policy_loss": -0.0033306232653558254, "cur_kl_coeff": 0.14238283038139343, "total_loss": 12.577831268310547, "entropy": 1.3243271112442017, "vf_loss": 12.576897621154785, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16260.91, "num_steps_trained": 3659596, "grad_time_ms": 9041.509}, "episodes_this_iter": 20, "time_total_s": 2494.966454267502, "timesteps_total": 3659596, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434edcf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ed198>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 96, "policy_reward_mean": {}, "timesteps_this_iter": 36453, "episode_reward_min": 57.58200412864497, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 404.950190817921, "outflow_rate_min": 483.06079437937797, "outflow_rate_max": 1447.1065394605396, "cost1_mean": 293.23283708496604, "system_level_velocity_mean": 11.63235769666929, "system_level_velocity_max": 18.075338742926427, "cost2_min": -159.08349631086688, "cost2_max": -28.443428526197444, "cost2_mean": -130.2943264309748, "outflow_rate_mean": 1149.0377874482892, "system_level_velocity_min": 9.038442662077152, "cost1_min": 33.005473483583124}, "episode_reward_max": 693.9169495541366, "episode_reward_mean": 586.0842122274788, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3696775, "pid": 10559, "time_since_restore": 2519.580373764038, "episodes_total": 1732, "iterations_since_restore": 97, "episode_len_mean": 693.49, "time_this_iter_s": 24.613919496536255, "date": "2019-05-07_18-32-40", "timestamp": 1557253960, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3696775, "update_time_ms": 6.958, "load_time_ms": 7.233, "default": {"vf_explained_var": 0.9145954847335815, "kl": 0.01268773153424263, "policy_loss": -0.006467105355113745, "cur_kl_coeff": 0.21357418596744537, "total_loss": 9.261748313903809, "entropy": 1.3179643154144287, "vf_loss": 9.26550579071045, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 16005.805, "num_steps_trained": 3696775, "grad_time_ms": 9193.265}, "episodes_this_iter": 14, "time_total_s": 2519.580373764038, "timesteps_total": 3696775, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ea860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eaba8>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 97, "policy_reward_mean": {}, "timesteps_this_iter": 37179, "episode_reward_min": 57.58200412864497, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 404.950190817921, "outflow_rate_min": 483.06079437937797, "outflow_rate_max": 1447.1065394605396, "cost1_mean": 293.50251573841336, "system_level_velocity_mean": 11.630613537667541, "system_level_velocity_max": 18.075338742926427, "cost2_min": -155.03995496450113, "cost2_max": -28.443428526197444, "cost2_mean": -129.67677750517157, "outflow_rate_mean": 1148.8746607669707, "system_level_velocity_min": 8.742379480507566, "cost1_min": 33.005473483583124}, "episode_reward_max": 693.9169495541366, "episode_reward_mean": 585.8741253351815, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3733788, "pid": 10559, "time_since_restore": 2544.845471382141, "episodes_total": 1751, "iterations_since_restore": 98, "episode_len_mean": 693.49, "time_this_iter_s": 25.265097618103027, "date": "2019-05-07_18-33-05", "timestamp": 1557253985, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3733788, "update_time_ms": 7.013, "load_time_ms": 7.038, "default": {"vf_explained_var": 0.8936355710029602, "kl": 0.011828054673969746, "policy_loss": -0.00701673049479723, "cur_kl_coeff": 0.21357420086860657, "total_loss": 11.77380084991455, "entropy": 1.3405613899230957, "vf_loss": 11.778291702270508, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 15821.963, "num_steps_trained": 3733788, "grad_time_ms": 9315.796}, "episodes_this_iter": 19, "time_total_s": 2544.845471382141, "timesteps_total": 3733788, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434eccc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ecac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ecc18>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 98, "policy_reward_mean": {}, "timesteps_this_iter": 37013, "episode_reward_min": 57.58200412864497, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 404.950190817921, "outflow_rate_min": 442.21419545390603, "outflow_rate_max": 1447.1065394605396, "cost1_mean": 293.83945466806904, "system_level_velocity_mean": 11.654581011610958, "system_level_velocity_max": 18.814798208688337, "cost2_min": -149.98137791778385, "cost2_max": -20.270699215276032, "cost2_mean": -129.65143115198578, "outflow_rate_mean": 1150.8983434410525, "system_level_velocity_min": 8.742379480507566, "cost1_min": 23.077483880321772}, "episode_reward_max": 693.9169495541366, "episode_reward_mean": 586.2619008610353, "done": false, "node_ip": "10.138.0.2", "timesteps_since_restore": 3771832, "pid": 10559, "time_since_restore": 2571.8672342300415, "episodes_total": 1770, "iterations_since_restore": 99, "episode_len_mean": 693.35, "time_this_iter_s": 27.02176284790039, "date": "2019-05-07_18-33-32", "timestamp": 1557254012, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3771832, "update_time_ms": 7.263, "load_time_ms": 6.864, "default": {"vf_explained_var": 0.8945102691650391, "kl": 0.013638656586408615, "policy_loss": -0.008990558795630932, "cur_kl_coeff": 0.21357418596744537, "total_loss": 11.63681411743164, "entropy": 1.3524210453033447, "vf_loss": 11.642890930175781, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 15818.496, "num_steps_trained": 3771832, "grad_time_ms": 9333.876}, "episodes_this_iter": 19, "time_total_s": 2571.8672342300415, "timesteps_total": 3771832, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ecb38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ec940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434ec860>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 99, "policy_reward_mean": {}, "timesteps_this_iter": 38044, "episode_reward_min": 42.179384454184444, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
{"custom_metrics": {"cost1_max": 404.950190817921, "outflow_rate_min": 442.21419545390603, "outflow_rate_max": 1447.1065394605396, "cost1_mean": 293.27344246019686, "system_level_velocity_mean": 11.636179010240761, "system_level_velocity_max": 18.814798208688337, "cost2_min": -147.35158214700945, "cost2_max": -20.270699215276032, "cost2_mean": -128.89016549837052, "outflow_rate_mean": 1147.7120004400535, "system_level_velocity_min": 8.742379480507566, "cost1_min": 23.077483880321772}, "episode_reward_max": 719.8734766476784, "episode_reward_mean": 584.2634887085437, "done": true, "node_ip": "10.138.0.2", "timesteps_since_restore": 3809001, "pid": 10559, "time_since_restore": 2600.9625906944275, "episodes_total": 1789, "iterations_since_restore": 100, "episode_len_mean": 693.35, "time_this_iter_s": 29.095356464385986, "date": "2019-05-07_18-34-01", "timestamp": 1557254041, "num_metric_batches_dropped": 0, "info": {"num_steps_sampled": 3809001, "update_time_ms": 7.214, "load_time_ms": 6.728, "default": {"vf_explained_var": 0.8996685147285461, "kl": 0.011927890591323376, "policy_loss": -0.007499831262975931, "cur_kl_coeff": 0.21357418596744537, "total_loss": 11.525933265686035, "entropy": 1.360066294670105, "vf_loss": 11.53088665008545, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 15570.223, "num_steps_trained": 3809001, "grad_time_ms": 9908.746}, "episodes_this_iter": 19, "time_total_s": 2600.9625906944275, "timesteps_total": 3809001, "config": {"sample_batch_size": 200, "num_cpus_per_worker": 1, "horizon": 1500, "gamma": 0.99, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "optimizer": {}, "num_cpus_for_driver": 1, "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "clip_rewards": null, "kl_coeff": 0.2, "lr_schedule": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f59434fa710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f59434fab70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f59434faa90>", "on_sample_end": null, "on_train_result": null}, "model": {"free_log_std": false, "conv_activation": "relu", "lstm_cell_size": 256, "zero_mean": true, "custom_model": null, "squash_to_range": false, "conv_filters": null, "use_lstm": false, "fcnet_hiddens": [100, 50, 25], "framestack": true, "channel_major": false, "grayscale": false, "custom_preprocessor": null, "custom_options": {}, "fcnet_activation": "tanh", "max_seq_len": 20, "lstm_use_prev_action_reward": false, "dim": 84}, "observation_filter": "NoFilter", "num_gpus_per_worker": 0, "vf_loss_coeff": 1.0, "clip_actions": false, "num_sgd_iter": 10, "compress_observations": false, "monitor": false, "collect_metrics_timeout": 180, "train_batch_size": 30000, "num_gpus": 0, "input_evaluation": null, "simple_optimizer": false, "output_max_file_size": 67108864, "tf_session_args": {"allow_soft_placement": true, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "custom_resources_per_worker": {}, "straggler_mitigation": false, "sample_async": false, "lambda": 0.97, "synchronize_filters": true, "num_workers": 20, "vf_clip_param": 1000000.0, "batch_mode": "truncate_episodes", "num_envs_per_worker": 1, "use_gae": true, "clip_param": 0.3, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:10.0", "vf_share_layers": false, "log_level": "INFO", "output": null, "entropy_coeff": 0.0, "kl_target": 0.01, "input": "sampler", "multiagent": {"policies_to_train": null, "policy_mapping_fn": null, "policy_graphs": {}}, "lr": 0.0005, "preprocessor_pref": "deepmind"}, "training_iteration": 100, "policy_reward_mean": {}, "timesteps_this_iter": 37169, "episode_reward_min": 42.179384454184444, "hostname": "flow-main", "experiment_id": "2aeccc7f144a474085422d33f83d66be"}
